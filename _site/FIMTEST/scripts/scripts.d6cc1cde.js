function Iterator(a){this.cursor=0,this.length=a.length,this.array=a}function BigInteger(a,b,c){null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function nbi(){return new BigInteger(null)}function am1(a,b,c,d,e,f){for(;--f>=0;){var g=b*this[a++]+c[d]+e;e=Math.floor(g/67108864),c[d++]=67108863&g}return e}function am2(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this[a],j=this[a++]>>15,k=h*i+j*g;i=g*i+((32767&k)<<15)+c[d]+(1073741823&e),e=(i>>>30)+(k>>>15)+h*j+(e>>>30),c[d++]=1073741823&i}return e}function am3(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this[a],j=this[a++]>>14,k=h*i+j*g;i=g*i+((16383&k)<<14)+c[d]+e,e=(i>>28)+(k>>14)+h*j,c[d++]=268435455&i}return e}function int2char(a){return BI_RM.charAt(a)}function intAt(a,b){var c=BI_RC[a.charCodeAt(b)];return null==c?-1:c}function bnpCopyTo(a){for(var b=this.t-1;b>=0;--b)a[b]=this[b];a.t=this.t,a.s=this.s}function bnpFromInt(a){this.t=1,this.s=0>a?-1:0,a>0?this[0]=a:-1>a?this[0]=a+this.DV:this.t=0}function nbv(a){var b=nbi();return b.fromInt(a),b}function bnpFromString(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else{if(4!=b)return void this.fromRadix(a,b);c=2}this.t=0,this.s=0;for(var d=a.length,e=!1,f=0;--d>=0;){var g=8==c?255&a[d]:intAt(a,d);0>g?"-"==a.charAt(d)&&(e=!0):(e=!1,0==f?this[this.t++]=g:f+c>this.DB?(this[this.t-1]|=(g&(1<<this.DB-f)-1)<<f,this[this.t++]=g>>this.DB-f):this[this.t-1]|=g<<f,f+=c,f>=this.DB&&(f-=this.DB))}8==c&&0!=(128&a[0])&&(this.s=-1,f>0&&(this[this.t-1]|=(1<<this.DB-f)-1<<f)),this.clamp(),e&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var a=this.s&this.DM;this.t>0&&this[this.t-1]==a;)--this.t}function bnToString(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var c,d=(1<<b)-1,e=!1,f="",g=this.t,h=this.DB-g*this.DB%b;if(g-->0)for(h<this.DB&&(c=this[g]>>h)>0&&(e=!0,f=int2char(c));g>=0;)b>h?(c=(this[g]&(1<<h)-1)<<b-h,c|=this[--g]>>(h+=this.DB-b)):(c=this[g]>>(h-=b)&d,0>=h&&(h+=this.DB,--g)),c>0&&(e=!0),e&&(f+=int2char(c));return e?f:"0"}function bnNegate(){var a=nbi();return BigInteger.ZERO.subTo(this,a),a}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(b=c-a.t,0!=b)return this.s<0?-b:b;for(;--c>=0;)if(0!=(b=this[c]-a[c]))return b;return 0}function nbits(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(a,b){var c;for(c=this.t-1;c>=0;--c)b[c+a]=this[c];for(c=a-1;c>=0;--c)b[c]=0;b.t=this.t+a,b.s=this.s}function bnpDRShiftTo(a,b){for(var c=a;c<this.t;++c)b[c-a]=this[c];b.t=Math.max(this.t-a,0),b.s=this.s}function bnpLShiftTo(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b[c+g+1]=this[c]>>e|h,h=(this[c]&f)<<d;for(c=g-1;c>=0;--c)b[c]=0;b[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()}function bnpRShiftTo(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)return void(b.t=0);var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b[0]=this[c]>>d;for(var g=c+1;g<this.t;++g)b[g-c-1]|=(this[g]&f)<<e,b[g-c]=this[g]>>d;d>0&&(b[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}function bnpSubTo(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]-a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a[c],b[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0,-1>d?b[c++]=this.DV+d:d>0&&(b[c++]=d),b.t=c,b.clamp()}function bnpMultiplyTo(a,b){var c=this.abs(),d=a.abs(),e=c.t;for(b.t=e+d.t;--e>=0;)b[e]=0;for(e=0;e<d.t;++e)b[e+c.t]=c.am(0,d[e],b,e,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&BigInteger.ZERO.subTo(b,b)}function bnpSquareTo(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b[c],a,2*c,0,1);(a[c+b.t]+=b.am(c+1,2*b[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a[c+b.t]-=b.DV,a[c+b.t+1]=1)}a.t>0&&(a[a.t-1]+=b.am(c,b[c],a,2*c,0,1)),a.s=0,a.clamp()}function bnpDivRemTo(a,b,c){var d=a.abs();if(!(d.t<=0)){var e=this.abs();if(e.t<d.t)return null!=b&&b.fromInt(0),void(null!=c&&this.copyTo(c));null==c&&(c=nbi());var f=nbi(),g=this.s,h=a.s,i=this.DB-nbits(d[d.t-1]);i>0?(d.lShiftTo(i,f),e.lShiftTo(i,c)):(d.copyTo(f),e.copyTo(c));var j=f.t,k=f[j-1];if(0!=k){var l=k*(1<<this.F1)+(j>1?f[j-2]>>this.F2:0),m=this.FV/l,n=(1<<this.F1)/l,o=1<<this.F2,p=c.t,q=p-j,r=null==b?nbi():b;for(f.dlShiftTo(q,r),c.compareTo(r)>=0&&(c[c.t++]=1,c.subTo(r,c)),BigInteger.ONE.dlShiftTo(j,r),r.subTo(f,f);f.t<j;)f[f.t++]=0;for(;--q>=0;){var s=c[--p]==k?this.DM:Math.floor(c[p]*m+(c[p-1]+o)*n);if((c[p]+=f.am(0,s,c,q,0,j))<s)for(f.dlShiftTo(q,r),c.subTo(r,c);c[p]<--s;)c.subTo(r,c)}null!=b&&(c.drShiftTo(j,b),g!=h&&BigInteger.ZERO.subTo(b,b)),c.t=j,c.clamp(),i>0&&c.rShiftTo(i,c),0>g&&BigInteger.ZERO.subTo(c,c)}}}function bnMod(a){var b=nbi();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(BigInteger.ZERO)>0&&a.subTo(b,b),b}function Classic(a){this.m=a}function cConvert(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function cRevert(a){return a}function cReduce(a){a.divRemTo(this.m,null,a)}function cMulTo(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function cSqrTo(a,b){a.squareTo(b),this.reduce(b)}function bnpInvDigit(){if(this.t<1)return 0;var a=this[0];if(0==(1&a))return 0;var b=3&a;return b=b*(2-(15&a)*b)&15,b=b*(2-(255&a)*b)&255,b=b*(2-((65535&a)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b}function Montgomery(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function montConvert(a){var b=nbi();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(BigInteger.ZERO)>0&&this.m.subTo(b,b),b}function montRevert(a){var b=nbi();return a.copyTo(b),this.reduce(b),b}function montReduce(a){for(;a.t<=this.mt2;)a[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a[b],d=c*this.mpl+((c*this.mph+(a[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(c=b+this.m.t,a[c]+=this.m.am(0,d,a,b,0,this.m.t);a[c]>=a.DV;)a[c]-=a.DV,a[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function montSqrTo(a,b){a.squareTo(b),this.reduce(b)}function montMulTo(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(a,b){if(a>4294967295||1>a)return BigInteger.ONE;var c=nbi(),d=nbi(),e=b.convert(this),f=nbits(a)-1;for(e.copyTo(c);--f>=0;)if(b.sqrTo(c,d),(a&1<<f)>0)b.mulTo(d,e,c);else{var g=c;c=d,d=g}return b.revert(c)}function bnModPowInt(a,b){var c;return c=256>a||b.isEven()?new Classic(b):new Montgomery(b),this.exp(a,c)}function bnClone(){var a=nbi();return this.copyTo(a),a}function bnIntValue(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return 0==this.t?this.s:this[0]<<24>>24}function bnShortValue(){return 0==this.t?this.s:this[0]<<16>>16}function bnpChunkSize(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function bnSigNum(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function bnpToRadix(a){if(null==a&&(a=10),0==this.signum()||2>a||a>36)return"0";var b=this.chunkSize(a),c=Math.pow(a,b),d=nbv(c),e=nbi(),f=nbi(),g="";for(this.divRemTo(d,e,f);e.signum()>0;)g=(c+f.intValue()).toString(a).substr(1)+g,e.divRemTo(d,e,f);return f.intValue().toString(a)+g}function bnpFromRadix(a,b){this.fromInt(0),null==b&&(b=10);for(var c=this.chunkSize(b),d=Math.pow(b,c),e=!1,f=0,g=0,h=0;h<a.length;++h){var i=intAt(a,h);0>i?"-"==a.charAt(h)&&0==this.signum()&&(e=!0):(g=b*g+i,++f>=c&&(this.dMultiply(d),this.dAddOffset(g,0),f=0,g=0))}f>0&&(this.dMultiply(Math.pow(b,f)),this.dAddOffset(g,0)),e&&BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(a,b,c){if("number"==typeof b)if(2>a)this.fromInt(1);else for(this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(BigInteger.ONE.shiftLeft(a-1),this);else{var d=new Array,e=7&a;d.length=(a>>3)+1,b.nextBytes(d),e>0?d[0]&=(1<<e)-1:d[0]=0,this.fromString(d,256)}}function bnToByteArray(){var a=this.t,b=new Array;b[0]=this.s;var c,d=this.DB-a*this.DB%8,e=0;if(a-->0)for(d<this.DB&&(c=this[a]>>d)!=(this.s&this.DM)>>d&&(b[e++]=c|this.s<<this.DB-d);a>=0;)8>d?(c=(this[a]&(1<<d)-1)<<8-d,c|=this[--a]>>(d+=this.DB-8)):(c=this[a]>>(d-=8)&255,0>=d&&(d+=this.DB,--a)),0!=(128&c)&&(c|=-256),0==e&&(128&this.s)!=(128&c)&&++e,(e>0||c!=this.s)&&(b[e++]=c);return b}function bnEquals(a){return 0==this.compareTo(a)}function bnMin(a){return this.compareTo(a)<0?this:a}function bnMax(a){return this.compareTo(a)>0?this:a}function bnpBitwiseTo(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;f>d;++d)c[d]=b(this[d],a[d]);if(a.t<this.t){for(e=a.s&this.DM,d=f;d<this.t;++d)c[d]=b(this[d],e);c.t=this.t}else{for(e=this.s&this.DM,d=f;d<a.t;++d)c[d]=b(e,a[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()}function op_and(a,b){return a&b}function bnAnd(a){var b=nbi();return this.bitwiseTo(a,op_and,b),b}function op_or(a,b){return a|b}function bnOr(a){var b=nbi();return this.bitwiseTo(a,op_or,b),b}function op_xor(a,b){return a^b}function bnXor(a){var b=nbi();return this.bitwiseTo(a,op_xor,b),b}function op_andnot(a,b){return a&~b}function bnAndNot(a){var b=nbi();return this.bitwiseTo(a,op_andnot,b),b}function bnNot(){for(var a=nbi(),b=0;b<this.t;++b)a[b]=this.DM&~this[b];return a.t=this.t,a.s=~this.s,a}function bnShiftLeft(a){var b=nbi();return 0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b),b}function bnShiftRight(a){var b=nbi();return 0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b),b}function lbit(a){if(0==a)return-1;var b=0;return 0==(65535&a)&&(a>>=16,b+=16),0==(255&a)&&(a>>=8,b+=8),0==(15&a)&&(a>>=4,b+=4),0==(3&a)&&(a>>=2,b+=2),0==(1&a)&&++b,b}function bnGetLowestSetBit(){for(var a=0;a<this.t;++a)if(0!=this[a])return a*this.DB+lbit(this[a]);return this.s<0?this.t*this.DB:-1}function cbit(a){for(var b=0;0!=a;)a&=a-1,++b;return b}function bnBitCount(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c)a+=cbit(this[c]^b);return a}function bnTestBit(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this[b]&1<<a%this.DB)}function bnpChangeBit(a,b){var c=BigInteger.ONE.shiftLeft(a);return this.bitwiseTo(c,b,c),c}function bnSetBit(a){return this.changeBit(a,op_or)}function bnClearBit(a){return this.changeBit(a,op_andnot)}function bnFlipBit(a){return this.changeBit(a,op_xor)}function bnpAddTo(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this[c]+a[c],b[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this[c],b[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a[c],b[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=0>d?-1:0,d>0?b[c++]=d:-1>d&&(b[c++]=this.DV+d),b.t=c,b.clamp()}function bnAdd(a){var b=nbi();return this.addTo(a,b),b}function bnSubtract(a){var b=nbi();return this.subTo(a,b),b}function bnMultiply(a){var b=nbi();return this.multiplyTo(a,b),b}function bnSquare(){var a=nbi();return this.squareTo(a),a}function bnDivide(a){var b=nbi();return this.divRemTo(a,b,null),b}function bnRemainder(a){var b=nbi();return this.divRemTo(a,null,b),b}function bnDivideAndRemainder(a){var b=nbi(),c=nbi();return this.divRemTo(a,b,c),new Array(b,c)}function bnpDMultiply(a){this[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(a,b){if(0!=a){for(;this.t<=b;)this[this.t++]=0;for(this[b]+=a;this[b]>=this.DV;)this[b]-=this.DV,++b>=this.t&&(this[this.t++]=0),++this[b]}}function NullExp(){}function nNop(a){return a}function nMulTo(a,b,c){a.multiplyTo(b,c)}function nSqrTo(a,b){a.squareTo(b)}function bnPow(a){return this.exp(a,new NullExp)}function bnpMultiplyLowerTo(a,b,c){var d=Math.min(this.t+a.t,b);for(c.s=0,c.t=d;d>0;)c[--d]=0;var e;for(e=c.t-this.t;e>d;++d)c[d+this.t]=this.am(0,a[d],c,d,0,this.t);for(e=Math.min(a.t,b);e>d;++d)this.am(0,a[d],c,d,0,b-d);c.clamp()}function bnpMultiplyUpperTo(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;--d>=0;)c[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c[this.t+d-b]=this.am(b-d,a[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)}function Barrett(a){this.r2=nbi(),this.q3=nbi(),BigInteger.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function barrettConvert(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=nbi();return a.copyTo(b),this.reduce(b),b}function barrettRevert(a){return a}function barrettReduce(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)}function barrettSqrTo(a,b){a.squareTo(b),this.reduce(b)}function barrettMulTo(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function bnModPow(a,b){var c,d,e=a.bitLength(),f=nbv(1);if(0>=e)return f;c=18>e?1:48>e?3:144>e?4:768>e?5:6,d=8>e?new Classic(b):b.isEven()?new Barrett(b):new Montgomery(b);var g=new Array,h=3,i=c-1,j=(1<<c)-1;if(g[1]=d.convert(this),c>1){var k=nbi();for(d.sqrTo(g[1],k);j>=h;)g[h]=nbi(),d.mulTo(k,g[h-2],g[h]),h+=2}var l,m,n=a.t-1,o=!0,p=nbi();for(e=nbits(a[n])-1;n>=0;){for(e>=i?l=a[n]>>e-i&j:(l=(a[n]&(1<<e+1)-1)<<i-e,n>0&&(l|=a[n-1]>>this.DB+e-i)),h=c;0==(1&l);)l>>=1,--h;if((e-=h)<0&&(e+=this.DB,--n),o)g[l].copyTo(f),o=!1;else{for(;h>1;)d.sqrTo(f,p),d.sqrTo(p,f),h-=2;h>0?d.sqrTo(f,p):(m=f,f=p,p=m),d.mulTo(p,g[l],f)}for(;n>=0&&0==(a[n]&1<<e);)d.sqrTo(f,p),m=f,f=p,p=m,--e<0&&(e=this.DB-1,--n)}return d.revert(f)}function bnGCD(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(0>f)return b;for(f>e&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));b.signum()>0;)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c}function bnpModInt(a){if(0>=a)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(0==b)c=this[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this[d])%a;return c}function bnModInverse(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return BigInteger.ZERO;for(var c=a.clone(),d=this.clone(),e=nbv(1),f=nbv(0),g=nbv(0),h=nbv(1);0!=c.signum();){for(;c.isEven();)c.rShiftTo(1,c),b?(e.isEven()&&f.isEven()||(e.addTo(this,e),f.subTo(a,f)),e.rShiftTo(1,e)):f.isEven()||f.subTo(a,f),f.rShiftTo(1,f);for(;d.isEven();)d.rShiftTo(1,d),b?(g.isEven()&&h.isEven()||(g.addTo(this,g),h.subTo(a,h)),g.rShiftTo(1,g)):h.isEven()||h.subTo(a,h),h.rShiftTo(1,h);c.compareTo(d)>=0?(c.subTo(d,c),b&&e.subTo(g,e),f.subTo(h,f)):(d.subTo(c,d),b&&g.subTo(e,g),h.subTo(f,h))}return 0!=d.compareTo(BigInteger.ONE)?BigInteger.ZERO:h.compareTo(a)>=0?h.subtract(a):h.signum()<0?(h.addTo(a,h),h.signum()<0?h.add(a):h):h}function bnIsProbablePrime(a){var b,c=this.abs();if(1==c.t&&c[0]<=lowprimes[lowprimes.length-1]){for(b=0;b<lowprimes.length;++b)if(c[0]==lowprimes[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<lowprimes.length;){for(var d=lowprimes[b],e=b+1;e<lowprimes.length&&lplim>d;)d*=lowprimes[e++];for(d=c.modInt(d);e>b;)if(d%lowprimes[b++]==0)return!1}return c.millerRabin(a)}function bnpMillerRabin(a){var b=this.subtract(BigInteger.ONE),c=b.getLowestSetBit();if(0>=c)return!1;var d=b.shiftRight(c);a=a+1>>1,a>lowprimes.length&&(a=lowprimes.length);for(var e=nbi(),f=0;a>f;++f){e.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var g=e.modPow(d,this);if(0!=g.compareTo(BigInteger.ONE)&&0!=g.compareTo(b)){for(var h=1;h++<c&&0!=g.compareTo(b);)if(g=g.modPowInt(2,this),0==g.compareTo(BigInteger.ONE))return!1;if(0!=g.compareTo(b))return!1}}return!0}function NxtAddress(a){function b(a){return m[31-n[a]]}function c(a,b){if(0==a||0==b)return 0;var c=(n[a]+n[b])%31;return m[c]}function d(a,b){for(var d=0,e=0;b>e;e++)d^=c(a[e],l[b-e]);return d}function e(a){for(var b=[],d=1;31>=d;d++){for(var e=0,f=0;5>f;f++)e^=c(m[f*d%31],a[f]);if(0==e){var g=31-d;if(g>12&&27>g)return[];b[b.length]=g}}return b}function f(){for(var a=0,f=[0,0,0,0,0],g=[],h=0,i=[1,0,0,0,0],j=0;4>j;j++){var n=d(i,j+1);if(0!=n){h=0;for(var o=0;5>o;o++)g[o]=i[o]^c(n,f[o]),g[o]&&(h=o);if(j>=2*a)for(a=j+1-a,o=0;5>o;o++)f[o]=c(i[o],b(n));i=g.slice()}f.unshift(0)}var p=e(i),q=p.length;if(1>q||q>2)return!1;if(h!=q)return!1;for(var r=[0,0,0,0,0],o=0;4>o;o++){for(var g=0,s=0;o>s;s++)g^=c(l[o+1-s],i[s]);r[o]=g}for(j=0;q>j;j++){var g=0,t=p[j],u=31-t;for(o=0;4>o;o++)g^=c(r[o],m[u*o%31]);if(g){var v=c(i[1],1)^c(i[3],m[2*u%31]);if(0==v)return!1;t>12&&(t-=14),k[t]^=c(g,b(v))}}return!0}function g(){for(var a=[0,0,0,0],b=12;b>=0;b--){var d=k[b]^a[3];a[3]=a[2]^c(30,d),a[2]=a[1]^c(6,d),a[1]=a[0]^c(9,d),a[0]=c(17,d)}k[13]=a[0],k[14]=a[1],k[15]=a[2],k[16]=a[3]}function h(){for(var a=0;17>a;a++)k[a]=1}function i(a,b,c){"undefined"==typeof b&&(b=17),"undefined"==typeof c&&(c=-1);for(var d=0,e=0;b>d;d++)d!=c&&(k[o[e++]]=a[d])}function j(a){var b=[],c=[],d=0,e=a.length;if(20==e&&"1"!=a.charAt(0))return!1;for(var f=0;e>f;f++)b[f]=a.charCodeAt(f)-"0".charCodeAt(0);do{var h=0,i=0;for(f=0;e>f;f++)h=10*h+b[f],h>=32?(b[i++]=h>>5,h&=31):i>0&&(b[i++]=0);e=i,c[d++]=h}while(i);for(f=0;13>f;f++)k[f]=--d>=0?c[f]:0;return g(),!0}var k=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=[0,0,0,0,0],m=[1,2,4,8,16,5,10,20,13,26,17,7,14,28,29,31,27,19,3,6,12,24,21,15,30,25,23,11,22,9,18,1],n=[0,0,1,18,2,5,19,11,3,29,6,27,20,8,12,23,4,10,30,17,7,22,28,26,21,25,9,16,13,14,24,15],o=[3,2,1,0,7,6,5,4,13,14,15,16,12,8,9,10,11],p="23456789ABCDEFGHJKLMNPQRSTUVWXYZ";this.guess=[],this.add_guess=function(){var a=this.toString(),b=this.guess.length;if(!(b>2)){for(var c=0;b>c;c++)if(this.guess[c]==a)return;this.guess[b]=a}},this.ok=function(){for(var a=0,b=1;5>b;b++){for(var d=0,e=0;31>d;d++)if(!(d>12&&27>d)){var f=d;d>26&&(f-=14),e^=c(k[f],m[b*d%31])}a|=e,l[b]=e}return 0==a},this.toString=function(){for(var b=a+"-",c=0;17>c;c++)b+=p[k[o[c]]],3==(3&c)&&13>c&&(b+="-");return b},this.account_id=function(){for(var a="",b=[],c=13,d=0;13>d;d++)b[d]=k[12-d];do{var e=0,f=0;for(d=0;c>d;d++)e=32*e+b[d],e>=10?(b[f++]=Math.floor(e/10),e%=10):f>0&&(b[f++]=0);c=f,a+=String.fromCharCode(e+"0".charCodeAt(0))}while(f);return a.split("").reverse().join("")},this.set=function(b,c){"undefined"==typeof c&&(c=!0);var d=0;if(this.guess=[],h(),b=String(b),b=b.replace(/(^\s+)|(\s+$)/g,"").toUpperCase(),0==b.indexOf(a+"-")&&(b=b.substr(4)),b.match(/^\d{1,20}$/g)){if(c)return j(b)}else for(var e=[],g=0;g<b.length;g++){var k=p.indexOf(b[g]);if(k>=0&&(e[d++]=k,d>18))return!1}if(16==d)for(var g=16;g>=0;g--){for(var l=0;32>l;l++)e[g]=l,i(e),this.ok()&&this.add_guess();if(g>0){var m=e[g-1];e[g-1]=e[g],e[g]=m}}if(18==d)for(var g=0;18>g;g++)i(e,18,g),this.ok()&&this.add_guess();if(17==d){if(i(e),this.ok())return!0;f()&&this.ok()&&this.add_guess()}return h(),!1},this.format_guess=function(a,b){var c="",d=[];a=a.toUpperCase(),b=b.toUpperCase();for(var e=0;e<a.length;){for(var f=0,g=1;g<a.length;g++){var h=b.indexOf(a.substr(e,g));if(-1==h)break;Math.abs(h-e)<3&&(f=g)}f?(d[d.length]={s:e,e:e+f},e+=f):e++}if(0==d.length)return a;for(var e=0,g=0;e<a.length;e++){if(e>=d[g].e)for(var i;g<d.length-1&&(i=d[g++].s,!(e<d[g].e||d[g].s>=i)););c+=e>=d[g].s&&e<d[g].e?a.charAt(e):'<b style="color:red">'+a.charAt(e)+"</b>"}return c}}function string_to_array(a){for(var b=a.length,c=new Array(b),d=0;b>d;d++)c[d]=a.charCodeAt(d);return c}function array_to_hex_string(a){for(var b="",c=0;c<a.length;c++)b+=SHA256_hexchars[a[c]>>4]+SHA256_hexchars[15&a[c]];return b}function SHA256_init(){SHA256_H=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),SHA256_buf=new Array,SHA256_len=0}function SHA256_write(a){SHA256_buf=SHA256_buf.concat("string"==typeof a?string_to_array(a):a);for(var b=0;b+64<=SHA256_buf.length;b+=64)SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf.slice(b,b+64));SHA256_buf=SHA256_buf.slice(b),SHA256_len+=a.length}function SHA256_finalize(){if(SHA256_buf[SHA256_buf.length]=128,SHA256_buf.length>56){for(var a=SHA256_buf.length;64>a;a++)SHA256_buf[a]=0;SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf),SHA256_buf.length=0}for(var a=SHA256_buf.length;59>a;a++)SHA256_buf[a]=0;SHA256_buf[59]=SHA256_len>>>29&255,SHA256_buf[60]=SHA256_len>>>21&255,SHA256_buf[61]=SHA256_len>>>13&255,SHA256_buf[62]=SHA256_len>>>5&255,SHA256_buf[63]=SHA256_len<<3&255,SHA256_Hash_Byte_Block(SHA256_H,SHA256_buf);for(var b=new Array(32),a=0;8>a;a++)b[4*a+0]=SHA256_H[a]>>>24,b[4*a+1]=SHA256_H[a]>>16&255,b[4*a+2]=SHA256_H[a]>>8&255,b[4*a+3]=255&SHA256_H[a];return delete SHA256_H,delete SHA256_buf,delete SHA256_len,b}function SHA256_hash(a,b){var c;return SHA256_init(),SHA256_write(a),c=SHA256_finalize(),b?c:array_to_hex_string(c)}function HMAC_SHA256_init(a){HMAC_SHA256_key="string"==typeof a?string_to_array(a):(new Array).concat(a),HMAC_SHA256_key.length>64&&(SHA256_init(),SHA256_write(HMAC_SHA256_key),HMAC_SHA256_key=SHA256_finalize());for(var b=HMAC_SHA256_key.length;64>b;b++)HMAC_SHA256_key[b]=0;for(var b=0;64>b;b++)HMAC_SHA256_key[b]^=54;SHA256_init(),SHA256_write(HMAC_SHA256_key)}function HMAC_SHA256_write(a){SHA256_write(a)}function HMAC_SHA256_finalize(){for(var a=SHA256_finalize(),b=0;64>b;b++)HMAC_SHA256_key[b]^=106;SHA256_init(),SHA256_write(HMAC_SHA256_key),SHA256_write(a);for(var b=0;64>b;b++)HMAC_SHA256_key[b]=0;return delete HMAC_SHA256_key,SHA256_finalize()}function HMAC_SHA256_MAC(a,b){var c;return HMAC_SHA256_init(a),HMAC_SHA256_write(b),c=HMAC_SHA256_finalize(),array_to_hex_string(c)}function SHA256_sigma0(a){return(a>>>7|a<<25)^(a>>>18|a<<14)^a>>>3}function SHA256_sigma1(a){return(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10}function SHA256_Sigma0(a){return(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10)}function SHA256_Sigma1(a){return(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7)}function SHA256_Ch(a,b,c){return c^a&(b^c)}function SHA256_Maj(a,b,c){return a&b^c&(a^b)}function SHA256_Hash_Word_Block(a,b){for(var c=16;64>c;c++)b[c]=SHA256_sigma1(b[c-2])+b[c-7]+SHA256_sigma0(b[c-15])+b[c-16]&4294967295;for(var d=(new Array).concat(a),c=0;64>c;c++){var e=d[7]+SHA256_Sigma1(d[4])+SHA256_Ch(d[4],d[5],d[6])+SHA256_K[c]+b[c],f=SHA256_Sigma0(d[0])+SHA256_Maj(d[0],d[1],d[2]);d.pop(),d.unshift(e+f&4294967295),d[4]=d[4]+e&4294967295}for(var c=0;8>c;c++)a[c]=a[c]+d[c]&4294967295}function SHA256_Hash_Byte_Block(a,b){for(var c=new Array(16),d=0;16>d;d++)c[d]=b[4*d+0]<<24|b[4*d+1]<<16|b[4*d+2]<<8|b[4*d+3];SHA256_Hash_Word_Block(a,c)}function curve25519_sum(a,b,c,d,e,f,g){var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_mulmodp(h,d,e),curve25519_mulmodp(i,c,f),curve25519_addmodp(j,h,i),curve25519_submodp(k,h,i),curve25519_sqrmodp(a,j),curve25519_sqrmodp(h,k),curve25519_mulmodp(b,h,g)}function curve25519_(a,b,c){var d,e,f,g,h,i=new Array(16),j=new Array(16),k=new Array(16),l=new Array(16),m=new Array(16),n=new Int8Array(32),o=new Int8Array(32),p=new Int8Array(64),q=new Int8Array(64);f=b,g=[curve25519_one(),curve25519_zero()],e=[f,curve25519_one()];for(var r,s=255,t=new Array(new Array(16),new Array(16)),u=new Array(new Array(16),new Array(16)),j=new Array(16),k=new Array(16),l=new Array(16),m=new Array(16);s>=0;)r=curve25519_getbit(a,s),0==r?(curve25519_prep(j,k,e[0],e[1]),curve25519_prep(l,m,g[0],g[1]),curve25519_sum(u[0],u[1],j,k,l,m,f),curve25519_dbl(t[0],t[1],l,m)):(curve25519_prep(j,k,g[0],g[1]),curve25519_prep(l,m,e[0],e[1]),curve25519_sum(t[0],t[1],j,k,l,m,f),curve25519_dbl(u[0],u[1],l,m)),g=t,e=u,s--;if(curve25519_invmodp(i,g[1],0),curve25519_mulmodp(j,g[0],i),g[0]=curve25519_cpy16(j),null!=c){i=curve25519_cpy16(g[0]),curve25519_x_to_y2(j,i),curve25519_invmodp(l,e[1],0),curve25519_mulmodp(k,e[0],l),curve25519_addmodp(m,k,i),curve25519_addmodp(k,m,curve25519_486671()),curve25519_submodp(m,i,curve25519_nine()),curve25519_sqrmodp(l,m),curve25519_mulmodp(m,k,l),curve25519_submodp(i,m,j),curve25519_submodp(m,i,curve25519_39420360()),curve25519_mulmodp(j,m,curve25519_r2y()),h=curve25519_convertToByteArray(a),d=curve25519_isNegative(j),0!=d?n=curve25519_cpy32(h):curve25519_mula_small(n,curve25519_order_times_8,0,h,32,-1),o=curve25519_cpy32(curve25519_order),o=curve25519_egcd32(p,q,n,o),n=curve25519_cpy32(o),0!=(128&n[31])&&curve25519_mula_small(n,n,0,curve25519_order,32,1);var v=curve25519_convertToShortArray(n);curve25519_fillShortArray(v,c)}return g[0]}!function(a,b,c){"use strict";function d(a,b){return b=b||Error,function(){var c,d,e=arguments[0],f="["+(a?a+":":"")+e+"] ",g=arguments[1],h=arguments,i=function(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?JSON.stringify(a):a};for(c=f+g.replace(/\{\d+\}/g,function(a){var b,c=+a.slice(1,-1);return c+2<h.length?(b=h[c+2],"function"==typeof b?b.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof b?"undefined":"string"!=typeof b?Q(b):b):a}),c=c+"\nhttp://errors.angularjs.org/1.3.2/"+(a?a+"/":"")+e,d=2;d<arguments.length;d++)c=c+(2==d?"?":"&")+"p"+(d-2)+"="+encodeURIComponent(i(arguments[d]));return new b(c)}}function e(a){if(null==a||z(a))return!1;var b=a.length;return a.nodeType===ie&&b?!0:u(a)||be(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d,g;if(a)if(x(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d,a);else if(be(a)||e(a)){var h="object"!=typeof a;for(d=0,g=a.length;g>d;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);return a}function g(a){return Object.keys(a).sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){return++_d}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){for(var b=a.$$hashKey,c=1,d=arguments.length;d>c;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;h>g;g++){var i=f[g];a[i]=e[i]}}return k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(new(l(function(){},{prototype:a})),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===Yd.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===Yd.call(a)}function z(a){return a&&a.window===a}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===Yd.call(a)}function C(a){return"[object Blob]"===Yd.call(a)}function D(a){return"boolean"==typeof a}function E(a){return a&&x(a.then)}function F(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function G(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function H(a){return Md(a.nodeName||a[0].nodeName)}function I(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),b}function J(a,b,c,d){if(z(a)||A(a))throw Zd("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw Zd("cpi","Can't copy! Source and destination are identical.");if(c=c||[],d=d||[],t(a)){var e=c.indexOf(a);if(-1!==e)return d[e];c.push(a),d.push(b)}var g;if(be(a)){b.length=0;for(var h=0;h<a.length;h++)g=J(a[h],null,c,d),t(a[h])&&(c.push(a[h]),d.push(g)),b.push(g)}else{var i=b.$$hashKey;be(b)?b.length=0:f(b,function(a,c){delete b[c]});for(var j in a)a.hasOwnProperty(j)&&(g=J(a[j],null,c,d),t(a[j])&&(c.push(a[j]),d.push(g)),b[j]=g);k(b,i)}}else if(b=a,a)if(be(a))b=J(a,[],c,d);else if(w(a))b=new Date(a.getTime());else if(y(a))b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex;else if(t(a)){var l=Object.create(Object.getPrototypeOf(a));b=J(a,l,c,d)}return b}function K(a,b){if(be(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function L(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!be(a)){if(w(a))return w(b)?L(a.getTime(),b.getTime()):!1;if(y(a)&&y(b))return a.toString()==b.toString();if(A(a)||A(b)||z(a)||z(b)||be(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!x(a[e])){if(!L(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!x(b[e]))return!1;return!0}if(!be(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!L(a[e],b[e]))return!1;return!0}}return!1}function M(a,b,c){return a.concat(Vd.call(b,c))}function N(a,b){return Vd.call(a,b||0)}function O(a,b){var c=arguments.length>2?N(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,c.concat(Vd.call(arguments,0))):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function P(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function Q(a,b){return"undefined"==typeof a?c:JSON.stringify(a,P,b?"  ":null)}function R(a){return u(a)?JSON.parse(a):a}function S(a){a=Sd(a).clone();try{a.empty()}catch(b){}var c=Sd("<div>").append(a).html();try{return a[0].nodeType===je?Md(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Md(b)})}catch(b){return Md(c)}}function T(a){try{return decodeURIComponent(a)}catch(b){}}function U(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=T(b[0]),s(c))){var e=s(b[1])?T(b[1]):!0;Nd.call(d,c)?be(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function V(a){var b=[];return f(a,function(a,c){be(a)?f(a,function(a){b.push(X(c,!0)+(a===!0?"":"="+X(a,!0)))}):b.push(X(c,!0)+(a===!0?"":"="+X(a,!0)))}),b.length?b.join("&"):""}function W(a){return X(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function X(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function Y(a,b){var c,d,e=fe.length;for(a=Sd(a),d=0;e>d;++d)if(c=fe[d]+b,u(c=a.attr(c)))return c;return null}function Z(a,b){var c,d,e={};f(fe,function(b){var e=b+"app";!c&&a.hasAttribute&&a.hasAttribute(e)&&(c=a,d=a.getAttribute(e))}),f(fe,function(b){var e,f=b+"app";!c&&(e=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(f))}),c&&(e.strictDi=null!==Y(c,"strict-di"),b(c,d?[d]:[],e))}function $(c,d,e){t(e)||(e={});var g={strictDi:!1};e=l(g,e);var h=function(){if(c=Sd(c),c.injector()){var a=c[0]===b?"document":S(c);throw Zd("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),e.debugInfoEnabled&&d.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),d.unshift("ng");var f=Ob(d,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},i=/^NG_ENABLE_DEBUG_INFO!/,j=/^NG_DEFER_BOOTSTRAP!/;return a&&i.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(i,"")),a&&!j.test(a.name)?h():(a.name=a.name.replace(j,""),void($d.resumeBootstrap=function(a){f(a,function(a){d.push(a)
}),h()}))}function _(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ab(a){return $d.element(a).injector().get("$$testability")}function bb(a,b){return b=b||"_",a.replace(ge,function(a,c){return(c?b:"")+a.toLowerCase()})}function cb(){var b;he||(Td=a.jQuery,Td&&Td.fn.on?(Sd=Td,l(Td.fn,{scope:Be.scope,isolateScope:Be.isolateScope,controller:Be.controller,injector:Be.injector,inheritedData:Be.inheritedData}),b=Td.cleanData,Td.cleanData=function(a){var c;if(ae)ae=!1;else for(var d,e=0;null!=(d=a[e]);e++)c=Td._data(d,"events"),c&&c.$destroy&&Td(d).triggerHandler("$destroy");b(a)}):Sd=rb,$d.element=Sd,he=!0)}function db(a,b,c){if(!a)throw Zd("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function eb(a,b,c){return c&&be(a)&&(a=a[a.length-1]),db(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function fb(a,b){if("hasOwnProperty"===a)throw Zd("badname","hasOwnProperty is not a valid {0} name",b)}function gb(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&x(a)?O(f,a):a}function hb(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return Sd(d)}function ib(){return Object.create(null)}function jb(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d,e){return e||(e=b),function(){return e[d||"push"]([a,c,arguments]),j}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var b=[],e=[],h=[],i=a("$injector","invoke","push",e),j={_invokeQueue:b,_configBlocks:e,_runBlocks:h,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:i,run:function(a){return h.push(a),this}};return g&&i(g),j})}})}function kb(b){l(b,{bootstrap:$,copy:J,extend:l,equals:L,element:Sd,forEach:f,injector:Ob,noop:o,bind:O,toJson:Q,fromJson:R,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:x,isObject:t,isNumber:v,isElement:F,isArray:be,version:ne,isDate:w,lowercase:Md,uppercase:Od,callbacks:{counter:0},getTestability:ab,$$minErr:d,$$csp:ee,reloadWithDebugInfo:_}),Ud=jb(a);try{Ud("ngLocale")}catch(c){Ud("ngLocale",[]).provider("$locale",lc)}Ud("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Qc}),a.provider("$compile",Vb).directive({a:tf,input:Mf,textarea:Mf,form:yf,script:Dg,select:Gg,style:Ig,option:Hg,ngBind:dg,ngBindHtml:fg,ngBindTemplate:eg,ngClass:gg,ngClassEven:ig,ngClassOdd:hg,ngCloak:jg,ngController:kg,ngForm:zf,ngHide:xg,ngIf:ng,ngInclude:og,ngInit:qg,ngNonBindable:rg,ngPluralize:sg,ngRepeat:tg,ngShow:wg,ngStyle:yg,ngSwitch:zg,ngSwitchWhen:Ag,ngSwitchDefault:Bg,ngOptions:Fg,ngTransclude:Cg,ngModel:Vf,ngList:_f,ngChange:Wf,pattern:Yf,ngPattern:Yf,required:Xf,ngRequired:Xf,minlength:$f,ngMinlength:$f,maxlength:Zf,ngMaxlength:Zf,ngValue:bg,ngModelOptions:cg}).directive({ngInclude:pg}).directive(uf).directive(lg),a.provider({$anchorScroll:Pb,$animate:Le,$browser:Sb,$cacheFactory:Tb,$controller:Zb,$document:$b,$exceptionHandler:_b,$filter:ad,$interpolate:jc,$interval:kc,$http:fc,$httpBackend:hc,$location:yc,$log:zc,$parse:Kc,$rootScope:Pc,$q:Lc,$$q:Mc,$sce:Uc,$sceDelegate:Tc,$sniffer:Vc,$templateCache:Ub,$templateRequest:Wc,$$testability:Xc,$timeout:Yc,$window:_c,$$rAF:Oc,$$asyncCallback:Qb})}])}function lb(){return++pe}function mb(a){return a.replace(se,function(a,b,c,d){return d?c.toUpperCase():c}).replace(te,"Moz$1")}function nb(a){return!xe.test(a)}function ob(a){var b=a.nodeType;return b===ie||!b||b===le}function pb(a,b){var c,d,e,g,h=b.createDocumentFragment(),i=[];if(nb(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),d=(ye.exec(a)||["",""])[1].toLowerCase(),e=Ae[d]||Ae._default,c.innerHTML=e[1]+a.replace(ze,"<$1></$2>")+e[2],g=e[0];g--;)c=c.lastChild;i=M(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",f(i,function(a){h.appendChild(a)}),h}function qb(a,c){c=c||b;var d;return(d=we.exec(a))?[c.createElement(d[1])]:(d=pb(a,c))?d.childNodes:[]}function rb(a){if(a instanceof rb)return a;var b;if(u(a)&&(a=ce(a),b=!0),!(this instanceof rb)){if(b&&"<"!=a.charAt(0))throw ve("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new rb(a)}b?Bb(this,qb(a)):Bb(this,a)}function sb(a){return a.cloneNode(!0)}function tb(a,b){if(b||vb(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)vb(c[d])}function ub(a,b,c,d){if(s(d))throw ve("offargs","jqLite#off() does not support the `selector` argument");var e=wb(a),g=e&&e.events,h=e&&e.handle;if(h)if(b)f(b.split(" "),function(b){if(s(c)){var d=g[b];if(I(d||[],c),d&&d.length>0)return}re(a,b,h),delete g[b]});else for(b in g)"$destroy"!==b&&re(a,b,h),delete g[b]}function vb(a,b){var d=a.ng339,e=d&&oe[d];if(e){if(b)return void delete e.data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),ub(a)),delete oe[d],a.ng339=c}}function wb(a,b){var d=a.ng339,e=d&&oe[d];return b&&!e&&(a.ng339=d=lb(),e=oe[d]={events:{},data:{},handle:c}),e}function xb(a,b,c){if(ob(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=wb(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];l(h,b)}}}function yb(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function zb(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",ce((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+ce(b)+" "," ")))})}function Ab(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=ce(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",ce(c))}}function Bb(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Cb(a,b){return Db(a,"$"+(b||"ngController")+"Controller")}function Db(a,b,d){a.nodeType==le&&(a=a.documentElement);for(var e=be(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=Sd.data(a,e[f]))!==c)return d;a=a.parentNode||a.nodeType===me&&a.host}}function Eb(a){for(tb(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Fb(a,b){b||tb(a);var c=a.parentNode;c&&c.removeChild(a)}function Gb(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):Sd(c).on("load",b)}function Hb(a,b){var c=Ce[b.toLowerCase()];return c&&De[H(a)]&&c}function Ib(a,b){var c=a.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Ee[b]}function Jb(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0},f>1&&(e=K(e));for(var h=0;f>h;h++)c.isImmediatePropagationStopped()||e[h].call(a,c)}};return c.elem=a,c}function Kb(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||j)():d+":"+a}function Lb(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Mb(a){var b=a.toString().replace(Ie,""),c=b.match(Fe);return c?"function("+(c[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Nb(a,b,c){var d,e,g,h;if("function"==typeof a){if(!(d=a.$inject)){if(d=[],a.length){if(b)throw u(c)&&c||(c=a.name||Mb(a)),Je("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);e=a.toString().replace(Ie,""),g=e.match(Fe),f(g[1].split(Ge),function(a){a.replace(He,function(a,b,c){d.push(c)})})}a.$inject=d}}else be(a)?(h=a.length-1,eb(a[h],"fn"),d=a.slice(0,h)):eb(a,"fn",!0);return d}function Ob(a,b){function d(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function e(a,b){if(fb(a,"service"),(x(b)||be(b))&&(b=A.instantiate(b)),!b.$get)throw Je("pget","Provider '{0}' must define $get factory method.",a);return z[a+v]=b}function g(a,b){return function(){var d=C.invoke(b,this,c,a);if(r(d))throw Je("undef","Provider '{0}' must return a value from $get factory method.",a);return d}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function j(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function k(a,b){return h(a,q(b),!1)}function l(a,b){fb(a,"constant"),z[a]=b,B[a]=b}function m(a,b){var c=A.get(a+v),d=c.$get;c.$get=function(){var a=C.invoke(d,c);return C.invoke(b,null,{$delegate:a})}}function n(a){var b,c=[];return f(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=A.get(d[0]);e[d[1]].apply(e,d[2])}}if(!y.get(a)){y.put(a,!0);try{u(a)?(b=Ud(a),c=c.concat(n(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):x(a)?c.push(A.invoke(a)):be(a)?c.push(A.invoke(a)):eb(a,"module")}catch(e){throw be(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Je("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function p(a,c){function d(b){if(a.hasOwnProperty(b)){if(a[b]===s)throw Je("cdep","Circular dependency found: {0}",b+" <- "+w.join(" <- "));return a[b]}try{return w.unshift(b),a[b]=s,a[b]=c(b)}catch(d){throw a[b]===s&&delete a[b],d}finally{w.shift()}}function e(a,c,e,f){"string"==typeof e&&(f=e,e=null);var g,h,i,j=[],k=Nb(a,b,f);for(h=0,g=k.length;g>h;h++){if(i=k[h],"string"!=typeof i)throw Je("itkn","Incorrect injection token! Expected service name as string, got {0}",i);j.push(e&&e.hasOwnProperty(i)?e[i]:d(i))}return be(a)&&(a=a[g]),a.apply(c,j)}function f(a,b,c){var d,f,g=function(){};return g.prototype=(be(a)?a[a.length-1]:a).prototype,d=new g,f=e(a,d,b,c),t(f)||x(f)?f:d}return{invoke:e,instantiate:f,get:d,annotate:Nb,has:function(b){return z.hasOwnProperty(b+v)||a.hasOwnProperty(b)}}}b=b===!0;var s={},v="Provider",w=[],y=new Lb([],!0),z={$provide:{provider:d(e),factory:d(h),service:d(j),value:d(k),constant:d(l),decorator:m}},A=z.$injector=p(z,function(){throw Je("unpr","Unknown provider: {0}",w.join(" <- "))}),B={},C=B.$injector=p(B,function(a){var b=A.get(a+v);return C.invoke(b.$get,b,c,a)});return f(n(a),function(a){C.invoke(a||o)}),C}function Pb(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===H(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(x(a))a=a();else if(F(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else v(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(){var a,b=c.hash();b?(a=i.getElementById(b))?g(a):(a=e(i.getElementsByName(b)))?g(a):"top"===b&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Gb(function(){d.$evalAsync(h)})}),h}]}function Qb(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function Rb(a,b,d,e){function g(a){try{a.apply(null,N(arguments,1))}finally{if(w--,0===w)for(;x.length;)try{x.pop()()}catch(b){d.error(b)}}}function h(a,b){!function c(){f(z,function(a){a()}),y=b(c,a)}()}function i(){j(),k()}function j(){A=a.history.state,A=r(A)?null:A,L(A,H)&&(A=H),H=A}function k(){(C!==m.url()||B!==A)&&(C=m.url(),B=A,f(F,function(a){a(m.url(),A)}))}function l(a){try{return decodeURIComponent(a)}catch(b){return a}}var m=this,n=b[0],p=a.location,q=a.history,s=a.setTimeout,t=a.clearTimeout,v={};m.isMock=!1;var w=0,x=[];m.$$completeOutstandingRequest=g,m.$$incOutstandingRequestCount=function(){w++},m.notifyWhenNoOutstandingRequests=function(a){f(z,function(a){a()}),0===w?a():x.push(a)};var y,z=[];m.addPollFn=function(a){return r(y)&&h(100,s),z.push(a),a};var A,B,C=p.href,D=b.find("base"),E=null;j(),B=A,m.url=function(b,c,d){if(r(d)&&(d=null),p!==a.location&&(p=a.location),q!==a.history&&(q=a.history),b){var f=B===d;if(C===b&&(!e.history||f))return;var g=C&&qc(C)===qc(b);return C=b,B=d,!e.history||g&&f?(g||(E=b),c?p.replace(b):p.href=b):(q[c?"replaceState":"pushState"](d,"",b),j(),B=A),m}return E||p.href.replace(/%27/g,"'")},m.state=function(){return A};var F=[],G=!1,H=null;m.onUrlChange=function(b){return G||(e.history&&Sd(a).on("popstate",i),Sd(a).on("hashchange",i),G=!0),F.push(b),b},m.$$checkUrlChange=k,m.baseHref=function(){var a=D.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var I={},J="",K=m.baseHref();m.cookies=function(a,b){var e,f,g,h,i;if(!a){if(n.cookie!==J)for(J=n.cookie,f=J.split("; "),I={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=l(g.substring(0,i)),I[a]===c&&(I[a]=l(g.substring(i+1))));return I}b===c?n.cookie=encodeURIComponent(a)+"=;path="+K+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(n.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+K).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},m.defer=function(a,b){var c;return w++,c=s(function(){delete v[c],g(a)},b||0),v[c]=!0,c},m.defer.cancel=function(a){return v[a]?(delete v[a],t(a),g(o),!0):!1}}function Sb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Rb(a,d,b,c)}]}function Tb(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}if(!r(b))return a in i||g++,i[a]=b,g>j&&this.remove(n.key),b},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Ub(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Vb(a,d){function e(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};return f(a,function(a,e){var f=a.match(c);if(!f)throw Me("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,e,a);d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}}),d}var g={},h="Directive",j=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,k=/(([\w\-]+)(?:\:([^;]+))?;?)/,m=G("ngSrc,ngSrcset,src,srcset"),r=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,v=/^(on[a-z]+|formaction)$/;this.directive=function y(b,c){return fb(b,"directive"),u(b)?(db(c,"directiveFactory"),g.hasOwnProperty(b)||(g[b]=[],a.factory(b+h,["$injector","$exceptionHandler",function(a,c){var d=[];return f(g[b],function(f,g){try{var h=a.invoke(f);x(h)?h={compile:q(h)}:!h.compile&&h.link&&(h.compile=q(h.link)),h.priority=h.priority||0,h.index=g,h.name=h.name||b,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA",t(h.scope)&&(h.$$isolateBindings=e(h.scope,h.name)),d.push(h)}catch(i){c(i)}}),d}])),g[b].push(c)):f(b,i(y)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()};var w=!0;this.debugInfoEnabled=function(a){return s(a)?(w=a,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,e,i,q,s,y,z,B,C,D){function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,c,d,e){a instanceof Sd||(a=Sd(a)),f(a,function(b,c){b.nodeType==je&&b.nodeValue.match(/\S+/)&&(a[c]=Sd(b).wrap("<span></span>").parent()[0])});var g=J(a,b,a,c,d,e);F.$$addScopeClass(a);var h=null;return function(b,c,d){db(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,f=d.transcludeControllers,i=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),h||(h=G(i));var j;if(j="html"!==h?Sd($(h,Sd("<div>").append(a).html())):c?Be.clone.call(a):a,f)for(var k in f)j.data("$"+k+"Controller",f[k].instance);return F.$$addScopeInfo(j,b),c&&c(j,b),g&&g(b,j,j,e),j}}function G(a){var b=a&&a[0];return b&&"foreignobject"!==H(b)&&b.toString().match(/SVG/)?"svg":"html"}function J(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,q;if(o){var r=d.length;for(q=new Array(r),k=0;k<p.length;k+=3)m=p[k],q[m]=d[m]}else q=d;for(k=0,l=p.length;l>k;)i=q[p[k++]],g=p[k++],h=p[k++],g?(g.scope?(j=a.$new(),F.$$addScopeInfo(Sd(i),j)):j=a,n=g.transcludeOnThisElement?K(a,g.transclude,f,g.elementTranscludeOnThisElement):!g.templateOnThisElement&&f?f:!f&&b?K(a,b):null,g(h,j,i,e,n)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o,p=[],q=0;q<a.length;q++)i=new gb,j=M(a[q],[],i,0===q?e:c,f),k=j.length?Q(j,a[q],i,b,d,null,[],[],g):null,k&&k.scope&&F.$$addScopeClass(i.$$element),m=k&&k.terminal||!(l=a[q].childNodes)||!l.length?null:J(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),(k||m)&&(p.push(q,k,m),n=!0,o=o||k),g=null;return n?h:null}function K(a,b,c){var d=function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})};return d}function M(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case ie:T(b,Wb(H(a)),"E",d,e);for(var l,m,n,o,p,q,r=a.attributes,s=0,t=r&&r.length;t>s;s++){var v=!1,w=!1;l=r[s],m=l.name,p=ce(l.value),o=Wb(m),(q=lb.test(o))&&(m=bb(o.substr(6),"-"));var x=o.replace(/(Start|End)$/,"");U(x)&&o===x+"Start"&&(v=m,w=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6)),n=Wb(m.toLowerCase()),i[n]=m,(q||!c.hasOwnProperty(n))&&(c[n]=p,Hb(a,n)&&(c[n]=!0)),ab(a,b,p,n,q),T(b,n,"A",d,e,v,w)}if(g=a.className,u(g)&&""!==g)for(;f=k.exec(g);)n=Wb(f[2]),T(b,n,"C",d,e)&&(c[n]=ce(f[3])),g=g.substr(f.index+f[0].length);break;case je:Z(b,a.nodeValue);break;case ke:try{f=j.exec(a.nodeValue),f&&(n=Wb(f[1]),T(b,n,"M",d,e)&&(c[n]=ce(f[2])))}catch(y){}}return b.sort(X),b}function O(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Me("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==ie&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return Sd(d)}function P(a,b,c){return function(d,e,f,g,h){return e=O(e[0],b,c),a(d,e,f,g,h)}}function Q(a,g,h,i,j,k,l,m,n){function o(a,b,c,d){a&&(c&&(a=P(a,c,d)),a.require=z.require,a.directiveName=B,(I===z||z.$$isolateScope)&&(a=eb(a,{isolateScope:!0})),l.push(a)),b&&(c&&(b=P(b,c,d)),b.require=z.require,b.directiveName=B,(I===z||z.$$isolateScope)&&(b=eb(b,{isolateScope:!0})),m.push(b))}function p(a,b,c,d){var e,g,h="data",i=!1,j=c;if(u(b)){if(g=b.match(r),b=b.substring(g[0].length),g[3]&&(g[1]?g[3]=null:g[1]=g[3]),"^"===g[1]?h="inheritedData":"^^"===g[1]&&(h="inheritedData",j=c.parent()),"?"===g[2]&&(i=!0),e=null,d&&"data"===h&&(e=d[b])&&(e=e.instance),e=e||j[h]("$"+b+"Controller"),!e&&!i)throw Me("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);return e||null}return be(b)&&(e=[],f(b,function(b){e.push(p(a,b,c,d))})),e}function v(a,b,e,i,j){function k(a,b,d){var e;return A(a)||(d=b,b=a,a=c),U&&(e=v),d||(d=U?x.parent():x),j(a,b,e,d,D)}var n,o,r,t,u,v,w,x,z;if(g===e?(z=h,x=h.$$element):(x=Sd(e),z=new gb(x,h)),I&&(u=b.$new(!0)),j&&(w=k,w.$$boundTransclude=j),H&&(y={},v={},f(H,function(a){var c,d={$scope:a===I||a.$$isolateScope?u:b,$element:x,$attrs:z,$transclude:w};t=a.controller,"@"==t&&(t=z[a.name]),c=s(t,d,!0,a.controllerAs),v[a.name]=c,U||x.data("$"+a.name+"Controller",c.instance),y[a.name]=c})),I){F.$$addScopeInfo(x,u,!0,!(J&&(J===I||J===I.$$originalDirective))),F.$$addScopeClass(x,!0);var B=y&&y[I.name],C=u;B&&B.identifier&&I.bindToController===!0&&(C=B.instance),f(u.$$isolateBindings=I.$$isolateBindings,function(a,c){var e,f,g,h,i=a.attrName,j=a.optional,k=a.mode;switch(k){case"@":z.$observe(i,function(a){C[c]=a}),z.$$observers[i].$$scope=b,z[i]&&(C[c]=d(z[i])(b));break;case"=":if(j&&!z[i])return;f=q(z[i]),h=f.literal?L:function(a,b){return a===b||a!==a&&b!==b},g=f.assign||function(){throw e=C[c]=f(b),Me("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",z[i],I.name)},e=C[c]=f(b);var l=function(a){return h(a,C[c])||(h(a,e)?g(b,a=C[c]):C[c]=a),e=a};l.$stateful=!0;var m;m=a.collection?b.$watchCollection(z[i],l):b.$watch(q(z[i],l),null,f.literal),u.$on("$destroy",m);break;case"&":f=q(z[i]),C[c]=function(a){return f(b,a)}}})}for(y&&(f(y,function(a){a()}),y=null),n=0,o=l.length;o>n;n++)r=l[n],fb(r,r.isolateScope?u:b,x,z,r.require&&p(r.directiveName,r.require,x,v),w);var D=b;for(I&&(I.template||null===I.templateUrl)&&(D=u),a&&a(D,e.childNodes,c,j),n=m.length-1;n>=0;n--)r=m[n],fb(r,r.isolateScope?u:b,x,z,r.require&&p(r.directiveName,r.require,x,v),w)}n=n||{};for(var w,y,z,B,C,D,E,G=-Number.MAX_VALUE,H=n.controllerDirectives,I=n.newIsolateScopeDirective,J=n.templateDirective,K=n.nonTlbTranscludeDirective,Q=!1,T=!1,U=n.hasElementTranscludeDirective,X=h.$$element=Sd(g),Z=k,_=i,ab=0,bb=a.length;bb>ab;ab++){z=a[ab];var db=z.$$start,hb=z.$$end;if(db&&(X=O(g,db,hb)),C=c,G>z.priority)break;if((E=z.scope)&&(z.templateUrl||(t(E)?(Y("new/isolated scope",I||w,z,X),I=z):Y("new/isolated scope",I,z,X)),w=w||z),B=z.name,!z.templateUrl&&z.controller&&(E=z.controller,H=H||{},Y("'"+B+"' controller",H[B],z,X),H[B]=z),(E=z.transclude)&&(Q=!0,z.$$tlb||(Y("transclusion",K,z,X),K=z),"element"==E?(U=!0,G=z.priority,C=X,X=h.$$element=Sd(b.createComment(" "+B+": "+h[B]+" ")),g=X[0],cb(j,N(C),g),_=F(C,i,G,Z&&Z.name,{nonTlbTranscludeDirective:K})):(C=Sd(sb(g)).contents(),X.empty(),_=F(C,i))),z.template)if(T=!0,Y("template",J,z,X),J=z,E=x(z.template)?z.template(X,h):z.template,E=kb(E),z.replace){if(Z=z,C=nb(E)?[]:Yb($(z.templateNamespace,ce(E))),g=C[0],1!=C.length||g.nodeType!==ie)throw Me("tplrt","Template for directive '{0}' must have exactly one root element. {1}",B,"");cb(j,X,g);var ib={$attr:{}},jb=M(g,[],ib),lb=a.splice(ab+1,a.length-(ab+1));I&&R(jb),a=a.concat(jb).concat(lb),V(h,ib),bb=a.length}else X.html(E);if(z.templateUrl)T=!0,Y("template",J,z,X),J=z,z.replace&&(Z=z),v=W(a.splice(ab,a.length-ab),X,h,j,Q&&_,l,m,{controllerDirectives:H,newIsolateScopeDirective:I,templateDirective:J,nonTlbTranscludeDirective:K}),bb=a.length;else if(z.compile)try{D=z.compile(X,h,_),x(D)?o(null,D,db,hb):D&&o(D.pre,D.post,db,hb)}catch(mb){e(mb,S(X))}z.terminal&&(v.terminal=!0,G=Math.max(G,z.priority))}return v.scope=w&&w.scope===!0,v.transcludeOnThisElement=Q,v.elementTranscludeOnThisElement=U,v.templateOnThisElement=T,v.transclude=_,n.hasElementTranscludeDirective=U,v}function R(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function T(b,d,f,i,j,k,l){if(d===j)return null;var m=null;if(g.hasOwnProperty(d))for(var o,p=a.get(d+h),q=0,r=p.length;r>q;q++)try{o=p[q],(i===c||i>o.priority)&&-1!=o.restrict.indexOf(f)&&(k&&(o=n(o,{$$start:k,$$end:l})),b.push(o),m=o)}catch(s){e(s)}return m}function U(b){if(g.hasOwnProperty(b))for(var c,d=a.get(b+h),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function V(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function W(a,b,c,d,e,g,h,j){var k,m,n=[],o=b[0],p=a.shift(),q=l({},p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=x(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),i(B.getTrustedResourceUrl(r)).then(function(i){var l,u,v,w;if(i=kb(i),p.replace){if(v=nb(i)?[]:Yb($(s,ce(i))),l=v[0],1!=v.length||l.nodeType!==ie)throw Me("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},cb(d,b,l);var x=M(l,[],u);t(p.scope)&&R(x),a=x.concat(a),V(c,u)}else l=o,b.html(i);for(a.unshift(q),k=Q(a,l,c,e,b,p,g,h,j),f(d,function(a,c){a==l&&(d[c]=b[0])}),m=J(b[0].childNodes,e);n.length;){var y=n.shift(),z=n.shift(),A=n.shift(),B=n.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=sb(l)),cb(A,Sd(z),C),E(Sd(C),D)}w=k.transcludeOnThisElement?K(y,k.transclude,B):B,k(m,y,C,d,w)}}n=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(n?(n.push(b),n.push(c),n.push(d),n.push(f)):(k.transcludeOnThisElement&&(f=K(b,k.transclude,e)),k(m,b,c,d,f)))}}function X(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Y(a,b,c,d){if(b)throw Me("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,S(d))}function Z(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=!!b.length;return d&&F.$$addBindingClass(b),function(a,b){var e=b.parent();d||F.$$addBindingClass(e),F.$$addBindingInfo(e,c.expressions),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function $(a,c){switch(a=Md(a||"html")){case"svg":case"math":var d=b.createElement("div");return d.innerHTML="<"+a+">"+c+"</"+a+">",d.childNodes[0].childNodes;default:return c}}function _(a,b){if("srcdoc"==b)return B.HTML;var c=H(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?B.RESOURCE_URL:void 0}function ab(a,b,c,e,f){var g=d(c,!0);if(g){if("multiple"===e&&"select"===H(a))throw Me("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",S(a));b.push({priority:100,compile:function(){return{pre:function(b,c,h){var i=h.$$observers||(h.$$observers={});if(v.test(e))throw Me("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");h[e]&&(g=d(h[e],!0,_(a,e),m[e]||f),g&&(h[e]=g(b),(i[e]||(i[e]=[])).$$inter=!0,(h.$$observers&&h.$$observers[e].$$scope||b).$watch(g,function(a,b){"class"===e&&a!=b?h.$updateClass(a,b):h.$set(e,a)})))}}}})}}function cb(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1,a.context===g&&(a.context=d);break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),Sd(d).data(Sd(g).data()),Td?(ae=!0,Td.cleanData([g])):delete Sd.cache[g[Sd.expando]];for(var n=1,o=c.length;o>n;n++){var p=c[n];Sd(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function eb(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function fb(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,S(c))}}var gb=function(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a};gb.prototype={$normalize:Wb,$addClass:function(a){a&&a.length>0&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&C.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Xb(a,b);c&&c.length&&C.addClass(this.$$element,c);var d=Xb(b,a);d&&d.length&&C.removeClass(this.$$element,d)},$set:function(a,b,d,g){var h,i=this.$$element[0],j=Hb(i,a),k=Ib(i,a),l=a;if(j?(this.$$element.prop(a,b),g=j):k&&(this[k]=b,l=k),this[a]=b,g?this.$attr[a]=g:(g=this.$attr[a],g||(this.$attr[a]=g=bb(a,"-"))),h=H(this.$$element),"a"===h&&"href"===a||"img"===h&&"src"===a)this[a]=b=D(b,"src"===a);else if("img"===h&&"srcset"===a){for(var m="",n=ce(b),o=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(n)?o:/(,)/,q=n.split(p),r=Math.floor(q.length/2),s=0;r>s;s++){var t=2*s;m+=D(ce(q[t]),!0),m+=" "+ce(q[t+1])}var u=ce(q[2*s]).split(/\s/);m+=D(ce(u[0]),!0),2===u.length&&(m+=" "+ce(u[1])),this[a]=b=m}d!==!1&&(null===b||b===c?this.$$element.removeAttr(g):this.$$element.attr(g,b));var v=this.$$observers;v&&f(v[l],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ib()),e=d[a]||(d[a]=[]);return e.push(b),y.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])}),function(){I(e,b)}}};var hb=d.startSymbol(),jb=d.endSymbol(),kb="{{"==hb||"}}"==jb?p:function(a){return a.replace(/\{\{/g,hb).replace(/}}/g,jb)},lb=/^ngAttr[A-Z]/;return F.$$addBindingInfo=w?function(a,b){var c=a.data("$binding")||[];be(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:o,F.$$addBindingClass=w?function(a){E(a,"ng-binding")}:o,F.$$addScopeInfo=w?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:o,F.$$addScopeClass=w?function(a,b){E(a,b?"ng-isolate-scope":"ng-scope")}:o,F}]}function Wb(a){return mb(a.replace(Ne,""))}function Xb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function Yb(a){a=Sd(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===ke&&Wd.call(a,b,1)}return a}function Zb(){var a={},b=!1,e=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){fb(b,"controller"),t(b)?l(a,b):a[b]=c},this.allowGlobals=function(){b=!0},this.$get=["$injector","$window",function(f,g){function h(a,b,c,e){if(!a||!t(a.$scope))throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b);a.$scope[b]=c}return function(d,i,j,k){var m,n,o,p;if(j=j===!0,k&&u(k)&&(p=k),u(d)&&(n=d.match(e),o=n[1],p=p||n[3],d=a.hasOwnProperty(o)?a[o]:gb(i.$scope,o,!0)||(b?gb(g,o,!0):c),eb(d,o,!0)),j){var q=function(){};return q.prototype=(be(d)?d[d.length-1]:d).prototype,m=new q,p&&h(i,p,m,o||d.name),l(function(){return f.invoke(d,m,i,o),m},{instance:m,identifier:p})}return m=f.instantiate(d,i,o),p&&h(i,p,m,o||d.name),m}}]}function $b(){this.$get=["$window",function(a){return Sd(a.document)}]}function _b(){this.$get=["$log",function(a){return function(){a.error.apply(a,arguments)}}]}function ac(a,b){if(u(a)){a=a.replace(Se,"");var c=b("Content-Type");(c&&0===c.indexOf(Oe)||Qe.test(a)&&Re.test(a))&&(a=R(a))}return a}function bc(a){var b,c,d,e={};return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=Md(ce(a.substr(0,d))),c=ce(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+", "+c:c)}),e):e}function cc(a){var b=t(a)?a:c;return function(c){return b||(b=bc(a)),c?b[Md(c)]||null:b}}function dc(a,b,c){return x(c)?c(a,b):(f(c,function(c){a=c(a,b)}),a)}function ec(a){return a>=200&&300>a}function fc(){var a=this.defaults={transformResponse:[ac],transformRequest:[function(a){return!t(a)||B(a)||C(a)?a:Q(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:K(Pe),put:K(Pe),patch:K(Pe)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},b=!1;
this.useApplyAsync=function(a){return s(a)?(b=!!a,this):b};var d=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(e,g,i,j,k,m){function n(b){function d(a){var b=l({},a);return b.data=a.data?dc(a.data,a.headers,g.transformResponse):a.data,ec(a.status)?b:k.reject(b)}function e(b){function c(a){var b;f(a,function(c,d){x(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})}var d,e,g,h=a.headers,i=l({},b.headers);h=l({},h.common,h[Md(b.method)]);a:for(d in h){e=Md(d);for(g in i)if(Md(g)===e)continue a;i[d]=h[d]}return c(i),i}var g={method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},h=e(b);l(g,b),g.headers=h,g.method=Od(g.method);var i=function(b){h=b.headers;var c=dc(b.data,cc(h),b.transformRequest);return r(c)&&f(h,function(a,b){"content-type"===Md(b)&&delete h[b]}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),q(b,c,h).then(d,d)},j=[i,c],m=k.when(g);for(f(z,function(a){(a.request||a.requestError)&&j.unshift(a.request,a.requestError),(a.response||a.responseError)&&j.push(a.response,a.responseError)});j.length;){var n=j.shift(),o=j.shift();m=m.then(n,o)}return m.success=function(a){return m.then(function(b){a(b.data,b.status,b.headers,g)}),m},m.error=function(a){return m.then(null,function(b){a(b.data,b.status,b.headers,g)}),m},m}function o(){f(arguments,function(a){n[a]=function(b,c){return n(l(c||{},{method:a,url:b}))}})}function p(){f(arguments,function(a){n[a]=function(b,c,d){return n(l(d||{},{method:a,url:b,data:c}))}})}function q(d,f,h){function i(a,c,d,e){function f(){l(c,a,d,e)}o&&(ec(a)?o.put(w,[a,c,bc(d),e]):o.remove(w)),b?j.$applyAsync(f):(f(),j.$$phase||j.$apply())}function l(a,b,c,e){b=Math.max(b,0),(ec(b)?q.resolve:q.reject)({data:a,status:b,headers:cc(c),config:d,statusText:e})}function m(){var a=n.pendingRequests.indexOf(d);-1!==a&&n.pendingRequests.splice(a,1)}var o,p,q=k.defer(),u=q.promise,w=v(d.url,d.params);if(n.pendingRequests.push(d),u.then(m,m),!d.cache&&!a.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(o=t(d.cache)?d.cache:t(a.cache)?a.cache:y),o)if(p=o.get(w),s(p)){if(E(p))return p.then(m,m),p;be(p)?l(p[1],p[0],K(p[2]),p[3]):l(p,200,{},"OK")}else o.put(w,u);if(r(p)){var x=$c(d.url)?g.cookies()[d.xsrfCookieName||a.xsrfCookieName]:c;x&&(h[d.xsrfHeaderName||a.xsrfHeaderName]=x),e(d.method,w,f,i,h,d.timeout,d.withCredentials,d.responseType)}return u}function v(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(be(a)||(a=[a]),f(a,function(a){t(a)&&(a=w(a)?a.toISOString():Q(a)),c.push(X(b)+"="+X(a))}))}),c.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var y=i("$http"),z=[];return f(d,function(a){z.unshift(u(a)?m.get(a):m.invoke(a))}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put","patch"),n.defaults=a,n}]}function gc(){return new a.XMLHttpRequest}function hc(){this.$get=["$browser","$window","$document",function(a,b,c){return ic(a,gc,a.defer,b.angular.callbacks,c[0])}]}function ic(a,b,c,d,e){function g(a,b,c){var f=e.createElement("script"),g=null;return f.type="text/javascript",f.src=a,f.async=!0,g=function(a){re(f,"load",g),re(f,"error",g),e.body.removeChild(f),f=null;var h=-1,i="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},qe(f,"load",g),qe(f,"error",g),e.body.appendChild(f),g}return function(e,h,i,j,k,l,m,n){function p(){t&&t(),u&&u.abort()}function q(b,d,e,f,g){x&&c.cancel(x),t=u=null,b(d,e,f,g),a.$$completeOutstandingRequest(o)}if(a.$$incOutstandingRequestCount(),h=h||a.url(),"jsonp"==Md(e)){var r="_"+(d.counter++).toString(36);d[r]=function(a){d[r].data=a,d[r].called=!0};var t=g(h.replace("JSON_CALLBACK","angular.callbacks."+r),r,function(a,b){q(j,a,d[r].data,"",b),d[r]=o})}else{var u=b();u.open(e,h,!0),f(k,function(a,b){s(a)&&u.setRequestHeader(b,a)}),u.onload=function(){var a=u.statusText||"",b="response"in u?u.response:u.responseText,c=1223===u.status?204:u.status;0===c&&(c=b?200:"file"==Zc(h).protocol?404:0),q(j,c,b,u.getAllResponseHeaders(),a)};var v=function(){q(j,-1,null,null,"")};if(u.onerror=v,u.onabort=v,m&&(u.withCredentials=!0),n)try{u.responseType=n}catch(w){if("json"!==n)throw w}u.send(i||null)}if(l>0)var x=c(p,l);else E(l)&&l.then(p)}}function jc(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,m,n){function o(c){return c.replace(j,a).replace(k,b)}function p(a){try{return D(C(a))}catch(b){var c=Te("interr","Can't interpolate: {0}\n{1}",f,b.toString());d(c)}}n=!!n;for(var q,s,t,u=0,v=[],w=[],y=f.length,z=[],A=[];y>u;){if(-1==(q=f.indexOf(a,u))||-1==(s=f.indexOf(b,q+h))){u!==y&&z.push(o(f.substring(u)));break}u!==q&&z.push(o(f.substring(u,q))),t=f.substring(q+h,s),v.push(t),w.push(c(t,p)),u=s+i,A.push(z.length),z.push("")}if(m&&z.length>1)throw Te("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);if(!g||v.length){var B=function(a){for(var b=0,c=v.length;c>b;b++){if(n&&r(a[b]))return;z[A[b]]=a[b]}return z.join("")},C=function(a){return m?e.getTrusted(m,a):e.valueOf(a)},D=function(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=Q(a)}return a};return l(function(a){var b=0,c=v.length,e=new Array(c);try{for(;c>b;b++)e[b]=w[b](a);return B(e)}catch(g){var h=Te("interr","Can't interpolate: {0}\n{1}",f,g.toString());d(h)}},{exp:f,expressions:v,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(w,function(c,e){var f=B(c);x(b)&&b.call(this,f,c!==e?d:f,a),d=f},c)}})}}var h=a.length,i=b.length,j=new RegExp(a.replace(/./g,f),"g"),k=new RegExp(b.replace(/./g,f),"g");return g.startSymbol=function(){return a},g.endSymbol=function(){return b},g}]}function kc(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){function e(e,g,h,i){var j=b.setInterval,k=b.clearInterval,l=0,m=s(i)&&!i,n=(m?d:c).defer(),o=n.promise;return h=s(h)?h:0,o.then(null,null,e),o.$$intervalId=j(function(){n.notify(l++),h>0&&l>=h&&(n.resolve(l),k(o.$$intervalId),delete f[o.$$intervalId]),m||a.$apply()},g),f[o.$$intervalId]=n,o}var f={};return e.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1},e}]}function lc(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function mc(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=W(b[c]);return b.join("/")}function nc(a,b,c){var d=Zc(a,c);b.$$protocol=d.protocol,b.$$host=d.hostname,b.$$port=m(d.port)||Ve[d.protocol]||null}function oc(a,b,c){var d="/"!==a.charAt(0);d&&(a="/"+a);var e=Zc(a,c);b.$$path=decodeURIComponent(d&&"/"===e.pathname.charAt(0)?e.pathname.substring(1):e.pathname),b.$$search=U(e.search),b.$$hash=decodeURIComponent(e.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function pc(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function qc(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function rc(a){return a.substr(0,qc(a).lastIndexOf("/")+1)}function sc(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function tc(a,b){this.$$html5=!0,b=b||"";var d=rc(a);nc(a,this,a),this.$$parse=function(b){var c=pc(d,b);if(!u(c))throw We("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',b,d);oc(c,this,a),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=V(this.$$search),b=this.$$hash?"#"+W(this.$$hash):"";this.$$url=mc(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var g,h,i;return(g=pc(a,e))!==c?(h=g,i=(g=pc(b,g))!==c?d+(pc("/",g)||g):a+h):(g=pc(d,e))!==c?i=d+g:d==e+"/"&&(i=d),i&&this.$$parse(i),!!i}}function uc(a,b){var c=rc(a);nc(a,this,a),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f=pc(a,d)||pc(c,d),g="#"==f.charAt(0)?pc(b,f):this.$$html5?f:"";if(!u(g))throw We("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',d,b);oc(g,this,a),this.$$path=e(this.$$path,g,a),this.$$compose()},this.$$compose=function(){var c=V(this.$$search),d=this.$$hash?"#"+W(this.$$hash):"";this.$$url=mc(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$parseLinkUrl=function(b){return qc(a)==qc(b)?(this.$$parse(b),!0):!1}}function vc(a,b){this.$$html5=!0,uc.apply(this,arguments);var c=rc(a);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==qc(d)?f=d:(g=pc(c,d))?f=a+b+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=V(this.$$search),d=this.$$hash?"#"+W(this.$$hash):"";this.$$url=mc(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function wc(a){return function(){return this[a]}}function xc(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function yc(){var b="",c={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(a){return s(a)?(b=a,this):b},this.html5Mode=function(a){return D(a)?(c.enabled=a,this):t(a)?(D(a.enabled)&&(c.enabled=a.enabled),D(a.requireBase)&&(c.requireBase=a.requireBase),D(a.rewriteLinks)&&(c.rewriteLinks=a.rewriteLinks),this):c},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(d,e,f,g){function h(a,b,c){var d=j.url(),f=j.$$state;try{e.url(a,b,c),j.$$state=e.state()}catch(g){throw j.url(d),j.$$state=f,g}}function i(a,b){d.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=e.baseHref(),n=e.url();if(c.enabled){if(!m&&c.requireBase)throw We("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=sc(n)+(m||"/"),k=f.history?tc:vc}else l=qc(n),k=uc;j=new k(l,"#"+b),j.$$parseLinkUrl(n,n),j.$$state=e.state();var o=/^\s*(javascript|mailto):/i;g.on("click",function(b){if(c.rewriteLinks&&!b.ctrlKey&&!b.metaKey&&2!=b.which){for(var f=Sd(b.target);"a"!==H(f[0]);)if(f[0]===g[0]||!(f=f.parent())[0])return;var h=f.prop("href"),i=f.attr("href")||f.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Zc(h.animVal).href),o.test(h)||!h||f.attr("target")||b.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(b.preventDefault(),j.absUrl()!=e.url()&&(d.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),j.absUrl()!=n&&e.url(j.absUrl(),!0);var p=!0;return e.onUrlChange(function(a,b){d.$evalAsync(function(){var c=j.absUrl(),e=j.$$state;j.$$parse(a),j.$$state=b,d.$broadcast("$locationChangeStart",a,c,b,e).defaultPrevented?(j.$$parse(c),j.$$state=e,h(c,!1,e)):(p=!1,i(c,e))}),d.$$phase||d.$digest()}),d.$watch(function(){var a=e.url(),b=e.state(),c=j.$$replace,g=a!==j.absUrl()||j.$$html5&&f.history&&b!==j.$$state;(p||g)&&(p=!1,d.$evalAsync(function(){d.$broadcast("$locationChangeStart",j.absUrl(),a,j.$$state,b).defaultPrevented?(j.$$parse(a),j.$$state=b):(g&&h(j.absUrl(),c,b===j.$$state?null:j.$$state),i(a,b))})),j.$$replace=!1}),j}]}function zc(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Ac(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw Ye("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Bc(a,b){if(a){if(a.constructor===a)throw Ye("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw Ye("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw Ye("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw Ye("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function Cc(a,b){if(a){if(a.constructor===a)throw Ye("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===Ze||a===$e||a===_e)throw Ye("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function Dc(a){return a.constant}function Ec(a,b,c,d){Bc(a,d);for(var e,f=b.split("."),g=0;f.length>1;g++){e=Ac(f.shift(),d);var h=Bc(a[e],d);h||(h={},a[e]=h),a=h}return e=Ac(f.shift(),d),Bc(a[e],d),a[e]=c,c}function Fc(a){return"constructor"==a}function Gc(a,b,d,e,f,g,h){Ac(a,g),Ac(b,g),Ac(d,g),Ac(e,g),Ac(f,g);var i=function(a){return Bc(a,g)},j=h||Fc(a)?i:p,k=h||Fc(b)?i:p,l=h||Fc(d)?i:p,m=h||Fc(e)?i:p,n=h||Fc(f)?i:p;return function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null==i?i:(i=j(i[a]),b?null==i?c:(i=k(i[b]),d?null==i?c:(i=l(i[d]),e?null==i?c:(i=m(i[e]),f?null==i?c:i=n(i[f]):i):i):i):i)}}function Hc(a,b){return function(c,d){return a(c,d,Bc,b)}}function Ic(a,b,d){var e=b.expensiveChecks,g=e?gf:ff,h=g[a];if(h)return h;var i=a.split("."),j=i.length;if(b.csp)h=6>j?Gc(i[0],i[1],i[2],i[3],i[4],d,e):function(a,b){var f,g=0;do f=Gc(i[g++],i[g++],i[g++],i[g++],i[g++],d,e)(a,b),b=c,a=f;while(j>g);return f};else{var k="";e&&(k+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=e;f(i,function(a,b){Ac(a,d);var c=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a;(e||Fc(a))&&(c="eso("+c+", fe)",l=!0),k+="if(s == null) return undefined;\ns="+c+";\n"}),k+="return s;";var m=new Function("s","l","eso","fe",k);m.toString=q(k),l&&(m=Hc(m,d)),h=m}return h.sharedGetter=!0,h.assign=function(b,c){return Ec(b,a,c,a)},g[a]=h,h}function Jc(a){return x(a.valueOf)?a.valueOf():hf.call(a)}function Kc(){var a=ib(),b=ib();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;return a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,b.assign=a.assign),b}function g(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e.constant||(e.inputs?g(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function h(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=Jc(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function i(a,b,c,d){var e,f=d.$$inputs||(d.$$inputs=g(d.inputs,[]));if(1===f.length){var i=h;return f=f[0],a.$watch(function(a){var b=f(a);return h(b,i)||(e=d(a),i=b&&Jc(b)),e},b,c)}for(var j=[],k=0,l=f.length;l>k;k++)j[k]=h;return a.$watch(function(a){for(var b=!1,c=0,g=f.length;g>c;c++){var i=f[c](a);(b||(b=!h(i,j[c])))&&(j[c]=i&&Jc(i))}return b&&(e=d(a)),e},b,c)}function j(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,x(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;return f(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a,x(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(h)&&g()})},c)}function l(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(){x(b)&&b.apply(this,arguments),e()},c)}function m(a,b){if(!b)return a;var c=function(c,d){var e=a(c,d),f=b(e,c,d);return s(e)||b.$stateful?f:e};return a.$$watchDelegate&&a.$$watchDelegate!==i?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=i,c.inputs=[a]),c}var n={csp:d.csp,expensiveChecks:!1},p={csp:d.csp,expensiveChecks:!0};return function(d,f,g){var h,q,r;switch(typeof d){case"string":r=d=d.trim();var s=g?b:a;if(h=s[r],!h){":"===d.charAt(0)&&":"===d.charAt(1)&&(q=!0,d=d.substring(2));var t=g?p:n,u=new df(t),v=new ef(u,c,t);h=v.parse(d),h.constant?h.$$watchDelegate=l:q?(h=e(h),h.$$watchDelegate=h.literal?k:j):h.inputs&&(h.$$watchDelegate=i),s[r]=h}return m(h,f);case"function":return m(d,f);default:return m(o,f)}}}]}function Lc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Nc(function(b){a.$evalAsync(b)},b)}]}function Mc(){this.$get=["$browser","$exceptionHandler",function(a,b){return Nc(function(b){a.defer(b)},b)}]}function Nc(a,b){function e(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function g(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function i(a){var d,e,f;f=a.pending,a.processScheduled=!1,a.pending=c;for(var g=0,h=f.length;h>g;++g){e=f[g][0],d=f[g][a.status];try{x(d)?e.resolve(d(a.value)):1===a.status?e.resolve(a.value):e.reject(a.value)}catch(i){e.reject(i),b(i)}}}function j(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){i(b)}))}function k(){this.promise=new g,this.resolve=h(this,this.resolve),this.reject=h(this,this.reject),this.notify=h(this,this.notify)}function l(a){var b=new k,c=0,d=be(a)?[]:{};return f(a,function(a,e){c++,r(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var m=d("$q",TypeError),n=function(){return new k};g.prototype={then:function(a,b,c){var d=new k;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&j(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}},k.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){var c,d;d=e(this,this.$$resolve,this.$$reject);try{(t(a)||x(a))&&(c=a&&a.then),x(c)?(this.promise.$$state.status=-1,c.call(a,d[0],d[1],this.notify)):(this.promise.$$state.value=a,this.promise.$$state.status=1,j(this.promise.$$state))}catch(f){d[1](f),b(f)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,j(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(x(a)?a(c):c)}catch(h){b(h)}}})}};var o=function(a){var b=new k;return b.reject(a),b.promise},p=function(a,b){var c=new k;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{x(c)&&(d=c())}catch(e){return p(e,!1)}return E(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},r=function(a,b,c,d){var e=new k;return e.resolve(a),e.promise.then(b,c,d)},s=function u(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!x(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);if(!(this instanceof u))return new u(a);var d=new k;return a(b,c),d.promise};return s.defer=n,s.reject=o,s.when=r,s.all=l,s}function Oc(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function Pc(){var a=10,b=d("$rootScope"),c=null,g=null;this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,h,i,k){function l(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function m(a){if(v.$$phase)throw b("inprog","{0} already in progress",v.$$phase);v.$$phase=a}function n(){v.$$phase=null}function p(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function q(){}function s(){for(;z.length;)try{z.shift()()}catch(a){h(a)}g=null}function u(){null===g&&(g=k.defer(function(){v.$apply(s)}))}l.prototype={constructor:l,$new:function(a,b){function c(){d.$$destroyed=!0}var d;return b=b||this,a?(d=new l,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=j(),this.$$ChildScope=null},this.$$ChildScope.prototype=this),d=new this.$$ChildScope),d.$parent=b,d.$$prevSibling=b.$$childTail,b.$$childHead?(b.$$childTail.$$nextSibling=d,b.$$childTail=d):b.$$childHead=b.$$childTail=d,(a||b!=this)&&d.$on("$destroy",c),d},$watch:function(a,b,d){var e=i(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,d,e);var f=this,g=f.$$watchers,h={fn:b,last:q,get:e,exp:a,eq:!!d};return c=null,x(b)||(h.fn=o),g||(g=f.$$watchers=[]),g.unshift(h),function(){I(g,h),c=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(e,e,h)):b(e,d,h)}var d=new Array(a.length),e=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(e,e,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a,d[b]=f,i||(i=!0,h.$evalAsync(c))});g.push(f)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function c(a){f=a;var b,c,d,h,i;if(!r(f)){if(t(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],d=i!==i&&h!==h,d||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(c in f)f.hasOwnProperty(c)&&(b++,h=f[c],i=g[c],c in g?(d=i!==i&&h!==h,d||i===h||(l++,g[c]=h)):(q++,g[c]=h,l++));if(q>b){l++;for(c in g)f.hasOwnProperty(c)||(q--,delete g[c])}}else g!==f&&(g=f,l++);return l}}function d(){if(p?(p=!1,b(f,f,j)):b(f,h,j),k)if(t(f))if(e(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var c in f)Nd.call(f,c)&&(h[c]=f[c])}else h=f}c.$stateful=!0;var f,g,h,j=this,k=b.length>1,l=0,m=i(a,c),n=[],o={},p=!0,q=0;return this.$watch(m,d)},$digest:function(){var d,e,f,i,j,l,o,p,r,t,u,z=a,A=this,B=[];m("$digest"),k.$$checkUrlChange(),this===v&&null!==g&&(k.defer.cancel(g),s()),c=null;do{for(l=!1,p=A;w.length;){try{u=w.shift(),u.scope.$eval(u.expression)}catch(C){h(C)}c=null}a:do{if(i=p.$$watchers)for(j=i.length;j--;)try{if(d=i[j])if((e=d.get(p))===(f=d.last)||(d.eq?L(e,f):"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))){if(d===c){l=!1;break a}}else l=!0,c=d,d.last=d.eq?J(e,null):e,d.fn(e,f===q?e:f,p),5>z&&(r=4-z,B[r]||(B[r]=[]),t=x(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,t+="; newVal: "+Q(e)+"; oldVal: "+Q(f),B[r].push(t))}catch(C){h(C)}if(!(o=p.$$childHead||p!==A&&p.$$nextSibling))for(;p!==A&&!(o=p.$$nextSibling);)p=p.$parent}while(p=o);if((l||w.length)&&!z--)throw n(),b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",a,Q(B))}while(l||w.length);for(n();y.length;)try{y.shift()()}catch(C){h(C)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==v){for(var b in this.$$listenerCount)p(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=o,this.$on=this.$watch=this.$watchGroup=function(){return o},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return i(a)(this,b)},$evalAsync:function(a){v.$$phase||w.length||k.defer(function(){w.length&&v.$digest()}),w.push({scope:this,expression:a})},$$postDigest:function(a){y.push(a)},$apply:function(a){try{return m("$apply"),this.$eval(a)}catch(b){h(b)}finally{n();try{v.$digest()}catch(b){throw h(b),b}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&z.push(b),u()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,p(e,1,a))}},$emit:function(a){var b,c,d,e=[],f=this,g=!1,i={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},j=M([i],arguments,1);do{for(b=f.$$listeners[a]||e,i.currentScope=f,c=0,d=b.length;d>c;c++)if(b[c])try{b[c].apply(null,j)}catch(k){h(k)}else b.splice(c,1),c--,d--;if(g)return i.currentScope=null,i;f=f.$parent}while(f);return i.currentScope=null,i},$broadcast:function(a){var b=this,c=b,d=b,e={name:a,targetScope:b,preventDefault:function(){e.defaultPrevented=!0},defaultPrevented:!1};if(!b.$$listenerCount[a])return e;for(var f,g,i,j=M([e],arguments,1);c=d;){for(e.currentScope=c,f=c.$$listeners[a]||[],g=0,i=f.length;i>g;g++)if(f[g])try{f[g].apply(null,j)}catch(k){h(k)}else f.splice(g,1),g--,i--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==b&&c.$$nextSibling))for(;c!==b&&!(d=c.$$nextSibling);)c=c.$parent}return e.currentScope=null,e}};var v=new l,w=v.$$asyncQueue=[],y=v.$$postDigestQueue=[],z=v.$$applyAsyncQueue=[];return v}]}function Qc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=Zc(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function Rc(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw jf("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=de(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw jf("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Sc(a){var b=[];return s(a)&&f(a,function(a){b.push(Rc(a))}),b}function Tc(){this.SCE_CONTEXTS=kf;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Sc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Sc(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?$c(b):!!a.exec(b.href)}function f(c){var d,f,g=Zc(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw jf("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw jf("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===kf.RESOURCE_URL){if(f(b))return b;throw jf("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===kf.HTML)return k(b);throw jf("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(){throw jf("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[kf.HTML]=g(l),m[kf.CSS]=g(l),m[kf.URL]=g(l),m[kf.JS]=g(l),m[kf.RESOURCE_URL]=g(m[kf.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function Uc(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>Rd)throw jf("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=K(kf);d.isEnabled=function(){return a},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=p),d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;return f(kf,function(a,b){var c=Md(b);d[mb("parse_as_"+c)]=function(b){return e(a,b)},d[mb("get_trusted_"+c)]=function(b){return g(a,b)},d[mb("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function Vc(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(Md((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=/^(Moz|webkit|ms)(?=[A-Z])/,j=h.body&&h.body.style,k=!1,l=!1;if(j){for(var n in j)if(d=i.exec(n)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in j&&"webkit"),k=!!("transition"in j||c+"Transition"in j),l=!!("animation"in j||c+"Animation"in j),!f||k&&l||(k=u(h.body.style.webkitTransition),l=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hasEvent:function(a){if("input"==a&&9==Rd)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:ee(),vendorPrefix:c,transitions:k,animations:l,android:f}}]}function Wc(){this.$get=["$templateCache","$http","$q",function(a,b,c){function d(e,f){function g(){if(h.totalPendingRequests--,!f)throw Me("tpload","Failed to load template: {0}",e);return c.reject()}var h=d;h.totalPendingRequests++;var i=b.defaults&&b.defaults.transformResponse;if(be(i)){var j=i;i=[];for(var k=0;k<j.length;++k){var l=j[k];l!==ac&&i.push(l)}}else i===ac&&(i=null);var m={cache:a,transformResponse:i};return b.get(e,m).then(function(b){var c=b.data;return h.totalPendingRequests--,a.put(e,c),c},g)}return d.totalPendingRequests=0,d}]}function Xc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return f(d,function(a){var d=$d.element(a).data("$binding");d&&f(d,function(d){if(c){var f=new RegExp("(^|\\s)"+de(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)
}else-1!=d.indexOf(b)&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}function Yc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){var j,k=s(i)&&!i,l=(k?d:c).defer(),m=l.promise;return j=b.defer(function(){try{l.resolve(f())}catch(b){l.reject(b),e(b)}finally{delete g[m.$$timeoutId]}k||a.$apply()},h),m.$$timeoutId=j,g[j]=l,m}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function Zc(a){var b=a;return Rd&&(lf.setAttribute("href",b),b=lf.href),lf.setAttribute("href",b),{href:lf.href,protocol:lf.protocol?lf.protocol.replace(/:$/,""):"",host:lf.host,search:lf.search?lf.search.replace(/^\?/,""):"",hash:lf.hash?lf.hash.replace(/^#/,""):"",hostname:lf.hostname,port:lf.port,pathname:"/"===lf.pathname.charAt(0)?lf.pathname:"/"+lf.pathname}}function $c(a){var b=u(a)?Zc(a):a;return b.protocol===mf.protocol&&b.host===mf.host}function _c(){this.$get=q(a)}function ad(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",cd),b("date",nd),b("filter",bd),b("json",od),b("limitTo",pd),b("lowercase",rf),b("number",dd),b("orderBy",qd),b("uppercase",sf)}function bd(){return function(a,b,c){if(!be(a))return a;var d=typeof c,e=[];e.check=function(a,b){for(var c=0;c<e.length;c++)if(!e[c](a,b))return!1;return!0},"function"!==d&&(c="boolean"===d&&c?function(a,b){return $d.equals(a,b)}:function(a,b){if(a&&b&&"object"==typeof a&&"object"==typeof b){for(var d in a)if("$"!==d.charAt(0)&&Nd.call(a,d)&&c(a[d],b[d]))return!0;return!1}return b=(""+b).toLowerCase(),(""+a).toLowerCase().indexOf(b)>-1});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case"array":for(var e=0;e<a.length;e++)if(f(a[e],b))return!0;return!1;default:return!1}};switch(typeof b){case"boolean":case"number":case"string":b={$:b};case"object":for(var g in b)!function(a){"undefined"!=typeof b[a]&&e.push(function(c){return f("$"==a?c:c&&c[a],b[a])})}(g);break;case"function":e.push(b);break;default:return a}for(var h=[],i=0;i<a.length;i++){var j=a[i];e.check(j,i)&&h.push(j)}return h}}function cd(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=2),null==a?a:ed(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function dd(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:ed(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function ed(a,b,c,d,e){if(!isFinite(a)||t(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?(g="0",a=0):(h=g,j=!0)}if(j)e>0&&a>-1&&1>a&&(h=a.toFixed(e));else{var l=(g.split(nf)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e),0===a&&(f=!1);var m=(""+a).split(nf),n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,s=b.gSize;if(n.length>=q+s)for(p=n.length-q,o=0;p>o;o++)(p-o)%s===0&&0!==o&&(h+=c),h+=n.charAt(o);for(o=p;o<n.length;o++)(n.length-o)%q===0&&0!==o&&(h+=c),h+=n.charAt(o);for(;m.length<e;)m+="0";e&&"0"!==e&&(h+=d+m.substr(0,e))}return i.push(f?b.negPre:b.posPre),i.push(h),i.push(f?b.negSuf:b.posSuf),i.join("")}function fd(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function gd(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),fd(f,b,d)}}function hd(a,b){return function(c,d){var e=c["get"+a](),f=Od(b?"SHORT"+a:a);return d[f][e]}}function id(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=fd(Math[b>0?"floor":"ceil"](b/60),2)+fd(Math.abs(b%60),2)}function jd(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function kd(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function ld(a){return function(b){var c=jd(b.getFullYear()),d=kd(b),e=+d-+c,f=1+Math.round(e/6048e5);return fd(f,a)}}function md(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function nd(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g,h,i="",j=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=qf.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)h=pf.exec(d),h?(j=M(j,h,1),d=j.pop()):(j.push(d),d=null);return e&&"UTC"===e&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+c.getTimezoneOffset())),f(j,function(b){g=of[b],i+=g?g(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function od(){return function(a){return Q(a,!0)}}function pd(){return function(a,b){if(v(a)&&(a=a.toString()),!be(a)&&!u(a))return a;if(b=1/0===Math.abs(Number(b))?Number(b):m(b),u(a))return b?b>=0?a.slice(0,b):a.slice(b,a.length):"";var c,d,e=[];for(b>a.length?b=a.length:b<-a.length&&(b=-a.length),b>0?(c=0,d=b):(c=a.length+b,d=a.length);d>c;c++)e.push(a[c]);return e}}function qd(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return b?function(b,c){return a(c,b)}:a}function h(a,b){var c=typeof a,d=typeof b;return c==d?(w(a)&&w(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}if(!e(b))return b;c=be(c)?c:[c],0===c.length&&(c=["+"]),c=c.map(function(b){var c=!1,d=b||p;if(u(b)){if(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),""===b)return g(function(a,b){return h(a,b)},c);if(d=a(b),d.constant){var e=d();return g(function(a,b){return h(a[e],b[e])},c)}}return g(function(a,b){return h(d(a),d(b))},c)});for(var i=[],j=0;j<b.length;j++)i.push(b[j]);return i.sort(g(f,d))}}function rd(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function sd(a,b){a.$name=b}function td(a,b,d,e,g){var h=this,i=[],j=h.$$parentForm=a.parent().controller("form")||vf;h.$error={},h.$$success={},h.$pending=c,h.$name=g(b.name||b.ngForm||"")(d),h.$dirty=!1,h.$pristine=!0,h.$valid=!0,h.$invalid=!1,h.$submitted=!1,j.$addControl(h),h.$rollbackViewValue=function(){f(i,function(a){a.$rollbackViewValue()})},h.$commitViewValue=function(){f(i,function(a){a.$commitViewValue()})},h.$addControl=function(a){fb(a.$name,"input"),i.push(a),a.$name&&(h[a.$name]=a)},h.$$renameControl=function(a,b){var c=a.$name;h[c]===a&&delete h[c],h[b]=a,a.$name=b},h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name],f(h.$pending,function(b,c){h.$setValidity(c,null,a)}),f(h.$error,function(b,c){h.$setValidity(c,null,a)}),I(i,a)},Hd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(I(d,c),0===d.length&&delete a[b])},parentForm:j,$animate:e}),h.$setDirty=function(){e.removeClass(a,Pf),e.addClass(a,Qf),h.$dirty=!0,h.$pristine=!1,j.$setDirty()},h.$setPristine=function(){e.setClass(a,Pf,Qf+" "+wf),h.$dirty=!1,h.$pristine=!0,h.$submitted=!1,f(i,function(a){a.$setPristine()})},h.$setUntouched=function(){f(i,function(a){a.$setUntouched()})},h.$setSubmitted=function(){e.addClass(a,wf),h.$submitted=!0,j.$setSubmitted()}}function ud(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function vd(a,b,c,d,e,f){wd(a,b,c,d,e,f),ud(d)}function wd(a,b,c,d,e,f){var g=b[0].placeholder,h={},i=Md(b[0].type);if(!e.android){var j=!1;b.on("compositionstart",function(){j=!0}),b.on("compositionend",function(){j=!1,k()})}var k=function(a){if(!j){var e=b.val(),f=a&&a.type;if(Rd&&"input"===(a||h).type&&b[0].placeholder!==g)return void(g=b[0].placeholder);"password"===i||c.ngTrim&&"false"===c.ngTrim||(e=ce(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,f)}};if(e.hasEvent("input"))b.on("input",k);else{var l,m=function(a){l||(l=f.defer(function(){k(a),l=null}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||m(a)}),e.hasEvent("paste")&&b.on("paste cut",m)}b.on("change",k),d.$render=function(){b.val(d.$isEmpty(d.$modelValue)?"":d.$viewValue)}}function xd(a,b){if(w(a))return a;if(u(a)){Gf.lastIndex=0;var c=Gf.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=jd(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return 0/0}function yd(a,b){return function(c,d){var e,g;if(w(c))return c;if(u(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),Af.test(c))return new Date(c);if(a.lastIndex=0,e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return 0/0}}function zd(a,b,d,e){return function(f,g,h,i,j,k,l){function m(a){return s(a)?w(a)?a:d(a):c}Ad(f,g,h,i),wd(f,g,h,i,j,k);var n,o=i&&i.$options&&i.$options.timezone;if(i.$$parserName=a,i.$parsers.push(function(a){if(i.$isEmpty(a))return null;if(b.test(a)){var e=d(a,n);return"UTC"===o&&e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}return c}),i.$formatters.push(function(a){if(!i.$isEmpty(a)){if(!w(a))throw Kf("datefmt","Expected `{0}` to be a date",a);if(n=a,n&&"UTC"===o){var b=6e4*n.getTimezoneOffset();n=new Date(n.getTime()+b)}return l("date")(a,e,o)}return n=null,""}),s(h.min)||h.ngMin){var p;i.$validators.min=function(a){return i.$isEmpty(a)||r(p)||d(a)>=p},h.$observe("min",function(a){p=m(a),i.$validate()})}if(s(h.max)||h.ngMax){var q;i.$validators.max=function(a){return i.$isEmpty(a)||r(q)||d(a)<=q},h.$observe("max",function(a){q=m(a),i.$validate()})}i.$isEmpty=function(a){return!a||a.getTime&&a.getTime()!==a.getTime()}}}function Ad(a,b,d,e){var f=b[0],g=e.$$hasNativeValidators=t(f.validity);g&&e.$parsers.push(function(a){var d=b.prop(Ld)||{};return d.badInput&&!d.typeMismatch?c:a})}function Bd(a,b,d,e,f,g){if(Ad(a,b,d,e),wd(a,b,d,e,f,g),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:Df.test(a)?parseFloat(a):c}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!v(a))throw Kf("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),d.min||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||r(h)||a>=h},d.$observe("min",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),h=v(a)&&!isNaN(a)?a:c,e.$validate()})}if(d.max||d.ngMax){var i;e.$validators.max=function(a){return e.$isEmpty(a)||r(i)||i>=a},d.$observe("max",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),i=v(a)&&!isNaN(a)?a:c,e.$validate()})}}function Cd(a,b,c,d,e,f){wd(a,b,c,d,e,f),ud(d),d.$$parserName="url",d.$validators.url=function(a){return d.$isEmpty(a)||Bf.test(a)}}function Dd(a,b,c,d,e,f){wd(a,b,c,d,e,f),ud(d),d.$$parserName="email",d.$validators.email=function(a){return d.$isEmpty(a)||Cf.test(a)}}function Ed(a,b,c,d){r(c.name)&&b.attr("name",j());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function Fd(a,b,c,e,f){var g;if(s(e)){if(g=a(e),!g.constant)throw d("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,e);return g(b)}return f}function Gd(a,b,c,d,e,f,g,h){var i=Fd(h,a,"ngTrueValue",c.ngTrueValue,!0),j=Fd(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a!==i},d.$formatters.push(function(a){return L(a,i)}),d.$parsers.push(function(a){return a?i:j})}function Hd(a){function b(a,b,i){b===c?d("$pending",a,i):e("$pending",a,i),D(b)?b?(l(h.$error,a,i),k(h.$$success,a,i)):(k(h.$error,a,i),l(h.$$success,a,i)):(l(h.$error,a,i),l(h.$$success,a,i)),h.$pending?(f(Tf,!0),h.$valid=h.$invalid=c,g("",null)):(f(Tf,!1),h.$valid=Id(h.$error),h.$invalid=!h.$valid,g("",h.$valid));var j;j=h.$pending&&h.$pending[a]?c:h.$error[a]?!1:h.$$success[a]?!0:null,g(a,j),m.$setValidity(a,j,h)}function d(a,b,c){h[a]||(h[a]={}),k(h[a],b,c)}function e(a,b,d){h[a]&&l(h[a],b,d),Id(h[a])&&(h[a]=c)}function f(a,b){b&&!j[a]?(n.addClass(i,a),j[a]=!0):!b&&j[a]&&(n.removeClass(i,a),j[a]=!1)}function g(a,b){a=a?"-"+bb(a,"-"):"",f(Nf+a,b===!0),f(Of+a,b===!1)}var h=a.ctrl,i=a.$element,j={},k=a.set,l=a.unset,m=a.parentForm,n=a.$animate;j[Of]=!(j[Nf]=i.hasClass(Nf)),h.$setValidity=b}function Id(a){if(a)for(var b in a)return!1;return!0}function Jd(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){if(be(a))return a;if(u(a))return a.split(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}return a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||{},d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);e=l(e,1),f=l(f,-1),e&&e.length&&c.addClass(h,e),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!L(a,o)){var d=e(o);m(d,c)}}else j(c)}o=K(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}var Kd=/^\/(.+)\/([a-z]*)$/,Ld="validity",Md=function(a){return u(a)?a.toLowerCase():a},Nd=Object.prototype.hasOwnProperty,Od=function(a){return u(a)?a.toUpperCase():a},Pd=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},Qd=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Md=Pd,Od=Qd);var Rd,Sd,Td,Ud,Vd=[].slice,Wd=[].splice,Xd=[].push,Yd=Object.prototype.toString,Zd=d("ng"),$d=a.angular||(a.angular={}),_d=0;Rd=b.documentMode,o.$inject=[],p.$inject=[];var ae,be=Array.isArray,ce=function(a){return u(a)?a.trim():a},de=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},ee=function(){if(s(ee.isActive_))return ee.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return ee.isActive_=a},fe=["ng-","data-ng-","ng:","x-ng-"],ge=/[A-Z]/g,he=!1,ie=1,je=3,ke=8,le=9,me=11,ne={full:"1.3.2",major:1,minor:3,dot:2,codeName:"cardiovasculatory-magnification"};rb.expando="ng339";var oe=rb.cache={},pe=1,qe=function(a,b,c){a.addEventListener(b,c,!1)},re=function(a,b,c){a.removeEventListener(b,c,!1)};rb._data=function(a){return this.cache[a[this.expando]]||{}};var se=/([\:\-\_]+(.))/g,te=/^moz([A-Z])/,ue={mouseleave:"mouseout",mouseenter:"mouseover"},ve=d("jqLite"),we=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,xe=/<|&#?\w+;/,ye=/<([\w:]+)/,ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ae={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ae.optgroup=Ae.option,Ae.tbody=Ae.tfoot=Ae.colgroup=Ae.caption=Ae.thead,Ae.th=Ae.td;var Be=rb.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),rb(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return Sd(a>=0?this[a]:this[this.length+a])},length:0,push:Xd,sort:[].sort,splice:[].splice},Ce={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Ce[Md(a)]=a});var De={};f("input,select,option,textarea,button,form,details".split(","),function(a){De[a]=!0});var Ee={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};f({data:xb,removeData:vb},function(a,b){rb[b]=a}),f({data:xb,inheritedData:Db,scope:function(a){return Sd.data(a,"$scope")||Db(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Sd.data(a,"$isolateScope")||Sd.data(a,"$isolateScopeNoTemplate")},controller:Cb,injector:function(a){return Db(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:yb,css:function(a,b,c){return b=mb(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,d){var e=Md(b);if(Ce[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?c:f}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===ie||c===je?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===H(a)){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(tb(a,!0),void(a.innerHTML=b))},empty:Eb},function(a,b){rb.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Eb&&(2==a.length&&a!==yb&&a!==Cb?b:d)===c){if(t(b)){for(e=0;g>e;e++)if(a===xb)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:vb,on:function Jg(a,b,c,d){if(s(d))throw ve("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ob(a)){var e=wb(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Jb(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length;i--;){b=h[i];var j=f[b];j||(f[b]=[],"mouseenter"===b||"mouseleave"===b?Jg(a,ue[b],function(a){var c=this,d=a.relatedTarget;(!d||d!==c&&!c.contains(d))&&g(a,b)}):"$destroy"!==b&&qe(a,b,g),j=f[b]),j.push(c)}}},off:ub,one:function(a,b,c){a=Sd(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;tb(a),f(new rb(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){a.nodeType===ie&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===ie||c===me){b=new rb(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===ie){var c=a.firstChild;f(new rb(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=Sd(b).eq(0).clone()[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:Fb,detach:function(a){Fb(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new rb(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Ab,removeClass:zb,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;r(d)&&(d=!yb(a,b)),(d?Ab:zb)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==me?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:sb,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=wb(a),j=i&&i.events,k=j&&j[h];k&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:o,type:h,target:a},b.type&&(d=l(d,b)),e=K(k),g=c?[d].concat(c):[d],f(e,function(b){d.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){rb.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=Sd(e))):Bb(e,a(this[f],b,c,d));return s(e)?e:this},rb.prototype.bind=rb.prototype.on,rb.prototype.unbind=rb.prototype.off}),Lb.prototype={put:function(a,b){this[Kb(a,this.nextUid)]=b},get:function(a){return this[Kb(a,this.nextUid)]},remove:function(a){var b=this[a=Kb(a,this.nextUid)];return delete this[a],b}};var Fe=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Ge=/,/,He=/^\s*(_?)(\S+?)\1\s*$/,Ie=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Je=d("$injector");Ob.$$annotate=Nb;var Ke=d("$animate"),Le=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw Ke("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(a,b,c){function d(b){var d,e=a.defer();return e.promise.$$cancelFn=function(){d&&d()},c.$$postDigest(function(){d=b(function(){e.resolve()})}),e.promise}function e(a,b){var c=[],d=[],e=ib();return f((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0}),f(b,function(a,b){var f=e[b];a===!1&&f?d.push(b):a!==!0||f||c.push(b)}),c.length+d.length>0&&[c.length?c:null,d.length?d:null]}function g(a,b,c){for(var d=0,e=b.length;e>d;++d){var f=b[d];a[f]=c}}function h(){return j||(j=a.defer(),b(function(){j.resolve(),j=null})),j.promise}function i(a,b){if($d.isObject(b)){var c=l(b.from||{},b.to||{});a.css(c)}}var j;return{animate:function(a,b,c){return i(a,{from:b,to:c}),h()},enter:function(a,b,c,d){return i(a,d),c?c.after(a):b.prepend(a),h()},leave:function(a){return a.remove(),h()},move:function(a,b,c,d){return this.enter(a,b,c,d)},addClass:function(a,b,c){return this.setClass(a,b,[],c)},$$addClassImmediately:function(a,b,c){return a=Sd(a),b=u(b)?b:be(b)?b.join(" "):"",f(a,function(a){Ab(a,b)}),i(a,c),h()},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},$$removeClassImmediately:function(a,b,c){return a=Sd(a),b=u(b)?b:be(b)?b.join(" "):"",f(a,function(a){zb(a,b)}),i(a,c),h()},setClass:function(a,b,c,f){var h=this,i="$$animateClasses",j=!1;a=Sd(a);var k=a.data(i);k?f&&k.options&&(k.options=$d.extend(k.options||{},f)):(k={classes:{},options:f},j=!0);var l=k.classes;return b=be(b)?b:b.split(" "),c=be(c)?c:c.split(" "),g(l,b,!0),g(l,c,!1),j&&(k.promise=d(function(b){var c=a.data(i);if(a.removeData(i),c){var d=e(a,c.classes);d&&h.$$setClassImmediately(a,d[0],d[1],c.options)}b()}),a.data(i,k)),k.promise},$$setClassImmediately:function(a,b,c,d){return b&&this.$$addClassImmediately(a,b),c&&this.$$removeClassImmediately(a,c),i(a,d),h()},enabled:o,cancel:o}}]}],Me=d("$compile");Vb.$inject=["$provide","$$sanitizeUriProvider"];var Ne=/^((?:x|data)[\:\-_])/i,Oe="application/json",Pe={"Content-Type":Oe+";charset=utf-8"},Qe=/^\s*(\[|\{[^\{])/,Re=/[\}\]]\s*$/,Se=/^\)\]\}',?\n/,Te=d("$interpolate"),Ue=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Ve={http:80,https:443,ftp:21},We=d("$location"),Xe={$$html5:!1,$$replace:!1,absUrl:wc("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=Ue.exec(a);return b[1]&&this.path(decodeURIComponent(b[1])),(b[2]||b[1])&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:wc("$$protocol"),host:wc("$$host"),port:wc("$$port"),path:xc("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=U(a);else{if(!t(a))throw We("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=J(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:xc("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};f([vc,uc,tc],function(a){a.prototype=Object.create(Xe),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==tc||!this.$$html5)throw We("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var Ye=d("$parse"),Ze=Function.prototype.call,$e=Function.prototype.apply,_e=Function.prototype.bind,af=ib();f({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(a,b){a.constant=a.literal=a.sharedGetter=!0,af[b]=a}),af["this"]=function(a){return a},af["this"].sharedGetter=!0;var bf=l(ib(),{"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"!":function(a,b,c){return!c(a,b)},"=":!0,"|":!0}),cf={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},df=function(a){this.options=a};df.prototype={constructor:df,lex:function(a){for(this.text=a,this.index=0,this.ch=c,this.tokens=[];this.index<this.text.length;)if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else if(this.isWhitespace(this.ch))this.index++;else{var b=this.ch+this.peek(),d=b+this.peek(2),e=bf[this.ch],f=bf[b],g=bf[d];g?(this.tokens.push({index:this.index,text:d,fn:g}),this.index+=3):f?(this.tokens.push({index:this.index,text:b,fn:f}),this.index+=2):e?(this.tokens.push({index:this.index,text:this.ch,fn:e}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||""===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw Ye("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Md(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a=1*a,this.tokens.push({index:b,text:a,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a,b,d,e,f=this.text,g="",h=this.index;this.index<this.text.length&&(e=this.text.charAt(this.index),"."===e||this.isIdent(e)||this.isNumber(e));)"."===e&&(a=this.index),g+=e,this.index++;if(a&&"."===g[g.length-1]&&(this.index--,g=g.slice(0,-1),a=g.lastIndexOf("."),-1===a&&(a=c)),a)for(b=this.index;b<this.text.length;){if(e=this.text.charAt(b),"("===e){d=g.substr(a-h+1),g=g.substr(0,a-h),this.index=b;break}if(!this.isWhitespace(e))break;b++}this.tokens.push({index:h,text:g,fn:af[g]||Ic(g,this.options,f)}),d&&(this.tokens.push({index:a,text:"."}),this.tokens.push({index:a+1,text:d}))},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=cf[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,string:c,constant:!0,fn:function(){return c}});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var ef=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};ef.ZERO=l(function(){return 0},{sharedGetter:!0,constant:!0}),ef.prototype={constructor:ef,parse:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();a=b.fn,a||this.throwError("not a primary expression",b),b.constant&&(a.constant=!0,a.literal=!0)}for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw Ye("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw Ye("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){if(this.tokens.length>0){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!a&&!b&&!c&&!d)return e}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,b){return l(function(c,d){return a(c,d,b)},{constant:b.constant,inputs:[b]})},binaryFn:function(a,b,c,d){return l(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant,inputs:!d&&[a,c]})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0,f=a.length;f>e;e++)d=a[e](b,c);return d}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},filter:function(a){var b,d,e=this.expect(),f=this.$filter(e.text);if(this.peek(":"))for(b=[],d=[];this.expect(":");)b.push(this.expression());
var g=[a].concat(b||[]);return l(function(e,g){var h=a(e,g);if(d){d[0]=h;for(var i=b.length;i--;)d[i+1]=b[i](e,g);return f.apply(c,d)}return f(h)},{constant:!f.$stateful&&g.every(Dc),inputs:!f.$stateful&&g})},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),l(function(b,d){return c.assign(b,a(b,d),d)},{inputs:[c,a]})):c},ternary:function(){var a,b,c=this.logicalOR();if(b=this.expect("?")){if(a=this.assignment(),b=this.expect(":")){var d=this.assignment();return l(function(b,e){return c(b,e)?a(b,e):d(b,e)},{constant:c.constant&&a.constant&&d.constant})}this.throwError("expected :",b)}return c},logicalOR:function(){for(var a,b=this.logicalAND();a=this.expect("||");)b=this.binaryFn(b,a.fn,this.logicalAND(),!0);return b},logicalAND:function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND(),!0)),b},equality:function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},relational:function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(ef.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var b=this.text,c=this.expect().text,d=Ic(c,this.options,b);return l(function(b,c,e){return d(e||a(b,c))},{assign:function(d,e,f){var g=a(d,f);return g||a.assign(d,g={}),Ec(g,c,e,b)}})},objectIndex:function(a){var b=this.text,d=this.expression();return this.consume("]"),l(function(e,f){var g,h=a(e,f),i=d(e,f);return Ac(i,b),h?g=Bc(h[i],b):c},{assign:function(c,e,f){var g=Ac(d(c,f),b),h=Bc(a(c,f),b);return h||a.assign(c,h={}),h[g]=e}})},functionCall:function(a,b){var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var d=this.text,e=c.length?[]:null;return function(f,g){var h=b?b(f,g):f,i=a(f,g,h)||o;if(e)for(var j=c.length;j--;)e[j]=Bc(c[j](f,g),d);Bc(h,d),Cc(i,d);var k=i.apply?i.apply(h,e):i(e[0],e[1],e[2],e[3],e[4]);return Bc(k,d)}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;var b=this.expression();a.push(b)}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push(a[e](b,c));return d},{literal:!0,constant:a.every(Dc),inputs:a})},object:function(){var a=[],b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.expect();a.push(c.string||c.text),this.consume(":");var d=this.expression();b.push(d)}while(this.expect(","));return this.consume("}"),l(function(c,d){for(var e={},f=0,g=b.length;g>f;f++)e[a[f]]=b[f](c,d);return e},{literal:!0,constant:b.every(Dc),inputs:b})}};var ff=ib(),gf=ib(),hf=Object.prototype.valueOf,jf=d("$sce"),kf={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Me=d("$compile"),lf=b.createElement("a"),mf=Zc(a.location.href,!0);ad.$inject=["$provide"],cd.$inject=["$locale"],dd.$inject=["$locale"];var nf=".",of={yyyy:gd("FullYear",4),yy:gd("FullYear",2,0,!0),y:gd("FullYear",1),MMMM:hd("Month"),MMM:hd("Month",!0),MM:gd("Month",2,1),M:gd("Month",1,1),dd:gd("Date",2),d:gd("Date",1),HH:gd("Hours",2),H:gd("Hours",1),hh:gd("Hours",2,-12),h:gd("Hours",1,-12),mm:gd("Minutes",2),m:gd("Minutes",1),ss:gd("Seconds",2),s:gd("Seconds",1),sss:gd("Milliseconds",3),EEEE:hd("Day"),EEE:hd("Day",!0),a:md,Z:id,ww:ld(2),w:ld(1)},pf=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,qf=/^\-?\d+$/;nd.$inject=["$locale"];var rf=q(Md),sf=q(Od);qd.$inject=["$parse"];var tf=q({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref||b.name?void 0:function(a,b){var c="[object SVGAnimatedString]"===Yd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}),uf={};f(Ce,function(a,b){if("multiple"!=a){var c=Wb("ng-"+b);uf[c]=function(){return{restrict:"A",priority:100,link:function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(Ee,function(a,b){uf[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(Kd);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),f(["src","srcset","href"],function(a){var b=Wb("ng-"+a);uf[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Yd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(Rd&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var vf={$addControl:o,$$renameControl:sd,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o,$setSubmitted:o},wf="ng-submitted";td.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var xf=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:td,compile:function(a){return a.addClass(Pf).addClass(Nf),{pre:function(a,d,e,f){if(!("action"in e)){var g=function(b){a.$apply(function(){f.$commitViewValue(),f.$setSubmitted()}),b.preventDefault?b.preventDefault():b.returnValue=!1};qe(d[0],"submit",g),d.on("$destroy",function(){b(function(){re(d[0],"submit",g)},0,!1)})}var h=f.$$parentForm,i=f.$name;i&&(Ec(a,i,f,i),e.$observe(e.name?"name":"ngForm",function(b){i!==b&&(Ec(a,i,c,i),i=b,Ec(a,i,f,i),h.$$renameControl(f,i))})),d.on("$destroy",function(){h.$removeControl(f),i&&Ec(a,i,c,i),l(f,vf)})}}}};return d}]},yf=xf(),zf=xf(!0),Af=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Bf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Cf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Df=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Ef=/^(\d{4})-(\d{2})-(\d{2})$/,Ff=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Gf=/^(\d{4})-W(\d\d)$/,Hf=/^(\d{4})-(\d\d)$/,If=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Jf=/(\s+|^)default(\s+|$)/,Kf=new d("ngModel"),Lf={text:vd,date:zd("date",Ef,yd(Ef,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":zd("datetimelocal",Ff,yd(Ff,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:zd("time",If,yd(If,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:zd("week",Gf,xd,"yyyy-Www"),month:zd("month",Hf,yd(Hf,["yyyy","MM"]),"yyyy-MM"),number:Bd,url:Cd,email:Dd,radio:Ed,checkbox:Gd,hidden:o,button:o,submit:o,reset:o,file:o},Mf=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Lf[Md(g.type)]||Lf.text)(e,f,g,h[0],b,a,c,d)}}}}],Nf="ng-valid",Of="ng-invalid",Pf="ng-pristine",Qf="ng-dirty",Rf="ng-untouched",Sf="ng-touched",Tf="ng-pending",Uf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,g,h,i,j,k,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=c,this.$name=l(d.name||"",!1)(a);var m=g(d.ngModel),n=null,p=this,q=function(){var b=m(a);return p.$options&&p.$options.getterSetter&&x(b)&&(b=b()),b},t=function(){var b;p.$options&&p.$options.getterSetter&&x(b=m(a))?b(p.$modelValue):m.assign(a,p.$modelValue)};this.$$setOptions=function(a){if(p.$options=a,!(m.assign||a&&a.getterSetter))throw Kf("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,S(e))},this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var u=e.inheritedData("$formController")||vf,w=0;Hd({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},parentForm:u,$animate:h}),this.$setPristine=function(){p.$dirty=!1,p.$pristine=!0,h.removeClass(e,Qf),h.addClass(e,Pf)},this.$setUntouched=function(){p.$touched=!1,p.$untouched=!0,h.setClass(e,Rf,Sf)},this.$setTouched=function(){p.$touched=!0,p.$untouched=!1,h.setClass(e,Sf,Rf)},this.$rollbackViewValue=function(){i.cancel(n),p.$viewValue=p.$$lastCommittedViewValue,p.$render()},this.$validate=function(){v(p.$modelValue)&&isNaN(p.$modelValue)||this.$$parseAndValidate()},this.$$runValidators=function(a,b,d,e){function g(a){var b=p.$$parserName||"parse";if(a===c)j(b,null);else if(j(b,a),!a)return f(p.$validators,function(a,b){j(b,null)}),f(p.$asyncValidators,function(a,b){j(b,null)}),!1;return!0}function h(){var a=!0;return f(p.$validators,function(c,e){var f=c(b,d);a=a&&f,j(e,f)}),a?!0:(f(p.$asyncValidators,function(a,b){j(b,null)}),!1)}function i(){var a=[],e=!0;f(p.$asyncValidators,function(f,g){var h=f(b,d);if(!E(h))throw Kf("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",h);j(g,c),a.push(h.then(function(){j(g,!0)},function(){e=!1,j(g,!1)}))}),a.length?k.all(a).then(function(){l(e)},o):l(!0)}function j(a,b){m===w&&p.$setValidity(a,b)}function l(a){m===w&&e(a)}w++;var m=w;return g(a)&&h()?void i():void l(!1)},this.$commitViewValue=function(){var a=p.$viewValue;i.cancel(n),(p.$$lastCommittedViewValue!==a||""===a&&p.$$hasNativeValidators)&&(p.$$lastCommittedViewValue=a,p.$pristine&&(p.$dirty=!0,p.$pristine=!1,h.removeClass(e,Pf),h.addClass(e,Qf),u.$setDirty()),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function a(){p.$modelValue!==g&&p.$$writeModelToScope()}var b=p.$$lastCommittedViewValue,d=b,e=r(d)?c:!0;if(e)for(var f=0;f<p.$parsers.length;f++)if(d=p.$parsers[f](d),r(d)){e=!1;break}v(p.$modelValue)&&isNaN(p.$modelValue)&&(p.$modelValue=q());var g=p.$modelValue,h=p.$options&&p.$options.allowInvalid;h&&(p.$modelValue=d,a()),p.$$runValidators(e,d,b,function(b){h||(p.$modelValue=b?d:c,a())})},this.$$writeModelToScope=function(){t(p.$modelValue),f(p.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){p.$viewValue=a,(!p.$options||p.$options.updateOnDefault)&&p.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=p.$options;e&&s(e.debounce)&&(c=e.debounce,v(c)?d=c:v(c[b])?d=c[b]:v(c["default"])&&(d=c["default"])),i.cancel(n),d?n=i(function(){p.$commitViewValue()},d):j.$$phase?p.$commitViewValue():a.$apply(function(){p.$commitViewValue()})},a.$watch(function(){var a=q();if(a!==p.$modelValue){p.$modelValue=a;for(var b=p.$formatters,d=b.length,e=a;d--;)e=b[d](e);p.$viewValue!==e&&(p.$viewValue=p.$$lastCommittedViewValue=e,p.$render(),p.$$runValidators(c,a,e,o))}return a})}],Vf=function(){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Uf,priority:1,compile:function(a){return a.addClass(Pf).addClass(Rf).addClass(Nf),{pre:function(a,b,c,d){var e=d[0],f=d[1]||vf;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&f.$$renameControl(e,a)}),a.$on("$destroy",function(){f.$removeControl(e)})},post:function(a,b,c,d){var e=d[0];e.$options&&e.$options.updateOn&&b.on(e.$options.updateOn,function(a){e.$$debounceViewValueCommit(a&&a.type)}),b.on("blur",function(){e.$touched||a.$apply(function(){e.$setTouched()})})}}}}},Wf=q({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),Xf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a){return!c.required||!d.$isEmpty(a)},c.$observe("required",function(){d.$validate()}))}}},Yf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(f){var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){if(u(a)&&a.length>0&&(a=new RegExp(a)),a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,S(b));g=a||c,f.$validate()}),f.$validators.pattern=function(a){return f.$isEmpty(a)||r(g)||g.test(a)}}}}},Zf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("maxlength",function(a){e=m(a)||0,d.$validate()}),d.$validators.maxlength=function(a,b){return d.$isEmpty(a)||b.length<=e}}}}},$f=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=m(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(a)||b.length>=e}}}}},_f=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var g=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,i=h?ce(g):g,j=function(a){if(!r(a)){var b=[];return a&&f(a.split(i),function(a){a&&b.push(h?ce(a):a)}),b}};e.$parsers.push(j),e.$formatters.push(function(a){return be(a)?a.join(g):c}),e.$isEmpty=function(a){return!a||!a.length}}}},ag=/^(true|false|\d+)$/,bg=function(){return{restrict:"A",priority:100,compile:function(a,b){return ag.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},cg=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=a.$eval(b.ngModelOptions),this.$options.updateOn!==c?(this.$options.updateOnDefault=!1,this.$options.updateOn=ce(this.$options.updateOn.replace(Jf,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},dg=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,d,e){a.$$addBindingInfo(d,e.ngBind),d=d[0],b.$watch(e.ngBind,function(a){d.textContent=a===c?"":a})}}}}],eg=["$interpolate","$compile",function(a,b){return{compile:function(d){return b.$$addBindingClass(d),function(d,e,f){var g=a(e.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(e,g.expressions),e=e[0],f.$observe("ngBindTemplate",function(a){e.textContent=a===c?"":a})}}}}],fg=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],gg=Jd("",!0),hg=Jd("Odd",0),ig=Jd("Even",1),jg=rd({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),kg=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],lg={},mg={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Wb("ng-"+a);lg[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};mg[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var ng=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=hb(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],og=["$templateRequest","$anchorScroll","$animate","$sce",function(a,b,c,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:$d.noop,compile:function(e,f){var g=f.ngInclude||f.src,h=f.onload||"",i=f.autoscroll;return function(e,f,j,k,l){var m,n,o,p=0,q=function(){n&&(n.remove(),n=null),m&&(m.$destroy(),m=null),o&&(c.leave(o).then(function(){n=null}),n=o,o=null)};e.$watch(d.parseAsResourceUrl(g),function(d){var g=function(){!s(i)||i&&!e.$eval(i)||b()},j=++p;d?(a(d,!0).then(function(a){if(j===p){var b=e.$new();k.template=a;var i=l(b,function(a){q(),c.enter(a,null,f).then(g)});m=b,o=i,m.$emit("$includeContentLoaded",d),e.$eval(h)}},function(){j===p&&(q(),e.$emit("$includeContentError",d))}),e.$emit("$includeContentRequested",d)):(q(),k.template=null)})}}}}],pg=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return/SVG/.test(d[0].toString())?(d.empty(),void a(pb(f.template,b).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void a(d.contents())(c))}}}],qg=rd({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),rg=rd({terminal:!0,priority:1e3}),sg=["$locale","$interpolate",function(a,b){var c=/{}/g;return{restrict:"EA",link:function(d,e,g){var h=g.count,i=g.$attr.when&&e.attr(g.$attr.when),j=g.offset||0,k=d.$eval(i)||{},l={},m=b.startSymbol(),n=b.endSymbol(),o=/^when(Minus)?(.+)$/;f(g,function(a,b){o.test(b)&&(k[Md(b.replace("when","").replace("Minus","-"))]=e.attr(g.$attr[b]))}),f(k,function(a,d){l[d]=b(a.replace(c,m+h+"-"+j+n))}),d.$watch(function(){var b=parseFloat(d.$eval(h));return isNaN(b)?"":(b in k||(b=a.pluralCat(b-j)),l[b](d))},function(a){e.text(a)})}}}],tg=["$parse","$animate",function(a,g){var h="$$NG_REMOVED",i=d("ngRepeat"),j=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(d,m){var n=m.ngRepeat,o=b.createComment(" end ngRepeat: "+n+" "),p=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var q=p[1],r=p[2],s=p[3],t=p[4];if(p=q.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!p)throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var u=p[3]||p[1],v=p[2];if(s&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(s)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(s)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",s);var w,x,y,z,A={$id:Kb};return t?w=a(t):(y=function(a,b){return Kb(b)},z=function(a){return a}),function(a,b,d,m,p){w&&(x=function(b,c,d){return v&&(A[v]=b),A[u]=c,A.$index=d,w(a,A)});var q=ib();a.$watchCollection(r,function(d){var m,r,t,w,A,B,C,D,E,F,G,H,I=b[0],J=ib();if(s&&(a[s]=d),e(d))E=d,D=x||y;else{D=x||z,E=[];for(var K in d)d.hasOwnProperty(K)&&"$"!=K.charAt(0)&&E.push(K);E.sort()}for(w=E.length,G=new Array(w),m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],C=D(A,B,m),q[C])F=q[C],delete q[C],J[C]=F,G[m]=F;else{if(J[C])throw f(G,function(a){a&&a.scope&&(q[a.id]=a)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",n,C,Q(B));G[m]={id:C,scope:c,clone:c},J[C]=!0}for(var L in q){if(F=q[L],H=hb(F.clone),g.leave(H),H[0].parentNode)for(m=0,r=H.length;r>m;m++)H[m][h]=!0;F.scope.$destroy()}for(m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],F=G[m],F.scope){t=I;do t=t.nextSibling;while(t&&t[h]);k(F)!=t&&g.move(hb(F.clone),null,Sd(I)),I=l(F),j(F.scope,m,u,B,v,A,w)}else p(function(a,b){F.scope=b;var c=o.cloneNode(!1);a[a.length++]=c,g.enter(a,null,Sd(I)),I=c,F.clone=a,J[F.id]=F,j(F.scope,m,u,B,v,A,w)});q=J})}}}}],ug="ng-hide",vg="ng-hide-animate",wg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,ug,{tempClasses:vg})})}}}],xg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,ug,{tempClasses:vg})})}}}],yg=rd(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),zg=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=e.ngSwitch||e.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var d,e;for(d=0,e=k.length;e>d;++d)a.cancel(k[d]);for(k.length=0,d=0,e=l.length;e>d;++d){var h=hb(j[d].clone);l[d].$destroy();var n=k[d]=a.leave(h);n.then(m(k,d))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&f(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],Ag=rd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),Bg=rd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Cg=rd({restrict:"EAC",link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",S(b));f(function(a){b.empty(),b.append(a)})}}),Dg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Eg=d("ngOptions"),Fg=q({restrict:"A",terminal:!0}),Gg=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b,c){fb(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove()),c&&c[0].hasAttribute("selected")&&(c[0].selected=!0)},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue==a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Kb(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(z.parent()&&z.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){z.parent()&&z.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Lb(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){L(d,c.$viewValue)||(d=K(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,h,i){function j(a,c,d){return M[B]=d,E&&(M[E]=c),a(b,M)}function k(){b.$apply(function(){var a,c=H(b)||[];if(t)a=[],f(h.val(),function(b){b=J?K[b]:b,a.push(l(b,c[b]))});else{var d=J?K[h.val()]:h.val();a=l(d,c[d])}i.$setViewValue(a),r()})}function l(a,b){if("?"===a)return c;if(""===a)return null;var d=D?D:G;return j(d,a,b)}function m(){var a,c=H(b);if(c&&be(c)){a=new Array(c.length);for(var d=0,e=c.length;e>d;d++)a[d]=j(A,d,c[d]);return a}if(c){a={};for(var f in c)c.hasOwnProperty(f)&&(a[f]=j(A,f,c[f]))}return a}function n(a){var b;if(t)if(J&&be(a)){b=new Lb([]);for(var c=0;c<a.length;c++)b.put(j(J,null,a[c]),!0)}else b=new Lb(a);else J&&(a=j(J,null,a));return function(c,d){var e;return e=J?J:D?D:G,t?s(b.remove(j(e,c,d))):a===j(e,c,d)}}function o(){w||(b.$$postDigest(r),w=!0)}function q(a,b,c){a[b]=a[b]||0,a[b]+=c?1:-1}function r(){w=!1;var a,c,d,e,k,l,m,o,r,u,z,B,C,D,G,I,N,O={"":[]},P=[""],Q=i.$viewValue,R=H(b)||[],S=E?g(R):R,T={},U=n(Q),V=!1;for(K={},B=0;u=S.length,u>B;B++)m=B,E&&(m=S[B],"$"===m.charAt(0))||(o=R[m],a=j(F,m,o)||"",(c=O[a])||(c=O[a]=[],P.push(a)),C=U(m,o),V=V||C,I=j(A,m,o),I=s(I)?I:"",N=J?J(b,M):E?S[B]:B,J&&(K[N]=m),c.push({id:N,label:I,selected:C}));for(t||(v||null===Q?O[""].unshift({id:"",label:"",selected:!V}):V||O[""].unshift({id:"?",label:"",selected:!0})),z=0,r=P.length;r>z;z++){for(a=P[z],c=O[a],L.length<=z?(e={element:y.clone().attr("label",a),label:c.label},k=[e],L.push(k),h.append(e.element)):(k=L[z],e=k[0],e.label!=a&&e.element.attr("label",e.label=a)),D=null,B=0,u=c.length;u>B;B++)d=c[B],(l=k[B+1])?(D=l.element,l.label!==d.label&&(q(T,l.label,!1),q(T,d.label,!0),D.text(l.label=d.label)),l.id!==d.id&&D.val(l.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",l.selected=d.selected),Rd&&D.prop("selected",l.selected))):(""===d.id&&v?G=v:(G=x.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).text(d.label),k.push(l={element:G,label:d.label,id:d.id,selected:d.selected}),q(T,d.label,!0),D?D.after(G):e.element.append(G),D=G);for(B++;k.length>B;)d=k.pop(),q(T,d.label,!1),d.element.remove();f(T,function(a,b){a>0?p.addOption(b):0>a&&p.removeOption(b)})}for(;L.length>z;)L.pop()[0].element.remove()}var z;if(!(z=u.match(e)))throw Eg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",u,S(h));var A=d(z[2]||z[1]),B=z[4]||z[6],C=/ as /.test(z[0])&&z[1],D=C?d(C):null,E=z[5],F=d(z[3]||""),G=d(z[2]?z[1]:B),H=d(z[7]),I=z[8],J=I?d(z[8]):null,K={},L=[[{element:h,label:""}]],M={};v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),h.empty(),h.on("change",k),i.$render=r,b.$watchCollection(H,o),b.$watchCollection(m,o),t&&b.$watchCollection(function(){return i.$modelValue},o)}if(k[1]){for(var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=!1,x=Sd(b.createElement("option")),y=Sd(b.createElement("optgroup")),z=x.clone(),A=0,B=i.children(),C=B.length;C>A;A++)if(""===B[A].value){o=v=B.eq(A);break}p.init(q,v,z),t&&(q.$isEmpty=function(a){return!a||0===a.length}),u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],Hg=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound||(h=b),e?a.$watch(e,function(a,b){d.$set("value",a),b!==a&&h.removeOption(b),h.addOption(a,c)}):h.addOption(d.value,c),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],Ig=q({restrict:"E",terminal:!1});return a.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(cb(),kb($d),void Sd(b).ready(function(){Z(b,$)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),angular.element(document).ready(function(){function a(a,b,c){var d=require("nw.gui"),e=new d.Menu,f=new d.MenuItem({label:a||"Cut",click:function(){document.execCommand("cut"),console.log("Menu:","cutted to clipboard")}}),g=new d.MenuItem({label:b||"Copy",click:function(){document.execCommand("copy"),console.log("Menu:","copied to clipboard")}}),h=new d.MenuItem({label:c||"Paste",click:function(){document.execCommand("paste"),console.log("Menu:","pasted to textarea")}});return e.append(f),e.append(g),e.append(h),e}function b(a){for(;a&&null!==a.parentNode;){if(a.hasAttribute("disable-nw-menu"))return!0;a=a.parentNode}return!1}try{var c=new a;$(document).on("contextmenu",function(a){b(a.target)||(a.preventDefault(),c.popup(a.originalEvent.x,a.originalEvent.y))})}catch(d){console.log("nodewebkit-specific",d)}}),function(a,b){"use strict";function c(){function a(a,c){return b.extend(new(b.extend(function(){},{prototype:a})),c)}function c(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(a,b,c,d){var f="?"===d?d:null,g="*"===d?d:null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}var d={};this.when=function(a,e){var f=b.copy(e);if(b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0),d[a]=b.extend(f,a&&c(a,f)),a){var g="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";d[g]=b.extend({redirectTo:a},c(g,f))}return this},this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,e,f,g,i,j,k){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;g>f;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(a){var d=t.current;q=o(),r=q&&d&&q.$$route===d.$$route&&b.equals(q.pathParams,d.pathParams)&&!q.reloadOnSearch&&!s,r||!d&&!q||c.$broadcast("$routeChangeStart",q,d).defaultPrevented&&a&&a.preventDefault()}function n(){var a=t.current,d=q;r?(a.params=d.params,b.copy(a.params,f),c.$broadcast("$routeUpdate",a)):(d||a)&&(s=!1,t.current=d,d&&d.redirectTo&&(b.isString(d.redirectTo)?e.path(p(d.redirectTo,d.params)).search(d.params).replace():e.url(d.redirectTo(d.pathParams,e.path(),e.search())).replace()),g.when(d).then(function(){if(d){var a,c,e=b.extend({},d.resolve);return b.forEach(e,function(a,c){e[c]=b.isString(a)?i.get(a):i.invoke(a,null,null,c)}),b.isDefined(a=d.template)?b.isFunction(a)&&(a=a(d.params)):b.isDefined(c=d.templateUrl)&&(b.isFunction(c)&&(c=c(d.params)),c=k.getTrustedResourceUrl(c),b.isDefined(c)&&(d.loadedTemplateUrl=c,a=j(c))),b.isDefined(a)&&(e.$template=a),g.all(e)}}).then(function(e){d==t.current&&(d&&(d.locals=e,b.copy(d.params,f)),c.$broadcast("$routeChangeSuccess",d,a))},function(b){d==t.current&&c.$broadcast("$routeChangeError",d,a,b)}))}function o(){var c,f;return b.forEach(d,function(d){!f&&(c=l(e.path(),d))&&(f=a(d,{params:b.extend({},e.search(),c),pathParams:c}),f.$$route=d)}),f||d[null]&&a(d[null],{params:{},pathParams:{}})}function p(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var q,r,s=!1,t={routes:d,reload:function(){s=!0,c.$evalAsync(function(){m(),n()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw h("norout","Tried updating route when with no current route");var c={},d=this;b.forEach(Object.keys(a),function(b){d.current.pathParams[b]||(c[b]=a[b])}),a=b.extend({},this.current.params,a),e.path(p(this.current.$$route.originalPath,a)),e.search(b.extend({},e.search(),c))}};return c.$on("$locationChangeStart",m),c.$on("$locationChangeSuccess",n),t}]}function d(){this.$get=function(){return{}}}function e(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()
}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function f(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}h(d)}}}var g=b.module("ngRoute",["ng"]).provider("$route",c),h=b.$$minErr("ngRoute");g.provider("$routeParams",d),g.directive("ngView",e),g.directive("ngView",f),e.$inject=["$route","$anchorScroll","$animate"],f.$inject=["$compile","$controller","$route"]}(window,window.angular),function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&d.cookies(a,c);for(a in g)e=g[a],b.isString(e)||(e=""+e,g[a]=e),e!==h[a]&&(d.cookies(a,e),i=!0);if(i){i=!1,f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?delete g[a]:g[a]=f[a],i=!0)}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular),function(a,b){"use strict";function c(){this.$get=["$$sanitizeUri",function(a){return function(b){var c=[];return f(b,i(c,function(b,c){return!/^unsafe/.test(a(b,c))})),c.join("")}}]}function d(a){var c=[],d=i(c,b.noop);return d.chars(a),c.join("")}function e(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function f(a,c){function d(a,d,f,h){if(d=b.lowercase(d),y[d])for(;t.last()&&z[t.last()];)e("",t.last());x[d]&&t.last()==d&&e("",d),h=u[d]||!!h,h||t.push(d);var i={};f.replace(m,function(a,b,c,d,e){var f=c||d||e||"";i[b]=g(f)}),c.start&&c.start(d,i,h)}function e(a,d){var e,f=0;if(d=b.lowercase(d))for(f=t.length-1;f>=0&&t[f]!=d;f--);if(f>=0){for(e=t.length-1;e>=f;e--)c.end&&c.end(t[e]);t.length=f}}"string"!=typeof a&&(a=null===a||"undefined"==typeof a?"":""+a);var f,h,i,s,t=[],v=a;for(t.last=function(){return t[t.length-1]};a;){if(s="",h=!0,t.last()&&B[t.last()]?(a=a.replace(new RegExp("(.*)<\\s*\\/\\s*"+t.last()+"[^>]*>","i"),function(a,b){return b=b.replace(p,"$1").replace(r,"$1"),c.chars&&c.chars(g(b)),""}),e("",t.last())):(0===a.indexOf("<!--")?(f=a.indexOf("--",4),f>=0&&a.lastIndexOf("-->",f)===f&&(c.comment&&c.comment(a.substring(4,f)),a=a.substring(f+3),h=!1)):q.test(a)?(i=a.match(q),i&&(a=a.replace(i[0],""),h=!1)):o.test(a)?(i=a.match(l),i&&(a=a.substring(i[0].length),i[0].replace(l,e),h=!1)):n.test(a)&&(i=a.match(k),i?(i[4]&&(a=a.substring(i[0].length),i[0].replace(k,d)),h=!1):(s+="<",a=a.substring(1))),h&&(f=a.indexOf("<"),s+=0>f?a:a.substring(0,f),a=0>f?"":a.substring(f),c.chars&&c.chars(g(s)))),a==v)throw j("badparse","The sanitizer was unable to parse the following block of html: {0}",a);v=a}e()}function g(a){if(!a)return"";var b=I.exec(a),c=b[1],d=b[3],e=b[2];return e&&(H.innerHTML=e.replace(/</g,"&lt;"),e="textContent"in H?H.textContent:H.innerText),c+e+d}function h(a){return a.replace(/&/g,"&amp;").replace(s,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(t,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function i(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f,g){a=b.lowercase(a),!d&&B[a]&&(d=a),d||C[a]!==!0||(e("<"),e(a),b.forEach(f,function(d,f){var g=b.lowercase(f),i="img"===a&&"src"===g||"background"===g;G[g]!==!0||D[g]===!0&&!c(d,i)||(e(" "),e(f),e('="'),e(h(d)),e('"'))}),e(g?"/>":">"))},end:function(a){a=b.lowercase(a),d||C[a]!==!0||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(h(a))}}}var j=b.$$minErr("$sanitize"),k=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,l=/^<\/\s*([\w:-]+)[^>]*>/,m=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,n=/^</,o=/^<\//,p=/<!--(.*?)-->/g,q=/<!DOCTYPE([^>]*?)>/i,r=/<!\[CDATA\[(.*?)]]>/g,s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/([^\#-~| |!])/g,u=e("area,br,col,hr,img,wbr"),v=e("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),w=e("rp,rt"),x=b.extend({},w,v),y=b.extend({},v,e("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),z=b.extend({},w,e("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),A=e("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),B=e("script,style"),C=b.extend({},u,y,z,x,A),D=e("background,cite,href,longdesc,src,usemap,xlink:href"),E=e("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),F=e("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),G=b.extend({},D,F,E),H=document.createElement("pre"),I=/^(\s*)([\s\S]*?)(\s*)$/;b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,e=/^mailto:/;return function(f,g){function h(a){a&&n.push(d(a))}function i(a,c){n.push("<a "),b.isDefined(g)&&(n.push('target="'),n.push(g),n.push('" ')),n.push('href="'),n.push(a),n.push('">'),h(c),n.push("</a>")}if(!f)return f;for(var j,k,l,m=f,n=[];j=m.match(c);)k=j[0],j[2]==j[3]&&(k="mailto:"+k),l=j.index,h(m.substr(0,l)),i(k,j[0].replace(e,"")),m=m.substring(l+j[0].length);return h(m),a(n.join(""))}}])}(window,window.angular),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var a="$$ngAnimateChildren";return function(c,d,e){var f=e.ngAnimateChildren;b.isString(f)&&0===f.length?d.data(a,!0):c.$watch(f,function(b){d.data(a,!!b)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){var c=b[0].body;return function(b){return a(function(){c.offsetWidth+1;b()})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType==p)return c}}function g(a){return a&&b.element(a)}function h(a){return b.element(f(a))}function i(a,b){return f(a)==f(b)}var j=b.noop,k=b.forEach,l=e.$$selectors,m=b.isArray,n=b.isString,o=b.isObject,p=1,q="$$ngAnimateState",r="$$ngAnimateChildren",s="ng-animate",t={running:!0};d.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest",function(a,c,d,p,u,v,w,x,y){function z(a,b){var c=a.data(q)||{};return b&&(c.running=!0,c.structural=!0,a.data(q,c)),c.disabled||c.running&&c.structural}function A(a){var b,d=c.defer();return d.promise.$$cancelFn=function(){b&&b()},w.$$postDigest(function(){b=a(function(){d.resolve()})}),d.promise}function B(a){return o(a)?(a.tempClasses&&n(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a):void 0}function C(a,b,c){c=c||{};var d={};k(c,function(a,b){k(b.split(" "),function(b){d[b]=a})});var e=Object.create(null);k((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0});var f=[],g=[];return k(b&&b.classes||[],function(a,b){var c=e[b],h=d[b]||{};a===!1?(c||"addClass"==h.event)&&g.push(b):a===!0&&(c&&"removeClass"!=h.event||f.push(b))}),f.length+g.length>0&&[f.join(" "),g.join(" ")]}function D(a){if(a){var b=[],c={},e=a.substr(1).split(".");(p.transitions||p.animations)&&b.push(d.get(l[""]));for(var f=0;f<e.length;f++){var g=e[f],h=l[g];h&&!c[g]&&(b.push(d.get(h)),c[g]=!0)}return b}}function E(a,c,d,e){function f(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),w.push({event:b,fn:c}),t.push({event:b,fn:d}),!0):void 0}function g(b,c,f){function g(a){if(c){if((c[a]||j)(),++m<h.length)return;c=null}f()}var h=[];k(b,function(a){a.fn&&h.push(a)});var m=0;k(h,function(b,f){var h=function(){g(f)};switch(b.event){case"setClass":c.push(b.fn(a,i,l,h,e));break;case"animate":c.push(b.fn(a,d,e.from,e.to,h));break;case"addClass":c.push(b.fn(a,i||d,h,e));break;case"removeClass":c.push(b.fn(a,l||d,h,e));break;default:c.push(b.fn(a,h,e))}}),c&&0===c.length&&f()}var h=a[0];if(h){e&&(e.to=e.to||{},e.from=e.from||{});var i,l;m(d)&&(i=d[0],l=d[1],i?l?d=i+" "+l:(d=i,c="addClass"):(d=l,c="removeClass"));var n="setClass"==c,o=n||"addClass"==c||"removeClass"==c||"animate"==c,p=a.attr("class"),q=p+" "+d;if(M(q)){var r=j,s=[],t=[],u=j,v=[],w=[],x=(" "+q).replace(/\s+/g,".");return k(D(x),function(a){var b=f(a,c);!b&&n&&(f(a,"addClass"),f(a,"removeClass"))}),{node:h,event:c,className:d,isClassBased:o,isSetClassOperation:n,applyStyles:function(){e&&a.css(b.extend(e.from||{},e.to||{}))},before:function(a){r=a,g(t,s,function(){r=j,a()})},after:function(a){u=a,g(w,v,function(){u=j,a()})},cancel:function(){s&&(k(s,function(a){(a||j)(!0)}),r(!0)),v&&(k(v,function(a){(a||j)(!0)}),u(!0))}}}}}function F(a,c,d,e,f,g,h,i){function l(b){var e="$animate:"+b;w&&w[e]&&w[e].length>0&&v(function(){d.triggerHandler(e,{event:a,className:c})})}function m(){l("before")}function n(){l("after")}function o(){l("close"),i()}function p(){p.hasBeenRun||(p.hasBeenRun=!0,g())}function r(){if(!r.hasBeenRun){u&&u.applyStyles(),r.hasBeenRun=!0,h&&h.tempClasses&&k(h.tempClasses,function(a){d.removeClass(a)});var b=d.data(q);b&&(u&&u.isClassBased?H(d,c):(v(function(){var b=d.data(q)||{};G==b.index&&H(d,c,a)}),d.data(q,b))),o()}}var t=j,u=E(d,a,c,h);if(!u)return p(),m(),n(),r(),t;a=u.event,c=u.className;var w=b.element._data(u.node);if(w=w&&w.events,e||(e=f?f.parent():d.parent()),I(d,e))return p(),m(),n(),r(),t;var x=d.data(q)||{},y=x.active||{},z=x.totalActive||0,A=x.last,B=!1;if(z>0){var C=[];if(u.isClassBased){if("setClass"==A.event)C.push(A),H(d,c);else if(y[c]){var D=y[c];D.event==a?B=!0:(C.push(D),H(d,c))}}else if("leave"==a&&y["ng-leave"])B=!0;else{for(var F in y)C.push(y[F]);x={},H(d,!0)}C.length>0&&k(C,function(a){a.cancel()})}if(!u.isClassBased||u.isSetClassOperation||"animate"==a||B||(B="addClass"==a==d.hasClass(c)),B)return p(),m(),n(),o(),t;y=x.active||{},z=x.totalActive||0,"leave"==a&&d.one("$destroy",function(){var a=b.element(this),c=a.data(q);if(c){var d=c.active["ng-leave"];d&&(d.cancel(),H(a,"ng-leave"))}}),d.addClass(s),h&&h.tempClasses&&k(h.tempClasses,function(a){d.addClass(a)});var G=K++;return z++,y[c]=u,d.data(q,{last:u,active:y,index:G,totalActive:z}),m(),u.before(function(b){var e=d.data(q);b=b||!e||!e.active[c]||u.isClassBased&&e.active[c].event!=a,p(),b===!0?r():(n(),u.after(r))}),u.cancel}function G(a){var c=f(a);if(c){var d=b.isFunction(c.getElementsByClassName)?c.getElementsByClassName(s):c.querySelectorAll("."+s);k(d,function(a){a=b.element(a);var c=a.data(q);c&&c.active&&k(c.active,function(a){a.cancel()})})}}function H(a,b){if(i(a,u))t.disabled||(t.running=!1,t.structural=!1);else if(b){var c=a.data(q)||{},d=b===!0;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(a.removeClass(s),a.removeData(q))}}function I(a,c){if(t.disabled)return!0;if(i(a,u))return t.running;var d,e,f;do{if(0===c.length)break;var g=i(c,u),h=g?t:c.data(q)||{};if(h.disabled)return!0;if(g&&(f=!0),d!==!1){var j=c.data(r);b.isDefined(j)&&(d=j)}e=e||h.running||h.last&&!h.last.isClassBased}while(c=c.parent());return!f||!d&&e}u.data(q,t);var J=w.$watch(function(){return y.totalPendingRequests},function(a){0===a&&(J(),w.$$postDigest(function(){w.$$postDigest(function(){t.running=!1})}))}),K=0,L=e.classNameFilter(),M=L?function(a){return L.test(a)}:function(){return!0};return{animate:function(a,b,c,d,e){return d=d||"ng-inline-animate",e=B(e)||{},e.from=c?b:null,e.to=c?c:b,A(function(b){return F("animate",d,h(a),null,null,j,e,b)})},enter:function(c,d,e,f){return f=B(f),c=b.element(c),d=g(d),e=g(e),z(c,!0),a.enter(c,d,e),A(function(a){return F("enter","ng-enter",h(c),d,e,j,f,a)})},leave:function(c,d){return d=B(d),c=b.element(c),G(c),z(c,!0),A(function(b){return F("leave","ng-leave",h(c),null,null,function(){a.leave(c)},d,b)})},move:function(c,d,e,f){return f=B(f),c=b.element(c),d=g(d),e=g(e),G(c),z(c,!0),a.move(c,d,e),A(function(a){return F("move","ng-move",h(c),d,e,j,f,a)})},addClass:function(a,b,c){return this.setClass(a,b,[],c)},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},setClass:function(c,d,e,g){g=B(g);var i="$$animateClasses";if(c=b.element(c),c=h(c),z(c))return a.$$setClassImmediately(c,d,e,g);var j,l=c.data(i),n=!!l;return l||(l={},l.classes={}),j=l.classes,d=m(d)?d:d.split(" "),k(d,function(a){a&&a.length&&(j[a]=!0)}),e=m(e)?e:e.split(" "),k(e,function(a){a&&a.length&&(j[a]=!1)}),n?(g&&l.options&&(l.options=b.extend(l.options||{},g)),l.promise):(c.data(i,l={classes:j,options:g}),l.promise=A(function(b){var d=c.parent(),e=f(c),g=e.parentNode;if(!g||g.$$NG_REMOVED||e.$$NG_REMOVED)return void b();var h=c.data(i);c.removeData(i);var j=c.data(q)||{},k=C(c,h,j.active);return k?F("setClass",k,c,d,null,function(){k[0]&&a.$$addClassImmediately(c,k[0]),k[1]&&a.$$removeClassImmediately(c,k[1])},h.options,b):b()}))},cancel:function(a){a.$$cancelFn()},enabled:function(a,b){switch(arguments.length){case 2:if(a)H(b);else{var c=b.data(q)||{};c.disabled=!0,b.data(q,c)}break;case 1:t.disabled=!a;break;default:a=!t.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,h){function i(){I||(I=h(function(){V=[],I=null,T={}}))}function l(a,b){I&&I(),V.push(b),I=h(function(){k(V,function(a){a()}),V=[],I=null,T={}})}function o(a,c){var d=f(a);a=b.element(d),Y.push(a);var e=Date.now()+c;X>=e||(g.cancel(W),X=e,W=g(function(){q(Y),Y=[]},c,!1))}function q(a){k(a,function(a){var b=a.data(P);b&&k(b.closeAnimationFns,function(a){a()})})}function r(a,b){var c=b?T[b]:null;if(!c){var e=0,f=0,g=0,h=0;k(a,function(a){if(a.nodeType==p){var b=d.getComputedStyle(a)||{},c=b[D+J];e=Math.max(s(c),e);var i=b[D+L];f=Math.max(s(i),f);{b[F+L]}h=Math.max(s(b[F+L]),h);var j=s(b[F+J]);j>0&&(j*=parseInt(b[F+M],10)||1),g=Math.max(j,g)}}),c={total:0,transitionDelay:f,transitionDuration:e,animationDelay:h,animationDuration:g},b&&(T[b]=c)}return c}function s(a){var b=0,c=n(a)?a.split(/\s*,\s*/):[];return k(c,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function t(a){var b=a.parent(),c=b.data(O);return c||(b.data(O,++U),c=U),c+"-"+f(a).getAttribute("class")}function u(a,b,c,d){var e=["ng-enter","ng-leave","ng-move"].indexOf(c)>=0,g=t(b),h=g+" "+c,i=T[h]?++T[h].total:0,j={};if(i>0){var k=c+"-stagger",l=g+" "+k,m=!T[l];m&&b.addClass(k),j=r(b,l),m&&b.removeClass(k)}b.addClass(c);var n=b.data(P)||{},o=r(b,h),p=o.transitionDuration,q=o.animationDuration;if(e&&0===p&&0===q)return b.removeClass(c),!1;var s=d||e&&p>0,u=q>0&&j.animationDelay>0&&0===j.animationDuration,v=n.closeAnimationFns||[];b.data(P,{stagger:j,cacheKey:h,running:n.running||0,itemIndex:i,blockTransition:s,closeAnimationFns:v});var y=f(b);return s&&(w(y,!0),d&&b.css(d)),u&&x(y,!0),!0}function v(a,b,c,d,e){function h(){b.off(L,i),b.removeClass(m),b.removeClass(n),J&&g.cancel(J),B(b,c);var a=f(b);for(var d in q)a.style.removeProperty(q[d])}function i(a){a.stopPropagation();var b=a.originalEvent||a,c=b.$manualTimeStamp||b.timeStamp||Date.now(),e=parseFloat(b.elapsedTime.toFixed(Q));Math.max(c-K,0)>=F&&e>=C&&d()}var j=f(b),l=b.data(P);if(-1==j.getAttribute("class").indexOf(c)||!l)return void d();var m="",n="";k(c.split(" "),function(a,b){var c=(b>0?" ":"")+a;m+=c+"-active",n+=c+"-pending"});var p="",q=[],s=l.itemIndex,t=l.stagger,u=0;if(s>0){var v=0;t.transitionDelay>0&&0===t.transitionDuration&&(v=t.transitionDelay*s);var y=0;t.animationDelay>0&&0===t.animationDuration&&(y=t.animationDelay*s,q.push(H+"animation-play-state")),u=Math.round(100*Math.max(v,y))/100}u||(b.addClass(m),l.blockTransition&&w(j,!1));var z=l.cacheKey+" "+m,A=r(b,z),C=Math.max(A.transitionDuration,A.animationDuration);if(0===C)return b.removeClass(m),B(b,c),void d();!u&&e&&(A.transitionDuration||(b.css("transition",A.animationDuration+"s linear all"),q.push("transition")),b.css(e));var D=Math.max(A.transitionDelay,A.animationDelay),F=D*S;if(q.length>0){var I=j.getAttribute("style")||"";";"!==I.charAt(I.length-1)&&(I+=";"),j.setAttribute("style",I+" "+p)}var J,K=Date.now(),L=G+" "+E,M=(D+C)*R,N=(u+M)*S;return u>0&&(b.addClass(n),J=g(function(){J=null,A.transitionDuration>0&&w(j,!1),A.animationDuration>0&&x(j,!1),b.addClass(m),b.removeClass(n),e&&(0===A.transitionDuration&&b.css("transition",A.animationDuration+"s linear all"),b.css(e),q.push("transition"))},u*S,!1)),b.on(L,i),l.closeAnimationFns.push(function(){h(),d()}),l.running++,o(b,N),h}function w(a,b){a.style[D+K]=b?"none":""}function x(a,b){a.style[F+N]=b?"paused":""}function y(a,b,c,d){return u(a,b,c,d)?function(a){a&&B(b,c)}:void 0}function z(a,b,c,d,e){return b.data(P)?v(a,b,c,d,e):(B(b,c),void d())}function A(a,b,c,d,e){var f=y(a,b,c,e.from);if(!f)return i(),void d();var g=f;return l(b,function(){g=z(a,b,c,d,e.to)}),function(a){(g||j)(a)}}function B(a,b){a.removeClass(b);var c=a.data(P);c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData(P))}function C(a,b){var c="";return a=m(a)?a:a.split(/\s+/),k(a,function(a,d){a&&a.length>0&&(c+=(d>0?" ":"")+a+b)}),c}var D,E,F,G,H="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(H="-webkit-",D="WebkitTransition",E="webkitTransitionEnd transitionend"):(D="transition",E="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(H="-webkit-",F="WebkitAnimation",G="webkitAnimationEnd animationend"):(F="animation",G="animationend");var I,J="Duration",K="Property",L="Delay",M="IterationCount",N="PlayState",O="$$ngAnimateKey",P="$$ngAnimateCSS3Data",Q=3,R=1.5,S=1e3,T={},U=0,V=[],W=null,X=0,Y=[];return{animate:function(a,b,c,d,e,f){return f=f||{},f.from=c,f.to=d,A("animate",a,b,e,f)},enter:function(a,b,c){return c=c||{},A("enter",a,"ng-enter",b,c)},leave:function(a,b,c){return c=c||{},A("leave",a,"ng-leave",b,c)},move:function(a,b,c){return c=c||{},A("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,d,e){e=e||{};var f=C(c,"-remove")+" "+C(b,"-add"),g=y("setClass",a,f,e.from);return g?(l(a,d),g):(i(),void d())},beforeAddClass:function(a,b,c,d){d=d||{};var e=y("addClass",a,C(b,"-add"),d.from);return e?(l(a,c),e):(i(),void c())},beforeRemoveClass:function(a,b,c,d){d=d||{};var e=y("removeClass",a,C(b,"-remove"),d.from);return e?(l(a,c),e):(i(),void c())},setClass:function(a,b,c,d,e){e=e||{},c=C(c,"-remove"),b=C(b,"-add");var f=c+" "+b;return z("setClass",a,f,d,e.to)},addClass:function(a,b,c,d){return d=d||{},z("addClass",a,C(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){return d=d||{},z("removeClass",a,C(b,"-remove"),c,d.to)}}}])}])}(window,window.angular),angular.module("ui.bootstrap",["ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(a,b,c,d){function e(){f();var b=+a.interval;!isNaN(b)&&b>0&&(h=c(g,b))}function f(){h&&(c.cancel(h),h=null)}function g(){var b=+a.interval;i&&!isNaN(b)&&b>0?a.next():a.pause()}var h,i,j=this,k=j.slides=a.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=a.select=function(c,f){function g(){if(!m){if(j.currentSlide&&angular.isString(f)&&!a.noTransition&&c.$element){c.$element.addClass(f);{c.$element[0].offsetWidth}angular.forEach(k,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(c,{direction:f,active:!0,entering:!0}),angular.extend(j.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=d(c.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(c,j.currentSlide)}else h(c,j.currentSlide);j.currentSlide=c,l=i,e()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var i=k.indexOf(c);void 0===f&&(f=i>l?"next":"prev"),c&&c!==j.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){m=!0}),j.indexOfSlide=function(a){return k.indexOf(a)},a.next=function(){var b=(l+1)%k.length;return a.$currentTransition?void 0:j.select(k[b],"next")},a.prev=function(){var b=0>l-1?k.length-1:l-1;return a.$currentTransition?void 0:j.select(k[b],"prev")},a.isActive=function(a){return j.currentSlide===a},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e())},a.pause=function(){a.noPause||(i=!1,f())},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1},j.removeSlide=function(a){var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?j.select(b>=k.length?k[b-1]:k[b]):l>b&&l--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(e,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var e={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(b,e){if(!angular.isString(b)||!e)return b;e=a.DATETIME_FORMATS[e]||e,this.parsers[e]||(this.parsers[e]=c(e));var f=this.parsers[e],g=f.regex,h=f.map,i=b.match(g);if(i&&i.length){for(var j,k={year:1900,month:0,date:1,hours:0},l=1,m=i.length;m>l;l++){var n=h[l-1];n.apply&&n.apply.call(k,i[l])}return d(k.year,k.month,k.date)&&(j=new Date(k.year,k.month,k.date,k.hours)),j}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};
this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),r.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);q.remove(),p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){if(b){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1})}},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.getToggleElement=function(){return h.toggleElement},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b,c,d){b.backdropClass=d.backdropClass||"",b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].querySelectorAll("[autofocus]").length||d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();if(h>=0&&!k){l=e.$new(!0),l.index=h;var i=angular.element("<div modal-backdrop></div>");i.attr("backdrop-class",b.backdropClass),k=d(i)(l),f.append(k)}var j=angular.element("<div modal-window></div>");j.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var o=d(j)(b.scope);n.top().value.modalDomEl=o,f.append(o),f.addClass(m)},o.close=function(a,b){var c=n.get(a);c&&(c.value.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a);c&&(c.value.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i),b.controllerAs&&(d[b.controllerAs]=f)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l){function m(a){var b=a||n.trigger||l,d=c[b]||b;return{show:b,hide:d}}var n=angular.extend({},b,d),o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" content="'+p+"content"+q+'" placement="'+p+"placement"+q+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var a=f(r);return function(b,c,d){function f(){D.isOpen?l():j()}function j(){(!C||b.$eval(d[k+"Enable"]))&&(s(),D.popupDelay?z||(z=g(o,D.popupDelay,!1),z.then(function(a){a()})):o()())}function l(){b.$apply(function(){p()})}function o(){return z=null,y&&(g.cancel(y),y=null),D.content?(q(),w.css({top:0,left:0,display:"block"}),A?h.find("body").append(w):c.after(w),E(),D.isOpen=!0,D.$digest(),E):angular.noop}function p(){D.isOpen=!1,g.cancel(z),z=null,D.animation?y||(y=g(r,500)):r()}function q(){w&&r(),x=D.$new(),w=a(x,angular.noop)}function r(){y=null,w&&(w.remove(),w=null),x&&(x.$destroy(),x=null)}function s(){t(),u()}function t(){var a=d[k+"Placement"];D.placement=angular.isDefined(a)?a:n.placement}function u(){var a=d[k+"PopupDelay"],b=parseInt(a,10);D.popupDelay=isNaN(b)?n.popupDelay:b}function v(){var a=d[k+"Trigger"];F(),B=m(a),B.show===B.hide?c.bind(B.show,f):(c.bind(B.show,j),c.bind(B.hide,l))}var w,x,y,z,A=angular.isDefined(n.appendToBody)?n.appendToBody:!1,B=m(void 0),C=angular.isDefined(d[k+"Enable"]),D=b.$new(!0),E=function(){var a=i.positionElements(c,w,D.placement,A);a.top+="px",a.left+="px",w.css(a)};D.isOpen=!1,d.$observe(e,function(a){D.content=a,!a&&D.isOpen&&p()}),d.$observe(k+"Title",function(a){D.title=a});var F=function(){c.unbind(B.show,j),c.unbind(B.hide,l)};v();var G=b.$eval(d[k+"Animation"]);D.animation=angular.isDefined(G)?!!G:n.animation;var H=b.$eval(d[k+"AppendToBody"]);A=angular.isDefined(H)?H:A,A&&b.$on("$locationChangeSuccess",function(){D.isOpen&&p()}),b.$on("$destroy",function(){g.cancel(y),g.cancel(z),F(),r(),D=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}
}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=i.$eval(k.typeaheadFocusFirst)!==!1,v=b(k.ngModel).assign,w=g.parse(k.typeahead),x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":y});var z=angular.element("<div typeahead-popup></div>");z.attr({id:y,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&z.attr("template-url",k.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,j.attr("aria-expanded",!1)},B=function(a){return y+"-option-"+a};x.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",B(a))});var C=function(a){var b={$viewValue:a};q(i,!0),c.when(w.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){x.activeIdx=u?0:-1,x.matches.length=0;for(var e=0;e<c.length;e++)b[w.itemName]=c[e],x.matches.push({id:B(e),label:w.viewMapper(x,b),model:c[e]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else A();d&&q(i,!1)},function(){A(),q(i,!1)})};A(),x.query=void 0;var D,E=function(a){D=d(function(){C(a)},o)},F=function(){D&&d.cancel(D)};l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(F(),E(a)):C(a):(q(i,!1),F(),A()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[w.itemName]=a,b=w.viewMapper(i,d),d[w.itemName]=void 0,c=w.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,e={};e[w.itemName]=c=x.matches[a].model,b=w.modelMapper(i,e),v(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:w.viewMapper(i,e)}),A(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(-1!=x.activeIdx||13!==a.which&&9!==a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),A(),x.$digest()))}),j.bind("blur",function(){m=!1});var G=function(a){j[0]!==a.target&&(A(),x.$digest())};e.bind("click",G),i.$on("$destroy",function(){e.unbind("click",G),t&&H.remove()});var H=a(z)(x);t?e.find("body").append(H):j.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(a,b,c,d){function e(){f();var b=+a.interval;!isNaN(b)&&b>0&&(h=c(g,b))}function f(){h&&(c.cancel(h),h=null)}function g(){var b=+a.interval;i&&!isNaN(b)&&b>0?a.next():a.pause()}var h,i,j=this,k=j.slides=a.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=a.select=function(c,f){function g(){if(!m){if(j.currentSlide&&angular.isString(f)&&!a.noTransition&&c.$element){c.$element.addClass(f);{c.$element[0].offsetWidth}angular.forEach(k,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(c,{direction:f,active:!0,entering:!0}),angular.extend(j.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=d(c.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(c,j.currentSlide)}else h(c,j.currentSlide);j.currentSlide=c,l=i,e()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var i=k.indexOf(c);void 0===f&&(f=i>l?"next":"prev"),c&&c!==j.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){m=!0}),j.indexOfSlide=function(a){return k.indexOf(a)},a.next=function(){var b=(l+1)%k.length;return a.$currentTransition?void 0:j.select(k[b],"next")},a.prev=function(){var b=0>l-1?k.length-1:l-1;return a.$currentTransition?void 0:j.select(k[b],"prev")},a.isActive=function(a){return j.currentSlide===a},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e())},a.pause=function(){a.noPause||(i=!1,f())},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1},j.removeSlide=function(a){var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?j.select(b>=k.length?k[b-1]:k[b]):l>b&&l--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(e,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var e={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(b,e){if(!angular.isString(b)||!e)return b;e=a.DATETIME_FORMATS[e]||e,this.parsers[e]||(this.parsers[e]=c(e));var f=this.parsers[e],g=f.regex,h=f.map,i=b.match(g);if(i&&i.length){for(var j,k={year:1900,month:0,date:1,hours:0},l=1,m=i.length;m>l;l++){var n=h[l-1];n.apply&&n.apply.call(k,i[l])}return d(k.year,k.month,k.date)&&(j=new Date(k.year,k.month,k.date,k.hours)),j}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),r.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);q.remove(),p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){if(b){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1})}},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.getToggleElement=function(){return h.toggleElement},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b,c,d){b.backdropClass=d.backdropClass||"",b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].querySelectorAll("[autofocus]").length||d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();if(h>=0&&!k){l=e.$new(!0),l.index=h;var i=angular.element("<div modal-backdrop></div>");i.attr("backdrop-class",b.backdropClass),k=d(i)(l),f.append(k)}var j=angular.element("<div modal-window></div>");j.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var o=d(j)(b.scope);
n.top().value.modalDomEl=o,f.append(o),f.addClass(m)},o.close=function(a,b){var c=n.get(a);c&&(c.value.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a);c&&(c.value.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i),b.controllerAs&&(d[b.controllerAs]=f)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l){function m(a){var b=a||n.trigger||l,d=c[b]||b;return{show:b,hide:d}}var n=angular.extend({},b,d),o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" content="'+p+"content"+q+'" placement="'+p+"placement"+q+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var a=f(r);return function(b,c,d){function f(){D.isOpen?l():j()}function j(){(!C||b.$eval(d[k+"Enable"]))&&(s(),D.popupDelay?z||(z=g(o,D.popupDelay,!1),z.then(function(a){a()})):o()())}function l(){b.$apply(function(){p()})}function o(){return z=null,y&&(g.cancel(y),y=null),D.content?(q(),w.css({top:0,left:0,display:"block"}),A?h.find("body").append(w):c.after(w),E(),D.isOpen=!0,D.$digest(),E):angular.noop}function p(){D.isOpen=!1,g.cancel(z),z=null,D.animation?y||(y=g(r,500)):r()}function q(){w&&r(),x=D.$new(),w=a(x,angular.noop)}function r(){y=null,w&&(w.remove(),w=null),x&&(x.$destroy(),x=null)}function s(){t(),u()}function t(){var a=d[k+"Placement"];D.placement=angular.isDefined(a)?a:n.placement}function u(){var a=d[k+"PopupDelay"],b=parseInt(a,10);D.popupDelay=isNaN(b)?n.popupDelay:b}function v(){var a=d[k+"Trigger"];F(),B=m(a),B.show===B.hide?c.bind(B.show,f):(c.bind(B.show,j),c.bind(B.hide,l))}var w,x,y,z,A=angular.isDefined(n.appendToBody)?n.appendToBody:!1,B=m(void 0),C=angular.isDefined(d[k+"Enable"]),D=b.$new(!0),E=function(){var a=i.positionElements(c,w,D.placement,A);a.top+="px",a.left+="px",w.css(a)};D.isOpen=!1,d.$observe(e,function(a){D.content=a,!a&&D.isOpen&&p()}),d.$observe(k+"Title",function(a){D.title=a});var F=function(){c.unbind(B.show,j),c.unbind(B.hide,l)};v();var G=b.$eval(d[k+"Animation"]);D.animation=angular.isDefined(G)?!!G:n.animation;var H=b.$eval(d[k+"AppendToBody"]);A=angular.isDefined(H)?H:A,A&&b.$on("$locationChangeSuccess",function(){D.isOpen&&p()}),b.$on("$destroy",function(){g.cancel(y),g.cancel(z),F(),r(),D=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=i.$eval(k.typeaheadFocusFirst)!==!1,v=b(k.ngModel).assign,w=g.parse(k.typeahead),x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":y});var z=angular.element("<div typeahead-popup></div>");z.attr({id:y,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&z.attr("template-url",k.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,j.attr("aria-expanded",!1)},B=function(a){return y+"-option-"+a};x.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",B(a))});var C=function(a){var b={$viewValue:a};q(i,!0),c.when(w.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){x.activeIdx=u?0:-1,x.matches.length=0;for(var e=0;e<c.length;e++)b[w.itemName]=c[e],x.matches.push({id:B(e),label:w.viewMapper(x,b),model:c[e]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else A();d&&q(i,!1)},function(){A(),q(i,!1)})};A(),x.query=void 0;var D,E=function(a){D=d(function(){C(a)},o)},F=function(){D&&d.cancel(D)};l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(F(),E(a)):C(a):(q(i,!1),F(),A()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[w.itemName]=a,b=w.viewMapper(i,d),d[w.itemName]=void 0,c=w.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,e={};e[w.itemName]=c=x.matches[a].model,b=w.modelMapper(i,e),v(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:w.viewMapper(i,e)}),A(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(-1!=x.activeIdx||13!==a.which&&9!==a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),A(),x.$digest()))}),j.bind("blur",function(){m=!1});var G=function(a){j[0]!==a.target&&(A(),x.$digest())};e.bind("click",G),i.$on("$destroy",function(){e.unbind("click",G),t&&H.remove()});var H=a(z)(x);t?e.find("body").append(H):j.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')
}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),function(a,b){"use strict";function c(a,c,e){d.directive(a,["$parse","$swipe",function(d,f){var g=75,h=.3,i=30;return function(j,k,l){function m(a){if(!n)return!1;var b=Math.abs(a.y-n.y),d=(a.x-n.x)*c;return o&&g>b&&d>0&&d>i&&h>b/d}var n,o,p=d(l[a]),q=["touch"];b.isDefined(l.ngSwipeDisableMouse)||q.push("mouse"),f.bind(k,{start:function(a){n=a,o=!0},cancel:function(){o=!1},end:function(a,b){m(a)&&j.$apply(function(){k.triggerHandler(e),p(j,{$event:b})})}},q)}}])}var d=b.module("ngTouch",[]);d.factory("$swipe",[function(){function a(a){var b=a.touches&&a.touches.length?a.touches:[a],c=a.changedTouches&&a.changedTouches[0]||a.originalEvent&&a.originalEvent.changedTouches&&a.originalEvent.changedTouches[0]||b[0].originalEvent||b[0];return{x:c.clientX,y:c.clientY}}function c(a,c){var d=[];return b.forEach(a,function(a){var b=e[a][c];b&&d.push(b)}),d.join(" ")}var d=10,e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(b,e,f){var g,h,i,j,k=!1;f=f||["mouse","touch"],b.on(c(f,"start"),function(b){i=a(b),k=!0,g=0,h=0,j=i,e.start&&e.start(i,b)});var l=c(f,"cancel");l&&b.on(l,function(a){k=!1,e.cancel&&e.cancel(a)}),b.on(c(f,"move"),function(b){if(k&&i){var c=a(b);if(g+=Math.abs(c.x-j.x),h+=Math.abs(c.y-j.y),j=c,!(d>g&&d>h))return h>g?(k=!1,void(e.cancel&&e.cancel(b))):(b.preventDefault(),void(e.move&&e.move(c,b)))}}),b.on(c(f,"end"),function(b){k&&(k=!1,e.end&&e.end(a(b),b))})}}}]),d.config(["$provide",function(a){a.decorator("ngClickDirective",["$delegate",function(a){return a.shift(),a}])}]),d.directive("ngClick",["$parse","$timeout","$rootElement",function(a,c,d){function e(a,b,c,d){return Math.abs(a-c)<p&&Math.abs(b-d)<p}function f(a,b,c){for(var d=0;d<a.length;d+=2)if(e(a[d],a[d+1],b,c))return a.splice(d,d+2),!0;return!1}function g(a){if(!(Date.now()-j>o)){var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].clientX,d=b[0].clientY;1>c&&1>d||l&&l[0]===c&&l[1]===d||(l&&(l=null),"label"===a.target.tagName.toLowerCase()&&(l=[c,d]),f(k,c,d)||(a.stopPropagation(),a.preventDefault(),a.target&&a.target.blur()))}}function h(a){var b=a.touches&&a.touches.length?a.touches:[a],d=b[0].clientX,e=b[0].clientY;k.push(d,e),c(function(){for(var a=0;a<k.length;a+=2)if(k[a]==d&&k[a+1]==e)return void k.splice(a,a+2)},o,!1)}function i(a,b){k||(d[0].addEventListener("click",g,!0),d[0].addEventListener("touchstart",h,!0),k=[]),j=Date.now(),f(k,a,b)}var j,k,l,m=750,n=12,o=2500,p=25,q="ng-click-active";return function(c,d,e){function f(){o=!1,d.removeClass(q)}var g,h,j,k,l=a(e.ngClick),o=!1;d.on("touchstart",function(a){o=!0,g=a.target?a.target:a.srcElement,3==g.nodeType&&(g=g.parentNode),d.addClass(q),h=Date.now();var b=a.touches&&a.touches.length?a.touches:[a],c=b[0].originalEvent||b[0];j=c.clientX,k=c.clientY}),d.on("touchmove",function(){f()}),d.on("touchcancel",function(){f()}),d.on("touchend",function(a){var c=Date.now()-h,l=a.changedTouches&&a.changedTouches.length?a.changedTouches:a.touches&&a.touches.length?a.touches:[a],p=l[0].originalEvent||l[0],q=p.clientX,r=p.clientY,s=Math.sqrt(Math.pow(q-j,2)+Math.pow(r-k,2));o&&m>c&&n>s&&(i(q,r),g&&g.blur(),b.isDefined(e.disabled)&&e.disabled!==!1||d.triggerHandler("click",[a])),f()}),d.onclick=function(){},d.on("click",function(a,b){c.$apply(function(){l(c,{$event:b||a})})}),d.on("mousedown",function(){d.addClass(q)}),d.on("mousemove mouseup",function(){d.removeClass(q)})}}]),c("ngSwipeLeft",-1,"swipeleft"),c("ngSwipeRight",1,"swiperight")}(window,window.angular),angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(a){var b=a.storageKey(),c=a.storage(),d=function(){var d=a.preferredLanguage();angular.isString(d)?a.use(d):c.put(b,a.use())};c?c.get(b)?a.use(c.get(b))["catch"](d):d():angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r=[],s=a,t=[],u=!1,v="translate-cloak",w=!1,x=".",y="2.5.2",z=function(){var a,b,c=window.navigator,d=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(c.languages))for(a=0;a<c.languages.length;a++)if(b=c.languages[a],b&&b.length)return b;for(a=0;a<d.length;a++)if(b=c[d[a]],b&&b.length)return b;return null};z.displayName="angular-translate/service: getFirstBrowserLanguage";var A=function(){return(z()||"").split("-").join("_")};A.displayName="angular-translate/service: getLocale";var B=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},C=function(){return this.replace(/^\s+|\s+$/g,"")},D=function(a){for(var b=[],d=angular.lowercase(a),e=0,f=r.length;f>e;e++)b.push(angular.lowercase(r[e]));if(B(b,d)>-1)return a;if(c){var g;for(var h in c){var i=!1,j=Object.prototype.hasOwnProperty.call(c,h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=c[h],B(b,angular.lowercase(g))>-1))return g}}var k=a.split("_");return k.length>1&&B(b,angular.lowercase(k[0]))>-1?k[0]:a},E=function(a,b){if(!a&&!b)return q;if(a&&!b){if(angular.isString(a))return q[a]}else angular.isObject(q[a])||(q[a]={}),angular.extend(q[a],F(b));return this};this.translations=E,this.cloakClassName=function(a){return a?(v=a,this):v};var F=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(h=a[e],angular.isObject(h)?F(h,b.concat(e),c,e):(f=b.length?""+b.join(x)+x+e:e,b.length&&e===d&&(g=""+b.join(x),c[g]="@:"+f),c[f]=h));return c};this.addInterpolation=function(a){return t.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return k=a,this},this.useSanitizeValueStrategy=function(a){return u=a,this},this.preferredLanguage=function(a){return G(a),this};var G=function(a){return a&&(b=a),b};this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(n=a,this):n},this.translationNotFoundIndicatorRight=function(a){return a?(o=a,this):o},this.fallbackLanguage=function(a){return H(a),this};var H=function(a){return a?(angular.isString(a)?(e=!0,d=[a]):angular.isArray(a)&&(e=!1,d=a),angular.isString(b)&&B(d,b)<0&&d.push(b),this):e?d[0]:d};this.use=function(a){if(a){if(!q[a]&&!l)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return f=a,this}return f};var I=function(a){return a?void(s=a):i?i+s:s};this.storageKey=I,this.useUrlLoader=function(a,b){return this.useLoader("$translateUrlLoader",angular.extend({url:a},b))},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return l=a,m=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return h=a,this},this.storagePrefix=function(a){return a?(i=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return j=a,this},this.usePostCompiling=function(a){return w=!!a,this},this.determinePreferredLanguage=function(a){var c=a&&angular.isFunction(a)?a():A();return b=r.length?D(c):c,this},this.registerAvailableLanguageKeys=function(a,b){return a?(r=a,b&&(c=b),this):r},this.useLoaderCache=function(a){return a===!1?p=void 0:a===!0?p=!0:"undefined"==typeof a?p="$translationCache":a&&(p=a),this},this.$get=["$log","$injector","$rootScope","$q",function(a,c,i,r){var x,z,A,J=c.get(k||"$translateDefaultInterpolation"),K=!1,L={},M={},N=function(a,c,e){if(angular.isArray(a)){var g=function(a){for(var b={},d=[],f=function(a){var d=r.defer(),f=function(c){b[a]=c,d.resolve([a,c])};return N(a,c,e).then(f,f),d.promise},g=0,h=a.length;h>g;g++)d.push(f(a[g]));return r.all(d).then(function(){return b})};return g(a)}var i=r.defer();a&&(a=C.apply(a));var j=function(){var a=b?M[b]:M[f];if(z=0,h&&!a){var c=x.get(s);if(a=M[c],d&&d.length){var e=B(d,c);z=0===e?1:0,B(d,b)<0&&d.push(b)}}return a}();return j?j.then(function(){Z(a,c,e).then(i.resolve,i.reject)},i.reject):Z(a,c,e).then(i.resolve,i.reject),i.promise},O=function(a){return n&&(a=[n,a].join(" ")),o&&(a=[a,o].join(" ")),a},P=function(a){f=a,i.$emit("$translateChangeSuccess",{language:a}),h&&x.put(N.storageKey(),f),J.setLocale(f),angular.forEach(L,function(a,b){L[b].setLocale(f)}),i.$emit("$translateChangeEnd",{language:a})},Q=function(a){if(!a)throw"No language key specified for loading.";var b=r.defer();i.$emit("$translateLoadingStart",{language:a}),K=!0;var d=p;"string"==typeof d&&(d=c.get(d));var e=angular.extend({},m,{key:a,$http:angular.extend({},{cache:d},m.$http)});return c.get(l)(e).then(function(c){var d={};i.$emit("$translateLoadingSuccess",{language:a}),angular.isArray(c)?angular.forEach(c,function(a){angular.extend(d,F(a))}):angular.extend(d,F(c)),K=!1,b.resolve({key:a,table:d}),i.$emit("$translateLoadingEnd",{language:a})},function(a){i.$emit("$translateLoadingError",{language:a}),b.reject(a),i.$emit("$translateLoadingEnd",{language:a})}),b.promise};if(h&&(x=c.get(h),!x.get||!x.put))throw new Error("Couldn't use storage '"+h+"', missing get() or put() method!");angular.isFunction(J.useSanitizeValueStrategy)&&J.useSanitizeValueStrategy(u),t.length&&angular.forEach(t,function(a){var d=c.get(a);d.setLocale(b||f),angular.isFunction(d.useSanitizeValueStrategy)&&d.useSanitizeValueStrategy(u),L[d.getInterpolationIdentifier()]=d});var R=function(a){var b=r.defer();return Object.prototype.hasOwnProperty.call(q,a)?b.resolve(q[a]):M[a]?M[a].then(function(a){E(a.key,a.table),b.resolve(a.table)},b.reject):b.reject(),b.promise},S=function(a,b,c,d){var e=r.defer();return R(a).then(function(g){Object.prototype.hasOwnProperty.call(g,b)?(d.setLocale(a),e.resolve(d.interpolate(g[b],c)),d.setLocale(f)):e.reject()},e.reject),e.promise},T=function(a,b,c,d){var e,g=q[a];return g&&Object.prototype.hasOwnProperty.call(g,b)&&(d.setLocale(a),e=d.interpolate(g[b],c),d.setLocale(f)),e},U=function(a){if(j){var b=c.get(j)(a,f);return void 0!==b?b:a}return a},V=function(a,b,c,e){var f=r.defer();if(a<d.length){var g=d[a];S(g,b,c,e).then(f.resolve,function(){V(a+1,b,c,e).then(f.resolve)})}else f.resolve(U(b));return f.promise},W=function(a,b,c,e){var f;if(a<d.length){var g=d[a];f=T(g,b,c,e),f||(f=W(a+1,b,c,e))}return f},X=function(a,b,c){return V(A>0?A:z,a,b,c)},Y=function(a,b,c){return W(A>0?A:z,a,b,c)},Z=function(a,b,c){var e=r.defer(),g=f?q[f]:q,h=c?L[c]:J;if(g&&Object.prototype.hasOwnProperty.call(g,a)){var i=g[a];"@:"===i.substr(0,2)?N(i.substr(2),b,c).then(e.resolve,e.reject):e.resolve(h.interpolate(i,b))}else{var k;j&&!K&&(k=U(a)),f&&d&&d.length?X(a,b,h).then(function(a){e.resolve(a)},function(a){e.reject(O(a))}):j&&!K&&k?e.resolve(k):e.reject(O(a))}return e.promise},$=function(a,b,c){var e,g=f?q[f]:q,h=c?L[c]:J;if(g&&Object.prototype.hasOwnProperty.call(g,a)){var i=g[a];e="@:"===i.substr(0,2)?$(i.substr(2),b,c):h.interpolate(i,b)}else{var k;j&&!K&&(k=U(a)),f&&d&&d.length?(z=0,e=Y(a,b,h)):e=j&&!K&&k?k:O(a)}return e};if(N.preferredLanguage=function(a){return a&&G(a),b},N.cloakClassName=function(){return v},N.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(H(a),l&&d&&d.length)for(var b=0,c=d.length;c>b;b++)M[d[b]]||(M[d[b]]=Q(d[b]));N.use(N.use())}return e?d[0]:d},N.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=B(d,a);b>-1&&(A=b)}else A=0},N.proposedLanguage=function(){return g},N.storage=function(){return x},N.use=function(a){if(!a)return f;var b=r.defer();i.$emit("$translateChangeStart",{language:a});var c=D(a);return c&&(a=c),q[a]||!l||M[a]?(b.resolve(a),P(a)):(g=a,M[a]=Q(a).then(function(c){return E(c.key,c.table),b.resolve(c.key),P(c.key),g===a&&(g=void 0),c},function(a){g===a&&(g=void 0),i.$emit("$translateChangeError",{language:a}),b.reject(a),i.$emit("$translateChangeEnd",{language:a})})),b.promise},N.storageKey=function(){return I()},N.isPostCompilingEnabled=function(){return w},N.refresh=function(a){function b(){e.resolve(),i.$emit("$translateRefreshEnd",{language:a})}function c(){e.reject(),i.$emit("$translateRefreshEnd",{language:a})}if(!l)throw new Error("Couldn't refresh translation table, no loader registered!");var e=r.defer();if(i.$emit("$translateRefreshStart",{language:a}),a)q[a]?Q(a).then(function(c){E(c.key,c.table),a===f&&P(f),b()},c):c();else{var g=[],h={};if(d&&d.length)for(var j=0,k=d.length;k>j;j++)g.push(Q(d[j])),h[d[j]]=!0;f&&!h[f]&&g.push(Q(f)),r.all(g).then(function(a){angular.forEach(a,function(a){q[a.key]&&delete q[a.key],E(a.key,a.table)}),f&&P(f),b()})}return e.promise},N.instant=function(a,c,e){if(null===a||angular.isUndefined(a))return a;if(angular.isArray(a)){for(var g={},h=0,i=a.length;i>h;h++)g[a[h]]=N.instant(a[h],c,e);return g}if(angular.isString(a)&&a.length<1)return a;a&&(a=C.apply(a));var k,l=[];b&&l.push(b),f&&l.push(f),d&&d.length&&(l=l.concat(d));for(var m=0,n=l.length;n>m;m++){var o=l[m];if(q[o]&&"undefined"!=typeof q[o][a]&&(k=$(a,c,e)),"undefined"!=typeof k)break}return k||""===k||(k=J.interpolate(a,c),j&&!K&&(k=U(a))),k},N.versionInfo=function(){return y},N.loaderCache=function(){return p},l&&(angular.equals(q,{})&&N.use(N.use()),d&&d.length))for(var _=function(a){return E(a.key,a.table),i.$emit("$translateChangeEnd",{language:a.key}),a},ab=0,bb=d.length;bb>ab;ab++)M[d[ab]]=Q(d[ab]).then(_);return N}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(a){var b,c={},d="default",e=null,f={escaped:function(a){var b={};for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=angular.element("<div></div>").text(a[c]).html());return b}},g=function(a){var b;return b=angular.isFunction(f[e])?f[e](a):a};return c.setLocale=function(a){b=a},c.getInterpolationIdentifier=function(){return d},c.useSanitizeValueStrategy=function(a){return e=a,this},c.interpolate=function(b,c){return e&&(c=g(c)),a(b)(c||{})},c}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(a,b,c,d,e,f){return{restrict:"AE",scope:!0,compile:function(b,g){var h=g.translateValues?g.translateValues:void 0,i=g.translateInterpolation?g.translateInterpolation:void 0,j=b[0].outerHTML.match(/translate-value-+/i),k="^(.*)("+c.startSymbol()+".*"+c.endSymbol()+")(.*)",l="^(.*)"+c.startSymbol()+"(.*)"+c.endSymbol()+"(.*)";return function(b,m,n){b.interpolateParams={},b.preText="",b.postText="";var o={},p=function(a){if(angular.equals(a,"")||!angular.isDefined(a)){var d=m.text().match(k);angular.isArray(d)?(b.preText=d[1],b.postText=d[3],o.translate=c(d[2])(b.$parent),watcherMatches=m.text().match(l),angular.isArray(watcherMatches)&&watcherMatches[2]&&watcherMatches[2].length&&b.$watch(watcherMatches[2],function(a){o.translate=a,u()})):o.translate=m.text().replace(/^\s+|\s+$/g,"")}else o.translate=a;u()},q=function(a){n.$observe(a,function(b){o[a]=b,u()})};n.$observe("translate",function(a){p(a)});for(var r in n)n.hasOwnProperty(r)&&"translateAttr"===r.substr(0,13)&&q(r);if(n.$observe("translateDefault",function(a){b.defaultText=a}),h&&n.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),j){var s=function(a){n.$observe(a,function(c){var d=angular.lowercase(a.substr(14,1))+a.substr(15);b.interpolateParams[d]=c})};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&"translateValue"===t.substr(0,14)&&"translateValues"!==t&&s(t)}var u=function(){for(var a in o)o.hasOwnProperty(a)&&o[a]&&v(a,o[a],b,b.interpolateParams)},v=function(b,c,d,e){a(c,e,i).then(function(a){w(a,d,!0,b)},function(a){w(a,d,!1,b)})},w=function(b,c,e,f){if("translate"===f){e||"undefined"==typeof c.defaultText||(b=c.defaultText),m.html(c.preText+b+c.postText);var h=a.isPostCompilingEnabled(),i="undefined"!=typeof g.translateCompile,j=i&&"false"!==g.translateCompile;(h&&!i||j)&&d(m.contents())(c)}else{e||"undefined"==typeof c.defaultText||(b=c.defaultText);var k=n.$attr[f].substr(15);m.attr(k,b)}};b.$watch("interpolateParams",u,!0);var x=f.$on("$translateChangeSuccess",u);m.text().length&&p(""),u(),b.$on("$destroy",x)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(a,b){return{compile:function(c){var d=function(){c.addClass(b.cloakClassName())},e=function(){c.removeClass(b.cloakClassName())},f=a.$on("$translateChangeEnd",function(){e(),f(),f=null});return d(),function(a,c,f){f.translateCloak&&f.translateCloak.length&&f.$observe("translateCloak",function(a){b(a).then(e,d)})}}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(a,b){var c=function(c,d,e){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e)};return c.$stateful=!0,c}]),angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function(a,b){return function(c){if(!c||!angular.isString(c.prefix)||!angular.isString(c.suffix))throw new Error("Couldn't load static files, no prefix or suffix specified!");var d=a.defer();return b(angular.extend({url:[c.prefix,c.key,c.suffix].join(""),method:"GET",params:""},c.$http)).success(function(a){d.resolve(a)}).error(function(){d.reject(c.key)}),d.promise}}]),angular.module("pascalprecht.translate").factory("$translateCookieStorage",["$cookieStore",function(a){var b={get:function(b){return a.get(b)},set:function(b,c){a.put(b,c)},put:function(b,c){a.put(b,c)}};return b}]),angular.module("pascalprecht.translate").factory("$translateLocalStorage",["$window","$translateCookieStorage",function(a,b){var c=function(){var b;return{get:function(c){return b||(b=a.localStorage.getItem(c)),b},set:function(c,d){b=d,a.localStorage.setItem(c,d)},put:function(c,d){b=d,a.localStorage.setItem(c,d)}}}(),d="localStorage"in a;if(d){var e="pascalprecht.translate.storageTest";try{null!==a.localStorage?(a.localStorage.setItem(e,"foo"),a.localStorage.removeItem(e),d=!0):d=!1}catch(f){d=!1}}var g=d?c:b;return g}]),function(a,b){"use strict";return"function"==typeof define&&define.amd?void define(["angular"],function(a){return b(a)}):b(a)}(angular||null,function(a){"use strict";var b=a.module("ngTable",[]);b.factory("ngTableParams",["$q","$log",function(b,c){var d=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},e=function(e,f){var g=this,h=function(){j.debugMode&&c.debug&&c.debug.apply(this,arguments)};this.data=[],this.parameters=function(b,c){if(c=c||!1,a.isDefined(b)){for(var e in b){var f=b[e];if(c&&e.indexOf("[")>=0){for(var g=e.split(/\[(.*)\]/).reverse(),j="",k=0,l=g.length;l>k;k++){var m=g[k];if(""!==m){var n=f;f={},f[j=m]=d(n)?parseFloat(n):n}}"sorting"===j&&(i[j]={}),i[j]=a.extend(i[j]||{},f[j])}else i[e]=d(b[e])?parseFloat(b[e]):b[e]}return h("ngTable: set parameters",i),this}return i},this.settings=function(b){return a.isDefined(b)?(a.isArray(b.data)&&(b.total=b.data.length),j=a.extend(j,b),h("ngTable: set settings",j),this):j},this.page=function(b){return a.isDefined(b)?this.parameters({page:b}):i.page},this.total=function(b){return a.isDefined(b)?this.settings({total:b}):j.total},this.count=function(b){return a.isDefined(b)?this.parameters({count:b,page:1}):i.count},this.filter=function(b){return a.isDefined(b)?this.parameters({filter:b}):i.filter},this.sorting=function(b){if(2==arguments.length){var c={};return c[b]=arguments[1],this.parameters({sorting:c}),this}return a.isDefined(b)?this.parameters({sorting:b}):i.sorting},this.isSortBy=function(b,c){return a.isDefined(i.sorting[b])&&i.sorting[b]==c},this.orderBy=function(){var a=[];for(var b in i.sorting)a.push(("asc"===i.sorting[b]?"+":"-")+b);return a},this.getData=function(b,c){b.resolve(a.isArray(this.data)&&a.isObject(c)?this.data.slice((c.page()-1)*c.count(),c.page()*c.count()):[])},this.getGroups=function(c,d){var e=b.defer();e.promise.then(function(b){var e={};a.forEach(b,function(b){var c=a.isFunction(d)?d(b):b[d];e[c]=e[c]||{data:[]},e[c].value=c,e[c].data.push(b)});var f=[];for(var g in e)f.push(e[g]);h("ngTable: refresh groups",f),c.resolve(f)}),this.getData(e,g)},this.generatePagesArray=function(a,b,c){var d,e,f,g,h,i;if(d=11,i=[],h=Math.ceil(b/c),h>1){i.push({type:"prev",number:Math.max(1,a-1),active:a>1}),i.push({type:"first",number:1,active:a>1}),f=Math.round((d-5)/2),g=Math.max(2,a-f),e=Math.min(h-1,a+2*f-(a-g)),g=Math.max(2,g-(2*f-(e-g)));for(var j=g;e>=j;)i.push(j===g&&2!==j||j===e&&j!==h-1?{type:"more",active:!1}:{type:"page",number:j,active:a!==j}),j++;i.push({type:"last",number:h,active:a!==h}),i.push({type:"next",number:Math.min(h,a+1),active:h>a})}return i},this.url=function(b){b=b||!1;var c=b?[]:{};for(var d in i)if(i.hasOwnProperty(d)){var e=i[d],f=encodeURIComponent(d);if("object"==typeof e){for(var g in e)if(!a.isUndefined(e[g])&&""!==e[g]){var h=f+"["+encodeURIComponent(g)+"]";b?c.push(h+"="+e[g]):c[h]=e[g]}}else a.isFunction(e)||a.isUndefined(e)||""===e||(b?c.push(f+"="+encodeURIComponent(e)):c[f]=encodeURIComponent(e))}return c},this.reload=function(){var a=b.defer(),c=this;j.$loading=!0,j.groupBy?j.getGroups(a,j.groupBy,this):j.getData(a,this),h("ngTable: reload data"),a.promise.then(function(a){j.$loading=!1,h("ngTable: current scope",j.$scope),c.data=j.groupBy?j.$scope.$groups=a:j.$scope.$data=a,j.$scope.pages=c.generatePagesArray(c.page(),c.total(),c.count()),j.$scope.$emit("ngTableAfterReloadData")})},this.reloadPages=function(){var a=this;j.$scope.pages=a.generatePagesArray(a.page(),a.total(),a.count())};var i=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},j={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[10,25,50,100],getGroups:this.getGroups,getData:this.getData};return this.settings(f),this.parameters(e,!0),this};return e}]);var c=["$scope","ngTableParams","$timeout",function(b,c,d){b.$loading=!1,b.params||(b.params=new c),b.params.settings().$scope=b;var e=function(){var a=0;return function(b,c){d.cancel(a),a=d(b,c)}}();b.$watch("params.$params",function(c,d){b.params.settings().$scope=b,a.equals(c.filter,d.filter)?b.params.reload():e(function(){b.params.$params.page=1,b.params.reload()},b.params.settings().filterDelay)},!0),b.sortBy=function(a,c){var d=b.parse(a.sortable);if(d){var e=b.params.settings().defaultSort,f="asc"===e?"desc":"asc",g=b.params.sorting()&&b.params.sorting()[d]&&b.params.sorting()[d]===e,h=c.ctrlKey||c.metaKey?b.params.sorting():{};h[d]=g?f:e,b.params.parameters({sorting:h})}}}];return b.directive("ngTable",["$compile","$q","$parse",function(b,d,e){return{restrict:"A",priority:1001,scope:!0,controller:c,compile:function(c){var d=[],f=0,g=null,h=c.find("thead");return a.forEach(a.element(c.find("tr")),function(b){b=a.element(b),b.hasClass("ng-table-group")||g||(g=b)}),g?(a.forEach(g.find("td"),function(b){var c=a.element(b);if(!c.attr("ignore-cell")||"true"!==c.attr("ignore-cell")){var g=function(a,b){return function(f){return e(c.attr("x-data-"+a)||c.attr("data-"+a)||c.attr(a))(f,{$columns:d})||b}},h=g("title"," "),i=g("header",!1),j=g("filter",!1)(),k=!1,l=!1;j&&j.$$name&&(l=j.$$name,delete j.$$name),j&&j.templateURL&&(k=j.templateURL,delete j.templateURL),c.attr("data-title-text",h()),d.push({id:f++,title:h,sortable:g("sortable",!1),"class":c.attr("x-data-header-class")||c.attr("data-header-class")||c.attr("header-class"),filter:j,filterTemplateURL:k,filterName:l,headerTemplateURL:i,filterData:c.attr("filter-data")?c.attr("filter-data"):null,show:c.attr("ng-show")?function(a){return e(c.attr("ng-show"))(a)}:function(){return!0}})}}),function(c,f,g){if(c.$loading=!1,c.$columns=d,c.$watch(g.ngTable,function(b){a.isUndefined(b)||(c.paramsModel=e(g.ngTable),c.params=b)},!0),c.parse=function(b){return a.isDefined(b)?b(c):""},g.showFilter&&c.$parent.$watch(g.showFilter,function(a){c.show_filter=a}),a.forEach(d,function(b){var d;if(b.filterData){if(d=e(b.filterData)(c,{$column:b}),!a.isObject(d)||!a.isObject(d.promise))throw new Error("Function "+b.filterData+" must be instance of $q.defer()");return delete b.filterData,d.promise.then(function(c){a.isArray(c)||(c=[]),c.unshift({title:"-",id:""}),b.data=c})}}),!f.hasClass("ng-table")){c.templates={header:g.templateHeader?g.templateHeader:"ng-table/header.html",pagination:g.templatePagination?g.templatePagination:"ng-table/pager.html"};var i=h.length>0?h:a.element(document.createElement("thead")).attr("ng-include","templates.header"),j=a.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"});f.find("thead").remove(),f.addClass("ng-table").prepend(i).after(j),b(i)(c),b(j)(c)}}):void 0}}}]),b.directive("ngTablePagination",["$compile",function(b){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(c,d){c.params.settings().$scope.$on("ngTableAfterReloadData",function(){c.pages=c.params.generatePagesArray(c.params.page(),c.params.total(),c.params.count())},!0),c.$watch("templateUrl",function(e){if(!a.isUndefined(e)){var f=a.element(document.createElement("div"));f.attr({"ng-include":"templateUrl"}),d.append(f),b(f)(c)}})}}}]),a.module("ngTable").run(["$templateCache",function(a){a.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in column.data" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control" name="{{column.filterName}}"> </select>'),a.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control" name="{{column.filterName}}"> </select>'),a.put("ng-table/filters/text.html",'<input type="text" name="{{column.filterName}}" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>'),a.put("ng-table/header.html",'<tr> <th ng-repeat="column in $columns" ng-class="{ \'sortable\': parse(column.sortable), \'sort-asc\': params.sorting()[parse(column.sortable)]==\'asc\', \'sort-desc\': params.sorting()[parse(column.sortable)]==\'desc\' }" ng-click="sortBy(column, $event)" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header {{column.class}}"> <div ng-if="!template" ng-show="!template" ng-bind="parse(column.title)"></div> <div ng-if="template" ng-show="template"><div ng-include="template"></div></div> </th> </tr> <tr ng-show="show_filter" class="ng-table-filters"> <th ng-repeat="column in $columns" ng-show="column.show(this)" class="filter"> <div ng-repeat="(name, filter) in column.filter"> <div ng-if="column.filterTemplateURL" ng-show="column.filterTemplateURL"> <div ng-include="column.filterTemplateURL"></div> </div> <div ng-if="!column.filterTemplateURL" ng-show="!column.filterTemplateURL"> <div ng-include="\'ng-table/filters/\' + filter + \'.html\'"></div> </div> </div> </th> </tr>'),a.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button> </div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div> ')
}]),b}),!function(){function a(a){return a&&(a.ownerDocument||a.document||a).documentElement}function b(a){return a&&(a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView)}function c(a,b){return b>a?-1:a>b?1:a>=b?0:0/0}function d(a){return null===a?0/0:+a}function e(a){return!isNaN(a)}function f(a){return{left:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)<0?d=f+1:e=f}return d},right:function(b,c,d,e){for(arguments.length<3&&(d=0),arguments.length<4&&(e=b.length);e>d;){var f=d+e>>>1;a(b[f],c)>0?e=f:d=f+1}return d}}}function g(a){return a.length}function h(a){for(var b=1;a*b%1;)b*=10;return b}function i(a,b){for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}function j(){this._=Object.create(null)}function k(a){return(a+="")===oh||a[0]===ph?ph+a:a}function l(a){return(a+="")[0]===ph?a.slice(1):a}function m(a){return k(a)in this._}function n(a){return(a=k(a))in this._&&delete this._[a]}function o(){var a=[];for(var b in this._)a.push(l(b));return a}function p(){var a=0;for(var b in this._)++a;return a}function q(){for(var a in this._)return!1;return!0}function r(){this._=Object.create(null)}function s(a){return a}function t(a,b,c){return function(){var d=c.apply(b,arguments);return d===b?a:d}}function u(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.slice(1);for(var c=0,d=qh.length;d>c;++c){var e=qh[c]+b;if(e in a)return e}}function v(){}function w(){}function x(a){function b(){for(var b,d=c,e=-1,f=d.length;++e<f;)(b=d[e].on)&&b.apply(this,arguments);return a}var c=[],d=new j;return b.on=function(b,e){var f,g=d.get(b);return arguments.length<2?g&&g.on:(g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b)),e&&c.push(d.set(b,{on:e})),a)},b}function y(){bh.event.preventDefault()}function z(){for(var a,b=bh.event;a=b.sourceEvent;)b=a;return b}function A(a){for(var b=new w,c=0,d=arguments.length;++c<d;)b[arguments[c]]=x(b);return b.of=function(c,d){return function(e){try{var f=e.sourceEvent=bh.event;e.target=a,bh.event=e,b[e.type].apply(c,d)}finally{bh.event=f}}},b}function B(a){return sh(a,wh),a}function C(a){return"function"==typeof a?a:function(){return th(a,this)}}function D(a){return"function"==typeof a?a:function(){return uh(a,this)}}function E(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}return a=bh.ns.qualify(a),null==b?a.local?d:c:"function"==typeof b?a.local?h:g:a.local?f:e}function F(a){return a.trim().replace(/\s+/g," ")}function G(a){return new RegExp("(?:^|\\s+)"+bh.requote(a)+"(?:\\s+|$)","g")}function H(a){return(a+"").trim().split(/^|\s+/)}function I(a,b){function c(){for(var c=-1;++c<e;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<e;)a[c](this,d)}a=H(a).map(J);var e=a.length;return"function"==typeof b?d:c}function J(a){var b=G(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?(b.lastIndex=0,b.test(e)||c.setAttribute("class",F(e+" "+a))):c.setAttribute("class",F(e.replace(b," ")))}}function K(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"==typeof b?f:e}function L(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"==typeof b?e:d}function M(a){function b(){var b=this.ownerDocument,c=this.namespaceURI;return c?b.createElementNS(c,a):b.createElement(a)}function c(){return this.ownerDocument.createElementNS(a.space,a.local)}return"function"==typeof a?a:(a=bh.ns.qualify(a)).local?c:b}function N(){var a=this.parentNode;a&&a.removeChild(this)}function O(a){return{__data__:a}}function P(a){return function(){return vh(this,a)}}function Q(a){return arguments.length||(a=c),function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function R(a,b){for(var c=0,d=a.length;d>c;c++)for(var e,f=a[c],g=0,h=f.length;h>g;g++)(e=f[g])&&b(e,g,c);return a}function S(a){return sh(a,yh),a}function T(a){var b,c;return function(d,e,f){var g,h=a[f].update,i=h.length;for(f!=c&&(c=f,b=0),e>=b&&(b=e+1);!(g=h[b])&&++b<i;);return g}}function U(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var e=i(b,dh(arguments));d.call(this),this.addEventListener(a,this[g]=e,e.$=c),e._=b}function f(){var b,c=new RegExp("^__on([^.]+)"+bh.requote(a)+"$");for(var d in this)if(b=d.match(c)){var e=this[d];this.removeEventListener(b[1],e,e.$),delete this[d]}}var g="__on"+a,h=a.indexOf("."),i=V;h>0&&(a=a.slice(0,h));var j=zh.get(a);return j&&(a=j,i=W),h?b?e:d:b?v:f}function V(a,b){return function(c){var d=bh.event;bh.event=c,b[0]=this.__data__;try{a.apply(this,b)}finally{bh.event=d}}}function W(a,b){var c=V(a,b);return function(a){var b=this,d=a.relatedTarget;d&&(d===b||8&d.compareDocumentPosition(b))||c.call(b,a)}}function X(c){var d=".dragsuppress-"+ ++Bh,e="click"+d,f=bh.select(b(c)).on("touchmove"+d,y).on("dragstart"+d,y).on("selectstart"+d,y);if(null==Ah&&(Ah="onselectstart"in c?!1:u(c.style,"userSelect")),Ah){var g=a(c).style,h=g[Ah];g[Ah]="none"}return function(a){if(f.on(d,null),Ah&&(g[Ah]=h),a){var b=function(){f.on(e,null)};f.on(e,function(){y(),b()},!0),setTimeout(b,0)}}}function Y(a,c){c.changedTouches&&(c=c.changedTouches[0]);var d=a.ownerSVGElement||a;if(d.createSVGPoint){var e=d.createSVGPoint();if(0>Ch){var f=b(a);if(f.scrollX||f.scrollY){d=bh.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var g=d[0][0].getScreenCTM();Ch=!(g.f||g.e),d.remove()}}return Ch?(e.x=c.pageX,e.y=c.pageY):(e.x=c.clientX,e.y=c.clientY),e=e.matrixTransform(a.getScreenCTM().inverse()),[e.x,e.y]}var h=a.getBoundingClientRect();return[c.clientX-h.left-a.clientLeft,c.clientY-h.top-a.clientTop]}function Z(){return bh.event.changedTouches[0].identifier}function $(a){return a>0?1:0>a?-1:0}function _(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ab(a){return a>1?0:-1>a?Fh:Math.acos(a)}function bb(a){return a>1?Ih:-1>a?-Ih:Math.asin(a)}function cb(a){return((a=Math.exp(a))-1/a)/2}function db(a){return((a=Math.exp(a))+1/a)/2}function eb(a){return((a=Math.exp(2*a))-1)/(a+1)}function fb(a){return(a=Math.sin(a/2))*a}function gb(){}function hb(a,b,c){return this instanceof hb?(this.h=+a,this.s=+b,void(this.l=+c)):arguments.length<2?a instanceof hb?new hb(a.h,a.s,a.l):vb(""+a,wb,hb):new hb(a,b,c)}function ib(a,b,c){function d(a){return a>360?a-=360:0>a&&(a+=360),60>a?f+(g-f)*a/60:180>a?g:240>a?f+(g-f)*(240-a)/60:f}function e(a){return Math.round(255*d(a))}var f,g;return a=isNaN(a)?0:(a%=360)<0?a+360:a,b=isNaN(b)?0:0>b?0:b>1?1:b,c=0>c?0:c>1?1:c,g=.5>=c?c*(1+b):c+b-c*b,f=2*c-g,new rb(e(a+120),e(a),e(a-120))}function jb(a,b,c){return this instanceof jb?(this.h=+a,this.c=+b,void(this.l=+c)):arguments.length<2?a instanceof jb?new jb(a.h,a.c,a.l):a instanceof lb?nb(a.l,a.a,a.b):nb((a=xb((a=bh.rgb(a)).r,a.g,a.b)).l,a.a,a.b):new jb(a,b,c)}function kb(a,b,c){return isNaN(a)&&(a=0),isNaN(b)&&(b=0),new lb(c,Math.cos(a*=Jh)*b,Math.sin(a)*b)}function lb(a,b,c){return this instanceof lb?(this.l=+a,this.a=+b,void(this.b=+c)):arguments.length<2?a instanceof lb?new lb(a.l,a.a,a.b):a instanceof jb?kb(a.h,a.c,a.l):xb((a=rb(a)).r,a.g,a.b):new lb(a,b,c)}function mb(a,b,c){var d=(a+16)/116,e=d+b/500,f=d-c/200;return e=ob(e)*Uh,d=ob(d)*Vh,f=ob(f)*Wh,new rb(qb(3.2404542*e-1.5371385*d-.4985314*f),qb(-.969266*e+1.8760108*d+.041556*f),qb(.0556434*e-.2040259*d+1.0572252*f))}function nb(a,b,c){return a>0?new jb(Math.atan2(c,b)*Kh,Math.sqrt(b*b+c*c),a):new jb(0/0,0/0,a)}function ob(a){return a>.206893034?a*a*a:(a-4/29)/7.787037}function pb(a){return a>.008856?Math.pow(a,1/3):7.787037*a+4/29}function qb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function rb(a,b,c){return this instanceof rb?(this.r=~~a,this.g=~~b,void(this.b=~~c)):arguments.length<2?a instanceof rb?new rb(a.r,a.g,a.b):vb(""+a,rb,ib):new rb(a,b,c)}function sb(a){return new rb(a>>16,a>>8&255,255&a)}function tb(a){return sb(a)+""}function ub(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function vb(a,b,c){var d,e,f,g=0,h=0,i=0;if(d=/([a-z]+)\((.*)\)/i.exec(a))switch(e=d[2].split(","),d[1]){case"hsl":return c(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100);case"rgb":return b(zb(e[0]),zb(e[1]),zb(e[2]))}return(f=Zh.get(a.toLowerCase()))?b(f.r,f.g,f.b):(null==a||"#"!==a.charAt(0)||isNaN(f=parseInt(a.slice(1),16))||(4===a.length?(g=(3840&f)>>4,g=g>>4|g,h=240&f,h=h>>4|h,i=15&f,i=i<<4|i):7===a.length&&(g=(16711680&f)>>16,h=(65280&f)>>8,i=255&f)),b(g,h,i))}function wb(a,b,c){var d,e,f=Math.min(a/=255,b/=255,c/=255),g=Math.max(a,b,c),h=g-f,i=(g+f)/2;return h?(e=.5>i?h/(g+f):h/(2-g-f),d=a==g?(b-c)/h+(c>b?6:0):b==g?(c-a)/h+2:(a-b)/h+4,d*=60):(d=0/0,e=i>0&&1>i?0:d),new hb(d,e,i)}function xb(a,b,c){a=yb(a),b=yb(b),c=yb(c);var d=pb((.4124564*a+.3575761*b+.1804375*c)/Uh),e=pb((.2126729*a+.7151522*b+.072175*c)/Vh),f=pb((.0193339*a+.119192*b+.9503041*c)/Wh);return lb(116*e-16,500*(d-e),200*(e-f))}function yb(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function zb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function Ab(a){return"function"==typeof a?a:function(){return a}}function Bb(a){return function(b,c,d){return 2===arguments.length&&"function"==typeof c&&(d=c,c=null),Cb(b,c,a,d)}}function Cb(a,b,c,d){function e(){var a,b=i.status;if(!b&&Eb(i)||b>=200&&300>b||304===b){try{a=c.call(f,i)}catch(d){return void g.error.call(f,d)}g.load.call(f,a)}else g.error.call(f,i)}var f={},g=bh.dispatch("beforesend","progress","load","error"),h={},i=new XMLHttpRequest,j=null;return!this.XDomainRequest||"withCredentials"in i||!/^(http(s)?:)?\/\//.test(a)||(i=new XDomainRequest),"onload"in i?i.onload=i.onerror=e:i.onreadystatechange=function(){i.readyState>3&&e()},i.onprogress=function(a){var b=bh.event;bh.event=a;try{g.progress.call(f,i)}finally{bh.event=b}},f.header=function(a,b){return a=(a+"").toLowerCase(),arguments.length<2?h[a]:(null==b?delete h[a]:h[a]=b+"",f)},f.mimeType=function(a){return arguments.length?(b=null==a?null:a+"",f):b},f.responseType=function(a){return arguments.length?(j=a,f):j},f.response=function(a){return c=a,f},["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(dh(arguments)))}}),f.send=function(c,d,e){if(2===arguments.length&&"function"==typeof d&&(e=d,d=null),i.open(c,a,!0),null==b||"accept"in h||(h.accept=b+",*/*"),i.setRequestHeader)for(var k in h)i.setRequestHeader(k,h[k]);return null!=b&&i.overrideMimeType&&i.overrideMimeType(b),null!=j&&(i.responseType=j),null!=e&&f.on("error",e).on("load",function(a){e(null,a)}),g.beforesend.call(f,i),i.send(null==d?null:d),f},f.abort=function(){return i.abort(),f},bh.rebind(f,g,"on"),null==d?f:f.get(Db(d))}function Db(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function Eb(a){var b=a.responseType;return b&&"text"!==b?a.response:a.responseText}function Fb(){var a=Gb(),b=Hb()-a;b>24?(isFinite(b)&&(clearTimeout(bi),bi=setTimeout(Fb,b)),ai=0):(ai=1,di(Fb))}function Gb(){var a=Date.now();for(ci=$h;ci;)a>=ci.t&&(ci.f=ci.c(a-ci.t)),ci=ci.n;return a}function Hb(){for(var a,b=$h,c=1/0;b;)b.f?b=a?a.n=b.n:$h=b.n:(b.t<c&&(c=b.t),b=(a=b).n);return _h=a,c}function Ib(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Jb(a,b){var c=Math.pow(10,3*nh(8-b));return{scale:b>8?function(a){return a/c}:function(a){return a*c},symbol:a}}function Kb(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d&&c?function(a,b){for(var e=a.length,f=[],g=0,h=d[0],i=0;e>0&&h>0&&(i+h+1>b&&(h=Math.max(1,b-i)),f.push(a.substring(e-=h,e+h)),!((i+=h+1)>b));)h=d[g=(g+1)%d.length];return f.reverse().join(c)}:s;return function(a){var c=fi.exec(a),d=c[1]||" ",g=c[2]||">",h=c[3]||"-",i=c[4]||"",j=c[5],k=+c[6],l=c[7],m=c[8],n=c[9],o=1,p="",q="",r=!1,s=!0;switch(m&&(m=+m.substring(1)),(j||"0"===d&&"="===g)&&(j=d="0",g="="),n){case"n":l=!0,n="g";break;case"%":o=100,q="%",n="f";break;case"p":o=100,q="%",n="r";break;case"b":case"o":case"x":case"X":"#"===i&&(p="0"+n.toLowerCase());case"c":s=!1;case"d":r=!0,m=0;break;case"s":o=-1,n="r"}"$"===i&&(p=e[0],q=e[1]),"r"!=n||m||(n="g"),null!=m&&("g"==n?m=Math.max(1,Math.min(21,m)):("e"==n||"f"==n)&&(m=Math.max(0,Math.min(20,m)))),n=gi.get(n)||Lb;var t=j&&l;return function(a){var c=q;if(r&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):"-"===h?"":h;if(0>o){var i=bh.formatPrefix(a,m);a=i.scale(a),c=i.symbol+q}else a*=o;a=n(a,m);var u,v,w=a.lastIndexOf(".");if(0>w){var x=s?a.lastIndexOf("e"):-1;0>x?(u=a,v=""):(u=a.substring(0,x),v=a.substring(x))}else u=a.substring(0,w),v=b+a.substring(w+1);!j&&l&&(u=f(u,1/0));var y=p.length+u.length+v.length+(t?0:e.length),z=k>y?new Array(y=k-y+1).join(d):"";return t&&(u=f(z+u,z.length?k-v.length:1/0)),e+=p,a=u+v,("<"===g?e+a+z:">"===g?z+e+a:"^"===g?z.substring(0,y>>=1)+e+a+z.substring(y):e+(t?a:z+a))+c}}}function Lb(a){return a+""}function Mb(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Nb(a,b,c){function d(b){var c=a(b),d=f(c,1);return d-b>b-c?c:d}function e(c){return b(c=a(new ii(c-1)),1),c}function f(a,c){return b(a=new ii(+a),c),a}function g(a,d,f){var g=e(a),h=[];if(f>1)for(;d>g;)c(g)%f||h.push(new Date(+g)),b(g,1);else for(;d>g;)h.push(new Date(+g)),b(g,1);return h}function h(a,b,c){try{ii=Mb;var d=new Mb;return d._=a,g(d,b,c)}finally{ii=Date}}a.floor=a,a.round=d,a.ceil=e,a.offset=f,a.range=g;var i=a.utc=Ob(a);return i.floor=i,i.round=Ob(d),i.ceil=Ob(e),i.offset=Ob(f),i.range=h,a}function Ob(a){return function(b,c){try{ii=Mb;var d=new Mb;return d._=b,a(d,c)._}finally{ii=Date}}}function Pb(a){function b(a){function b(b){for(var c,e,f,g=[],h=-1,i=0;++h<d;)37===a.charCodeAt(h)&&(g.push(a.slice(i,h)),null!=(e=ki[c=a.charAt(++h)])&&(c=a.charAt(++h)),(f=C[c])&&(c=f(b,null==e?"e"===c?" ":"0":e)),g.push(c),i=h+1);return g.push(a.slice(i,h)),g.join("")}var d=a.length;return b.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},e=c(d,a,b,0);if(e!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);var f=null!=d.Z&&ii!==Mb,g=new(f?Mb:ii);return"j"in d?g.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(g.setFullYear(d.y,0,1),g.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(g.getDay()+5)%7:d.w+7*d.U-(g.getDay()+6)%7)):g.setFullYear(d.y,d.m,d.d),g.setHours(d.H+(d.Z/100|0),d.M+d.Z%100,d.S,d.L),f?g._:g},b.toString=function(){return a},b}function c(a,b,c,d){for(var e,f,g,h=0,i=b.length,j=c.length;i>h;){if(d>=j)return-1;if(e=b.charCodeAt(h++),37===e){if(g=b.charAt(h++),f=D[g in ki?b.charAt(h++):g],!f||(d=f(a,c,d))<0)return-1}else if(e!=c.charCodeAt(d++))return-1}return d}function d(a,b,c){w.lastIndex=0;var d=w.exec(b.slice(c));return d?(a.w=x.get(d[0].toLowerCase()),c+d[0].length):-1}function e(a,b,c){u.lastIndex=0;var d=u.exec(b.slice(c));return d?(a.w=v.get(d[0].toLowerCase()),c+d[0].length):-1}function f(a,b,c){A.lastIndex=0;var d=A.exec(b.slice(c));return d?(a.m=B.get(d[0].toLowerCase()),c+d[0].length):-1}function g(a,b,c){y.lastIndex=0;var d=y.exec(b.slice(c));return d?(a.m=z.get(d[0].toLowerCase()),c+d[0].length):-1}function h(a,b,d){return c(a,C.c.toString(),b,d)}function i(a,b,d){return c(a,C.x.toString(),b,d)}function j(a,b,d){return c(a,C.X.toString(),b,d)}function k(a,b,c){var d=t.get(b.slice(c,c+=2).toLowerCase());return null==d?-1:(a.p=d,c)}var l=a.dateTime,m=a.date,n=a.time,o=a.periods,p=a.days,q=a.shortDays,r=a.months,s=a.shortMonths;b.utc=function(a){function c(a){try{ii=Mb;var b=new ii;return b._=a,d(b)}finally{ii=Date}}var d=b(a);return c.parse=function(a){try{ii=Mb;var b=d.parse(a);return b&&b._}finally{ii=Date}},c.toString=d.toString,c},b.multi=b.utc.multi=hc;var t=bh.map(),u=Rb(p),v=Sb(p),w=Rb(q),x=Sb(q),y=Rb(r),z=Sb(r),A=Rb(s),B=Sb(s);o.forEach(function(a,b){t.set(a.toLowerCase(),b)});var C={a:function(a){return q[a.getDay()]},A:function(a){return p[a.getDay()]},b:function(a){return s[a.getMonth()]},B:function(a){return r[a.getMonth()]},c:b(l),d:function(a,b){return Qb(a.getDate(),b,2)},e:function(a,b){return Qb(a.getDate(),b,2)},H:function(a,b){return Qb(a.getHours(),b,2)},I:function(a,b){return Qb(a.getHours()%12||12,b,2)},j:function(a,b){return Qb(1+hi.dayOfYear(a),b,3)},L:function(a,b){return Qb(a.getMilliseconds(),b,3)},m:function(a,b){return Qb(a.getMonth()+1,b,2)},M:function(a,b){return Qb(a.getMinutes(),b,2)},p:function(a){return o[+(a.getHours()>=12)]},S:function(a,b){return Qb(a.getSeconds(),b,2)},U:function(a,b){return Qb(hi.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Qb(hi.mondayOfYear(a),b,2)},x:b(m),X:b(n),y:function(a,b){return Qb(a.getFullYear()%100,b,2)},Y:function(a,b){return Qb(a.getFullYear()%1e4,b,4)},Z:fc,"%":function(){return"%"}},D={a:d,A:e,b:f,B:g,c:h,d:_b,e:_b,H:bc,I:bc,j:ac,L:ec,m:$b,M:cc,p:k,S:dc,U:Ub,w:Tb,W:Vb,x:i,X:j,y:Xb,Y:Wb,Z:Yb,"%":gc};return b}function Qb(a,b,c){var d=0>a?"-":"",e=(d?-a:a)+"",f=e.length;return d+(c>f?new Array(c-f+1).join(b)+e:e)}function Rb(a){return new RegExp("^(?:"+a.map(bh.requote).join("|")+")","i")}function Sb(a){for(var b=new j,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Tb(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+1));return d?(a.w=+d[0],c+d[0].length):-1}function Ub(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c));return d?(a.U=+d[0],c+d[0].length):-1}function Vb(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c));return d?(a.W=+d[0],c+d[0].length):-1}function Wb(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+4));return d?(a.y=+d[0],c+d[0].length):-1}function Xb(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+2));return d?(a.y=Zb(+d[0]),c+d[0].length):-1}function Yb(a,b,c){return/^[+-]\d{4}$/.test(b=b.slice(c,c+5))?(a.Z=-b,c+5):-1}function Zb(a){return a+(a>68?1900:2e3)}function $b(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+2));return d?(a.m=d[0]-1,c+d[0].length):-1}function _b(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+2));return d?(a.d=+d[0],c+d[0].length):-1}function ac(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+3));return d?(a.j=+d[0],c+d[0].length):-1}function bc(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+2));return d?(a.H=+d[0],c+d[0].length):-1}function cc(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+2));return d?(a.M=+d[0],c+d[0].length):-1}function dc(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+2));return d?(a.S=+d[0],c+d[0].length):-1}function ec(a,b,c){li.lastIndex=0;var d=li.exec(b.slice(c,c+3));return d?(a.L=+d[0],c+d[0].length):-1}function fc(a){var b=a.getTimezoneOffset(),c=b>0?"-":"+",d=nh(b)/60|0,e=nh(b)%60;return c+Qb(d,"0",2)+Qb(e,"0",2)}function gc(a,b,c){mi.lastIndex=0;var d=mi.exec(b.slice(c,c+1));return d?c+d[0].length:-1}function hc(a){for(var b=a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function ic(){}function jc(a,b,c){var d=c.s=a+b,e=d-a,f=d-e;c.t=a-f+(b-e)}function kc(a,b){a&&qi.hasOwnProperty(a.type)&&qi[a.type](a,b)}function lc(a,b,c){var d,e=-1,f=a.length-c;for(b.lineStart();++e<f;)d=a[e],b.point(d[0],d[1],d[2]);b.lineEnd()}function mc(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)lc(a[c],b,1);b.polygonEnd()}function nc(){function a(a,b){a*=Jh,b=b*Jh/2+Fh/4;var c=a-d,g=c>=0?1:-1,h=g*c,i=Math.cos(b),j=Math.sin(b),k=f*j,l=e*i+k*Math.cos(h),m=k*g*Math.sin(h);si.add(Math.atan2(m,l)),d=a,e=i,f=j}var b,c,d,e,f;ti.point=function(g,h){ti.point=a,d=(b=g)*Jh,e=Math.cos(h=(c=h)*Jh/2+Fh/4),f=Math.sin(h)},ti.lineEnd=function(){a(b,c)}}function oc(a){var b=a[0],c=a[1],d=Math.cos(c);return[d*Math.cos(b),d*Math.sin(b),Math.sin(c)]}function pc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function qc(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function rc(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function sc(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function tc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b,a[1]/=b,a[2]/=b}function uc(a){return[Math.atan2(a[1],a[0]),bb(a[2])]}function vc(a,b){return nh(a[0]-b[0])<Dh&&nh(a[1]-b[1])<Dh}function wc(a,b){a*=Jh;var c=Math.cos(b*=Jh);xc(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function xc(a,b,c){++ui,wi+=(a-wi)/ui,xi+=(b-xi)/ui,yi+=(c-yi)/ui}function yc(){function a(a,e){a*=Jh;var f=Math.cos(e*=Jh),g=f*Math.cos(a),h=f*Math.sin(a),i=Math.sin(e),j=Math.atan2(Math.sqrt((j=c*i-d*h)*j+(j=d*g-b*i)*j+(j=b*h-c*g)*j),b*g+c*h+d*i);vi+=j,zi+=j*(b+(b=g)),Ai+=j*(c+(c=h)),Bi+=j*(d+(d=i)),xc(b,c,d)}var b,c,d;Fi.point=function(e,f){e*=Jh;var g=Math.cos(f*=Jh);b=g*Math.cos(e),c=g*Math.sin(e),d=Math.sin(f),Fi.point=a,xc(b,c,d)}}function zc(){Fi.point=wc}function Ac(){function a(a,b){a*=Jh;var c=Math.cos(b*=Jh),g=c*Math.cos(a),h=c*Math.sin(a),i=Math.sin(b),j=e*i-f*h,k=f*g-d*i,l=d*h-e*g,m=Math.sqrt(j*j+k*k+l*l),n=d*g+e*h+f*i,o=m&&-ab(n)/m,p=Math.atan2(m,n);Ci+=o*j,Di+=o*k,Ei+=o*l,vi+=p,zi+=p*(d+(d=g)),Ai+=p*(e+(e=h)),Bi+=p*(f+(f=i)),xc(d,e,f)}var b,c,d,e,f;Fi.point=function(g,h){b=g,c=h,Fi.point=a,g*=Jh;var i=Math.cos(h*=Jh);d=i*Math.cos(g),e=i*Math.sin(g),f=Math.sin(h),xc(d,e,f)},Fi.lineEnd=function(){a(b,c),Fi.lineEnd=zc,Fi.point=wc}}function Bc(a,b){function c(c,d){return c=a(c,d),b(c[0],c[1])}return a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])}),c}function Cc(){return!0}function Dc(a,b,c,d,e){var f=[],g=[];if(a.forEach(function(a){if(!((b=a.length-1)<=0)){var b,c=a[0],d=a[b];if(vc(c,d)){e.lineStart();for(var h=0;b>h;++h)e.point((c=a[h])[0],c[1]);return void e.lineEnd()}var i=new Fc(c,a,null,!0),j=new Fc(c,null,i,!1);i.o=j,f.push(i),g.push(j),i=new Fc(d,a,null,!1),j=new Fc(d,null,i,!0),i.o=j,f.push(i),g.push(j)}}),g.sort(b),Ec(f),Ec(g),f.length){for(var h=0,i=c,j=g.length;j>h;++h)g[h].e=i=!i;for(var k,l,m=f[0];;){for(var n=m,o=!0;n.v;)if((n=n.n)===m)return;k=n.z,e.lineStart();do{if(n.v=n.o.v=!0,n.e){if(o)for(var h=0,j=k.length;j>h;++h)e.point((l=k[h])[0],l[1]);else d(n.x,n.n.x,1,e);n=n.n}else{if(o){k=n.p.z;for(var h=k.length-1;h>=0;--h)e.point((l=k[h])[0],l[1])}else d(n.x,n.p.x,-1,e);n=n.p}n=n.o,k=n.z,o=!o}while(!n.v);e.lineEnd()}}}function Ec(a){if(b=a.length){for(var b,c,d=0,e=a[0];++d<b;)e.n=c=a[d],c.p=e,e=c;e.n=c=a[0],c.p=e}}function Fc(a,b,c,d){this.x=a,this.z=b,this.o=c,this.e=d,this.v=!1,this.n=this.p=null}function Gc(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function h(a,b){var c=e(a,b);q.point(c[0],c[1])}function i(){s.point=h,q.lineStart()}function j(){s.point=g,q.lineEnd()}function k(a,b){p.push([a,b]);var c=e(a,b);u.point(c[0],c[1])}function l(){u.lineStart(),p=[]}function m(){k(p[0][0],p[0][1]),u.lineEnd();var a,b=u.clean(),c=t.buffer(),d=c.length;if(p.pop(),o.push(p),p=null,d)if(1&b){a=c[0];var e,d=a.length-1,g=-1;if(d>0){for(v||(f.polygonStart(),v=!0),f.lineStart();++g<d;)f.point((e=a[g])[0],e[1]);f.lineEnd()}}else d>1&&2&b&&c.push(c.pop().concat(c.shift())),n.push(c.filter(Hc))}var n,o,p,q=b(f),r=e.invert(d[0],d[1]),s={point:g,lineStart:i,lineEnd:j,polygonStart:function(){s.point=k,s.lineStart=l,s.lineEnd=m,n=[],o=[]},polygonEnd:function(){s.point=g,s.lineStart=i,s.lineEnd=j,n=bh.merge(n);var a=Nc(r,o);n.length?(v||(f.polygonStart(),v=!0),Dc(n,Jc,a,c,f)):a&&(v||(f.polygonStart(),v=!0),f.lineStart(),c(null,null,1,f),f.lineEnd()),v&&(f.polygonEnd(),v=!1),n=o=null},sphere:function(){f.polygonStart(),f.lineStart(),c(null,null,1,f),f.lineEnd(),f.polygonEnd()}},t=Ic(),u=b(t),v=!1;return s}}function Hc(a){return a.length>1}function Ic(){var a,b=[];return{lineStart:function(){b.push(a=[])},point:function(b,c){a.push([b,c])},lineEnd:v,buffer:function(){var c=b;return b=[],a=null,c},rejoin:function(){b.length>1&&b.push(b.pop().concat(b.shift()))}}}function Jc(a,b){return((a=a.x)[0]<0?a[1]-Ih-Dh:Ih-a[1])-((b=b.x)[0]<0?b[1]-Ih-Dh:Ih-b[1])}function Kc(a){var b,c=0/0,d=0/0,e=0/0;return{lineStart:function(){a.lineStart(),b=1},point:function(f,g){var h=f>0?Fh:-Fh,i=nh(f-c);nh(i-Fh)<Dh?(a.point(c,d=(d+g)/2>0?Ih:-Ih),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),a.point(f,d),b=0):e!==h&&i>=Fh&&(nh(c-e)<Dh&&(c-=e*Dh),nh(f-h)<Dh&&(f-=h*Dh),d=Lc(c,d,f,g),a.point(e,d),a.lineEnd(),a.lineStart(),a.point(h,d),b=0),a.point(c=f,d=g),e=h},lineEnd:function(){a.lineEnd(),c=d=0/0},clean:function(){return 2-b}}}function Lc(a,b,c,d){var e,f,g=Math.sin(a-c);return nh(g)>Dh?Math.atan((Math.sin(b)*(f=Math.cos(d))*Math.sin(c)-Math.sin(d)*(e=Math.cos(b))*Math.sin(a))/(e*f*g)):(b+d)/2}function Mc(a,b,c,d){var e;if(null==a)e=c*Ih,d.point(-Fh,e),d.point(0,e),d.point(Fh,e),d.point(Fh,0),d.point(Fh,-e),d.point(0,-e),d.point(-Fh,-e),d.point(-Fh,0),d.point(-Fh,e);else if(nh(a[0]-b[0])>Dh){var f=a[0]<b[0]?Fh:-Fh;e=c*f/2,d.point(-f,e),d.point(0,e),d.point(f,e)}else d.point(b[0],b[1])}function Nc(a,b){var c=a[0],d=a[1],e=[Math.sin(c),-Math.cos(c),0],f=0,g=0;si.reset();for(var h=0,i=b.length;i>h;++h){var j=b[h],k=j.length;if(k)for(var l=j[0],m=l[0],n=l[1]/2+Fh/4,o=Math.sin(n),p=Math.cos(n),q=1;;){q===k&&(q=0),a=j[q];var r=a[0],s=a[1]/2+Fh/4,t=Math.sin(s),u=Math.cos(s),v=r-m,w=v>=0?1:-1,x=w*v,y=x>Fh,z=o*t;if(si.add(Math.atan2(z*w*Math.sin(x),p*u+z*Math.cos(x))),f+=y?v+w*Gh:v,y^m>=c^r>=c){var A=qc(oc(l),oc(a));tc(A);var B=qc(e,A);tc(B);var C=(y^v>=0?-1:1)*bb(B[2]);(d>C||d===C&&(A[0]||A[1]))&&(g+=y^v>=0?1:-1)}if(!q++)break;m=r,o=t,p=u,l=a}}return(-Dh>f||Dh>f&&0>si)^1&g}function Oc(a){function b(a,b){return Math.cos(a)*Math.cos(b)>f}function c(a){var c,f,i,j,k;return{lineStart:function(){j=i=!1,k=1},point:function(l,m){var n,o=[l,m],p=b(l,m),q=g?p?0:e(l,m):p?e(l+(0>l?Fh:-Fh),m):0;if(!c&&(j=i=p)&&a.lineStart(),p!==i&&(n=d(c,o),(vc(c,n)||vc(o,n))&&(o[0]+=Dh,o[1]+=Dh,p=b(o[0],o[1]))),p!==i)k=0,p?(a.lineStart(),n=d(o,c),a.point(n[0],n[1])):(n=d(c,o),a.point(n[0],n[1]),a.lineEnd()),c=n;else if(h&&c&&g^p){var r;q&f||!(r=d(o,c,!0))||(k=0,g?(a.lineStart(),a.point(r[0][0],r[0][1]),a.point(r[1][0],r[1][1]),a.lineEnd()):(a.point(r[1][0],r[1][1]),a.lineEnd(),a.lineStart(),a.point(r[0][0],r[0][1])))}!p||c&&vc(c,o)||a.point(o[0],o[1]),c=o,i=p,f=q},lineEnd:function(){i&&a.lineEnd(),c=null},clean:function(){return k|(j&&i)<<1}}}function d(a,b,c){var d=oc(a),e=oc(b),g=[1,0,0],h=qc(d,e),i=pc(h,h),j=h[0],k=i-j*j;if(!k)return!c&&a;var l=f*i/k,m=-f*j/k,n=qc(g,h),o=sc(g,l),p=sc(h,m);rc(o,p);var q=n,r=pc(o,q),s=pc(q,q),t=r*r-s*(pc(o,o)-1);if(!(0>t)){var u=Math.sqrt(t),v=sc(q,(-r-u)/s);if(rc(v,o),v=uc(v),!c)return v;var w,x=a[0],y=b[0],z=a[1],A=b[1];x>y&&(w=x,x=y,y=w);var B=y-x,C=nh(B-Fh)<Dh,D=C||Dh>B;if(!C&&z>A&&(w=z,z=A,A=w),D?C?z+A>0^v[1]<(nh(v[0]-x)<Dh?z:A):z<=v[1]&&v[1]<=A:B>Fh^(x<=v[0]&&v[0]<=y)){var E=sc(q,(-r+u)/s);return rc(E,o),[v,uc(E)]}}}function e(b,c){var d=g?a:Fh-a,e=0;return-d>b?e|=1:b>d&&(e|=2),-d>c?e|=4:c>d&&(e|=8),e}var f=Math.cos(a),g=f>0,h=nh(f)>Dh,i=nd(a,6*Jh);return Gc(b,c,i,g?[0,-a]:[-Fh,a-Fh])}function Pc(a,b,c,d){return function(e){var f,g=e.a,h=e.b,i=g.x,j=g.y,k=h.x,l=h.y,m=0,n=1,o=k-i,p=l-j;if(f=a-i,o||!(f>0)){if(f/=o,0>o){if(m>f)return;n>f&&(n=f)}else if(o>0){if(f>n)return;f>m&&(m=f)}if(f=c-i,o||!(0>f)){if(f/=o,0>o){if(f>n)return;f>m&&(m=f)}else if(o>0){if(m>f)return;n>f&&(n=f)}if(f=b-j,p||!(f>0)){if(f/=p,0>p){if(m>f)return;n>f&&(n=f)}else if(p>0){if(f>n)return;f>m&&(m=f)}if(f=d-j,p||!(0>f)){if(f/=p,0>p){if(f>n)return;f>m&&(m=f)}else if(p>0){if(m>f)return;n>f&&(n=f)}return m>0&&(e.a={x:i+m*o,y:j+m*p}),1>n&&(e.b={x:i+n*o,y:j+n*p}),e}}}}}}function Qc(a,b,c,d){function e(d,e){return nh(d[0]-a)<Dh?e>0?0:3:nh(d[0]-c)<Dh?e>0?2:1:nh(d[1]-b)<Dh?e>0?1:0:e>0?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function i(a){for(var b=0,c=q.length,d=a[1],e=0;c>e;++e)for(var f,g=1,h=q[e],i=h.length,j=h[0];i>g;++g)f=h[g],j[1]<=d?f[1]>d&&_(j,f,a)>0&&++b:f[1]<=d&&_(j,f,a)<0&&--b,j=f;return 0!==b}function j(f,h,i,j){var k=0,l=0;if(null==f||(k=e(f,i))!==(l=e(h,i))||g(f,h)<0^i>0){do j.point(0===k||3===k?a:c,k>1?d:b);while((k=(k+i+4)%4)!==l)}else j.point(h[0],h[1])}function k(e,f){return e>=a&&c>=e&&f>=b&&d>=f}function l(a,b){k(a,b)&&h.point(a,b)}function m(){D.point=o,q&&q.push(r=[]),y=!0,x=!1,v=w=0/0}function n(){p&&(o(s,t),u&&x&&B.rejoin(),p.push(B.buffer())),D.point=l,x&&h.lineEnd()}function o(a,b){a=Math.max(-Hi,Math.min(Hi,a)),b=Math.max(-Hi,Math.min(Hi,b));var c=k(a,b);if(q&&r.push([a,b]),y)s=a,t=b,u=c,y=!1,c&&(h.lineStart(),h.point(a,b));else if(c&&x)h.point(a,b);else{var d={a:{x:v,y:w},b:{x:a,y:b}};C(d)?(x||(h.lineStart(),h.point(d.a.x,d.a.y)),h.point(d.b.x,d.b.y),c||h.lineEnd(),z=!1):c&&(h.lineStart(),h.point(a,b),z=!1)}v=a,w=b,x=c}var p,q,r,s,t,u,v,w,x,y,z,A=h,B=Ic(),C=Pc(a,b,c,d),D={point:l,lineStart:m,lineEnd:n,polygonStart:function(){h=B,p=[],q=[],z=!0},polygonEnd:function(){h=A,p=bh.merge(p);var b=i([a,d]),c=z&&b,e=p.length;(c||e)&&(h.polygonStart(),c&&(h.lineStart(),j(null,null,1,h),h.lineEnd()),e&&Dc(p,f,b,j,h),h.polygonEnd()),p=q=r=null}};return D}}function Rc(a){var b=0,c=Fh/3,d=fd(a),e=d(b,c);return e.parallels=function(a){return arguments.length?d(b=a[0]*Fh/180,c=a[1]*Fh/180):[b/Fh*180,c/Fh*180]},e}function Sc(a,b){function c(a,b){var c=Math.sqrt(f-2*e*Math.sin(b))/e;return[c*Math.sin(a*=e),g-c*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;return c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,bb((f-(a*a+c*c)*e*e)/(2*e))]},c}function Tc(){function a(a,b){Ji+=e*a-d*b,d=a,e=b}var b,c,d,e;Oi.point=function(f,g){Oi.point=a,b=d=f,c=e=g},Oi.lineEnd=function(){a(b,c)}}function Uc(a,b){Ki>a&&(Ki=a),a>Mi&&(Mi=a),Li>b&&(Li=b),b>Ni&&(Ni=b)}function Vc(){function a(a,b){g.push("M",a,",",b,f)}function b(a,b){g.push("M",a,",",b),h.point=c}function c(a,b){g.push("L",a,",",b)}function d(){h.point=a}function e(){g.push("Z")}var f=Wc(4.5),g=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d,h.point=a},pointRadius:function(a){return f=Wc(a),h},result:function(){if(g.length){var a=g.join("");return g=[],a}}};return h}function Wc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Xc(a,b){wi+=a,xi+=b,++yi}function Yc(){function a(a,d){var e=a-b,f=d-c,g=Math.sqrt(e*e+f*f);zi+=g*(b+a)/2,Ai+=g*(c+d)/2,Bi+=g,Xc(b=a,c=d)}var b,c;Qi.point=function(d,e){Qi.point=a,Xc(b=d,c=e)}}function Zc(){Qi.point=Xc}function $c(){function a(a,b){var c=a-d,f=b-e,g=Math.sqrt(c*c+f*f);zi+=g*(d+a)/2,Ai+=g*(e+b)/2,Bi+=g,g=e*a-d*b,Ci+=g*(d+a),Di+=g*(e+b),Ei+=3*g,Xc(d=a,e=b)}var b,c,d,e;Qi.point=function(f,g){Qi.point=a,Xc(b=d=f,c=e=g)},Qi.lineEnd=function(){a(b,c)}}function _c(a){function b(b,c){a.moveTo(b+g,c),a.arc(b,c,g,0,Gh)}function c(b,c){a.moveTo(b,c),h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function f(){a.closePath()}var g=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=f},polygonEnd:function(){h.lineEnd=e,h.point=b},pointRadius:function(a){return g=a,h},result:v};return h}function ad(a){function b(a){return(h?d:c)(a)}function c(b){return dd(b,function(c,d){c=a(c,d),b.point(c[0],c[1])})}function d(b){function c(c,d){c=a(c,d),b.point(c[0],c[1])}function d(){t=0/0,y.point=f,b.lineStart()}function f(c,d){var f=oc([c,d]),g=a(c,d);e(t,u,s,v,w,x,t=g[0],u=g[1],s=c,v=f[0],w=f[1],x=f[2],h,b),b.point(t,u)}function g(){y.point=c,b.lineEnd()}function i(){d(),y.point=j,y.lineEnd=k}function j(a,b){f(l=a,m=b),n=t,o=u,p=v,q=w,r=x,y.point=f}function k(){e(t,u,s,v,w,x,n,o,l,p,q,r,h,b),y.lineEnd=g,g()}var l,m,n,o,p,q,r,s,t,u,v,w,x,y={point:c,lineStart:d,lineEnd:g,polygonStart:function(){b.polygonStart(),y.lineStart=i
},polygonEnd:function(){b.polygonEnd(),y.lineStart=d}};return y}function e(b,c,d,h,i,j,k,l,m,n,o,p,q,r){var s=k-b,t=l-c,u=s*s+t*t;if(u>4*f&&q--){var v=h+n,w=i+o,x=j+p,y=Math.sqrt(v*v+w*w+x*x),z=Math.asin(x/=y),A=nh(nh(x)-1)<Dh||nh(d-m)<Dh?(d+m)/2:Math.atan2(w,v),B=a(A,z),C=B[0],D=B[1],E=C-b,F=D-c,G=t*E-s*F;(G*G/u>f||nh((s*E+t*F)/u-.5)>.3||g>h*n+i*o+j*p)&&(e(b,c,d,h,i,j,C,D,A,v/=y,w/=y,x,q,r),r.point(C,D),e(C,D,A,v,w,x,k,l,m,n,o,p,q,r))}}var f=.5,g=Math.cos(30*Jh),h=16;return b.precision=function(a){return arguments.length?(h=(f=a*a)>0&&16,b):Math.sqrt(f)},b}function bd(a){var b=ad(function(b,c){return a([b*Kh,c*Kh])});return function(a){return gd(b(a))}}function cd(a){this.stream=a}function dd(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function ed(a){return fd(function(){return a})()}function fd(a){function b(a){return a=h(a[0]*Jh,a[1]*Jh),[a[0]*m+i,j-a[1]*m]}function c(a){return a=h.invert((a[0]-i)/m,(j-a[1])/m),a&&[a[0]*Kh,a[1]*Kh]}function d(){h=Bc(g=jd(r,t,u),f);var a=f(p,q);return i=n-a[0]*m,j=o+a[1]*m,e()}function e(){return k&&(k.valid=!1,k=null),b}var f,g,h,i,j,k,l=ad(function(a,b){return a=f(a,b),[a[0]*m+i,j-a[1]*m]}),m=150,n=480,o=250,p=0,q=0,r=0,t=0,u=0,v=Gi,w=s,x=null,y=null;return b.stream=function(a){return k&&(k.valid=!1),k=gd(v(g,l(w(a)))),k.valid=!0,k},b.clipAngle=function(a){return arguments.length?(v=null==a?(x=a,Gi):Oc((x=+a)*Jh),e()):x},b.clipExtent=function(a){return arguments.length?(y=a,w=a?Qc(a[0][0],a[0][1],a[1][0],a[1][1]):s,e()):y},b.scale=function(a){return arguments.length?(m=+a,d()):m},b.translate=function(a){return arguments.length?(n=+a[0],o=+a[1],d()):[n,o]},b.center=function(a){return arguments.length?(p=a[0]%360*Jh,q=a[1]%360*Jh,d()):[p*Kh,q*Kh]},b.rotate=function(a){return arguments.length?(r=a[0]%360*Jh,t=a[1]%360*Jh,u=a.length>2?a[2]%360*Jh:0,d()):[r*Kh,t*Kh,u*Kh]},bh.rebind(b,l,"precision"),function(){return f=a.apply(this,arguments),b.invert=f.invert&&c,d()}}function gd(a){return dd(a,function(b,c){a.point(b*Jh,c*Jh)})}function hd(a,b){return[a,b]}function id(a,b){return[a>Fh?a-Gh:-Fh>a?a+Gh:a,b]}function jd(a,b,c){return a?b||c?Bc(ld(a),md(b,c)):ld(a):b||c?md(b,c):id}function kd(a){return function(b,c){return b+=a,[b>Fh?b-Gh:-Fh>b?b+Gh:b,c]}}function ld(a){var b=kd(a);return b.invert=kd(-a),b}function md(a,b){function c(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*d+h*e;return[Math.atan2(i*f-k*g,h*d-j*e),bb(k*f+i*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);return c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,i=Math.sin(a)*c,j=Math.sin(b),k=j*f-i*g;return[Math.atan2(i*f+j*g,h*d+k*e),bb(k*d-h*e)]},c}function nd(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,h){var i=g*b;null!=e?(e=od(c,e),f=od(c,f),(g>0?f>e:e>f)&&(e+=g*Gh)):(e=a+g*Gh,f=a-.5*i);for(var j,k=e;g>0?k>f:f>k;k-=i)h.point((j=uc([c,-d*Math.cos(k),-d*Math.sin(k)]))[0],j[1])}}function od(a,b){var c=oc(b);c[0]-=a,tc(c);var d=ab(-c[1]);return((-c[2]<0?-d:d)+2*Math.PI-Dh)%(2*Math.PI)}function pd(a,b,c){var d=bh.range(a,b-Dh,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function qd(a,b,c){var d=bh.range(a,b-Dh,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function rd(a){return a.source}function sd(a){return a.target}function td(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),h=Math.sin(d),i=e*Math.cos(a),j=e*Math.sin(a),k=g*Math.cos(c),l=g*Math.sin(c),m=2*Math.asin(Math.sqrt(fb(d-b)+e*g*fb(c-a))),n=1/Math.sin(m),o=m?function(a){var b=Math.sin(a*=m)*n,c=Math.sin(m-a)*n,d=c*i+b*k,e=c*j+b*l,g=c*f+b*h;return[Math.atan2(e,d)*Kh,Math.atan2(g,Math.sqrt(d*d+e*e))*Kh]}:function(){return[a*Kh,b*Kh]};return o.distance=m,o}function ud(){function a(a,e){var f=Math.sin(e*=Jh),g=Math.cos(e),h=nh((a*=Jh)-b),i=Math.cos(h);Ri+=Math.atan2(Math.sqrt((h=g*Math.sin(h))*h+(h=d*f-c*g*i)*h),c*f+d*g*i),b=a,c=f,d=g}var b,c,d;Si.point=function(e,f){b=e*Jh,c=Math.sin(f*=Jh),d=Math.cos(f),Si.point=a},Si.lineEnd=function(){Si.point=Si.lineEnd=v}}function vd(a,b){function c(b,c){var d=Math.cos(b),e=Math.cos(c),f=a(d*e);return[f*e*Math.sin(b),f*Math.sin(c)]}return c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),g=Math.cos(e);return[Math.atan2(a*f,d*g),Math.asin(d&&c*f/d)]},c}function wd(a,b){function c(a,b){g>0?-Ih+Dh>b&&(b=-Ih+Dh):b>Ih-Dh&&(b=Ih-Dh);var c=g/Math.pow(e(b),f);return[c*Math.sin(f*a),g-c*Math.cos(f*a)]}var d=Math.cos(a),e=function(a){return Math.tan(Fh/4+a/2)},f=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(e(b)/e(a)),g=d*Math.pow(e(a),f)/f;return f?(c.invert=function(a,b){var c=g-b,d=$(f)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/f,2*Math.atan(Math.pow(g/d,1/f))-Ih]},c):yd}function xd(a,b){function c(a,b){var c=f-b;return[c*Math.sin(e*a),f-c*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;return nh(e)<Dh?hd:(c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-$(e)*Math.sqrt(a*a+c*c)]},c)}function yd(a,b){return[a,Math.log(Math.tan(Fh/4+b/2))]}function zd(a){var b,c=ed(a),d=c.scale,e=c.translate,f=c.clipExtent;return c.scale=function(){var a=d.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.translate=function(){var a=e.apply(c,arguments);return a===c?b?c.clipExtent(null):c:a},c.clipExtent=function(a){var g=f.apply(c,arguments);if(g===c){if(b=null==a){var h=Fh*d(),i=e();f([[i[0]-h,i[1]-h],[i[0]+h,i[1]+h]])}}else b&&(g=null);return g},c.clipExtent(null)}function Ad(a,b){return[Math.log(Math.tan(Fh/4+b/2)),-a]}function Bd(a){return a[0]}function Cd(a){return a[1]}function Dd(a){for(var b=a.length,c=[0,1],d=2,e=2;b>e;e++){for(;d>1&&_(a[c[d-2]],a[c[d-1]],a[e])<=0;)--d;c[d++]=e}return c.slice(0,d)}function Ed(a,b){return a[0]-b[0]||a[1]-b[1]}function Fd(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Gd(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,h=d[0]-f,i=a[1],j=c[1],k=b[1]-i,l=d[1]-j,m=(h*(i-j)-l*(e-f))/(l*g-h*k);return[e+m*g,i+m*k]}function Hd(a){var b=a[0],c=a[a.length-1];return!(b[0]-c[0]||b[1]-c[1])}function Id(){be(this),this.edge=this.site=this.circle=null}function Jd(a){var b=cj.pop()||new Id;return b.site=a,b}function Kd(a){Ud(a),_i.remove(a),cj.push(a),be(a)}function Ld(a){var b=a.circle,c=b.x,d=b.cy,e={x:c,y:d},f=a.P,g=a.N,h=[a];Kd(a);for(var i=f;i.circle&&nh(c-i.circle.x)<Dh&&nh(d-i.circle.cy)<Dh;)f=i.P,h.unshift(i),Kd(i),i=f;h.unshift(i),Ud(i);for(var j=g;j.circle&&nh(c-j.circle.x)<Dh&&nh(d-j.circle.cy)<Dh;)g=j.N,h.push(j),Kd(j),j=g;h.push(j),Ud(j);var k,l=h.length;for(k=1;l>k;++k)j=h[k],i=h[k-1],$d(j.edge,i.site,j.site,e);i=h[0],j=h[l-1],j.edge=Yd(i.site,j.site,null,e),Td(i),Td(j)}function Md(a){for(var b,c,d,e,f=a.x,g=a.y,h=_i._;h;)if(d=Nd(h,g)-f,d>Dh)h=h.L;else{if(e=f-Od(h,g),!(e>Dh)){d>-Dh?(b=h.P,c=h):e>-Dh?(b=h,c=h.N):b=c=h;break}if(!h.R){b=h;break}h=h.R}var i=Jd(a);if(_i.insert(b,i),b||c){if(b===c)return Ud(b),c=Jd(b.site),_i.insert(i,c),i.edge=c.edge=Yd(b.site,i.site),Td(b),void Td(c);if(!c)return void(i.edge=Yd(b.site,i.site));Ud(b),Ud(c);var j=b.site,k=j.x,l=j.y,m=a.x-k,n=a.y-l,o=c.site,p=o.x-k,q=o.y-l,r=2*(m*q-n*p),s=m*m+n*n,t=p*p+q*q,u={x:(q*s-n*t)/r+k,y:(m*t-p*s)/r+l};$d(c.edge,j,o,u),i.edge=Yd(j,a,null,u),c.edge=Yd(a,o,null,u),Td(b),Td(c)}}function Nd(a,b){var c=a.site,d=c.x,e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-1/0;c=g.site;var h=c.x,i=c.y,j=i-b;if(!j)return h;var k=h-d,l=1/f-1/j,m=k/j;return l?(-m+Math.sqrt(m*m-2*l*(k*k/(-2*j)-i+j/2+e-f/2)))/l+d:(d+h)/2}function Od(a,b){var c=a.N;if(c)return Nd(c,b);var d=a.site;return d.y===b?d.x:1/0}function Pd(a){this.site=a,this.edges=[]}function Qd(a){for(var b,c,d,e,f,g,h,i,j,k,l=a[0][0],m=a[1][0],n=a[0][1],o=a[1][1],p=$i,q=p.length;q--;)if(f=p[q],f&&f.prepare())for(h=f.edges,i=h.length,g=0;i>g;)k=h[g].end(),d=k.x,e=k.y,j=h[++g%i].start(),b=j.x,c=j.y,(nh(d-b)>Dh||nh(e-c)>Dh)&&(h.splice(g,0,new _d(Zd(f.site,k,nh(d-l)<Dh&&o-e>Dh?{x:l,y:nh(b-l)<Dh?c:o}:nh(e-o)<Dh&&m-d>Dh?{x:nh(c-o)<Dh?b:m,y:o}:nh(d-m)<Dh&&e-n>Dh?{x:m,y:nh(b-m)<Dh?c:n}:nh(e-n)<Dh&&d-l>Dh?{x:nh(c-n)<Dh?b:l,y:n}:null),f.site,null)),++i)}function Rd(a,b){return b.angle-a.angle}function Sd(){be(this),this.x=this.y=this.arc=this.site=this.cy=null}function Td(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,e=a.site,f=c.site;if(d!==f){var g=e.x,h=e.y,i=d.x-g,j=d.y-h,k=f.x-g,l=f.y-h,m=2*(i*l-j*k);if(!(m>=-Eh)){var n=i*i+j*j,o=k*k+l*l,p=(l*n-j*o)/m,q=(i*o-k*n)/m,l=q+h,r=dj.pop()||new Sd;r.arc=a,r.site=e,r.x=p+g,r.y=l+Math.sqrt(p*p+q*q),r.cy=l,a.circle=r;for(var s=null,t=bj._;t;)if(r.y<t.y||r.y===t.y&&r.x<=t.x){if(!t.L){s=t.P;break}t=t.L}else{if(!t.R){s=t;break}t=t.R}bj.insert(s,r),s||(aj=r)}}}}function Ud(a){var b=a.circle;b&&(b.P||(aj=b.N),bj.remove(b),dj.push(b),be(b),a.circle=null)}function Vd(a){for(var b,c=Zi,d=Pc(a[0][0],a[0][1],a[1][0],a[1][1]),e=c.length;e--;)b=c[e],(!Wd(b,a)||!d(b)||nh(b.a.x-b.b.x)<Dh&&nh(b.a.y-b.b.y)<Dh)&&(b.a=b.b=null,c.splice(e,1))}function Wd(a,b){var c=a.b;if(c)return!0;var d,e,f=a.a,g=b[0][0],h=b[1][0],i=b[0][1],j=b[1][1],k=a.l,l=a.r,m=k.x,n=k.y,o=l.x,p=l.y,q=(m+o)/2,r=(n+p)/2;if(p===n){if(g>q||q>=h)return;if(m>o){if(f){if(f.y>=j)return}else f={x:q,y:i};c={x:q,y:j}}else{if(f){if(f.y<i)return}else f={x:q,y:j};c={x:q,y:i}}}else if(d=(m-o)/(p-n),e=r-d*q,-1>d||d>1)if(m>o){if(f){if(f.y>=j)return}else f={x:(i-e)/d,y:i};c={x:(j-e)/d,y:j}}else{if(f){if(f.y<i)return}else f={x:(j-e)/d,y:j};c={x:(i-e)/d,y:i}}else if(p>n){if(f){if(f.x>=h)return}else f={x:g,y:d*g+e};c={x:h,y:d*h+e}}else{if(f){if(f.x<g)return}else f={x:h,y:d*h+e};c={x:g,y:d*g+e}}return a.a=f,a.b=c,!0}function Xd(a,b){this.l=a,this.r=b,this.a=this.b=null}function Yd(a,b,c,d){var e=new Xd(a,b);return Zi.push(e),c&&$d(e,a,b,c),d&&$d(e,b,a,d),$i[a.i].edges.push(new _d(e,a,b)),$i[b.i].edges.push(new _d(e,b,a)),e}function Zd(a,b,c){var d=new Xd(a,null);return d.a=b,d.b=c,Zi.push(d),d}function $d(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function _d(a,b,c){var d=a.a,e=a.b;this.edge=a,this.site=b,this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function ae(){this._=null}function be(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function ce(a,b){var c=b,d=b.R,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.R=d.L,c.R&&(c.R.U=c),d.L=c}function de(a,b){var c=b,d=b.L,e=c.U;e?e.L===c?e.L=d:e.R=d:a._=d,d.U=e,c.U=d,c.L=d.R,c.L&&(c.L.U=c),d.R=c}function ee(a){for(;a.L;)a=a.L;return a}function fe(a,b){var c,d,e,f=a.sort(ge).pop();for(Zi=[],$i=new Array(a.length),_i=new ae,bj=new ae;;)if(e=aj,f&&(!e||f.y<e.y||f.y===e.y&&f.x<e.x))(f.x!==c||f.y!==d)&&($i[f.i]=new Pd(f),Md(f),c=f.x,d=f.y),f=a.pop();else{if(!e)break;Ld(e.arc)}b&&(Vd(b),Qd(b));var g={cells:$i,edges:Zi};return _i=bj=Zi=$i=null,g}function ge(a,b){return b.y-a.y||b.x-a.x}function he(a,b,c){return(a.x-c.x)*(b.y-a.y)-(a.x-b.x)*(c.y-a.y)}function ie(a){return a.x}function je(a){return a.y}function ke(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function le(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),h=.5*(d+f),i=b.nodes;i[0]&&le(a,i[0],c,d,g,h),i[1]&&le(a,i[1],g,d,e,h),i[2]&&le(a,i[2],c,h,g,f),i[3]&&le(a,i[3],g,h,e,f)}}function me(a,b,c,d,e,f,g){var h,i=1/0;return function j(a,k,l,m,n){if(!(k>f||l>g||d>m||e>n)){if(o=a.point){var o,p=b-a.x,q=c-a.y,r=p*p+q*q;if(i>r){var s=Math.sqrt(i=r);d=b-s,e=c-s,f=b+s,g=c+s,h=o}}for(var t=a.nodes,u=.5*(k+m),v=.5*(l+n),w=b>=u,x=c>=v,y=x<<1|w,z=y+4;z>y;++y)if(a=t[3&y])switch(3&y){case 0:j(a,k,l,u,v);break;case 1:j(a,u,l,m,v);break;case 2:j(a,k,v,u,n);break;case 3:j(a,u,v,m,n)}}}(a,d,e,f,g),h}function ne(a,b){a=bh.rgb(a),b=bh.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"#"+ub(Math.round(c+f*a))+ub(Math.round(d+g*a))+ub(Math.round(e+h*a))}}function oe(a,b){var c,d={},e={};for(c in a)c in b?d[c]=re(a[c],b[c]):e[c]=a[c];for(c in b)c in a||(e[c]=b[c]);return function(a){for(c in d)e[c]=d[c](a);return e}}function pe(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}function qe(a,b){var c,d,e,f=fj.lastIndex=gj.lastIndex=0,g=-1,h=[],i=[];for(a+="",b+="";(c=fj.exec(a))&&(d=gj.exec(b));)(e=d.index)>f&&(e=b.slice(f,e),h[g]?h[g]+=e:h[++g]=e),(c=c[0])===(d=d[0])?h[g]?h[g]+=d:h[++g]=d:(h[++g]=null,i.push({i:g,x:pe(c,d)})),f=gj.lastIndex;return f<b.length&&(e=b.slice(f),h[g]?h[g]+=e:h[++g]=e),h.length<2?i[0]?(b=i[0].x,function(a){return b(a)+""}):function(){return b}:(b=i.length,function(a){for(var c,d=0;b>d;++d)h[(c=i[d]).i]=c.x(a);return h.join("")})}function re(a,b){for(var c,d=bh.interpolators.length;--d>=0&&!(c=bh.interpolators[d](a,b)););return c}function se(a,b){var c,d=[],e=[],f=a.length,g=b.length,h=Math.min(a.length,b.length);for(c=0;h>c;++c)d.push(re(a[c],b[c]));for(;f>c;++c)e[c]=a[c];for(;g>c;++c)e[c]=b[c];return function(a){for(c=0;h>c;++c)e[c]=d[c](a);return e}}function te(a){return function(b){return 0>=b?0:b>=1?1:a(b)}}function ue(a){return function(b){return 1-a(1-b)}}function ve(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function we(a){return a*a}function xe(a){return a*a*a}function ye(a){if(0>=a)return 0;if(a>=1)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function ze(a){return function(b){return Math.pow(b,a)}}function Ae(a){return 1-Math.cos(a*Ih)}function Be(a){return Math.pow(2,10*(a-1))}function Ce(a){return 1-Math.sqrt(1-a*a)}function De(a,b){var c;return arguments.length<2&&(b=.45),arguments.length?c=b/Gh*Math.asin(1/a):(a=1,c=b/4),function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*Gh/b)}}function Ee(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function Fe(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Ge(a,b){a=bh.hcl(a),b=bh.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.c:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return kb(c+f*a,d+g*a,e+h*a)+""}}function He(a,b){a=bh.hsl(a),b=bh.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return isNaN(g)&&(g=0,d=isNaN(d)?b.s:d),isNaN(f)?(f=0,c=isNaN(c)?b.h:c):f>180?f-=360:-180>f&&(f+=360),function(a){return ib(c+f*a,d+g*a,e+h*a)+""}}function Ie(a,b){a=bh.lab(a),b=bh.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,h=b.b-e;return function(a){return mb(c+f*a,d+g*a,e+h*a)+""}}function Je(a,b){return b-=a,function(c){return Math.round(a+b*c)}}function Ke(a){var b=[a.a,a.b],c=[a.c,a.d],d=Me(b),e=Le(b,c),f=Me(Ne(c,b,-e))||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1),this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*Kh,this.translate=[a.e,a.f],this.scale=[d,f],this.skew=f?Math.atan2(e,f)*Kh:0}function Le(a,b){return a[0]*b[0]+a[1]*b[1]}function Me(a){var b=Math.sqrt(Le(a,a));return b&&(a[0]/=b,a[1]/=b),b}function Ne(a,b,c){return a[0]+=c*b[0],a[1]+=c*b[1],a}function Oe(a,b){var c,d=[],e=[],f=bh.transform(a),g=bh.transform(b),h=f.translate,i=g.translate,j=f.rotate,k=g.rotate,l=f.skew,m=g.skew,n=f.scale,o=g.scale;return h[0]!=i[0]||h[1]!=i[1]?(d.push("translate(",null,",",null,")"),e.push({i:1,x:pe(h[0],i[0])},{i:3,x:pe(h[1],i[1])})):d.push(i[0]||i[1]?"translate("+i+")":""),j!=k?(j-k>180?k+=360:k-j>180&&(j+=360),e.push({i:d.push(d.pop()+"rotate(",null,")")-2,x:pe(j,k)})):k&&d.push(d.pop()+"rotate("+k+")"),l!=m?e.push({i:d.push(d.pop()+"skewX(",null,")")-2,x:pe(l,m)}):m&&d.push(d.pop()+"skewX("+m+")"),n[0]!=o[0]||n[1]!=o[1]?(c=d.push(d.pop()+"scale(",null,",",null,")"),e.push({i:c-4,x:pe(n[0],o[0])},{i:c-2,x:pe(n[1],o[1])})):(1!=o[0]||1!=o[1])&&d.push(d.pop()+"scale("+o+")"),c=e.length,function(a){for(var b,f=-1;++f<c;)d[(b=e[f]).i]=b.x(a);return d.join("")}}function Pe(a,b){return b=(b-=a=+a)||1/b,function(c){return(c-a)/b}}function Qe(a,b){return b=(b-=a=+a)||1/b,function(c){return Math.max(0,Math.min(1,(c-a)/b))}}function Re(a){for(var b=a.source,c=a.target,d=Te(b,c),e=[b];b!==d;)b=b.parent,e.push(b);for(var f=e.length;c!==d;)e.splice(f,0,c),c=c.parent;return e}function Se(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;return b.push(a),b}function Te(a,b){if(a===b)return a;for(var c=Se(a),d=Se(b),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();return g}function Ue(a){a.fixed|=2}function Ve(a){a.fixed&=-7}function We(a){a.fixed|=4,a.px=a.x,a.py=a.y}function Xe(a){a.fixed&=-5}function Ye(a,b,c){var d=0,e=0;if(a.charge=0,!a.leaf)for(var f,g=a.nodes,h=g.length,i=-1;++i<h;)f=g[i],null!=f&&(Ye(f,b,c),a.charge+=f.charge,d+=f.charge*f.cx,e+=f.charge*f.cy);if(a.point){a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5);var j=b*c[a.point.index];a.charge+=a.pointCharge=j,d+=j*a.point.x,e+=j*a.point.y}a.cx=d/a.charge,a.cy=e/a.charge}function Ze(a,b){return bh.rebind(a,b,"sort","children","value"),a.nodes=a,a.links=df,a}function $e(a,b){for(var c=[a];null!=(a=c.pop());)if(b(a),(e=a.children)&&(d=e.length))for(var d,e;--d>=0;)c.push(e[d])}function _e(a,b){for(var c=[a],d=[];null!=(a=c.pop());)if(d.push(a),(f=a.children)&&(e=f.length))for(var e,f,g=-1;++g<e;)c.push(f[g]);for(;null!=(a=d.pop());)b(a)}function af(a){return a.children}function bf(a){return a.value}function cf(a,b){return b.value-a.value}function df(a){return bh.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ef(a){return a.x}function ff(a){return a.y}function gf(a,b,c){a.y0=b,a.y=c}function hf(a){return bh.range(a.length)}function jf(a){for(var b=-1,c=a[0].length,d=[];++b<c;)d[b]=0;return d}function kf(a){for(var b,c=1,d=0,e=a[0][1],f=a.length;f>c;++c)(b=a[c][1])>e&&(d=c,e=b);return d}function lf(a){return a.reduce(mf,0)}function mf(a,b){return a+b[1]}function nf(a,b){return of(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function of(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function pf(a){return[bh.min(a),bh.max(a)]}function qf(a,b){return a.value-b.value}function rf(a,b){var c=a._pack_next;a._pack_next=b,b._pack_prev=a,b._pack_next=c,c._pack_prev=b}function sf(a,b){a._pack_next=b,b._pack_prev=a}function tf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function uf(a){function b(a){k=Math.min(a.x-a.r,k),l=Math.max(a.x+a.r,l),m=Math.min(a.y-a.r,m),n=Math.max(a.y+a.r,n)}if((c=a.children)&&(j=c.length)){var c,d,e,f,g,h,i,j,k=1/0,l=-1/0,m=1/0,n=-1/0;if(c.forEach(vf),d=c[0],d.x=-d.r,d.y=0,b(d),j>1&&(e=c[1],e.x=e.r,e.y=0,b(e),j>2))for(f=c[2],yf(d,e,f),b(f),rf(d,f),d._pack_prev=f,rf(f,e),e=d._pack_next,g=3;j>g;g++){yf(d,e,f=c[g]);var o=0,p=1,q=1;for(h=e._pack_next;h!==e;h=h._pack_next,p++)if(tf(h,f)){o=1;break}if(1==o)for(i=d._pack_prev;i!==h._pack_prev&&!tf(i,f);i=i._pack_prev,q++);o?(q>p||p==q&&e.r<d.r?sf(d,e=h):sf(d=i,e),g--):(rf(d,f),e=f,b(f))}var r=(k+l)/2,s=(m+n)/2,t=0;for(g=0;j>g;g++)f=c[g],f.x-=r,f.y-=s,t=Math.max(t,f.r+Math.sqrt(f.x*f.x+f.y*f.y));a.r=t,c.forEach(wf)}}function vf(a){a._pack_next=a._pack_prev=a}function wf(a){delete a._pack_next,delete a._pack_prev}function xf(a,b,c,d){var e=a.children;if(a.x=b+=d*a.x,a.y=c+=d*a.y,a.r*=d,e)for(var f=-1,g=e.length;++f<g;)xf(e[f],b,c,d)}function yf(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,h=e*e+f*f;g*=g,d*=d;var i=.5+(d-g)/(2*h),j=Math.sqrt(Math.max(0,2*g*(d+h)-(d-=h)*d-g*g))/(2*h);c.x=a.x+i*e+j*f,c.y=a.y+i*f-j*e}else c.x=a.x+d,c.y=a.y}function zf(a,b){return a.parent==b.parent?1:2}function Af(a){var b=a.children;return b.length?b[0]:a.t}function Bf(a){var b,c=a.children;return(b=c.length)?c[b-1]:a.t}function Cf(a,b,c){var d=c/(b.i-a.i);b.c-=d,b.s+=c,a.c+=d,b.z+=c,b.m+=c}function Df(a){for(var b,c=0,d=0,e=a.children,f=e.length;--f>=0;)b=e[f],b.z+=c,b.m+=c,c+=b.s+(d+=b.c)}function Ef(a,b,c){return a.a.parent===b.parent?a.a:c}function Ff(a){return 1+bh.max(a,function(a){return a.y})}function Gf(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}function Hf(a){var b=a.children;return b&&b.length?Hf(b[0]):a}function If(a){var b,c=a.children;return c&&(b=c.length)?If(c[b-1]):a}function Jf(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Kf(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];return 0>e&&(c+=e/2,e=0),0>f&&(d+=f/2,f=0),{x:c,y:d,dx:e,dy:f}}function Lf(a){var b=a[0],c=a[a.length-1];return c>b?[b,c]:[c,b]}function Mf(a){return a.rangeExtent?a.rangeExtent():Lf(a.range())}function Nf(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Of(a,b){var c,d=0,e=a.length-1,f=a[d],g=a[e];return f>g&&(c=d,d=e,e=c,c=f,f=g,g=c),a[d]=b.floor(f),a[e]=b.ceil(g),a}function Pf(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:rj}function Qf(a,b,c,d){var e=[],f=[],g=0,h=Math.min(a.length,b.length)-1;for(a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());++g<=h;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=bh.bisect(a,b,1,h)-1;return f[c](e[c](b))}}function Rf(a,b,c,d){function e(){var e=Math.min(a.length,b.length)>2?Qf:Nf,i=d?Qe:Pe;return g=e(a,b,i,c),h=e(b,a,i,re),f}function f(a){return g(a)}var g,h;return f.invert=function(a){return h(a)},f.domain=function(b){return arguments.length?(a=b.map(Number),e()):a},f.range=function(a){return arguments.length?(b=a,e()):b},f.rangeRound=function(a){return f.range(a).interpolate(Je)},f.clamp=function(a){return arguments.length?(d=a,e()):d},f.interpolate=function(a){return arguments.length?(c=a,e()):c},f.ticks=function(b){return Vf(a,b)},f.tickFormat=function(b,c){return Wf(a,b,c)},f.nice=function(b){return Tf(a,b),e()},f.copy=function(){return Rf(a,b,c,d)},e()}function Sf(a,b){return bh.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Tf(a,b){return Of(a,Pf(Uf(a,b)[2]))}function Uf(a,b){null==b&&(b=10);var c=Lf(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return.15>=f?e*=10:.35>=f?e*=5:.75>=f&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+.5*e,c[2]=e,c}function Vf(a,b){return bh.range.apply(bh,Uf(a,b))}function Wf(a,b,c){var d=Uf(a,b);if(c){var e=fi.exec(c);if(e.shift(),"s"===e[8]){var f=bh.formatPrefix(Math.max(nh(d[0]),nh(d[1])));return e[7]||(e[7]="."+Xf(f.scale(d[2]))),e[8]="f",c=bh.format(e.join("")),function(a){return c(f.scale(a))+f.symbol}}e[7]||(e[7]="."+Yf(e[8],d)),c=e.join("")}else c=",."+Xf(d[2])+"f";return bh.format(c)}function Xf(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function Yf(a,b){var c=Xf(b[2]);return a in sj?Math.abs(c-Xf(Math.max(nh(b[0]),nh(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Zf(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(a>0?0:-a))/Math.log(b)}function f(a){return c?Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}return g.invert=function(b){return f(a.invert(b))},g.domain=function(b){return arguments.length?(c=b[0]>=0,a.domain((d=b.map(Number)).map(e)),g):d},g.base=function(c){return arguments.length?(b=+c,a.domain(d.map(e)),g):b},g.nice=function(){var b=Of(d.map(e),c?Math:uj);return a.domain(b),d=b.map(f),g},g.ticks=function(){var a=Lf(d),g=[],h=a[0],i=a[1],j=Math.floor(e(h)),k=Math.ceil(e(i)),l=b%1?2:b;if(isFinite(k-j)){if(c){for(;k>j;j++)for(var m=1;l>m;m++)g.push(f(j)*m);g.push(f(j))}else for(g.push(f(j));j++<k;)for(var m=l-1;m>0;m--)g.push(f(j)*m);for(j=0;g[j]<h;j++);for(k=g.length;g[k-1]>i;k--);g=g.slice(j,k)}return g},g.tickFormat=function(a,b){if(!arguments.length)return tj;arguments.length<2?b=tj:"function"!=typeof b&&(b=bh.format(b));var d,h=Math.max(.1,a/g.ticks().length),i=c?(d=1e-12,Math.ceil):(d=-1e-12,Math.floor);return function(a){return a/f(i(e(a)+d))<=h?b(a):""}},g.copy=function(){return Zf(a.copy(),b,c,d)},Sf(g,a)}function $f(a,b,c){function d(b){return a(e(b))}var e=_f(b),f=_f(1/b);return d.invert=function(b){return f(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain((c=b.map(Number)).map(e)),d):c},d.ticks=function(a){return Vf(c,a)},d.tickFormat=function(a,b){return Wf(c,a,b)},d.nice=function(a){return d.domain(Tf(c,a))},d.exponent=function(g){return arguments.length?(e=_f(b=g),f=_f(1/b),a.domain(c.map(e)),d):b},d.copy=function(){return $f(a.copy(),b,c)},Sf(d,a)}function _f(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function ag(a,b){function c(c){return f[((e.get(c)||("range"===b.t?e.set(c,a.push(c)):0/0))-1)%f.length]}function d(b,c){return bh.range(a.length).map(function(a){return b+c*a})}var e,f,g;return c.domain=function(d){if(!arguments.length)return a;a=[],e=new j;for(var f,g=-1,h=d.length;++g<h;)e.has(f=d[g])||e.set(f,a.push(f));return c[b.t].apply(c,b.a)},c.range=function(a){return arguments.length?(f=a,g=0,b={t:"range",a:arguments},c):f},c.rangePoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=(i+j)/2,0):(j-i)/(a.length-1+h);return f=d(i+k*h/2,k),g=0,b={t:"rangePoints",a:arguments},c},c.rangeRoundPoints=function(e,h){arguments.length<2&&(h=0);var i=e[0],j=e[1],k=a.length<2?(i=j=Math.round((i+j)/2),0):(j-i)/(a.length-1+h)|0;return f=d(i+Math.round(k*h/2+(j-i-(a.length-1+h)*k)/2),k),g=0,b={t:"rangeRoundPoints",a:arguments},c},c.rangeBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=(l-k)/(a.length-h+2*i);return f=d(k+m*i,m),j&&f.reverse(),g=m*(1-h),b={t:"rangeBands",a:arguments},c},c.rangeRoundBands=function(e,h,i){arguments.length<2&&(h=0),arguments.length<3&&(i=h);var j=e[1]<e[0],k=e[j-0],l=e[1-j],m=Math.floor((l-k)/(a.length-h+2*i));return f=d(k+Math.round((l-k-(a.length-h)*m)/2),m),j&&f.reverse(),g=Math.round(m*(1-h)),b={t:"rangeRoundBands",a:arguments},c},c.rangeBand=function(){return g},c.rangeExtent=function(){return Lf(b.a[0])},c.copy=function(){return ag(a,b)},c.domain(a)}function bg(a,b){function f(){var c=0,d=b.length;for(h=[];++c<d;)h[c-1]=bh.quantile(a,c/d);return g}function g(a){return isNaN(a=+a)?void 0:b[bh.bisect(h,a)]}var h;return g.domain=function(b){return arguments.length?(a=b.map(d).filter(e).sort(c),f()):a},g.range=function(a){return arguments.length?(b=a,f()):b},g.quantiles=function(){return h},g.invertExtent=function(c){return c=b.indexOf(c),0>c?[0/0,0/0]:[c>0?h[c-1]:a[0],c<h.length?h[c]:a[a.length-1]]},g.copy=function(){return bg(a,b)},f()}function cg(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){return f=c.length/(b-a),g=c.length-1,d}var f,g;return d.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],e()):[a,b]},d.range=function(a){return arguments.length?(c=a,e()):c},d.invertExtent=function(b){return b=c.indexOf(b),b=0>b?0/0:b/f+a,[b,b+1/f]},d.copy=function(){return cg(a,b,c)},e()}function dg(a,b){function c(c){return c>=c?b[bh.bisect(a,c)]:void 0}return c.domain=function(b){return arguments.length?(a=b,c):a},c.range=function(a){return arguments.length?(b=a,c):b},c.invertExtent=function(c){return c=b.indexOf(c),[a[c-1],a[c]]},c.copy=function(){return dg(a,b)},c}function eg(a){function b(a){return+a}return b.invert=b,b.domain=b.range=function(c){return arguments.length?(a=c.map(b),b):a},b.ticks=function(b){return Vf(a,b)},b.tickFormat=function(b,c){return Wf(a,b,c)},b.copy=function(){return eg(a)},b}function fg(){return 0}function gg(a){return a.innerRadius}function hg(a){return a.outerRadius}function ig(a){return a.startAngle}function jg(a){return a.endAngle}function kg(a){return a&&a.padAngle}function lg(a,b,c,d){return(a-c)*b-(b-d)*a>0?0:1}function mg(a,b,c,d,e){var f=a[0]-b[0],g=a[1]-b[1],h=(e?d:-d)/Math.sqrt(f*f+g*g),i=h*g,j=-h*f,k=a[0]+i,l=a[1]+j,m=b[0]+i,n=b[1]+j,o=(k+m)/2,p=(l+n)/2,q=m-k,r=n-l,s=q*q+r*r,t=c-d,u=k*n-m*l,v=(0>r?-1:1)*Math.sqrt(t*t*s-u*u),w=(u*r-q*v)/s,x=(-u*q-r*v)/s,y=(u*r+q*v)/s,z=(-u*q+r*v)/s,A=w-o,B=x-p,C=y-o,D=z-p;return A*A+B*B>C*C+D*D&&(w=y,x=z),[[w-i,x-j],[w*c/t,x*c/t]]}function ng(a){function b(b){function g(){j.push("M",f(a(k),h))}for(var i,j=[],k=[],l=-1,m=b.length,n=Ab(c),o=Ab(d);++l<m;)e.call(this,i=b[l],l)?k.push([+n.call(this,i,l),+o.call(this,i,l)]):k.length&&(g(),k=[]);return k.length&&g(),j.length?j.join(""):null}var c=Bd,d=Cd,e=Cc,f=og,g=f.key,h=.7;return b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b.defined=function(a){return arguments.length?(e=a,b):e},b.interpolate=function(a){return arguments.length?(g="function"==typeof a?f=a:(f=Aj.get(a)||og).key,b):g},b.tension=function(a){return arguments.length?(h=a,b):h},b}function og(a){return a.join("L")}function pg(a){return og(a)+"Z"}function qg(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);return c>1&&e.push("H",d[0]),e.join("")}function rg(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function sg(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function tg(a,b){return a.length<4?og(a):a[1]+wg(a.slice(1,-1),xg(a,b))}function ug(a,b){return a.length<3?og(a):a[0]+wg((a.push(a[0]),a),xg([a[a.length-2]].concat(a,[a[1]]),b))}function vg(a,b){return a.length<3?og(a):a[0]+wg(a,xg(a,b))}function wg(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return og(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;if(c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],i=2),b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+2*h[0]/3)+","+(f[1]+2*h[1]/3)+","+k[0]+","+k[1]}return d}function xg(a,b){for(var c,d=[],e=(1-b)/2,f=a[0],g=a[1],h=1,i=a.length;++h<i;)c=f,f=g,g=a[h],d.push([e*(g[0]-c[0]),e*(g[1]-c[1])]);return d}function yg(a){if(a.length<3)return og(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f,"L",Cg(Dj,g),",",Cg(Dj,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),Dg(i,g,h);return a.pop(),i.push("L",d),i.join("")}function zg(a){if(a.length<4)return og(a);for(var b,c=[],d=-1,e=a.length,f=[0],g=[0];++d<3;)b=a[d],f.push(b[0]),g.push(b[1]);for(c.push(Cg(Dj,f)+","+Cg(Dj,g)),--d;++d<e;)b=a[d],f.shift(),f.push(b[0]),g.shift(),g.push(b[1]),Dg(c,f,g);return c.join("")}function Ag(a){for(var b,c,d=-1,e=a.length,f=e+4,g=[],h=[];++d<4;)c=a[d%e],g.push(c[0]),h.push(c[1]);for(b=[Cg(Dj,g),",",Cg(Dj,h)],--d;++d<f;)c=a[d%e],g.shift(),g.push(c[0]),h.shift(),h.push(c[1]),Dg(b,g,h);return b.join("")}function Bg(a,b){var c=a.length-1;if(c)for(var d,e,f=a[0][0],g=a[0][1],h=a[c][0]-f,i=a[c][1]-g,j=-1;++j<=c;)d=a[j],e=j/c,d[0]=b*d[0]+(1-b)*(f+e*h),d[1]=b*d[1]+(1-b)*(g+e*i);return yg(a)}function Cg(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function Dg(a,b,c){a.push("C",Cg(Bj,b),",",Cg(Bj,c),",",Cg(Cj,b),",",Cg(Cj,c),",",Cg(Dj,b),",",Cg(Dj,c))}function Eg(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Fg(a){for(var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=Eg(e,f);++b<c;)d[b]=(g+(g=Eg(e=f,f=a[b+1])))/2;return d[b]=g,d}function Gg(a){for(var b,c,d,e,f=[],g=Fg(a),h=-1,i=a.length-1;++h<i;)b=Eg(a[h],a[h+1]),nh(b)<Dh?g[h]=g[h+1]=0:(c=g[h]/b,d=g[h+1]/b,e=c*c+d*d,e>9&&(e=3*b/Math.sqrt(e),g[h]=e*c,g[h+1]=e*d));for(h=-1;++h<=i;)e=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),f.push([e||0,g[h]*e||0]);return f}function Hg(a){return a.length<3?og(a):a[0]+wg(a,Gg(a))}function Ig(a){for(var b,c,d,e=-1,f=a.length;++e<f;)b=a[e],c=b[0],d=b[1]-Ih,b[0]=c*Math.cos(d),b[1]=c*Math.sin(d);return a}function Jg(a){function b(b){function i(){p.push("M",h(a(r),l),k,j(a(q.reverse()),l),"Z")}for(var m,n,o,p=[],q=[],r=[],s=-1,t=b.length,u=Ab(c),v=Ab(e),w=c===d?function(){return n}:Ab(d),x=e===f?function(){return o}:Ab(f);++s<t;)g.call(this,m=b[s],s)?(q.push([n=+u.call(this,m,s),o=+v.call(this,m,s)]),r.push([+w.call(this,m,s),+x.call(this,m,s)])):q.length&&(i(),q=[],r=[]);return q.length&&i(),p.length?p.join(""):null}var c=Bd,d=Bd,e=0,f=Cd,g=Cc,h=og,i=h.key,j=h,k="L",l=.7;return b.x=function(a){return arguments.length?(c=d=a,b):d},b.x0=function(a){return arguments.length?(c=a,b):c},b.x1=function(a){return arguments.length?(d=a,b):d
},b.y=function(a){return arguments.length?(e=f=a,b):f},b.y0=function(a){return arguments.length?(e=a,b):e},b.y1=function(a){return arguments.length?(f=a,b):f},b.defined=function(a){return arguments.length?(g=a,b):g},b.interpolate=function(a){return arguments.length?(i="function"==typeof a?h=a:(h=Aj.get(a)||og).key,j=h.reverse||h,k=h.closed?"M":"L",b):i},b.tension=function(a){return arguments.length?(l=a,b):l},b}function Kg(a){return a.radius}function Lg(a){return[a.x,a.y]}function Mg(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]-Ih;return[c*Math.cos(d),c*Math.sin(d)]}}function Ng(){return 64}function Og(){return"circle"}function Pg(a){var b=Math.sqrt(a/Fh);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Qg(a){return function(){var b,c;(b=this[a])&&(c=b[b.active])&&(--b.count?delete b[b.active]:delete this[a],b.active+=.5,c.event&&c.event.interrupt.call(this,this.__data__,c.index))}}function Rg(a,b,c){return sh(a,Kj),a.namespace=b,a.id=c,a}function Sg(a,b,c,d){var e=a.id,f=a.namespace;return R(a,"function"==typeof c?function(a,g,h){a[f][e].tween.set(b,d(c.call(a,a.__data__,g,h)))}:(c=d(c),function(a){a[f][e].tween.set(b,c)}))}function Tg(a){return null==a&&(a=""),function(){this.textContent=a}}function Ug(a){return null==a?"__transition__":"__transition_"+a+"__"}function Vg(a,b,c,d,e){var f=a[c]||(a[c]={active:0,count:0}),g=f[d];if(!g){var h=e.time;g=f[d]={tween:new j,time:h,delay:e.delay,duration:e.duration,ease:e.ease,index:b},e=null,++f.count,bh.timer(function(e){function i(c){if(f.active>d)return k();var e=f[f.active];e&&(--f.count,delete f[f.active],e.event&&e.event.interrupt.call(a,a.__data__,e.index)),f.active=d,g.event&&g.event.start.call(a,a.__data__,b),g.tween.forEach(function(c,d){(d=d.call(a,a.__data__,b))&&p.push(d)}),m=g.ease,l=g.duration,bh.timer(function(){return o.c=j(c||1)?Cc:j,1},0,h)}function j(c){if(f.active!==d)return 1;for(var e=c/l,h=m(e),i=p.length;i>0;)p[--i].call(a,h);return e>=1?(g.event&&g.event.end.call(a,a.__data__,b),k()):void 0}function k(){return--f.count?delete f[d]:delete a[c],1}var l,m,n=g.delay,o=ci,p=[];return o.t=n+h,e>=n?i(e-n):void(o.c=i)},0,h)}}function Wg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate("+(isFinite(d)?d:c(a))+",0)"})}function Xg(a,b,c){a.attr("transform",function(a){var d=b(a);return"translate(0,"+(isFinite(d)?d:c(a))+")"})}function Yg(a){return a.toISOString()}function Zg(a,b,c){function d(b){return a(b)}function e(a,c){var d=a[1]-a[0],e=d/c,f=bh.bisect(Tj,e);return f==Tj.length?[b.year,Uf(a.map(function(a){return a/31536e6}),c)[2]]:f?b[e/Tj[f-1]<Tj[f]/e?f-1:f]:[Wj,Uf(a,c)[2]]}return d.invert=function(b){return $g(a.invert(b))},d.domain=function(b){return arguments.length?(a.domain(b),d):a.domain().map($g)},d.nice=function(a,b){function c(c){return!isNaN(c)&&!a.range(c,$g(+c+1),b).length}var f=d.domain(),g=Lf(f),h=null==a?e(g,10):"number"==typeof a&&e(g,a);return h&&(a=h[0],b=h[1]),d.domain(Of(f,b>1?{floor:function(b){for(;c(b=a.floor(b));)b=$g(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=$g(+b+1);return b}}:a))},d.ticks=function(a,b){var c=Lf(d.domain()),f=null==a?e(c,10):"number"==typeof a?e(c,a):!a.range&&[{range:a},b];return f&&(a=f[0],b=f[1]),a.range(c[0],$g(+c[1]+1),1>b?1:b)},d.tickFormat=function(){return c},d.copy=function(){return Zg(a.copy(),b,c)},Sf(d,a)}function $g(a){return new Date(a)}function _g(a){return JSON.parse(a.responseText)}function ah(a){var b=eh.createRange();return b.selectNode(eh.body),b.createContextualFragment(a.responseText)}var bh={version:"3.5.5"},ch=[].slice,dh=function(a){return ch.call(a)},eh=this.document;if(eh)try{dh(eh.documentElement.childNodes)[0].nodeType}catch(fh){dh=function(a){for(var b=a.length,c=new Array(b);b--;)c[b]=a[b];return c}}if(Date.now||(Date.now=function(){return+new Date}),eh)try{eh.createElement("DIV").style.setProperty("opacity",0,"")}catch(gh){var hh=this.Element.prototype,ih=hh.setAttribute,jh=hh.setAttributeNS,kh=this.CSSStyleDeclaration.prototype,lh=kh.setProperty;hh.setAttribute=function(a,b){ih.call(this,a,b+"")},hh.setAttributeNS=function(a,b,c){jh.call(this,a,b,c+"")},kh.setProperty=function(a,b,c){lh.call(this,a,b+"",c)}}bh.ascending=c,bh.descending=function(a,b){return a>b?-1:b>a?1:b>=a?0:0/0},bh.min=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&c>d&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&c>d&&(c=d)}return c},bh.max=function(a,b){var c,d,e=-1,f=a.length;if(1===arguments.length){for(;++e<f;)if(null!=(d=a[e])&&d>=d){c=d;break}for(;++e<f;)null!=(d=a[e])&&d>c&&(c=d)}else{for(;++e<f;)if(null!=(d=b.call(a,a[e],e))&&d>=d){c=d;break}for(;++e<f;)null!=(d=b.call(a,a[e],e))&&d>c&&(c=d)}return c},bh.extent=function(a,b){var c,d,e,f=-1,g=a.length;if(1===arguments.length){for(;++f<g;)if(null!=(d=a[f])&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=a[f])&&(c>d&&(c=d),d>e&&(e=d))}else{for(;++f<g;)if(null!=(d=b.call(a,a[f],f))&&d>=d){c=e=d;break}for(;++f<g;)null!=(d=b.call(a,a[f],f))&&(c>d&&(c=d),d>e&&(e=d))}return[c,e]},bh.sum=function(a,b){var c,d=0,f=a.length,g=-1;if(1===arguments.length)for(;++g<f;)e(c=+a[g])&&(d+=c);else for(;++g<f;)e(c=+b.call(a,a[g],g))&&(d+=c);return d},bh.mean=function(a,b){var c,f=0,g=a.length,h=-1,i=g;if(1===arguments.length)for(;++h<g;)e(c=d(a[h]))?f+=c:--i;else for(;++h<g;)e(c=d(b.call(a,a[h],h)))?f+=c:--i;return i?f/i:void 0},bh.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1],f=c-d;return f?e+f*(a[d]-e):e},bh.median=function(a,b){var f,g=[],h=a.length,i=-1;if(1===arguments.length)for(;++i<h;)e(f=d(a[i]))&&g.push(f);else for(;++i<h;)e(f=d(b.call(a,a[i],i)))&&g.push(f);return g.length?bh.quantile(g.sort(c),.5):void 0},bh.variance=function(a,b){var c,f,g=a.length,h=0,i=0,j=-1,k=0;if(1===arguments.length)for(;++j<g;)e(c=d(a[j]))&&(f=c-h,h+=f/++k,i+=f*(c-h));else for(;++j<g;)e(c=d(b.call(a,a[j],j)))&&(f=c-h,h+=f/++k,i+=f*(c-h));return k>1?i/(k-1):void 0},bh.deviation=function(){var a=bh.variance.apply(this,arguments);return a?Math.sqrt(a):a};var mh=f(c);bh.bisectLeft=mh.left,bh.bisect=bh.bisectRight=mh.right,bh.bisector=function(a){return f(1===a.length?function(b,d){return c(a(b),d)}:a)},bh.shuffle=function(a,b,c){(f=arguments.length)<3&&(c=a.length,2>f&&(b=0));for(var d,e,f=c-b;f;)e=Math.random()*f--|0,d=a[f+b],a[f+b]=a[e+b],a[e+b]=d;return a},bh.permute=function(a,b){for(var c=b.length,d=new Array(c);c--;)d[c]=a[b[c]];return d},bh.pairs=function(a){for(var b,c=0,d=a.length-1,e=a[0],f=new Array(0>d?0:d);d>c;)f[c]=[b=e,e=a[++c]];return f},bh.zip=function(){if(!(d=arguments.length))return[];for(var a=-1,b=bh.min(arguments,g),c=new Array(b);++a<b;)for(var d,e=-1,f=c[a]=new Array(d);++e<d;)f[e]=arguments[e][a];return c},bh.transpose=function(a){return bh.zip.apply(bh,a)},bh.keys=function(a){var b=[];for(var c in a)b.push(c);return b},bh.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},bh.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},bh.merge=function(a){for(var b,c,d,e=a.length,f=-1,g=0;++f<e;)g+=a[f].length;for(c=new Array(g);--e>=0;)for(d=a[e],b=d.length;--b>=0;)c[--g]=d[b];return c};var nh=Math.abs;bh.range=function(a,b,c){if(arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0)),(b-a)/c===1/0)throw new Error("infinite range");var d,e=[],f=h(nh(c)),g=-1;if(a*=f,b*=f,c*=f,0>c)for(;(d=a+c*++g)>b;)e.push(d/f);else for(;(d=a+c*++g)<b;)e.push(d/f);return e},bh.map=function(a,b){var c=new j;if(a instanceof j)a.forEach(function(a,b){c.set(a,b)});else if(Array.isArray(a)){var d,e=-1,f=a.length;if(1===arguments.length)for(;++e<f;)c.set(e,a[e]);else for(;++e<f;)c.set(b.call(a,d=a[e],e),d)}else for(var g in a)c.set(g,a[g]);return c};var oh="__proto__",ph="\x00";i(j,{has:m,get:function(a){return this._[k(a)]},set:function(a,b){return this._[k(a)]=b},remove:n,keys:o,values:function(){var a=[];for(var b in this._)a.push(this._[b]);return a},entries:function(){var a=[];for(var b in this._)a.push({key:l(b),value:this._[b]});return a},size:p,empty:q,forEach:function(a){for(var b in this._)a.call(this,l(b),this._[b])}}),bh.nest=function(){function a(b,g,h){if(h>=f.length)return d?d.call(e,g):c?g.sort(c):g;for(var i,k,l,m,n=-1,o=g.length,p=f[h++],q=new j;++n<o;)(m=q.get(i=p(k=g[n])))?m.push(k):q.set(i,[k]);return b?(k=b(),l=function(c,d){k.set(c,a(b,d,h))}):(k={},l=function(c,d){k[c]=a(b,d,h)}),q.forEach(l),k}function b(a,c){if(c>=f.length)return a;var d=[],e=g[c++];return a.forEach(function(a,e){d.push({key:a,values:b(e,c)})}),e?d.sort(function(a,b){return e(a.key,b.key)}):d}var c,d,e={},f=[],g=[];return e.map=function(b,c){return a(c,b,0)},e.entries=function(c){return b(a(bh.map,c,0),0)},e.key=function(a){return f.push(a),e},e.sortKeys=function(a){return g[f.length-1]=a,e},e.sortValues=function(a){return c=a,e},e.rollup=function(a){return d=a,e},e},bh.set=function(a){var b=new r;if(a)for(var c=0,d=a.length;d>c;++c)b.add(a[c]);return b},i(r,{has:m,add:function(a){return this._[k(a+="")]=!0,a},remove:n,values:o,size:p,empty:q,forEach:function(a){for(var b in this._)a.call(this,l(b))}}),bh.behavior={},bh.rebind=function(a,b){for(var c,d=1,e=arguments.length;++d<e;)a[c=arguments[d]]=t(a,b,b[c]);return a};var qh=["webkit","ms","moz","Moz","o","O"];bh.dispatch=function(){for(var a=new w,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=x(a);return a},w.prototype.on=function(a,b){var c=a.indexOf("."),d="";if(c>=0&&(d=a.slice(c+1),a=a.slice(0,c)),a)return arguments.length<2?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)this.hasOwnProperty(a)&&this[a].on(d,null);return this}},bh.event=null,bh.requote=function(a){return a.replace(rh,"\\$&")};var rh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,sh={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},th=function(a,b){return b.querySelector(a)},uh=function(a,b){return b.querySelectorAll(a)},vh=function(a,b){var c=a.matches||a[u(a,"matchesSelector")];return(vh=function(a,b){return c.call(a,b)})(a,b)};"function"==typeof Sizzle&&(th=function(a,b){return Sizzle(a,b)[0]||null},uh=Sizzle,vh=Sizzle.matchesSelector),bh.selection=function(){return bh.select(eh.documentElement)};var wh=bh.selection.prototype=[];wh.select=function(a){var b,c,d,e,f=[];a=C(a);for(var g=-1,h=this.length;++g<h;){f.push(b=[]),b.parentNode=(d=this[g]).parentNode;for(var i=-1,j=d.length;++i<j;)(e=d[i])?(b.push(c=a.call(e,e.__data__,i,g)),c&&"__data__"in e&&(c.__data__=e.__data__)):b.push(null)}return B(f)},wh.selectAll=function(a){var b,c,d=[];a=D(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)(c=g[h])&&(d.push(b=dh(a.call(c,c.__data__,h,e))),b.parentNode=c);return B(d)};var xh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};bh.ns={prefix:xh,qualify:function(a){var b=a.indexOf(":"),c=a;return b>=0&&(c=a.slice(0,b),a=a.slice(b+1)),xh.hasOwnProperty(c)?{space:xh[c],local:a}:a}},wh.attr=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node();return a=bh.ns.qualify(a),a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(E(b,a[b]));return this}return this.each(E(a,b))},wh.classed=function(a,b){if(arguments.length<2){if("string"==typeof a){var c=this.node(),d=(a=H(a)).length,e=-1;if(b=c.classList){for(;++e<d;)if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!G(a[e]).test(b))return!1;return!0}for(b in a)this.each(I(b,a[b]));return this}return this.each(I(a,b))},wh.style=function(a,c,d){var e=arguments.length;if(3>e){if("string"!=typeof a){2>e&&(c="");for(d in a)this.each(K(d,a[d],c));return this}if(2>e){var f=this.node();return b(f).getComputedStyle(f,null).getPropertyValue(a)}d=""}return this.each(K(a,c,d))},wh.property=function(a,b){if(arguments.length<2){if("string"==typeof a)return this.node()[a];for(b in a)this.each(L(b,a[b]));return this}return this.each(L(a,b))},wh.text=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent},wh.html=function(a){return arguments.length?this.each("function"==typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a}):this.node().innerHTML},wh.append=function(a){return a=M(a),this.select(function(){return this.appendChild(a.apply(this,arguments))})},wh.insert=function(a,b){return a=M(a),b=C(b),this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})},wh.remove=function(){return this.each(N)},wh.data=function(a,b){function c(a,c){var d,e,f,g=a.length,l=c.length,m=Math.min(g,l),n=new Array(l),o=new Array(l),p=new Array(g);if(b){var q,r=new j,s=new Array(g);for(d=-1;++d<g;)r.has(q=b.call(e=a[d],e.__data__,d))?p[d]=e:r.set(q,e),s[d]=q;for(d=-1;++d<l;)(e=r.get(q=b.call(c,f=c[d],d)))?e!==!0&&(n[d]=e,e.__data__=f):o[d]=O(f),r.set(q,!0);for(d=-1;++d<g;)r.get(s[d])!==!0&&(p[d]=a[d])}else{for(d=-1;++d<m;)e=a[d],f=c[d],e?(e.__data__=f,n[d]=e):o[d]=O(f);for(;l>d;++d)o[d]=O(c[d]);for(;g>d;++d)p[d]=a[d]}o.update=n,o.parentNode=n.parentNode=p.parentNode=a.parentNode,h.push(o),i.push(n),k.push(p)}var d,e,f=-1,g=this.length;if(!arguments.length){for(a=new Array(g=(d=this[0]).length);++f<g;)(e=d[f])&&(a[f]=e.__data__);return a}var h=S([]),i=B([]),k=B([]);if("function"==typeof a)for(;++f<g;)c(d=this[f],a.call(d,d.parentNode.__data__,f));else for(;++f<g;)c(d=this[f],a);return i.enter=function(){return h},i.exit=function(){return k},i},wh.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")},wh.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=P(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]),b.parentNode=(c=this[f]).parentNode;for(var h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return B(e)},wh.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c,d=this[a],e=d.length-1,f=d[e];--e>=0;)(c=d[e])&&(f&&f!==c.nextSibling&&f.parentNode.insertBefore(c,f),f=c);return this},wh.sort=function(a){a=Q.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()},wh.each=function(a){return R(this,function(b,c,d){a.call(b,b.__data__,c,d)})},wh.call=function(a){var b=dh(arguments);return a.apply(b[0]=this,b),this},wh.empty=function(){return!this.node()},wh.node=function(){for(var a=0,b=this.length;b>a;a++)for(var c=this[a],d=0,e=c.length;e>d;d++){var f=c[d];if(f)return f}return null},wh.size=function(){var a=0;return R(this,function(){++a}),a};var yh=[];bh.selection.enter=S,bh.selection.enter.prototype=yh,yh.append=wh.append,yh.empty=wh.empty,yh.node=wh.node,yh.call=wh.call,yh.size=wh.size,yh.select=function(a){for(var b,c,d,e,f,g=[],h=-1,i=this.length;++h<i;){d=(e=this[h]).update,g.push(b=[]),b.parentNode=e.parentNode;for(var j=-1,k=e.length;++j<k;)(f=e[j])?(b.push(d[j]=c=a.call(e.parentNode,f.__data__,j,h)),c.__data__=f.__data__):b.push(null)}return B(g)},yh.insert=function(a,b){return arguments.length<2&&(b=T(this)),wh.insert.call(this,a,b)},bh.select=function(b){var c;return"string"==typeof b?(c=[th(b,eh)],c.parentNode=eh.documentElement):(c=[b],c.parentNode=a(b)),B([c])},bh.selectAll=function(a){var b;return"string"==typeof a?(b=dh(uh(a,eh)),b.parentNode=eh.documentElement):(b=a,b.parentNode=null),B([b])},wh.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!=typeof a){2>d&&(b=!1);for(c in a)this.each(U(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(U(a,b,c))};var zh=bh.map({mouseenter:"mouseover",mouseleave:"mouseout"});eh&&zh.forEach(function(a){"on"+a in eh&&zh.remove(a)});var Ah,Bh=0;bh.mouse=function(a){return Y(a,z())};var Ch=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;bh.touch=function(a,b,c){if(arguments.length<3&&(c=b,b=z().changedTouches),b)for(var d,e=0,f=b.length;f>e;++e)if((d=b[e]).identifier===c)return Y(a,d)},bh.behavior.drag=function(){function a(){this.on("mousedown.drag",f).on("touchstart.drag",g)}function c(a,b,c,f,g){return function(){function h(){var a,c,d=b(m,p);d&&(a=d[0]-t[0],c=d[1]-t[1],o|=a|c,t=d,n({type:"drag",x:d[0]+j[0],y:d[1]+j[1],dx:a,dy:c}))}function i(){b(m,p)&&(r.on(f+q,null).on(g+q,null),s(o&&bh.event.target===l),n({type:"dragend"}))}var j,k=this,l=bh.event.target,m=k.parentNode,n=d.of(k,arguments),o=0,p=a(),q=".drag"+(null==p?"":"-"+p),r=bh.select(c(l)).on(f+q,h).on(g+q,i),s=X(l),t=b(m,p);e?(j=e.apply(k,arguments),j=[j.x-t[0],j.y-t[1]]):j=[0,0],n({type:"dragstart"})}}var d=A(a,"drag","dragstart","dragend"),e=null,f=c(v,bh.mouse,b,"mousemove","mouseup"),g=c(Z,bh.touch,s,"touchmove","touchend");return a.origin=function(b){return arguments.length?(e=b,a):e},bh.rebind(a,d,"on")},bh.touches=function(a,b){return arguments.length<2&&(b=z().touches),b?dh(b).map(function(b){var c=Y(a,b);return c.identifier=b.identifier,c}):[]};var Dh=1e-6,Eh=Dh*Dh,Fh=Math.PI,Gh=2*Fh,Hh=Gh-Dh,Ih=Fh/2,Jh=Fh/180,Kh=180/Fh,Lh=Math.SQRT2,Mh=2,Nh=4;bh.interpolateZoom=function(a,b){function c(a){var b=a*s;if(r){var c=db(p),g=f/(Mh*m)*(c*eb(Lh*b+p)-cb(p));return[d+g*j,e+g*k,f*c/db(Lh*b+p)]}return[d+a*j,e+a*k,f*Math.exp(Lh*b)]}var d=a[0],e=a[1],f=a[2],g=b[0],h=b[1],i=b[2],j=g-d,k=h-e,l=j*j+k*k,m=Math.sqrt(l),n=(i*i-f*f+Nh*l)/(2*f*Mh*m),o=(i*i-f*f-Nh*l)/(2*i*Mh*m),p=Math.log(Math.sqrt(n*n+1)-n),q=Math.log(Math.sqrt(o*o+1)-o),r=q-p,s=(r||Math.log(i/f))/Lh;return c.duration=1e3*s,c},bh.behavior.zoom=function(){function a(a){a.on(F,l).on(Ph+".zoom",n).on("dblclick.zoom",o).on(I,m)}function c(a){return[(a[0]-z.x)/z.k,(a[1]-z.y)/z.k]}function d(a){return[a[0]*z.k+z.x,a[1]*z.k+z.y]}function e(a){z.k=Math.max(C[0],Math.min(C[1],a))}function f(a,b){b=d(b),z.x+=a[0]-b[0],z.y+=a[1]-b[1]}function g(b,c,d,g){b.__chart__={x:z.x,y:z.y,k:z.k},e(Math.pow(2,g)),f(q=c,d),b=bh.select(b),D>0&&(b=b.transition().duration(D)),b.call(a.event)}function h(){v&&v.domain(u.range().map(function(a){return(a-z.x)/z.k}).map(u.invert)),x&&x.domain(w.range().map(function(a){return(a-z.y)/z.k}).map(w.invert))}function i(a){E++||a({type:"zoomstart"})}function j(a){h(),a({type:"zoom",scale:z.k,translate:[z.x,z.y]})}function k(a){--E||a({type:"zoomend"}),q=null}function l(){function a(){l=1,f(bh.mouse(e),n),j(h)}function d(){m.on(G,null).on(H,null),o(l&&bh.event.target===g),k(h)}var e=this,g=bh.event.target,h=J.of(e,arguments),l=0,m=bh.select(b(e)).on(G,a).on(H,d),n=c(bh.mouse(e)),o=X(e);Jj.call(e),i(h)}function m(){function a(){var a=bh.touches(o);return n=z.k,a.forEach(function(a){a.identifier in q&&(q[a.identifier]=c(a))}),a}function b(){var b=bh.event.target;bh.select(b).on(u,d).on(v,h),w.push(b);for(var c=bh.event.changedTouches,e=0,f=c.length;f>e;++e)q[c[e].identifier]=null;var i=a(),j=Date.now();if(1===i.length){if(500>j-t){var k=i[0];g(o,k,q[k.identifier],Math.floor(Math.log(z.k)/Math.LN2)+1),y()}t=j}else if(i.length>1){var k=i[0],l=i[1],m=k[0]-l[0],n=k[1]-l[1];r=m*m+n*n}}function d(){var a,b,c,d,g=bh.touches(o);Jj.call(o);for(var h=0,i=g.length;i>h;++h,d=null)if(c=g[h],d=q[c.identifier]){if(b)break;a=c,b=d}if(d){var k=(k=c[0]-a[0])*k+(k=c[1]-a[1])*k,l=r&&Math.sqrt(k/r);a=[(a[0]+c[0])/2,(a[1]+c[1])/2],b=[(b[0]+d[0])/2,(b[1]+d[1])/2],e(l*n)}t=null,f(a,b),j(p)}function h(){if(bh.event.touches.length){for(var b=bh.event.changedTouches,c=0,d=b.length;d>c;++c)delete q[b[c].identifier];for(var e in q)return void a()}bh.selectAll(w).on(s,null),x.on(F,l).on(I,m),A(),k(p)}var n,o=this,p=J.of(o,arguments),q={},r=0,s=".zoom-"+bh.event.changedTouches[0].identifier,u="touchmove"+s,v="touchend"+s,w=[],x=bh.select(o),A=X(o);b(),i(p),x.on(F,null).on(I,b)}function n(){var a=J.of(this,arguments);s?clearTimeout(s):(p=c(q=r||bh.mouse(this)),Jj.call(this),i(a)),s=setTimeout(function(){s=null,k(a)},50),y(),e(Math.pow(2,.002*Oh())*z.k),f(q,p),j(a)}function o(){var a=bh.mouse(this),b=Math.log(z.k)/Math.LN2;g(this,a,c(a),bh.event.shiftKey?Math.ceil(b)-1:Math.floor(b)+1)}var p,q,r,s,t,u,v,w,x,z={x:0,y:0,k:1},B=[960,500],C=Qh,D=250,E=0,F="mousedown.zoom",G="mousemove.zoom",H="mouseup.zoom",I="touchstart.zoom",J=A(a,"zoomstart","zoom","zoomend");return Ph||(Ph="onwheel"in eh?(Oh=function(){return-bh.event.deltaY*(bh.event.deltaMode?120:1)},"wheel"):"onmousewheel"in eh?(Oh=function(){return bh.event.wheelDelta},"mousewheel"):(Oh=function(){return-bh.event.detail},"MozMousePixelScroll")),a.event=function(a){a.each(function(){var a=J.of(this,arguments),b=z;Hj?bh.select(this).transition().each("start.zoom",function(){z=this.__chart__||{x:0,y:0,k:1},i(a)}).tween("zoom:zoom",function(){var c=B[0],d=B[1],e=q?q[0]:c/2,f=q?q[1]:d/2,g=bh.interpolateZoom([(e-z.x)/z.k,(f-z.y)/z.k,c/z.k],[(e-b.x)/b.k,(f-b.y)/b.k,c/b.k]);return function(b){var d=g(b),h=c/d[2];this.__chart__=z={x:e-d[0]*h,y:f-d[1]*h,k:h},j(a)}}).each("interrupt.zoom",function(){k(a)}).each("end.zoom",function(){k(a)}):(this.__chart__=z,i(a),j(a),k(a))})},a.translate=function(b){return arguments.length?(z={x:+b[0],y:+b[1],k:z.k},h(),a):[z.x,z.y]},a.scale=function(b){return arguments.length?(z={x:z.x,y:z.y,k:+b},h(),a):z.k},a.scaleExtent=function(b){return arguments.length?(C=null==b?Qh:[+b[0],+b[1]],a):C},a.center=function(b){return arguments.length?(r=b&&[+b[0],+b[1]],a):r},a.size=function(b){return arguments.length?(B=b&&[+b[0],+b[1]],a):B},a.duration=function(b){return arguments.length?(D=+b,a):D},a.x=function(b){return arguments.length?(v=b,u=b.copy(),z={x:0,y:0,k:1},a):v},a.y=function(b){return arguments.length?(x=b,w=b.copy(),z={x:0,y:0,k:1},a):x},bh.rebind(a,J,"on")};var Oh,Ph,Qh=[0,1/0];bh.color=gb,gb.prototype.toString=function(){return this.rgb()+""},bh.hsl=hb;var Rh=hb.prototype=new gb;Rh.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),new hb(this.h,this.s,this.l/a)},Rh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new hb(this.h,this.s,a*this.l)},Rh.rgb=function(){return ib(this.h,this.s,this.l)},bh.hcl=jb;var Sh=jb.prototype=new gb;Sh.brighter=function(a){return new jb(this.h,this.c,Math.min(100,this.l+Th*(arguments.length?a:1)))},Sh.darker=function(a){return new jb(this.h,this.c,Math.max(0,this.l-Th*(arguments.length?a:1)))},Sh.rgb=function(){return kb(this.h,this.c,this.l).rgb()},bh.lab=lb;var Th=18,Uh=.95047,Vh=1,Wh=1.08883,Xh=lb.prototype=new gb;Xh.brighter=function(a){return new lb(Math.min(100,this.l+Th*(arguments.length?a:1)),this.a,this.b)},Xh.darker=function(a){return new lb(Math.max(0,this.l-Th*(arguments.length?a:1)),this.a,this.b)},Xh.rgb=function(){return mb(this.l,this.a,this.b)},bh.rgb=rb;var Yh=rb.prototype=new gb;Yh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return b||c||d?(b&&e>b&&(b=e),c&&e>c&&(c=e),d&&e>d&&(d=e),new rb(Math.min(255,b/a),Math.min(255,c/a),Math.min(255,d/a))):new rb(e,e,e)},Yh.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),new rb(a*this.r,a*this.g,a*this.b)},Yh.hsl=function(){return wb(this.r,this.g,this.b)},Yh.toString=function(){return"#"+ub(this.r)+ub(this.g)+ub(this.b)};var Zh=bh.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Zh.forEach(function(a,b){Zh.set(a,sb(b))}),bh.functor=Ab,bh.xhr=Bb(s),bh.dsv=function(a,b){function c(a,c,f){arguments.length<3&&(f=c,c=null);var g=Cb(a,b,null==c?d:e(c),f);return g.row=function(a){return arguments.length?g.response(null==(c=a)?d:e(a)):c},g}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(g).join(a)}function g(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),i=a.charCodeAt(0);return c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})},c.parseRows=function(a,b){function c(){if(k>=j)return g;if(e)return e=!1,f;var b=k;if(34===a.charCodeAt(b)){for(var c=b;c++<j;)if(34===a.charCodeAt(c)){if(34!==a.charCodeAt(c+1))break;++c}k=c+2;var d=a.charCodeAt(c+1);return 13===d?(e=!0,10===a.charCodeAt(c+2)&&++k):10===d&&(e=!0),a.slice(b+1,c).replace(/""/g,'"')}for(;j>k;){var d=a.charCodeAt(k++),h=1;if(10===d)e=!0;else if(13===d)e=!0,10===a.charCodeAt(k)&&(++k,++h);else if(d!==i)continue;return a.slice(b,k-h)}return a.slice(b)}for(var d,e,f={},g={},h=[],j=a.length,k=0,l=0;(d=c())!==g;){for(var m=[];d!==f&&d!==g;)m.push(d),d=c();b&&null==(m=b(m,l++))||h.push(m)}return h},c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new r,e=[];return b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))}),[e.map(g).join(a)].concat(b.map(function(b){return e.map(function(a){return g(b[a])}).join(a)})).join("\n")},c.formatRows=function(a){return a.map(f).join("\n")},c},bh.csv=bh.dsv(",","text/csv"),bh.tsv=bh.dsv("	","text/tab-separated-values");var $h,_h,ai,bi,ci,di=this[u(this,"requestAnimationFrame")]||function(a){setTimeout(a,17)};bh.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0),3>d&&(c=Date.now());var e=c+b,f={c:a,t:e,f:!1,n:null};_h?_h.n=f:$h=f,_h=f,ai||(bi=clearTimeout(bi),ai=1,di(Fb))},bh.timer.flush=function(){Gb(),Hb()},bh.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var ei=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Jb);bh.formatPrefix=function(a,b){var c=0;return a&&(0>a&&(a*=-1),b&&(a=bh.round(a,Ib(a,b))),c=1+Math.floor(1e-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((c-1)/3)))),ei[8+c/3]};var fi=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,gi=bh.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=bh.round(a,Ib(a,b))).toFixed(Math.max(0,Math.min(20,Ib(a*(1+1e-15),b))))}}),hi=bh.time={},ii=Date;Mb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ji.setUTCDate.apply(this._,arguments)},setDay:function(){ji.setUTCDay.apply(this._,arguments)},setFullYear:function(){ji.setUTCFullYear.apply(this._,arguments)},setHours:function(){ji.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ji.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ji.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ji.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ji.setUTCSeconds.apply(this._,arguments)},setTime:function(){ji.setTime.apply(this._,arguments)}};var ji=Date.prototype;hi.year=Nb(function(a){return a=hi.day(a),a.setMonth(0,1),a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()}),hi.years=hi.year.range,hi.years.utc=hi.year.utc.range,hi.day=Nb(function(a){var b=new ii(2e3,0);return b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1}),hi.days=hi.day.range,hi.days.utc=hi.day.utc.range,hi.dayOfYear=function(a){var b=hi.year(a);return Math.floor((a-b-6e4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(a,b){b=7-b;var c=hi[a]=Nb(function(a){return(a=hi.day(a)).setDate(a.getDate()-(a.getDay()+b)%7),a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=hi.year(a).getDay();return Math.floor((hi.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});hi[a+"s"]=c.range,hi[a+"s"].utc=c.utc.range,hi[a+"OfYear"]=function(a){var c=hi.year(a).getDay();return Math.floor((hi.dayOfYear(a)+(c+b)%7)/7)}}),hi.week=hi.sunday,hi.weeks=hi.sunday.range,hi.weeks.utc=hi.sunday.utc.range,hi.weekOfYear=hi.sundayOfYear;var ki={"-":"",_:" ",0:"0"},li=/^\s*\d+/,mi=/^%/;bh.locale=function(a){return{numberFormat:Kb(a),timeFormat:Pb(a)}};var ni=bh.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});bh.format=ni.numberFormat,bh.geo={},ic.prototype={s:0,t:0,add:function(a){jc(a,this.t,oi),jc(oi.s,this.s,this),this.s?this.t+=oi.t:this.s=oi.t
},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var oi=new ic;bh.geo.stream=function(a,b){a&&pi.hasOwnProperty(a.type)?pi[a.type](a,b):kc(a,b)};var pi={Feature:function(a,b){kc(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)kc(c[d].geometry,b)}},qi={Sphere:function(a,b){b.sphere()},Point:function(a,b){a=a.coordinates,b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){lc(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)lc(c[d],b,0)},Polygon:function(a,b){mc(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)mc(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)kc(c[d],b)}};bh.geo.area=function(a){return ri=0,bh.geo.stream(a,ti),ri};var ri,si=new ic,ti={sphere:function(){ri+=4*Fh},point:v,lineStart:v,lineEnd:v,polygonStart:function(){si.reset(),ti.lineStart=nc},polygonEnd:function(){var a=2*si;ri+=0>a?4*Fh+a:a,ti.lineStart=ti.lineEnd=ti.point=v}};bh.geo.bounds=function(){function a(a,b){t.push(u=[k=a,m=a]),l>b&&(l=b),b>n&&(n=b)}function b(b,c){var d=oc([b*Jh,c*Jh]);if(r){var e=qc(r,d),f=[e[1],-e[0],0],g=qc(f,e);tc(g),g=uc(g);var i=b-o,j=i>0?1:-1,p=g[0]*Kh*j,q=nh(i)>180;if(q^(p>j*o&&j*b>p)){var s=g[1]*Kh;s>n&&(n=s)}else if(p=(p+360)%360-180,q^(p>j*o&&j*b>p)){var s=-g[1]*Kh;l>s&&(l=s)}else l>c&&(l=c),c>n&&(n=c);q?o>b?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b):m>=k?(k>b&&(k=b),b>m&&(m=b)):b>o?h(k,b)>h(k,m)&&(m=b):h(b,m)>h(k,m)&&(k=b)}else a(b,c);r=d,o=b}function c(){v.point=b}function d(){u[0]=k,u[1]=m,v.point=a,r=null}function e(a,c){if(r){var d=a-o;s+=nh(d)>180?d+(d>0?360:-360):d}else p=a,q=c;ti.point(a,c),b(a,c)}function f(){ti.lineStart()}function g(){e(p,q),ti.lineEnd(),nh(s)>Dh&&(k=-(m=180)),u[0]=k,u[1]=m,r=null}function h(a,b){return(b-=a)<0?b+360:b}function i(a,b){return a[0]-b[0]}function j(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var k,l,m,n,o,p,q,r,s,t,u,v={point:a,lineStart:c,lineEnd:d,polygonStart:function(){v.point=e,v.lineStart=f,v.lineEnd=g,s=0,ti.polygonStart()},polygonEnd:function(){ti.polygonEnd(),v.point=a,v.lineStart=c,v.lineEnd=d,0>si?(k=-(m=180),l=-(n=90)):s>Dh?n=90:-Dh>s&&(l=-90),u[0]=k,u[1]=m}};return function(a){n=m=-(k=l=1/0),t=[],bh.geo.stream(a,v);var b=t.length;if(b){t.sort(i);for(var c,d=1,e=t[0],f=[e];b>d;++d)c=t[d],j(c[0],e)||j(c[1],e)?(h(e[0],c[1])>h(e[0],e[1])&&(e[1]=c[1]),h(c[0],e[1])>h(e[0],e[1])&&(e[0]=c[0])):f.push(e=c);for(var g,c,o=-1/0,b=f.length-1,d=0,e=f[b];b>=d;e=c,++d)c=f[d],(g=h(e[1],c[0]))>o&&(o=g,k=c[0],m=e[1])}return t=u=null,1/0===k||1/0===l?[[0/0,0/0],[0/0,0/0]]:[[k,l],[m,n]]}}(),bh.geo.centroid=function(a){ui=vi=wi=xi=yi=zi=Ai=Bi=Ci=Di=Ei=0,bh.geo.stream(a,Fi);var b=Ci,c=Di,d=Ei,e=b*b+c*c+d*d;return Eh>e&&(b=zi,c=Ai,d=Bi,Dh>vi&&(b=wi,c=xi,d=yi),e=b*b+c*c+d*d,Eh>e)?[0/0,0/0]:[Math.atan2(c,b)*Kh,bb(d/Math.sqrt(e))*Kh]};var ui,vi,wi,xi,yi,zi,Ai,Bi,Ci,Di,Ei,Fi={sphere:v,point:wc,lineStart:yc,lineEnd:zc,polygonStart:function(){Fi.lineStart=Ac},polygonEnd:function(){Fi.lineStart=yc}},Gi=Gc(Cc,Kc,Mc,[-Fh,-Fh/2]),Hi=1e9;bh.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){return e&&(e.valid=!1),e=f(a),e.valid=!0,e},extent:function(h){return arguments.length?(f=Qc(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]),e&&(e.valid=!1,e=null),g):[[a,b],[c,d]]}};return g.extent([[0,0],[960,500]])},(bh.geo.conicEqualArea=function(){return Rc(Sc)}).raw=Sc,bh.geo.albers=function(){return bh.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},bh.geo.albersUsa=function(){function a(a){var f=a[0],g=a[1];return b=null,c(f,g),b||(d(f,g),b)||e(f,g),b}var b,c,d,e,f=bh.geo.albers(),g=bh.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=bh.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),i={point:function(a,c){b=[a,c]}};return a.invert=function(a){var b=f.scale(),c=f.translate(),d=(a[0]-c[0])/b,e=(a[1]-c[1])/b;return(e>=.12&&.234>e&&d>=-.425&&-.214>d?g:e>=.166&&.234>e&&d>=-.214&&-.115>d?h:f).invert(a)},a.stream=function(a){var b=f.stream(a),c=g.stream(a),d=h.stream(a);return{point:function(a,e){b.point(a,e),c.point(a,e),d.point(a,e)},sphere:function(){b.sphere(),c.sphere(),d.sphere()},lineStart:function(){b.lineStart(),c.lineStart(),d.lineStart()},lineEnd:function(){b.lineEnd(),c.lineEnd(),d.lineEnd()},polygonStart:function(){b.polygonStart(),c.polygonStart(),d.polygonStart()},polygonEnd:function(){b.polygonEnd(),c.polygonEnd(),d.polygonEnd()}}},a.precision=function(b){return arguments.length?(f.precision(b),g.precision(b),h.precision(b),a):f.precision()},a.scale=function(b){return arguments.length?(f.scale(b),g.scale(.35*b),h.scale(b),a.translate(f.translate())):f.scale()},a.translate=function(b){if(!arguments.length)return f.translate();var j=f.scale(),k=+b[0],l=+b[1];return c=f.translate(b).clipExtent([[k-.455*j,l-.238*j],[k+.455*j,l+.238*j]]).stream(i).point,d=g.translate([k-.307*j,l+.201*j]).clipExtent([[k-.425*j+Dh,l+.12*j+Dh],[k-.214*j-Dh,l+.234*j-Dh]]).stream(i).point,e=h.translate([k-.205*j,l+.212*j]).clipExtent([[k-.214*j+Dh,l+.166*j+Dh],[k-.115*j-Dh,l+.234*j-Dh]]).stream(i).point,a},a.scale(1070)};var Ii,Ji,Ki,Li,Mi,Ni,Oi={point:v,lineStart:v,lineEnd:v,polygonStart:function(){Ji=0,Oi.lineStart=Tc},polygonEnd:function(){Oi.lineStart=Oi.lineEnd=Oi.point=v,Ii+=nh(Ji/2)}},Pi={point:Uc,lineStart:v,lineEnd:v,polygonStart:v,polygonEnd:v},Qi={point:Xc,lineStart:Yc,lineEnd:Zc,polygonStart:function(){Qi.lineStart=$c},polygonEnd:function(){Qi.point=Xc,Qi.lineStart=Yc,Qi.lineEnd=Zc}};bh.geo.path=function(){function a(a){return a&&("function"==typeof h&&f.pointRadius(+h.apply(this,arguments)),g&&g.valid||(g=e(f)),bh.geo.stream(a,g)),f.result()}function b(){return g=null,a}var c,d,e,f,g,h=4.5;return a.area=function(a){return Ii=0,bh.geo.stream(a,e(Oi)),Ii},a.centroid=function(a){return wi=xi=yi=zi=Ai=Bi=Ci=Di=Ei=0,bh.geo.stream(a,e(Qi)),Ei?[Ci/Ei,Di/Ei]:Bi?[zi/Bi,Ai/Bi]:yi?[wi/yi,xi/yi]:[0/0,0/0]},a.bounds=function(a){return Mi=Ni=-(Ki=Li=1/0),bh.geo.stream(a,e(Pi)),[[Ki,Li],[Mi,Ni]]},a.projection=function(a){return arguments.length?(e=(c=a)?a.stream||bd(a):s,b()):c},a.context=function(a){return arguments.length?(f=null==(d=a)?new Vc:new _c(a),"function"!=typeof h&&f.pointRadius(h),b()):d},a.pointRadius=function(b){return arguments.length?(h="function"==typeof b?b:(f.pointRadius(+b),+b),a):h},a.projection(bh.geo.albersUsa()).context(null)},bh.geo.transform=function(a){return{stream:function(b){var c=new cd(b);for(var d in a)c[d]=a[d];return c}}},cd.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},bh.geo.projection=ed,bh.geo.projectionMutator=fd,(bh.geo.equirectangular=function(){return ed(hd)}).raw=hd.invert=hd,bh.geo.rotation=function(a){function b(b){return b=a(b[0]*Jh,b[1]*Jh),b[0]*=Kh,b[1]*=Kh,b}return a=jd(a[0]%360*Jh,a[1]*Jh,a.length>2?a[2]*Jh:0),b.invert=function(b){return b=a.invert(b[0]*Jh,b[1]*Jh),b[0]*=Kh,b[1]*=Kh,b},b},id.invert=hd,bh.geo.circle=function(){function a(){var a="function"==typeof d?d.apply(this,arguments):d,b=jd(-a[0]*Jh,-a[1]*Jh,0).invert,e=[];return c(null,null,1,{point:function(a,c){e.push(a=b(a,c)),a[0]*=Kh,a[1]*=Kh}}),{type:"Polygon",coordinates:[e]}}var b,c,d=[0,0],e=6;return a.origin=function(b){return arguments.length?(d=b,a):d},a.angle=function(d){return arguments.length?(c=nd((b=+d)*Jh,e*Jh),a):b},a.precision=function(d){return arguments.length?(c=nd(b*Jh,(e=+d)*Jh),a):e},a.angle(90)},bh.geo.distance=function(a,b){var c,d=(b[0]-a[0])*Jh,e=a[1]*Jh,f=b[1]*Jh,g=Math.sin(d),h=Math.cos(d),i=Math.sin(e),j=Math.cos(e),k=Math.sin(f),l=Math.cos(f);return Math.atan2(Math.sqrt((c=l*g)*c+(c=j*k-i*l*h)*c),i*k+j*l*h)},bh.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return bh.range(Math.ceil(f/q)*q,e,q).map(m).concat(bh.range(Math.ceil(j/r)*r,i,r).map(n)).concat(bh.range(Math.ceil(d/o)*o,c,o).filter(function(a){return nh(a%q)>Dh}).map(k)).concat(bh.range(Math.ceil(h/p)*p,g,p).filter(function(a){return nh(a%r)>Dh}).map(l))}var c,d,e,f,g,h,i,j,k,l,m,n,o=10,p=o,q=90,r=360,s=2.5;return a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})},a.outline=function(){return{type:"Polygon",coordinates:[m(f).concat(n(i).slice(1),m(e).reverse().slice(1),n(j).reverse().slice(1))]}},a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()},a.majorExtent=function(b){return arguments.length?(f=+b[0][0],e=+b[1][0],j=+b[0][1],i=+b[1][1],f>e&&(b=f,f=e,e=b),j>i&&(b=j,j=i,i=b),a.precision(s)):[[f,j],[e,i]]},a.minorExtent=function(b){return arguments.length?(d=+b[0][0],c=+b[1][0],h=+b[0][1],g=+b[1][1],d>c&&(b=d,d=c,c=b),h>g&&(b=h,h=g,g=b),a.precision(s)):[[d,h],[c,g]]},a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()},a.majorStep=function(b){return arguments.length?(q=+b[0],r=+b[1],a):[q,r]},a.minorStep=function(b){return arguments.length?(o=+b[0],p=+b[1],a):[o,p]},a.precision=function(b){return arguments.length?(s=+b,k=pd(h,g,90),l=qd(d,c,s),m=pd(j,i,90),n=qd(f,e,s),a):s},a.majorExtent([[-180,-90+Dh],[180,90-Dh]]).minorExtent([[-180,-80-Dh],[180,80+Dh]])},bh.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[b||d.apply(this,arguments),c||e.apply(this,arguments)]}}var b,c,d=rd,e=sd;return a.distance=function(){return bh.geo.distance(b||d.apply(this,arguments),c||e.apply(this,arguments))},a.source=function(c){return arguments.length?(d=c,b="function"==typeof c?null:c,a):d},a.target=function(b){return arguments.length?(e=b,c="function"==typeof b?null:b,a):e},a.precision=function(){return arguments.length?a:0},a},bh.geo.interpolate=function(a,b){return td(a[0]*Jh,a[1]*Jh,b[0]*Jh,b[1]*Jh)},bh.geo.length=function(a){return Ri=0,bh.geo.stream(a,Si),Ri};var Ri,Si={sphere:v,point:v,lineStart:ud,lineEnd:v,polygonStart:v,polygonEnd:v},Ti=vd(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(bh.geo.azimuthalEqualArea=function(){return ed(Ti)}).raw=Ti;var Ui=vd(function(a){var b=Math.acos(a);return b&&b/Math.sin(b)},s);(bh.geo.azimuthalEquidistant=function(){return ed(Ui)}).raw=Ui,(bh.geo.conicConformal=function(){return Rc(wd)}).raw=wd,(bh.geo.conicEquidistant=function(){return Rc(xd)}).raw=xd;var Vi=vd(function(a){return 1/a},Math.atan);(bh.geo.gnomonic=function(){return ed(Vi)}).raw=Vi,yd.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Ih]},(bh.geo.mercator=function(){return zd(yd)}).raw=yd;var Wi=vd(function(){return 1},Math.asin);(bh.geo.orthographic=function(){return ed(Wi)}).raw=Wi;var Xi=vd(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(bh.geo.stereographic=function(){return ed(Xi)}).raw=Xi,Ad.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Ih]},(bh.geo.transverseMercator=function(){var a=zd(Ad),b=a.center,c=a.rotate;return a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[a[1],-a[0]])},a.rotate=function(a){return a?c([a[0],a[1],a.length>2?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])},c([0,0,90])}).raw=Ad,bh.geom={},bh.geom.hull=function(a){function b(a){if(a.length<3)return[];var b,e=Ab(c),f=Ab(d),g=a.length,h=[],i=[];for(b=0;g>b;b++)h.push([+e.call(this,a[b],b),+f.call(this,a[b],b),b]);for(h.sort(Ed),b=0;g>b;b++)i.push([h[b][0],-h[b][1]]);var j=Dd(h),k=Dd(i),l=k[0]===j[0],m=k[k.length-1]===j[j.length-1],n=[];for(b=j.length-1;b>=0;--b)n.push(a[h[j[b]][2]]);for(b=+l;b<k.length-m;++b)n.push(a[h[k[b]][2]]);return n}var c=Bd,d=Cd;return arguments.length?b(a):(b.x=function(a){return arguments.length?(c=a,b):c},b.y=function(a){return arguments.length?(d=a,b):d},b)},bh.geom.polygon=function(a){return sh(a,Yi),a};var Yi=bh.geom.polygon.prototype=[];Yi.area=function(){for(var a,b=-1,c=this.length,d=this[c-1],e=0;++b<c;)a=d,d=this[b],e+=a[1]*d[0]-a[0]*d[1];return.5*e},Yi.centroid=function(a){var b,c,d=-1,e=this.length,f=0,g=0,h=this[e-1];for(arguments.length||(a=-1/(6*this.area()));++d<e;)b=h,h=this[d],c=b[0]*h[1]-h[0]*b[1],f+=(b[0]+h[0])*c,g+=(b[1]+h[1])*c;return[f*a,g*a]},Yi.clip=function(a){for(var b,c,d,e,f,g,h=Hd(a),i=-1,j=this.length-Hd(this),k=this[j-1];++i<j;){for(b=a.slice(),a.length=0,e=this[i],f=b[(d=b.length-h)-1],c=-1;++c<d;)g=b[c],Fd(g,k,e)?(Fd(f,k,e)||a.push(Gd(f,g,k,e)),a.push(g)):Fd(f,k,e)&&a.push(Gd(f,g,k,e)),f=g;h&&a.push(a[0]),k=e}return a};var Zi,$i,_i,aj,bj,cj=[],dj=[];Pd.prototype.prepare=function(){for(var a,b=this.edges,c=b.length;c--;)a=b[c].edge,a.b&&a.a||b.splice(c,1);return b.sort(Rd),b.length},_d.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ae.prototype={insert:function(a,b){var c,d,e;if(a){if(b.P=a,b.N=a.N,a.N&&(a.N.P=b),a.N=b,a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=ee(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);for(b.L=b.R=null,b.U=c,b.C=!0,a=b;c&&c.C;)d=c.U,c===d.L?(e=d.R,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(ce(this,c),a=c,c=a.U),c.C=!1,d.C=!0,de(this,d))):(e=d.L,e&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(de(this,c),a=c,c=a.U),c.C=!1,d.C=!0,ce(this,d))),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P),a.P&&(a.P.N=a.N),a.N=a.P=null;var b,c,d,e=a.U,f=a.L,g=a.R;if(c=f?g?ee(g):f:g,e?e.L===a?e.L=c:e.R=c:this._=c,f&&g?(d=c.C,c.C=a.C,c.L=f,f.U=c,c!==g?(e=c.U,c.U=a.U,a=c.R,e.L=a,c.R=g,g.U=c):(c.U=e,e=c,a=c.R)):(d=a.C,a=c),a&&(a.U=e),!d){if(a&&a.C)return void(a.C=!1);do{if(a===this._)break;if(a===e.L){if(b=e.R,b.C&&(b.C=!1,e.C=!0,ce(this,e),b=e.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,de(this,b),b=e.R),b.C=e.C,e.C=b.R.C=!1,ce(this,e),a=this._;break}}else if(b=e.L,b.C&&(b.C=!1,e.C=!0,de(this,e),b=e.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,ce(this,b),b=e.L),b.C=e.C,e.C=b.L.C=!1,de(this,e),a=this._;break}b.C=!0,a=e,e=e.U}while(!a.C);a&&(a.C=!1)}}},bh.geom.voronoi=function(a){function b(a){var b=new Array(a.length),d=h[0][0],e=h[0][1],f=h[1][0],g=h[1][1];return fe(c(a),h).cells.forEach(function(c,h){var i=c.edges,j=c.site,k=b[h]=i.length?i.map(function(a){var b=a.start();return[b.x,b.y]}):j.x>=d&&j.x<=f&&j.y>=e&&j.y<=g?[[d,g],[f,g],[f,e],[d,e]]:[];k.point=a[h]}),b}function c(a){return a.map(function(a,b){return{x:Math.round(f(a,b)/Dh)*Dh,y:Math.round(g(a,b)/Dh)*Dh,i:b}})}var d=Bd,e=Cd,f=d,g=e,h=ej;return a?b(a):(b.links=function(a){return fe(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})},b.triangles=function(a){var b=[];return fe(c(a)).cells.forEach(function(c,d){for(var e,f,g=c.site,h=c.edges.sort(Rd),i=-1,j=h.length,k=h[j-1].edge,l=k.l===g?k.r:k.l;++i<j;)e=k,f=l,k=h[i].edge,l=k.l===g?k.r:k.l,d<f.i&&d<l.i&&he(g,f,l)<0&&b.push([a[d],a[f.i],a[l.i]])}),b},b.x=function(a){return arguments.length?(f=Ab(d=a),b):d},b.y=function(a){return arguments.length?(g=Ab(e=a),b):e},b.clipExtent=function(a){return arguments.length?(h=null==a?ej:a,b):h===ej?null:h},b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===ej?null:h&&h[1]},b)};var ej=[[-1e6,-1e6],[1e6,1e6]];bh.geom.delaunay=function(a){return bh.geom.voronoi().triangles(a)},bh.geom.quadtree=function(a,b,c,d,e){function f(a){function f(a,b,c,d,e,f,g,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var i=a.x,k=a.y;if(null!=i)if(nh(i-c)+nh(k-d)<.01)j(a,b,c,d,e,f,g,h);else{var l=a.point;a.x=a.y=a.point=null,j(a,l,i,k,e,f,g,h),j(a,b,c,d,e,f,g,h)}else a.x=c,a.y=d,a.point=b}else j(a,b,c,d,e,f,g,h)}function j(a,b,c,d,e,g,h,i){var j=.5*(e+h),k=.5*(g+i),l=c>=j,m=d>=k,n=m<<1|l;a.leaf=!1,a=a.nodes[n]||(a.nodes[n]=ke()),l?e=j:h=j,m?g=k:i=k,f(a,b,c,d,e,g,h,i)}var k,l,m,n,o,p,q,r,s,t=Ab(h),u=Ab(i);if(null!=b)p=b,q=c,r=d,s=e;else if(r=s=-(p=q=1/0),l=[],m=[],o=a.length,g)for(n=0;o>n;++n)k=a[n],k.x<p&&(p=k.x),k.y<q&&(q=k.y),k.x>r&&(r=k.x),k.y>s&&(s=k.y),l.push(k.x),m.push(k.y);else for(n=0;o>n;++n){var v=+t(k=a[n],n),w=+u(k,n);p>v&&(p=v),q>w&&(q=w),v>r&&(r=v),w>s&&(s=w),l.push(v),m.push(w)}var x=r-p,y=s-q;x>y?s=q+x:r=p+y;var z=ke();if(z.add=function(a){f(z,a,+t(a,++n),+u(a,n),p,q,r,s)},z.visit=function(a){le(a,z,p,q,r,s)},z.find=function(a){return me(z,a[0],a[1],p,q,r,s)},n=-1,null==b){for(;++n<o;)f(z,a[n],l[n],m[n],p,q,r,s);--n}else a.forEach(z.add);return l=m=a=k=null,z}var g,h=Bd,i=Cd;return(g=arguments.length)?(h=ie,i=je,3===g&&(e=c,d=b,c=b=0),f(a)):(f.x=function(a){return arguments.length?(h=a,f):h},f.y=function(a){return arguments.length?(i=a,f):i},f.extent=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]),f):null==b?null:[[b,c],[d,e]]},f.size=function(a){return arguments.length?(null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]),f):null==b?null:[d-b,e-c]},f)},bh.interpolateRgb=ne,bh.interpolateObject=oe,bh.interpolateNumber=pe,bh.interpolateString=qe;var fj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gj=new RegExp(fj.source,"g");bh.interpolate=re,bh.interpolators=[function(a,b){var c=typeof b;return("string"===c?Zh.has(b)||/^(#|rgb\(|hsl\()/.test(b)?ne:qe:b instanceof gb?ne:Array.isArray(b)?se:"object"===c&&isNaN(b)?oe:pe)(a,b)}],bh.interpolateArray=se;var hj=function(){return s},ij=bh.map({linear:hj,poly:ze,quad:function(){return we},cubic:function(){return xe},sin:function(){return Ae},exp:function(){return Be},circle:function(){return Ce},elastic:De,back:Ee,bounce:function(){return Fe}}),jj=bh.map({"in":s,out:ue,"in-out":ve,"out-in":function(a){return ve(ue(a))}});bh.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.slice(0,b):a,d=b>=0?a.slice(b+1):"in";return c=ij.get(c)||hj,d=jj.get(d)||s,te(d(c.apply(null,ch.call(arguments,1))))},bh.interpolateHcl=Ge,bh.interpolateHsl=He,bh.interpolateLab=Ie,bh.interpolateRound=Je,bh.transform=function(a){var b=eh.createElementNS(bh.ns.prefix.svg,"g");return(bh.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Ke(c?c.matrix:kj)})(a)},Ke.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var kj={a:1,b:0,c:0,d:1,e:0,f:0};bh.interpolateTransform=Oe,bh.layout={},bh.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(Re(a[c]));return b}},bh.layout.chord=function(){function a(){var a,j,l,m,n,o={},p=[],q=bh.range(f),r=[];for(c=[],d=[],a=0,m=-1;++m<f;){for(j=0,n=-1;++n<f;)j+=e[m][n];p.push(j),r.push(bh.range(f)),a+=j}for(g&&q.sort(function(a,b){return g(p[a],p[b])}),h&&r.forEach(function(a,b){a.sort(function(a,c){return h(e[b][a],e[b][c])})}),a=(Gh-k*f)/a,j=0,m=-1;++m<f;){for(l=j,n=-1;++n<f;){var s=q[m],t=r[s][n],u=e[s][t],v=j,w=j+=u*a;o[s+"-"+t]={index:s,subindex:t,startAngle:v,endAngle:w,value:u}}d[s]={index:s,startAngle:l,endAngle:j,value:(j-l)/a},j+=k}for(m=-1;++m<f;)for(n=m-1;++n<f;){var x=o[m+"-"+n],y=o[n+"-"+m];(x.value||y.value)&&c.push(x.value<y.value?{source:y,target:x}:{source:x,target:y})}i&&b()}function b(){c.sort(function(a,b){return i((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c,d,e,f,g,h,i,j={},k=0;return j.matrix=function(a){return arguments.length?(f=(e=a)&&e.length,c=d=null,j):e},j.padding=function(a){return arguments.length?(k=a,c=d=null,j):k},j.sortGroups=function(a){return arguments.length?(g=a,c=d=null,j):g},j.sortSubgroups=function(a){return arguments.length?(h=a,c=null,j):h},j.sortChords=function(a){return arguments.length?(i=a,c&&b(),j):i},j.chords=function(){return c||a(),c},j.groups=function(){return d||a(),d},j},bh.layout.force=function(){function a(a){return function(b,c,d,e){if(b.point!==a){var f=b.cx-a.x,g=b.cy-a.y,h=e-c,i=f*f+g*g;if(i>h*h/q){if(o>i){var j=b.charge/i;a.px-=f*j,a.py-=g*j}return!0}if(b.point&&i&&o>i){var j=b.pointCharge/i;a.px-=f*j,a.py-=g*j}}return!b.charge}}function b(a){a.px=bh.event.x,a.py=bh.event.y,h.resume()}var c,d,e,f,g,h={},i=bh.dispatch("start","tick","end"),j=[1,1],k=.9,l=lj,m=mj,n=-30,o=nj,p=.1,q=.64,r=[],t=[];return h.tick=function(){if((d*=.99)<.005)return i.end({type:"end",alpha:d=0}),!0;var b,c,h,l,m,o,q,s,u,v=r.length,w=t.length;for(c=0;w>c;++c)h=t[c],l=h.source,m=h.target,s=m.x-l.x,u=m.y-l.y,(o=s*s+u*u)&&(o=d*f[c]*((o=Math.sqrt(o))-e[c])/o,s*=o,u*=o,m.x-=s*(q=l.weight/(m.weight+l.weight)),m.y-=u*q,l.x+=s*(q=1-q),l.y+=u*q);if((q=d*p)&&(s=j[0]/2,u=j[1]/2,c=-1,q))for(;++c<v;)h=r[c],h.x+=(s-h.x)*q,h.y+=(u-h.y)*q;if(n)for(Ye(b=bh.geom.quadtree(r),d,g),c=-1;++c<v;)(h=r[c]).fixed||b.visit(a(h));for(c=-1;++c<v;)h=r[c],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*k,h.y-=(h.py-(h.py=h.y))*k);i.tick({type:"tick",alpha:d})},h.nodes=function(a){return arguments.length?(r=a,h):r},h.links=function(a){return arguments.length?(t=a,h):t},h.size=function(a){return arguments.length?(j=a,h):j},h.linkDistance=function(a){return arguments.length?(l="function"==typeof a?a:+a,h):l},h.distance=h.linkDistance,h.linkStrength=function(a){return arguments.length?(m="function"==typeof a?a:+a,h):m},h.friction=function(a){return arguments.length?(k=+a,h):k},h.charge=function(a){return arguments.length?(n="function"==typeof a?a:+a,h):n},h.chargeDistance=function(a){return arguments.length?(o=a*a,h):Math.sqrt(o)},h.gravity=function(a){return arguments.length?(p=+a,h):p},h.theta=function(a){return arguments.length?(q=a*a,h):Math.sqrt(q)},h.alpha=function(a){return arguments.length?(a=+a,d?d=a>0?a:0:a>0&&(i.start({type:"start",alpha:d=a}),bh.timer(h.tick)),h):d},h.start=function(){function a(a,d){if(!c){for(c=new Array(i),h=0;i>h;++h)c[h]=[];for(h=0;k>h;++h){var e=t[h];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var f,g=c[b],h=-1,j=g.length;++h<j;)if(!isNaN(f=g[h][a]))return f;return Math.random()*d}var b,c,d,i=r.length,k=t.length,o=j[0],p=j[1];for(b=0;i>b;++b)(d=r[b]).index=b,d.weight=0;for(b=0;k>b;++b)d=t[b],"number"==typeof d.source&&(d.source=r[d.source]),"number"==typeof d.target&&(d.target=r[d.target]),++d.source.weight,++d.target.weight;for(b=0;i>b;++b)d=r[b],isNaN(d.x)&&(d.x=a("x",o)),isNaN(d.y)&&(d.y=a("y",p)),isNaN(d.px)&&(d.px=d.x),isNaN(d.py)&&(d.py=d.y);if(e=[],"function"==typeof l)for(b=0;k>b;++b)e[b]=+l.call(this,t[b],b);else for(b=0;k>b;++b)e[b]=l;if(f=[],"function"==typeof m)for(b=0;k>b;++b)f[b]=+m.call(this,t[b],b);else for(b=0;k>b;++b)f[b]=m;if(g=[],"function"==typeof n)for(b=0;i>b;++b)g[b]=+n.call(this,r[b],b);else for(b=0;i>b;++b)g[b]=n;return h.resume()},h.resume=function(){return h.alpha(.1)},h.stop=function(){return h.alpha(0)},h.drag=function(){return c||(c=bh.behavior.drag().origin(s).on("dragstart.force",Ue).on("drag.force",b).on("dragend.force",Ve)),arguments.length?void this.on("mouseover.force",We).on("mouseout.force",Xe).call(c):c},bh.rebind(h,i,"on")};var lj=20,mj=1,nj=1/0;bh.layout.hierarchy=function(){function a(e){var f,g=[e],h=[];for(e.depth=0;null!=(f=g.pop());)if(h.push(f),(j=c.call(a,f,f.depth))&&(i=j.length)){for(var i,j,k;--i>=0;)g.push(k=j[i]),k.parent=f,k.depth=f.depth+1;d&&(f.value=0),f.children=j}else d&&(f.value=+d.call(a,f,f.depth)||0),delete f.children;return _e(e,function(a){var c,e;b&&(c=a.children)&&c.sort(b),d&&(e=a.parent)&&(e.value+=a.value)}),h}var b=cf,c=af,d=bf;return a.sort=function(c){return arguments.length?(b=c,a):b},a.children=function(b){return arguments.length?(c=b,a):c},a.value=function(b){return arguments.length?(d=b,a):d},a.revalue=function(b){return d&&($e(b,function(a){a.children&&(a.value=0)}),_e(b,function(b){var c;b.children||(b.value=+d.call(a,b,b.depth)||0),(c=b.parent)&&(c.value+=b.value)})),b},a},bh.layout.partition=function(){function a(b,c,d,e){var f=b.children;if(b.x=c,b.y=b.depth*e,b.dx=d,b.dy=e,f&&(g=f.length)){var g,h,i,j=-1;for(d=b.value?d/b.value:0;++j<g;)a(h=f[j],c,i=h.value*d,e),c+=i}}function b(a){var c=a.children,d=0;if(c&&(e=c.length))for(var e,f=-1;++f<e;)d=Math.max(d,b(c[f]));return 1+d}function c(c,f){var g=d.call(this,c,f);return a(g[0],0,e[0],e[1]/b(g[0])),g}var d=bh.layout.hierarchy(),e=[1,1];return c.size=function(a){return arguments.length?(e=a,c):e},Ze(c,d)},bh.layout.pie=function(){function a(g){var h,i=g.length,j=g.map(function(c,d){return+b.call(a,c,d)}),k=+("function"==typeof d?d.apply(this,arguments):d),l=("function"==typeof e?e.apply(this,arguments):e)-k,m=Math.min(Math.abs(l)/i,+("function"==typeof f?f.apply(this,arguments):f)),n=m*(0>l?-1:1),o=(l-i*n)/bh.sum(j),p=bh.range(i),q=[];return null!=c&&p.sort(c===oj?function(a,b){return j[b]-j[a]}:function(a,b){return c(g[a],g[b])}),p.forEach(function(a){q[a]={data:g[a],value:h=j[a],startAngle:k,endAngle:k+=h*o+n,padAngle:m}}),q}var b=Number,c=oj,d=0,e=Gh,f=0;return a.value=function(c){return arguments.length?(b=c,a):b},a.sort=function(b){return arguments.length?(c=b,a):c},a.startAngle=function(b){return arguments.length?(d=b,a):d},a.endAngle=function(b){return arguments.length?(e=b,a):e},a.padAngle=function(b){return arguments.length?(f=b,a):f},a};var oj={};bh.layout.stack=function(){function a(h,i){if(!(m=h.length))return h;var j=h.map(function(c,d){return b.call(a,c,d)}),k=j.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),l=c.call(a,k,i);j=bh.permute(j,l),k=bh.permute(k,l);var m,n,o,p,q=d.call(a,k,i),r=j[0].length;for(o=0;r>o;++o)for(e.call(a,j[0][o],p=q[o],k[0][o][1]),n=1;m>n;++n)e.call(a,j[n][o],p+=k[n-1][o][1],k[n][o][1]);return h}var b=s,c=hf,d=jf,e=gf,f=ef,g=ff;return a.values=function(c){return arguments.length?(b=c,a):b},a.order=function(b){return arguments.length?(c="function"==typeof b?b:pj.get(b)||hf,a):c},a.offset=function(b){return arguments.length?(d="function"==typeof b?b:qj.get(b)||jf,a):d},a.x=function(b){return arguments.length?(f=b,a):f},a.y=function(b){return arguments.length?(g=b,a):g},a.out=function(b){return arguments.length?(e=b,a):e},a};var pj=bh.map({"inside-out":function(a){var b,c,d=a.length,e=a.map(kf),f=a.map(lf),g=bh.range(d).sort(function(a,b){return e[a]-e[b]}),h=0,i=0,j=[],k=[];for(b=0;d>b;++b)c=g[b],i>h?(h+=f[c],j.push(c)):(i+=f[c],k.push(c));return k.reverse().concat(j)},reverse:function(a){return bh.range(a.length).reverse()},"default":hf}),qj=bh.map({silhouette:function(a){var b,c,d,e=a.length,f=a[0].length,g=[],h=0,i=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];d>h&&(h=d),g.push(d)}for(c=0;f>c;++c)i[c]=(h-g[c])/2;return i},wiggle:function(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=a[0],m=l.length,n=[];for(n[0]=i=j=0,c=1;m>c;++c){for(b=0,e=0;k>b;++b)e+=a[b][c][1];for(b=0,f=0,h=l[c][0]-l[c-1][0];k>b;++b){for(d=0,g=(a[b][c][1]-a[b][c-1][1])/(2*h);b>d;++d)g+=(a[d][c][1]-a[d][c-1][1])/h;f+=g*a[b][c][1]}n[c]=i-=e?f/e*h:0,j>i&&(j=i)}for(c=0;m>c;++c)n[c]-=j;return n},expand:function(a){var b,c,d,e=a.length,f=a[0].length,g=1/e,h=[];for(c=0;f>c;++c){for(b=0,d=0;e>b;b++)d+=a[b][c][1];if(d)for(b=0;e>b;b++)a[b][c][1]/=d;else for(b=0;e>b;b++)a[b][c][1]=g}for(c=0;f>c;++c)h[c]=0;return h},zero:jf});bh.layout.histogram=function(){function a(a,f){for(var g,h,i=[],j=a.map(c,this),k=d.call(this,j,f),l=e.call(this,k,j,f),f=-1,m=j.length,n=l.length-1,o=b?1:1/m;++f<n;)g=i[f]=[],g.dx=l[f+1]-(g.x=l[f]),g.y=0;if(n>0)for(f=-1;++f<m;)h=j[f],h>=k[0]&&h<=k[1]&&(g=i[bh.bisect(l,h,1,n)-1],g.y+=o,g.push(a[f]));return i}var b=!0,c=Number,d=pf,e=nf;return a.value=function(b){return arguments.length?(c=b,a):c},a.range=function(b){return arguments.length?(d=Ab(b),a):d},a.bins=function(b){return arguments.length?(e="number"==typeof b?function(a){return of(a,b)}:Ab(b),a):e},a.frequency=function(c){return arguments.length?(b=!!c,a):b},a},bh.layout.pack=function(){function a(a,f){var g=c.call(this,a,f),h=g[0],i=e[0],j=e[1],k=null==b?Math.sqrt:"function"==typeof b?b:function(){return b};if(h.x=h.y=0,_e(h,function(a){a.r=+k(a.value)}),_e(h,uf),d){var l=d*(b?1:Math.max(2*h.r/i,2*h.r/j))/2;_e(h,function(a){a.r+=l}),_e(h,uf),_e(h,function(a){a.r-=l})}return xf(h,i/2,j/2,b?1:1/Math.max(2*h.r/i,2*h.r/j)),g}var b,c=bh.layout.hierarchy().sort(qf),d=0,e=[1,1];return a.size=function(b){return arguments.length?(e=b,a):e},a.radius=function(c){return arguments.length?(b=null==c||"function"==typeof c?c:+c,a):b},a.padding=function(b){return arguments.length?(d=+b,a):d},Ze(a,c)},bh.layout.tree=function(){function a(a,e){var k=g.call(this,a,e),l=k[0],m=b(l);if(_e(m,c),m.parent.m=-m.z,$e(m,d),j)$e(l,f);else{var n=l,o=l,p=l;$e(l,function(a){a.x<n.x&&(n=a),a.x>o.x&&(o=a),a.depth>p.depth&&(p=a)});var q=h(n,o)/2-n.x,r=i[0]/(o.x+h(o,n)/2+q),s=i[1]/(p.depth||1);$e(l,function(a){a.x=(a.x+q)*r,a.y=a.depth*s})}return k}function b(a){for(var b,c={A:null,children:[a]},d=[c];null!=(b=d.pop());)for(var e,f=b.children,g=0,h=f.length;h>g;++g)d.push((f[g]=e={_:f[g],parent:b,children:(e=f[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return c.children[0]}function c(a){var b=a.children,c=a.parent.children,d=a.i?c[a.i-1]:null;if(b.length){Df(a);var f=(b[0].z+b[b.length-1].z)/2;d?(a.z=d.z+h(a._,d._),a.m=a.z-f):a.z=f}else d&&(a.z=d.z+h(a._,d._));a.parent.A=e(a,d,a.parent.A||c[0])}function d(a){a._.x=a.z+a.parent.m,a.m+=a.parent.m}function e(a,b,c){if(b){for(var d,e=a,f=a,g=b,i=e.parent.children[0],j=e.m,k=f.m,l=g.m,m=i.m;g=Bf(g),e=Af(e),g&&e;)i=Af(i),f=Bf(f),f.a=a,d=g.z+l-e.z-j+h(g._,e._),d>0&&(Cf(Ef(g,a,c),a,d),j+=d,k+=d),l+=g.m,j+=e.m,m+=i.m,k+=f.m;g&&!Bf(f)&&(f.t=g,f.m+=l-k),e&&!Af(i)&&(i.t=e,i.m+=j-m,c=a)}return c}function f(a){a.x*=i[0],a.y=a.depth*i[1]}var g=bh.layout.hierarchy().sort(null).value(null),h=zf,i=[1,1],j=null;return a.separation=function(b){return arguments.length?(h=b,a):h},a.size=function(b){return arguments.length?(j=null==(i=b)?f:null,a):j?null:i},a.nodeSize=function(b){return arguments.length?(j=null==(i=b)?null:f,a):j?i:null},Ze(a,g)},bh.layout.cluster=function(){function a(a,f){var g,h=b.call(this,a,f),i=h[0],j=0;_e(i,function(a){var b=a.children;b&&b.length?(a.x=Gf(b),a.y=Ff(b)):(a.x=g?j+=c(a,g):0,a.y=0,g=a)});var k=Hf(i),l=If(i),m=k.x-c(k,l)/2,n=l.x+c(l,k)/2;return _e(i,e?function(a){a.x=(a.x-i.x)*d[0],a.y=(i.y-a.y)*d[1]}:function(a){a.x=(a.x-m)/(n-m)*d[0],a.y=(1-(i.y?a.y/i.y:1))*d[1]}),h}var b=bh.layout.hierarchy().sort(null).value(null),c=zf,d=[1,1],e=!1;return a.separation=function(b){return arguments.length?(c=b,a):c},a.size=function(b){return arguments.length?(e=null==(d=b),a):e?null:d},a.nodeSize=function(b){return arguments.length?(e=null!=(d=b),a):e?d:null},Ze(a,b)},bh.layout.treemap=function(){function a(a,b){for(var c,d,e=-1,f=a.length;++e<f;)d=(c=a[e]).value*(0>b?0:b),c.area=isNaN(d)||0>=d?0:d}function b(c){var f=c.children;if(f&&f.length){var g,h,i,j=l(c),k=[],m=f.slice(),o=1/0,p="slice"===n?j.dx:"dice"===n?j.dy:"slice-dice"===n?1&c.depth?j.dy:j.dx:Math.min(j.dx,j.dy);for(a(m,j.dx*j.dy/c.value),k.area=0;(i=m.length)>0;)k.push(g=m[i-1]),k.area+=g.area,"squarify"!==n||(h=d(k,p))<=o?(m.pop(),o=h):(k.area-=k.pop().area,e(k,p,j,!1),p=Math.min(j.dx,j.dy),k.length=k.area=0,o=1/0);k.length&&(e(k,p,j,!0),k.length=k.area=0),f.forEach(b)}}function c(b){var d=b.children;if(d&&d.length){var f,g=l(b),h=d.slice(),i=[];for(a(h,g.dx*g.dy/b.value),i.area=0;f=h.pop();)i.push(f),i.area+=f.area,null!=f.z&&(e(i,f.z?g.dx:g.dy,g,!h.length),i.length=i.area=0);d.forEach(c)}}function d(a,b){for(var c,d=a.area,e=0,f=1/0,g=-1,h=a.length;++g<h;)(c=a[g].area)&&(f>c&&(f=c),c>e&&(e=c));return d*=d,b*=b,d?Math.max(b*e*o/d,d/(b*f*o)):1/0}function e(a,b,c,d){var e,f=-1,g=a.length,h=c.x,j=c.y,k=b?i(a.area/b):0;if(b==c.dx){for((d||k>c.dy)&&(k=c.dy);++f<g;)e=a[f],e.x=h,e.y=j,e.dy=k,h+=e.dx=Math.min(c.x+c.dx-h,k?i(e.area/k):0);e.z=!0,e.dx+=c.x+c.dx-h,c.y+=k,c.dy-=k}else{for((d||k>c.dx)&&(k=c.dx);++f<g;)e=a[f],e.x=h,e.y=j,e.dx=k,j+=e.dy=Math.min(c.y+c.dy-j,k?i(e.area/k):0);e.z=!1,e.dy+=c.y+c.dy-j,c.x+=k,c.dx-=k}}function f(d){var e=g||h(d),f=e[0];return f.x=0,f.y=0,f.dx=j[0],f.dy=j[1],g&&h.revalue(f),a([f],f.dx*f.dy/f.value),(g?c:b)(f),m&&(g=e),e}var g,h=bh.layout.hierarchy(),i=Math.round,j=[1,1],k=null,l=Jf,m=!1,n="squarify",o=.5*(1+Math.sqrt(5));
return f.size=function(a){return arguments.length?(j=a,f):j},f.padding=function(a){function b(b){var c=a.call(f,b,b.depth);return null==c?Jf(b):Kf(b,"number"==typeof c?[c,c,c,c]:c)}function c(b){return Kf(b,a)}if(!arguments.length)return k;var d;return l=null==(k=a)?Jf:"function"==(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c,f},f.round=function(a){return arguments.length?(i=a?Math.round:Number,f):i!=Number},f.sticky=function(a){return arguments.length?(m=a,g=null,f):m},f.ratio=function(a){return arguments.length?(o=a,f):o},f.mode=function(a){return arguments.length?(n=a+"",f):n},Ze(f,h)},bh.random={normal:function(a,b){var c=arguments.length;return 2>c&&(b=1),1>c&&(a=0),function(){var c,d,e;do c=2*Math.random()-1,d=2*Math.random()-1,e=c*c+d*d;while(!e||e>1);return a+b*c*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var a=bh.random.normal.apply(bh,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=bh.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;a>c;c++)b+=Math.random();return b}}},bh.scale={};var rj={floor:s,ceil:s};bh.scale.linear=function(){return Rf([0,1],[0,1],re,!1)};var sj={s:1,g:1,p:1,r:1,e:1};bh.scale.log=function(){return Zf(bh.scale.linear().domain([0,1]),10,!0,[1,10])};var tj=bh.format(".0e"),uj={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};bh.scale.pow=function(){return $f(bh.scale.linear(),1,[0,1])},bh.scale.sqrt=function(){return bh.scale.pow().exponent(.5)},bh.scale.ordinal=function(){return ag([],{t:"range",a:[[]]})},bh.scale.category10=function(){return bh.scale.ordinal().range(vj)},bh.scale.category20=function(){return bh.scale.ordinal().range(wj)},bh.scale.category20b=function(){return bh.scale.ordinal().range(xj)},bh.scale.category20c=function(){return bh.scale.ordinal().range(yj)};var vj=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(tb),wj=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(tb),xj=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(tb),yj=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(tb);bh.scale.quantile=function(){return bg([],[])},bh.scale.quantize=function(){return cg(0,1,[0,1])},bh.scale.threshold=function(){return dg([.5],[0,1])},bh.scale.identity=function(){return eg([0,1])},bh.svg={},bh.svg.arc=function(){function a(){var a=Math.max(0,+c.apply(this,arguments)),j=Math.max(0,+d.apply(this,arguments)),k=g.apply(this,arguments)-Ih,l=h.apply(this,arguments)-Ih,m=Math.abs(l-k),n=k>l?0:1;if(a>j&&(o=j,j=a,a=o),m>=Hh)return b(j,n)+(a?b(a,1-n):"")+"Z";var o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=0,C=[];if((r=(+i.apply(this,arguments)||0)/2)&&(q=f===zj?Math.sqrt(a*a+j*j):+f.apply(this,arguments),n||(B*=-1),j&&(B=bb(q/j*Math.sin(r))),a&&(A=bb(q/a*Math.sin(r)))),j){s=j*Math.cos(k+B),t=j*Math.sin(k+B),u=j*Math.cos(l-B),v=j*Math.sin(l-B);var D=Math.abs(l-k-2*B)<=Fh?0:1;if(B&&lg(s,t,u,v)===n^D){var E=(k+l)/2;s=j*Math.cos(E),t=j*Math.sin(E),u=v=null}}else s=t=0;if(a){w=a*Math.cos(l-A),x=a*Math.sin(l-A),y=a*Math.cos(k+A),z=a*Math.sin(k+A);var F=Math.abs(k-l+2*A)<=Fh?0:1;if(A&&lg(w,x,y,z)===1-n^F){var G=(k+l)/2;w=a*Math.cos(G),x=a*Math.sin(G),y=z=null}}else w=x=0;if((o=Math.min(Math.abs(j-a)/2,+e.apply(this,arguments)))>.001){p=j>a^n?0:1;var H=null==y?[w,x]:null==u?[s,t]:Gd([s,t],[y,z],[u,v],[w,x]),I=s-H[0],J=t-H[1],K=u-H[0],L=v-H[1],M=1/Math.sin(Math.acos((I*K+J*L)/(Math.sqrt(I*I+J*J)*Math.sqrt(K*K+L*L)))/2),N=Math.sqrt(H[0]*H[0]+H[1]*H[1]);if(null!=u){var O=Math.min(o,(j-N)/(M+1)),P=mg(null==y?[w,x]:[y,z],[s,t],j,O,n),Q=mg([u,v],[w,x],j,O,n);o===O?C.push("M",P[0],"A",O,",",O," 0 0,",p," ",P[1],"A",j,",",j," 0 ",1-n^lg(P[1][0],P[1][1],Q[1][0],Q[1][1]),",",n," ",Q[1],"A",O,",",O," 0 0,",p," ",Q[0]):C.push("M",P[0],"A",O,",",O," 0 1,",p," ",Q[0])}else C.push("M",s,",",t);if(null!=y){var R=Math.min(o,(a-N)/(M-1)),S=mg([s,t],[y,z],a,-R,n),T=mg([w,x],null==u?[s,t]:[u,v],a,-R,n);o===R?C.push("L",T[0],"A",R,",",R," 0 0,",p," ",T[1],"A",a,",",a," 0 ",n^lg(T[1][0],T[1][1],S[1][0],S[1][1]),",",1-n," ",S[1],"A",R,",",R," 0 0,",p," ",S[0]):C.push("L",T[0],"A",R,",",R," 0 0,",p," ",S[0])}else C.push("L",w,",",x)}else C.push("M",s,",",t),null!=u&&C.push("A",j,",",j," 0 ",D,",",n," ",u,",",v),C.push("L",w,",",x),null!=y&&C.push("A",a,",",a," 0 ",F,",",1-n," ",y,",",z);return C.push("Z"),C.join("")}function b(a,b){return"M0,"+a+"A"+a+","+a+" 0 1,"+b+" 0,"+-a+"A"+a+","+a+" 0 1,"+b+" 0,"+a}var c=gg,d=hg,e=fg,f=zj,g=ig,h=jg,i=kg;return a.innerRadius=function(b){return arguments.length?(c=Ab(b),a):c},a.outerRadius=function(b){return arguments.length?(d=Ab(b),a):d},a.cornerRadius=function(b){return arguments.length?(e=Ab(b),a):e},a.padRadius=function(b){return arguments.length?(f=b==zj?zj:Ab(b),a):f},a.startAngle=function(b){return arguments.length?(g=Ab(b),a):g},a.endAngle=function(b){return arguments.length?(h=Ab(b),a):h},a.padAngle=function(b){return arguments.length?(i=Ab(b),a):i},a.centroid=function(){var a=(+c.apply(this,arguments)+ +d.apply(this,arguments))/2,b=(+g.apply(this,arguments)+ +h.apply(this,arguments))/2-Ih;return[Math.cos(b)*a,Math.sin(b)*a]},a};var zj="auto";bh.svg.line=function(){return ng(s)};var Aj=bh.map({linear:og,"linear-closed":pg,step:qg,"step-before":rg,"step-after":sg,basis:yg,"basis-open":zg,"basis-closed":Ag,bundle:Bg,cardinal:vg,"cardinal-open":tg,"cardinal-closed":ug,monotone:Hg});Aj.forEach(function(a,b){b.key=a,b.closed=/-closed$/.test(a)});var Bj=[0,2/3,1/3,0],Cj=[0,1/3,2/3,0],Dj=[0,1/6,2/3,1/6];bh.svg.line.radial=function(){var a=ng(Ig);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},rg.reverse=sg,sg.reverse=rg,bh.svg.area=function(){return Jg(s)},bh.svg.area.radial=function(){var a=Jg(Ig);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},bh.svg.chord=function(){function a(a,h){var i=b(this,f,a,h),j=b(this,g,a,h);return"M"+i.p0+d(i.r,i.p1,i.a1-i.a0)+(c(i,j)?e(i.r,i.p1,i.r,i.p0):e(i.r,i.p1,j.r,j.p0)+d(j.r,j.p1,j.a1-j.a0)+e(j.r,j.p1,i.r,i.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d),f=h.call(a,e,d),g=i.call(a,e,d)-Ih,k=j.call(a,e,d)-Ih;return{r:f,a0:g,a1:k,p0:[f*Math.cos(g),f*Math.sin(g)],p1:[f*Math.cos(k),f*Math.sin(k)]}}function c(a,b){return a.a0==b.a0&&a.a1==b.a1}function d(a,b,c){return"A"+a+","+a+" 0 "+ +(c>Fh)+",1 "+b}function e(a,b,c,d){return"Q 0,0 "+d}var f=rd,g=sd,h=Kg,i=ig,j=jg;return a.radius=function(b){return arguments.length?(h=Ab(b),a):h},a.source=function(b){return arguments.length?(f=Ab(b),a):f},a.target=function(b){return arguments.length?(g=Ab(b),a):g},a.startAngle=function(b){return arguments.length?(i=Ab(b),a):i},a.endAngle=function(b){return arguments.length?(j=Ab(b),a):j},a},bh.svg.diagonal=function(){function a(a,e){var f=b.call(this,a,e),g=c.call(this,a,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(d),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var b=rd,c=sd,d=Lg;return a.source=function(c){return arguments.length?(b=Ab(c),a):b},a.target=function(b){return arguments.length?(c=Ab(b),a):c},a.projection=function(b){return arguments.length?(d=b,a):d},a},bh.svg.diagonal.radial=function(){var a=bh.svg.diagonal(),b=Lg,c=a.projection;return a.projection=function(a){return arguments.length?c(Mg(b=a)):b},a},bh.svg.symbol=function(){function a(a,d){return(Ej.get(b.call(this,a,d))||Pg)(c.call(this,a,d))}var b=Og,c=Ng;return a.type=function(c){return arguments.length?(b=Ab(c),a):b},a.size=function(b){return arguments.length?(c=Ab(b),a):c},a};var Ej=bh.map({circle:Pg,cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+-3*b+","+-b+"H"+-b+"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Gj)),c=b*Gj;return"M0,"+-b+"L"+c+",0 0,"+b+" "+-c+",0Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Fj),c=b*Fj/2;return"M0,"+c+"L"+b+","+-c+" "+-b+","+-c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Fj),c=b*Fj/2;return"M0,"+-c+"L"+b+","+c+" "+-b+","+c+"Z"}});bh.svg.symbolTypes=Ej.keys();var Fj=Math.sqrt(3),Gj=Math.tan(30*Jh);wh.transition=function(a){for(var b,c,d=Hj||++Lj,e=Ug(a),f=[],g=Ij||{time:Date.now(),ease:ye,delay:0,duration:250},h=-1,i=this.length;++h<i;){f.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(c=j[k])&&Vg(c,k,e,d,g),b.push(c)}return Rg(f,e,d)},wh.interrupt=function(a){return this.each(null==a?Jj:Qg(Ug(a)))};var Hj,Ij,Jj=Qg(Ug()),Kj=[],Lj=0;Kj.call=wh.call,Kj.empty=wh.empty,Kj.node=wh.node,Kj.size=wh.size,bh.transition=function(a,b){return a&&a.transition?Hj?a.transition(b):a:bh.selection().transition(a)},bh.transition.prototype=Kj,Kj.select=function(a){var b,c,d,e=this.id,f=this.namespace,g=[];a=C(a);for(var h=-1,i=this.length;++h<i;){g.push(b=[]);for(var j=this[h],k=-1,l=j.length;++k<l;)(d=j[k])&&(c=a.call(d,d.__data__,k,h))?("__data__"in d&&(c.__data__=d.__data__),Vg(c,k,f,e,d[f][e]),b.push(c)):b.push(null)}return Rg(g,f,e)},Kj.selectAll=function(a){var b,c,d,e,f,g=this.id,h=this.namespace,i=[];a=D(a);for(var j=-1,k=this.length;++j<k;)for(var l=this[j],m=-1,n=l.length;++m<n;)if(d=l[m]){f=d[h][g],c=a.call(d,d.__data__,m,j),i.push(b=[]);for(var o=-1,p=c.length;++o<p;)(e=c[o])&&Vg(e,o,h,g,f),b.push(e)}return Rg(i,h,g)},Kj.filter=function(a){var b,c,d,e=[];"function"!=typeof a&&(a=P(a));for(var f=0,g=this.length;g>f;f++){e.push(b=[]);for(var c=this[f],h=0,i=c.length;i>h;h++)(d=c[h])&&a.call(d,d.__data__,h,f)&&b.push(d)}return Rg(e,this.namespace,this.id)},Kj.tween=function(a,b){var c=this.id,d=this.namespace;return arguments.length<2?this.node()[d][c].tween.get(a):R(this,null==b?function(b){b[d][c].tween.remove(a)}:function(e){e[d][c].tween.set(a,b)})},Kj.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b,c=this.getAttribute(h);return c!==a&&(b=g(c,a),function(a){this.setAttribute(h,b(a))})})}function f(a){return null==a?d:(a+="",function(){var b,c=this.getAttributeNS(h.space,h.local);return c!==a&&(b=g(c,a),function(a){this.setAttributeNS(h.space,h.local,b(a))})})}if(arguments.length<2){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Oe:re,h=bh.ns.qualify(a);return Sg(this,"attr."+a,b,h.local?f:e)},Kj.attrTween=function(a,b){function c(a,c){var d=b.call(this,a,c,this.getAttribute(e));return d&&function(a){this.setAttribute(e,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return d&&function(a){this.setAttributeNS(e.space,e.local,d(a))}}var e=bh.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)},Kj.style=function(a,c,d){function e(){this.style.removeProperty(a)}function f(c){return null==c?e:(c+="",function(){var e,f=b(this).getComputedStyle(this,null).getPropertyValue(a);return f!==c&&(e=re(f,c),function(b){this.style.setProperty(a,e(b),d)})})}var g=arguments.length;if(3>g){if("string"!=typeof a){2>g&&(c="");for(d in a)this.style(d,a[d],c);return this}d=""}return Sg(this,"style."+a,c,f)},Kj.styleTween=function(a,c,d){function e(e,f){var g=c.call(this,e,f,b(this).getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),d)}}return arguments.length<3&&(d=""),this.tween("style."+a,e)},Kj.text=function(a){return Sg(this,"text",a,Tg)},Kj.remove=function(){var a=this.namespace;return this.each("end.transition",function(){var b;this[a].count<2&&(b=this.parentNode)&&b.removeChild(this)})},Kj.ease=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].ease:("function"!=typeof a&&(a=bh.ease.apply(bh,arguments)),R(this,function(d){d[c][b].ease=a}))},Kj.delay=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].delay:R(this,"function"==typeof a?function(d,e,f){d[c][b].delay=+a.call(d,d.__data__,e,f)}:(a=+a,function(d){d[c][b].delay=a}))},Kj.duration=function(a){var b=this.id,c=this.namespace;return arguments.length<1?this.node()[c][b].duration:R(this,"function"==typeof a?function(d,e,f){d[c][b].duration=Math.max(1,a.call(d,d.__data__,e,f))}:(a=Math.max(1,a),function(d){d[c][b].duration=a}))},Kj.each=function(a,b){var c=this.id,d=this.namespace;if(arguments.length<2){var e=Ij,f=Hj;try{Hj=c,R(this,function(b,e,f){Ij=b[d][c],a.call(b,b.__data__,e,f)})}finally{Ij=e,Hj=f}}else R(this,function(e){var f=e[d][c];(f.event||(f.event=bh.dispatch("start","end","interrupt"))).on(a,b)});return this},Kj.transition=function(){for(var a,b,c,d,e=this.id,f=++Lj,g=this.namespace,h=[],i=0,j=this.length;j>i;i++){h.push(a=[]);for(var b=this[i],k=0,l=b.length;l>k;k++)(c=b[k])&&(d=c[g][e],Vg(c,k,g,f,{time:d.time,ease:d.ease,delay:d.delay+d.duration,duration:d.duration})),a.push(c)}return Rg(h,g,f)},bh.svg.axis=function(){function a(a){a.each(function(){var a,j=bh.select(this),k=this.__chart__||c,l=this.__chart__=c.copy(),m=null==i?l.ticks?l.ticks.apply(l,h):l.domain():i,n=null==b?l.tickFormat?l.tickFormat.apply(l,h):s:b,o=j.selectAll(".tick").data(m,l),p=o.enter().insert("g",".domain").attr("class","tick").style("opacity",Dh),q=bh.transition(o.exit()).style("opacity",Dh).remove(),r=bh.transition(o.order()).style("opacity",1),t=Math.max(e,0)+g,u=Mf(l),v=j.selectAll(".domain").data([0]),w=(v.enter().append("path").attr("class","domain"),bh.transition(v));p.append("line"),p.append("text");var x,y,z,A,B=p.select("line"),C=r.select("line"),D=o.select("text").text(n),E=p.select("text"),F=r.select("text"),G="top"===d||"left"===d?-1:1;if("bottom"===d||"top"===d?(a=Wg,x="x",z="y",y="x2",A="y2",D.attr("dy",0>G?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+u[0]+","+G*f+"V0H"+u[1]+"V"+G*f)):(a=Xg,x="y",z="x",y="y2",A="x2",D.attr("dy",".32em").style("text-anchor",0>G?"end":"start"),w.attr("d","M"+G*f+","+u[0]+"H0V"+u[1]+"H"+G*f)),B.attr(A,G*e),E.attr(z,G*t),C.attr(y,0).attr(A,G*e),F.attr(x,0).attr(z,G*t),l.rangeBand){var H=l,I=H.rangeBand()/2;k=l=function(a){return H(a)+I}}else k.rangeBand?k=l:q.call(a,l,k);p.call(a,k,l),r.call(a,l,l)})}var b,c=bh.scale.linear(),d=Mj,e=6,f=6,g=3,h=[10],i=null;return a.scale=function(b){return arguments.length?(c=b,a):c},a.orient=function(b){return arguments.length?(d=b in Nj?b+"":Mj,a):d},a.ticks=function(){return arguments.length?(h=arguments,a):h},a.tickValues=function(b){return arguments.length?(i=b,a):i},a.tickFormat=function(c){return arguments.length?(b=c,a):b},a.tickSize=function(b){var c=arguments.length;return c?(e=+b,f=+arguments[c-1],a):e},a.innerTickSize=function(b){return arguments.length?(e=+b,a):e},a.outerTickSize=function(b){return arguments.length?(f=+b,a):f},a.tickPadding=function(b){return arguments.length?(g=+b,a):g},a.tickSubdivide=function(){return arguments.length&&a},a};var Mj="bottom",Nj={top:1,right:1,bottom:1,left:1};bh.svg.brush=function(){function a(b){b.each(function(){var b=bh.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=b.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),b.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var h=b.selectAll(".resize").data(p,s);h.exit().remove(),h.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return Oj[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),h.style("display",a.empty()?"none":null);var i,l=bh.transition(b),m=bh.transition(g);j&&(i=Mf(j),m.attr("x",i[0]).attr("width",i[1]-i[0]),d(l)),k&&(i=Mf(k),m.attr("y",i[0]).attr("height",i[1]-i[0]),e(l)),c(l)})}function c(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function d(a){a.select(".extent").attr("x",l[0]),a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function e(a){a.select(".extent").attr("y",m[0]),a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function f(){function f(){32==bh.event.keyCode&&(D||(t=null,F[0]-=l[1],F[1]-=m[1],D=2),y())}function p(){32==bh.event.keyCode&&2==D&&(F[0]+=l[1],F[1]+=m[1],D=0,y())}function q(){var a=bh.mouse(v),b=!1;u&&(a[0]+=u[0],a[1]+=u[1]),D||(bh.event.altKey?(t||(t=[(l[0]+l[1])/2,(m[0]+m[1])/2]),F[0]=l[+(a[0]<t[0])],F[1]=m[+(a[1]<t[1])]):t=null),B&&r(a,j,0)&&(d(z),b=!0),C&&r(a,k,1)&&(e(z),b=!0),b&&(c(z),x({type:"brush",mode:D?"move":"resize"}))}function r(a,b,c){var d,e,f=Mf(b),i=f[0],j=f[1],k=F[c],p=c?m:l,q=p[1]-p[0];return D&&(i-=k,j-=q+k),d=(c?o:n)?Math.max(i,Math.min(j,a[c])):a[c],D?e=(d+=k)+q:(t&&(k=Math.max(i,Math.min(j,2*t[c]-d))),d>k?(e=d,d=k):e=k),p[0]!=d||p[1]!=e?(c?h=null:g=null,p[0]=d,p[1]=e,!0):void 0}function s(){q(),z.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null),bh.select("body").style("cursor",null),G.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),x({type:"brushend"})}var t,u,v=this,w=bh.select(bh.event.target),x=i.of(v,arguments),z=bh.select(v),A=w.datum(),B=!/^(n|s)$/.test(A)&&j,C=!/^(e|w)$/.test(A)&&k,D=w.classed("extent"),E=X(v),F=bh.mouse(v),G=bh.select(b(v)).on("keydown.brush",f).on("keyup.brush",p);if(bh.event.changedTouches?G.on("touchmove.brush",q).on("touchend.brush",s):G.on("mousemove.brush",q).on("mouseup.brush",s),z.interrupt().selectAll("*").interrupt(),D)F[0]=l[0]-F[0],F[1]=m[0]-F[1];else if(A){var H=+/w$/.test(A),I=+/^n/.test(A);u=[l[1-H]-F[0],m[1-I]-F[1]],F[0]=l[H],F[1]=m[I]}else bh.event.altKey&&(t=F.slice());z.style("pointer-events","none").selectAll(".resize").style("display",null),bh.select("body").style("cursor",w.style("cursor")),x({type:"brushstart"}),q()}var g,h,i=A(a,"brushstart","brush","brushend"),j=null,k=null,l=[0,0],m=[0,0],n=!0,o=!0,p=Pj[0];return a.event=function(a){a.each(function(){var a=i.of(this,arguments),b={x:l,y:m,i:g,j:h},c=this.__chart__||b;this.__chart__=b,Hj?bh.select(this).transition().each("start.brush",function(){g=c.i,h=c.j,l=c.x,m=c.y,a({type:"brushstart"})}).tween("brush:brush",function(){var c=se(l,b.x),d=se(m,b.y);return g=h=null,function(e){l=b.x=c(e),m=b.y=d(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){g=b.i,h=b.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},a.x=function(b){return arguments.length?(j=b,p=Pj[!j<<1|!k],a):j},a.y=function(b){return arguments.length?(k=b,p=Pj[!j<<1|!k],a):k},a.clamp=function(b){return arguments.length?(j&&k?(n=!!b[0],o=!!b[1]):j?n=!!b:k&&(o=!!b),a):j&&k?[n,o]:j?n:k?o:null},a.extent=function(b){var c,d,e,f,i;return arguments.length?(j&&(c=b[0],d=b[1],k&&(c=c[0],d=d[0]),g=[c,d],j.invert&&(c=j(c),d=j(d)),c>d&&(i=c,c=d,d=i),(c!=l[0]||d!=l[1])&&(l=[c,d])),k&&(e=b[0],f=b[1],j&&(e=e[1],f=f[1]),h=[e,f],k.invert&&(e=k(e),f=k(f)),e>f&&(i=e,e=f,f=i),(e!=m[0]||f!=m[1])&&(m=[e,f])),a):(j&&(g?(c=g[0],d=g[1]):(c=l[0],d=l[1],j.invert&&(c=j.invert(c),d=j.invert(d)),c>d&&(i=c,c=d,d=i))),k&&(h?(e=h[0],f=h[1]):(e=m[0],f=m[1],k.invert&&(e=k.invert(e),f=k.invert(f)),e>f&&(i=e,e=f,f=i))),j&&k?[[c,e],[d,f]]:j?[c,d]:k&&[e,f])},a.clear=function(){return a.empty()||(l=[0,0],m=[0,0],g=h=null),a},a.empty=function(){return!!j&&l[0]==l[1]||!!k&&m[0]==m[1]},bh.rebind(a,i,"on")};var Oj={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Pj=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Qj=hi.format=ni.timeFormat,Rj=Qj.utc,Sj=Rj("%Y-%m-%dT%H:%M:%S.%LZ");Qj.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Yg:Sj,Yg.parse=function(a){var b=new Date(a);return isNaN(b)?null:b},Yg.toString=Sj.toString,hi.second=Nb(function(a){return new ii(1e3*Math.floor(a/1e3))},function(a,b){a.setTime(a.getTime()+1e3*Math.floor(b))},function(a){return a.getSeconds()}),hi.seconds=hi.second.range,hi.seconds.utc=hi.second.utc.range,hi.minute=Nb(function(a){return new ii(6e4*Math.floor(a/6e4))},function(a,b){a.setTime(a.getTime()+6e4*Math.floor(b))},function(a){return a.getMinutes()}),hi.minutes=hi.minute.range,hi.minutes.utc=hi.minute.utc.range,hi.hour=Nb(function(a){var b=a.getTimezoneOffset()/60;return new ii(36e5*(Math.floor(a/36e5-b)+b))},function(a,b){a.setTime(a.getTime()+36e5*Math.floor(b))},function(a){return a.getHours()}),hi.hours=hi.hour.range,hi.hours.utc=hi.hour.utc.range,hi.month=Nb(function(a){return a=hi.day(a),a.setDate(1),a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()}),hi.months=hi.month.range,hi.months.utc=hi.month.utc.range;var Tj=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Uj=[[hi.second,1],[hi.second,5],[hi.second,15],[hi.second,30],[hi.minute,1],[hi.minute,5],[hi.minute,15],[hi.minute,30],[hi.hour,1],[hi.hour,3],[hi.hour,6],[hi.hour,12],[hi.day,1],[hi.day,2],[hi.week,1],[hi.month,1],[hi.month,3],[hi.year,1]],Vj=Qj.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Cc]]),Wj={range:function(a,b,c){return bh.range(Math.ceil(a/c)*c,+b,c).map($g)},floor:s,ceil:s};Uj.year=hi.year,hi.scale=function(){return Zg(bh.scale.linear(),Uj,Vj)};var Xj=Uj.map(function(a){return[a[0].utc,a[1]]}),Yj=Rj.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Cc]]);Xj.year=hi.year.utc,hi.scale.utc=function(){return Zg(bh.scale.linear(),Xj,Yj)},bh.text=Bb(function(a){return a.responseText}),bh.json=function(a,b){return Cb(a,"application/json",_g,b)},bh.html=function(a,b){return Cb(a,"text/html",ah,b)},bh.xml=Bb(function(a){return a.responseXML}),"function"==typeof define&&define.amd?define(bh):"object"==typeof module&&module.exports&&(module.exports=bh),this.d3=bh}(),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.pako=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c=a("./lib/utils/common").assign,d=a("./lib/deflate"),e=a("./lib/inflate"),f=a("./lib/zlib/constants"),g={};c(g,d,e,f),b.exports=g},{"./lib/deflate":2,"./lib/inflate":3,"./lib/utils/common":4,"./lib/zlib/constants":7}],2:[function(a,b,c){"use strict";function d(a,b){var c=new s(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function e(a,b){return b=b||{},b.raw=!0,d(a,b)}function f(a,b){return b=b||{},b.gzip=!0,d(a,b)}var g=a("./zlib/deflate.js"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/messages"),k=a("./zlib/zstream"),l=0,m=4,n=0,o=1,p=-1,q=0,r=8,s=function(a){this.options=h.assign({level:p,method:r,chunkSize:16384,windowBits:15,memLevel:8,strategy:q,to:""},a||{});var b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var c=g.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==n)throw new Error(j[c]);b.header&&g.deflateSetHeader(this.strm,b.header)};s.prototype.push=function(a,b){var c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?m:l,e.input="string"==typeof a?i.string2buf(a):a,e.next_in=0,e.avail_in=e.input.length;do{if(0===e.avail_out&&(e.output=new h.Buf8(f),e.next_out=0,e.avail_out=f),c=g.deflate(e,d),c!==o&&c!==n)return this.onEnd(c),this.ended=!0,!1;(0===e.avail_out||0===e.avail_in&&d===m)&&this.onData("string"===this.options.to?i.buf2binstring(h.shrinkBuf(e.output,e.next_out)):h.shrinkBuf(e.output,e.next_out))}while((e.avail_in>0||0===e.avail_out)&&c!==o);return d===m?(c=g.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===n):!0},s.prototype.onData=function(a){this.chunks.push(a)},s.prototype.onEnd=function(a){a===n&&(this.result="string"===this.options.to?this.chunks.join(""):h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Deflate=s,c.deflate=d,c.deflateRaw=e,c.gzip=f},{"./utils/common":4,"./utils/strings":5,"./zlib/deflate.js":9,"./zlib/messages":14,"./zlib/zstream":16}],3:[function(a,b,c){"use strict";function d(a,b){var c=new m(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function e(a,b){return b=b||{},b.raw=!0,d(a,b)}var f=a("./zlib/inflate.js"),g=a("./utils/common"),h=a("./utils/strings"),i=a("./zlib/constants"),j=a("./zlib/messages"),k=a("./zlib/zstream"),l=a("./zlib/gzheader"),m=function(a){this.options=g.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var c=f.inflateInit2(this.strm,b.windowBits);if(c!==i.Z_OK)throw new Error(j[c]);this.header=new l,f.inflateGetHeader(this.strm,this.header)};m.prototype.push=function(a,b){var c,d,e,j,k,l=this.strm,m=this.options.chunkSize;if(this.ended)return!1;d=b===~~b?b:b===!0?i.Z_FINISH:i.Z_NO_FLUSH,l.input="string"==typeof a?h.binstring2buf(a):a,l.next_in=0,l.avail_in=l.input.length;do{if(0===l.avail_out&&(l.output=new g.Buf8(m),l.next_out=0,l.avail_out=m),c=f.inflate(l,i.Z_NO_FLUSH),c!==i.Z_STREAM_END&&c!==i.Z_OK)return this.onEnd(c),this.ended=!0,!1;l.next_out&&(0===l.avail_out||c===i.Z_STREAM_END||0===l.avail_in&&d===i.Z_FINISH)&&("string"===this.options.to?(e=h.utf8border(l.output,l.next_out),j=l.next_out-e,k=h.buf2string(l.output,e),l.next_out=j,l.avail_out=m-j,j&&g.arraySet(l.output,l.output,e,j,0),this.onData(k)):this.onData(g.shrinkBuf(l.output,l.next_out)))}while(l.avail_in>0&&c!==i.Z_STREAM_END);return c===i.Z_STREAM_END&&(d=i.Z_FINISH),d===i.Z_FINISH?(c=f.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===i.Z_OK):!0},m.prototype.onData=function(a){this.chunks.push(a)},m.prototype.onEnd=function(a){a===i.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):g.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=m,c.inflate=d,c.inflateRaw=e,c.ungzip=d},{"./utils/common":4,"./utils/strings":5,"./zlib/constants":7,"./zlib/gzheader":10,"./zlib/inflate.js":12,"./zlib/messages":14,"./zlib/zstream":16}],4:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;c>b;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;c>b;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],5:[function(a,b,c){"use strict";function d(a,b){if(65537>b&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;b>d;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(h){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){g=!1}for(var i=new e.Buf8(256),j=0;256>j;j++)i[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;i[254]=i[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=new e.Buf8(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;d>c;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,h=b||a.length,j=new Array(2*h);for(e=0,c=0;h>c;)if(f=a[c++],128>f)j[e++]=f;else if(g=i[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&h>c;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:65536>f?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+i[a[c]]>b?c:b}},{"./common":4}],6:[function(a,b){"use strict";function c(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=c},{}],7:[function(a,b){b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],8:[function(a,b){"use strict";function c(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function d(a,b,c,d){var f=e,g=d+c;a=-1^a;for(var h=d;g>h;h++)a=a>>>8^f[255&(a^b[h])];return-1^a}var e=c();b.exports=d},{}],9:[function(a,b,c){"use strict";function d(a,b){return a.msg=G[b],b}function e(a){return(a<<1)-(a>4?9:0)}function f(a){for(var b=a.length;--b>=0;)a[b]=0}function g(a){var b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(C.arraySet(a.output,b.pending_buf,b.pending_out,c,a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))
}function h(a,b){D._tr_flush_block(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,g(a.strm)}function i(a,b){a.pending_buf[a.pending++]=b}function j(a,b){a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b}function k(a,b,c,d){var e=a.avail_in;return e>d&&(e=d),0===e?0:(a.avail_in-=e,C.arraySet(b,a.input,a.next_in,e,c),1===a.state.wrap?a.adler=E(a.adler,b,e,c):2===a.state.wrap&&(a.adler=F(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,e)}function l(a,b){var c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-jb?a.strstart-(a.w_size-jb):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+ib,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do if(c=b,j[c+g]===o&&j[c+g-1]===n&&j[c]===j[f]&&j[++c]===j[f+1]){f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&m>f);if(d=ib-(m-f),f=m-ib,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!==--e);return g<=a.lookahead?g:a.lookahead}function m(a){var b,c,d,e,f,g=a.w_size;do{if(e=a.window_size-a.lookahead-a.strstart,a.strstart>=g+(g-jb)){C.arraySet(a.window,a.window,g,g,0),a.match_start-=g,a.strstart-=g,a.block_start-=g,c=a.hash_size,b=c;do d=a.head[--b],a.head[b]=d>=g?d-g:0;while(--c);c=g,b=c;do d=a.prev[--b],a.prev[b]=d>=g?d-g:0;while(--c);e+=g}if(0===a.strm.avail_in)break;if(c=k(a.strm,a.window,a.strstart+a.lookahead,e),a.lookahead+=c,a.lookahead+a.insert>=hb)for(f=a.strstart-a.insert,a.ins_h=a.window[f],a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+1])&a.hash_mask;a.insert&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[f+hb-1])&a.hash_mask,a.prev[f&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=f,f++,a.insert--,!(a.lookahead+a.insert<hb)););}while(a.lookahead<jb&&0!==a.strm.avail_in)}function n(a,b){var c=65535;for(c>a.pending_buf_size-5&&(c=a.pending_buf_size-5);;){if(a.lookahead<=1){if(m(a),0===a.lookahead&&b===H)return sb;if(0===a.lookahead)break}a.strstart+=a.lookahead,a.lookahead=0;var d=a.block_start+c;if((0===a.strstart||a.strstart>=d)&&(a.lookahead=a.strstart-d,a.strstart=d,h(a,!1),0===a.strm.avail_out))return sb;if(a.strstart-a.block_start>=a.w_size-jb&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.strstart>a.block_start&&(h(a,!1),0===a.strm.avail_out)?sb:sb}function o(a,b){for(var c,d;;){if(a.lookahead<jb){if(m(a),a.lookahead<jb&&b===H)return sb;if(0===a.lookahead)break}if(c=0,a.lookahead>=hb&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-jb&&(a.match_length=l(a,c)),a.match_length>=hb)if(d=D._tr_tally(a,a.strstart-a.match_start,a.match_length-hb),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=hb){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else d=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=a.strstart<hb-1?a.strstart:hb-1,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function p(a,b){for(var c,d,e;;){if(a.lookahead<jb){if(m(a),a.lookahead<jb&&b===H)return sb;if(0===a.lookahead)break}if(c=0,a.lookahead>=hb&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=hb-1,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-jb&&(a.match_length=l(a,c),a.match_length<=5&&(a.strategy===S||a.match_length===hb&&a.strstart-a.match_start>4096)&&(a.match_length=hb-1)),a.prev_length>=hb&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-hb,d=D._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-hb),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+hb-1])&a.hash_mask,c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=hb-1,a.strstart++,d&&(h(a,!1),0===a.strm.avail_out))return sb}else if(a.match_available){if(d=D._tr_tally(a,0,a.window[a.strstart-1]),d&&h(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return sb}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(d=D._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<hb-1?a.strstart:hb-1,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function q(a,b){for(var c,d,e,f,g=a.window;;){if(a.lookahead<=ib){if(m(a),a.lookahead<=ib&&b===H)return sb;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=hb&&a.strstart>0&&(e=a.strstart-1,d=g[e],d===g[++e]&&d===g[++e]&&d===g[++e])){f=a.strstart+ib;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&f>e);a.match_length=ib-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=hb?(c=D._tr_tally(a,1,a.match_length-hb),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function r(a,b){for(var c;;){if(0===a.lookahead&&(m(a),0===a.lookahead)){if(b===H)return sb;break}if(a.match_length=0,c=D._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(h(a,!1),0===a.strm.avail_out))return sb}return a.insert=0,b===K?(h(a,!0),0===a.strm.avail_out?ub:vb):a.last_lit&&(h(a,!1),0===a.strm.avail_out)?sb:tb}function s(a){a.window_size=2*a.w_size,f(a.head),a.max_lazy_match=B[a.level].max_lazy,a.good_match=B[a.level].good_length,a.nice_match=B[a.level].nice_length,a.max_chain_length=B[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=hb-1,a.match_available=0,a.ins_h=0}function t(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*fb),this.dyn_dtree=new C.Buf16(2*(2*db+1)),this.bl_tree=new C.Buf16(2*(2*eb+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(gb+1),this.heap=new C.Buf16(2*cb+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*cb+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function u(a){var b;return a&&a.state?(a.total_in=a.total_out=0,a.data_type=X,b=a.state,b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=b.wrap?lb:qb,a.adler=2===b.wrap?0:1,b.last_flush=H,D._tr_init(b),M):d(a,O)}function v(a){var b=u(a);return b===M&&s(a.state),b}function w(a,b){return a&&a.state?2!==a.state.wrap?O:(a.state.gzhead=b,M):O}function x(a,b,c,e,f,g){if(!a)return O;var h=1;if(b===R&&(b=6),0>e?(h=0,e=-e):e>15&&(h=2,e-=16),1>f||f>Z||c!==Y||8>e||e>15||0>b||b>9||0>g||g>V)return d(a,O);8===e&&(e=9);var i=new t;return a.state=i,i.strm=a,i.wrap=h,i.gzhead=null,i.w_bits=e,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=f+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+hb-1)/hb),i.window=new C.Buf8(2*i.w_size),i.head=new C.Buf16(i.hash_size),i.prev=new C.Buf16(i.w_size),i.lit_bufsize=1<<f+6,i.pending_buf_size=4*i.lit_bufsize,i.pending_buf=new C.Buf8(i.pending_buf_size),i.d_buf=i.lit_bufsize>>1,i.l_buf=3*i.lit_bufsize,i.level=b,i.strategy=g,i.method=c,v(a)}function y(a,b){return x(a,b,Y,$,_,W)}function z(a,b){var c,h,k,l;if(!a||!a.state||b>L||0>b)return a?d(a,O):O;if(h=a.state,!a.output||!a.input&&0!==a.avail_in||h.status===rb&&b!==K)return d(a,0===a.avail_out?Q:O);if(h.strm=a,c=h.last_flush,h.last_flush=b,h.status===lb)if(2===h.wrap)a.adler=0,i(h,31),i(h,139),i(h,8),h.gzhead?(i(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),i(h,255&h.gzhead.time),i(h,h.gzhead.time>>8&255),i(h,h.gzhead.time>>16&255),i(h,h.gzhead.time>>24&255),i(h,9===h.level?2:h.strategy>=T||h.level<2?4:0),i(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(i(h,255&h.gzhead.extra.length),i(h,h.gzhead.extra.length>>8&255)),h.gzhead.hcrc&&(a.adler=F(a.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=mb):(i(h,0),i(h,0),i(h,0),i(h,0),i(h,0),i(h,9===h.level?2:h.strategy>=T||h.level<2?4:0),i(h,wb),h.status=qb);else{var m=Y+(h.w_bits-8<<4)<<8,n=-1;n=h.strategy>=T||h.level<2?0:h.level<6?1:6===h.level?2:3,m|=n<<6,0!==h.strstart&&(m|=kb),m+=31-m%31,h.status=qb,j(h,m),0!==h.strstart&&(j(h,a.adler>>>16),j(h,65535&a.adler)),a.adler=1}if(h.status===mb)if(h.gzhead.extra){for(k=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending!==h.pending_buf_size));)i(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=nb)}else h.status=nb;if(h.status===nb)if(h.gzhead.name){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.gzindex=0,h.status=ob)}else h.status=ob;if(h.status===ob)if(h.gzhead.comment){k=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),g(a),k=h.pending,h.pending===h.pending_buf_size)){l=1;break}l=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0,i(h,l)}while(0!==l);h.gzhead.hcrc&&h.pending>k&&(a.adler=F(a.adler,h.pending_buf,h.pending-k,k)),0===l&&(h.status=pb)}else h.status=pb;if(h.status===pb&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&g(a),h.pending+2<=h.pending_buf_size&&(i(h,255&a.adler),i(h,a.adler>>8&255),a.adler=0,h.status=qb)):h.status=qb),0!==h.pending){if(g(a),0===a.avail_out)return h.last_flush=-1,M}else if(0===a.avail_in&&e(b)<=e(c)&&b!==K)return d(a,Q);if(h.status===rb&&0!==a.avail_in)return d(a,Q);if(0!==a.avail_in||0!==h.lookahead||b!==H&&h.status!==rb){var o=h.strategy===T?r(h,b):h.strategy===U?q(h,b):B[h.level].func(h,b);if((o===ub||o===vb)&&(h.status=rb),o===sb||o===ub)return 0===a.avail_out&&(h.last_flush=-1),M;if(o===tb&&(b===I?D._tr_align(h):b!==L&&(D._tr_stored_block(h,0,0,!1),b===J&&(f(h.head),0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),g(a),0===a.avail_out))return h.last_flush=-1,M}return b!==K?M:h.wrap<=0?N:(2===h.wrap?(i(h,255&a.adler),i(h,a.adler>>8&255),i(h,a.adler>>16&255),i(h,a.adler>>24&255),i(h,255&a.total_in),i(h,a.total_in>>8&255),i(h,a.total_in>>16&255),i(h,a.total_in>>24&255)):(j(h,a.adler>>>16),j(h,65535&a.adler)),g(a),h.wrap>0&&(h.wrap=-h.wrap),0!==h.pending?M:N)}function A(a){var b;return a&&a.state?(b=a.state.status,b!==lb&&b!==mb&&b!==nb&&b!==ob&&b!==pb&&b!==qb&&b!==rb?d(a,O):(a.state=null,b===qb?d(a,P):M)):O}var B,C=a("../utils/common"),D=a("./trees"),E=a("./adler32"),F=a("./crc32"),G=a("./messages"),H=0,I=1,J=3,K=4,L=5,M=0,N=1,O=-2,P=-3,Q=-5,R=-1,S=1,T=2,U=3,V=4,W=0,X=2,Y=8,Z=9,$=15,_=8,ab=29,bb=256,cb=bb+1+ab,db=30,eb=19,fb=2*cb+1,gb=15,hb=3,ib=258,jb=ib+hb+1,kb=32,lb=42,mb=69,nb=73,ob=91,pb=103,qb=113,rb=666,sb=1,tb=2,ub=3,vb=4,wb=3,xb=function(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e};B=[new xb(0,0,0,0,n),new xb(4,4,8,4,o),new xb(4,5,16,8,o),new xb(4,6,32,32,o),new xb(4,4,16,16,p),new xb(8,16,32,32,p),new xb(8,16,128,128,p),new xb(8,32,128,256,p),new xb(32,128,258,1024,p),new xb(32,258,258,4096,p)],c.deflateInit=y,c.deflateInit2=x,c.deflateReset=v,c.deflateResetKeep=u,c.deflateSetHeader=w,c.deflate=z,c.deflateEnd=A,c.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":4,"./adler32":6,"./crc32":8,"./messages":14,"./trees":15}],10:[function(a,b){"use strict";function c(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=c},{}],11:[function(a,b){"use strict";var c=30,d=12;b.exports=function(a,b){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;e=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=e.dmax,l=e.wsize,m=e.whave,n=e.wnext,o=e.window,p=e.hold,q=e.bits,r=e.lencode,s=e.distcode,t=(1<<e.lenbits)-1,u=(1<<e.distbits)-1;a:do{15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){e.mode=d;break a}a.msg="invalid literal/length code",e.mode=c;break a}x=65535&v,w&=15,w&&(w>q&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",e.mode=c;break a}if(y=65535&v,w&=15,w>q&&(p+=B[f++]<<q,q+=8,w>q&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",e.mode=c;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&e.sane){a.msg="invalid distance too far back",e.mode=c;break a}if(z=0,A=o,0===n){if(z+=l-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(w>n){if(z+=l+n-w,w-=n,x>w){x-=w;do C[h++]=o[z++];while(--w);if(z=0,x>n){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(g>f&&j>h);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=g>f?5+(g-f):5-(f-g),a.avail_out=j>h?257+(j-h):257-(h-j),e.hold=p,e.bits=q}},{}],12:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=K,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new r.Buf32(ob),b.distcode=b.distdyn=new r.Buf32(pb),b.sane=1,b.back=-1,C):F}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):F}function h(a,b){var c,d;return a&&a.state?(d=a.state,0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15)),b&&(8>b||b>15)?F:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):F}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==C&&(a.state=null),c):F}function j(a){return i(a,rb)}function k(a){if(sb){var b;for(p=new r.Buf32(512),q=new r.Buf32(32),b=0;144>b;)a.lens[b++]=8;for(;256>b;)a.lens[b++]=9;for(;280>b;)a.lens[b++]=7;for(;288>b;)a.lens[b++]=8;for(v(x,a.lens,0,288,p,0,a.work,{bits:9}),b=0;32>b;)a.lens[b++]=5;v(y,a.lens,0,32,q,0,a.work,{bits:5}),sb=!1}a.lencode=p,a.lenbits=9,a.distcode=q,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new r.Buf8(f.wsize)),d>=f.wsize?(r.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),r.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(r.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab=0,Bb=new r.Buf8(4),Cb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return F;c=a.state,c.mode===V&&(c.mode=W),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xb=C;a:for(;;)switch(c.mode){case K:if(0===c.wrap){c.mode=W;break}for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0),m=0,n=0,c.mode=L;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=lb;break}if((15&m)!==J){a.msg="unknown compression method",c.mode=lb;break}if(m>>>=4,n-=4,wb=(15&m)+8,0===c.wbits)c.wbits=wb;else if(wb>c.wbits){a.msg="invalid window size",c.mode=lb;break}c.dmax=1<<wb,a.adler=c.check=1,c.mode=512&m?T:V,m=0,n=0;break;case L:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==J){a.msg="unknown compression method",c.mode=lb;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=lb;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0)),m=0,n=0,c.mode=M;case M:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,Bb[2]=m>>>16&255,Bb[3]=m>>>24&255,c.check=t(c.check,Bb,4,0)),m=0,n=0,c.mode=N;case N:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0)),m=0,n=0,c.mode=O;case O:if(1024&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Bb[0]=255&m,Bb[1]=m>>>8&255,c.check=t(c.check,Bb,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=P;case P:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wb=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),r.arraySet(c.head.extra,e,g,q,wb)),512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=Q;case Q:if(2048&c.flags){if(0===i)break a;q=0;do wb=e[g+q++],c.head&&wb&&c.length<65536&&(c.head.name+=String.fromCharCode(wb));while(wb&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wb)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=R;case R:if(4096&c.flags){if(0===i)break a;q=0;do wb=e[g+q++],c.head&&wb&&c.length<65536&&(c.head.comment+=String.fromCharCode(wb));while(wb&&i>q);if(512&c.flags&&(c.check=t(c.check,e,q,g)),i-=q,g+=q,wb)break a}else c.head&&(c.head.comment=null);c.mode=S;case S:if(512&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=lb;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=V;break;case T:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=U;case U:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,E;a.adler=c.check=1,c.mode=V;case V:if(b===A||b===B)break a;case W:if(c.last){m>>>=7&n,n-=7&n,c.mode=ib;break}for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=X;break;case 1:if(k(c),c.mode=bb,b===B){m>>>=2,n-=2;break a}break;case 2:c.mode=$;break;case 3:a.msg="invalid block type",c.mode=lb}m>>>=2,n-=2;break;case X:for(m>>>=7&n,n-=7&n;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=lb;break}if(c.length=65535&m,m=0,n=0,c.mode=Y,b===B)break a;case Y:c.mode=Z;case Z:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;r.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=V;break;case $:for(;14>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=lb;break}c.have=0,c.mode=_;case _:for(;c.have<c.ncode;){for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Cb[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Cb[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,yb={bits:c.lenbits},xb=v(w,c.lens,0,19,c.lencode,0,c.work,yb),c.lenbits=yb.bits,xb){a.msg="invalid code lengths set",c.mode=lb;break}c.have=0,c.mode=ab;case ab:for(;c.have<c.nlen+c.ndist;){for(;Ab=c.lencode[m&(1<<c.lenbits)-1],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(16>sb)m>>>=qb,n-=qb,c.lens[c.have++]=sb;else{if(16===sb){for(zb=qb+2;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qb,n-=qb,0===c.have){a.msg="invalid bit length repeat",c.mode=lb;break}wb=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sb){for(zb=qb+3;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qb,n-=qb,wb=0,q=3+(7&m),m>>>=3,n-=3}else{for(zb=qb+7;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qb,n-=qb,wb=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=lb;break}for(;q--;)c.lens[c.have++]=wb}}if(c.mode===lb)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=lb;break}if(c.lenbits=9,yb={bits:c.lenbits},xb=v(x,c.lens,0,c.nlen,c.lencode,0,c.work,yb),c.lenbits=yb.bits,xb){a.msg="invalid literal/lengths set",c.mode=lb;break}if(c.distbits=6,c.distcode=c.distdyn,yb={bits:c.distbits},xb=v(y,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,yb),c.distbits=yb.bits,xb){a.msg="invalid distances set",c.mode=lb;break}if(c.mode=bb,b===B)break a;case bb:c.mode=cb;case cb:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,u(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===V&&(c.back=-1);break}for(c.back=0;Ab=c.lencode[m&(1<<c.lenbits)-1],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(rb&&0===(240&rb)){for(tb=qb,ub=rb,vb=sb;Ab=c.lencode[vb+((m&(1<<tb+ub)-1)>>tb)],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=tb+qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=tb,n-=tb,c.back+=tb}if(m>>>=qb,n-=qb,c.back+=qb,c.length=sb,0===rb){c.mode=hb;break}if(32&rb){c.back=-1,c.mode=V;break}if(64&rb){a.msg="invalid literal/length code",c.mode=lb;break}c.extra=15&rb,c.mode=db;case db:if(c.extra){for(zb=c.extra;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=eb;case eb:for(;Ab=c.distcode[m&(1<<c.distbits)-1],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&rb)){for(tb=qb,ub=rb,vb=sb;Ab=c.distcode[vb+((m&(1<<tb+ub)-1)>>tb)],qb=Ab>>>24,rb=Ab>>>16&255,sb=65535&Ab,!(n>=tb+qb);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=tb,n-=tb,c.back+=tb}if(m>>>=qb,n-=qb,c.back+=qb,64&rb){a.msg="invalid distance code",c.mode=lb;break}c.offset=sb,c.extra=15&rb,c.mode=fb;case fb:if(c.extra){for(zb=c.extra;zb>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=lb;break}c.mode=gb;case gb:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=lb;break}q>c.wnext?(q-=c.wnext,ob=c.wsize-q):ob=c.wnext-q,q>c.length&&(q=c.length),pb=c.window}else pb=f,ob=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pb[ob++];while(--q);0===c.length&&(c.mode=cb);break;case hb:if(0===j)break a;f[h++]=c.length,j--,c.mode=cb;break;case ib:if(c.wrap){for(;32>n;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?t(c.check,f,p,h-p):s(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=lb;break}m=0,n=0}c.mode=jb;case jb:if(c.wrap&&c.flags){for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=lb;break}m=0,n=0}c.mode=kb;case kb:xb=D;break a;case lb:xb=G;break a;case mb:return H;case nb:default:return F}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<lb&&(c.mode<ib||b!==z))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=mb,H):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?t(c.check,f,p,a.next_out-p):s(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===V?128:0)+(c.mode===bb||c.mode===Y?256:0),(0===o&&0===p||b===z)&&xb===C&&(xb=I),xb)}function n(a){if(!a||!a.state)return F;var b=a.state;return b.window&&(b.window=null),a.state=null,C}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?F:(c.head=b,b.done=!1,C)):F}var p,q,r=a("../utils/common"),s=a("./adler32"),t=a("./crc32"),u=a("./inffast"),v=a("./inftrees"),w=0,x=1,y=2,z=4,A=5,B=6,C=0,D=1,E=2,F=-2,G=-3,H=-4,I=-5,J=8,K=1,L=2,M=3,N=4,O=5,P=6,Q=7,R=8,S=9,T=10,U=11,V=12,W=13,X=14,Y=15,Z=16,$=17,_=18,ab=19,bb=20,cb=21,db=22,eb=23,fb=24,gb=25,hb=26,ib=27,jb=28,kb=29,lb=30,mb=31,nb=32,ob=852,pb=592,qb=15,rb=qb,sb=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":4,"./adler32":6,"./crc32":8,"./inffast":11,"./inftrees":13}],13:[function(a,b){"use strict";var c=a("../utils/common"),d=15,e=852,f=592,g=0,h=1,i=2,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],k=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];b.exports=function(a,b,n,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new c.Buf16(d+1),Q=new c.Buf16(d+1),R=null,S=0;for(D=0;d>=D;D++)P[D]=0;for(E=0;o>E;E++)P[b[n+E]]++;for(H=C,G=d;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;G>F&&0===P[F];F++);for(F>H&&(H=F),K=1,D=1;d>=D;D++)if(K<<=1,K-=P[D],0>K)return-1;if(K>0&&(a===g||1!==G))return-1;for(Q[1]=0,D=1;d>D;D++)Q[D+1]=Q[D]+P[D];for(E=0;o>E;E++)0!==b[n+E]&&(r[Q[b[n+E]]++]=E);if(a===g?(N=R=r,y=19):a===h?(N=j,O-=257,R=k,S-=257,y=256):(N=l,R=m,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===h&&L>e||a===i&&L>f)return 1;for(var T=0;;){T++,z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[n+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;G>I+J&&(K-=P[I+J],!(0>=K));)I++,K<<=1;if(L+=1<<I,a===h&&L>e||a===i&&L>f)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":4}],14:[function(a,b){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],15:[function(a,b,c){"use strict";function d(a){for(var b=a.length;--b>=0;)a[b]=0}function e(a){return 256>a?gb[a]:gb[256+(a>>>7)]}function f(a,b){a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255}function g(a,b,c){a.bi_valid>V-c?(a.bi_buf|=b<<a.bi_valid&65535,f(a,a.bi_buf),a.bi_buf=b>>V-a.bi_valid,a.bi_valid+=c-V):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function h(a,b,c){g(a,c[2*b],c[2*b+1])}function i(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0);return c>>>1}function j(a){16===a.bi_valid?(f(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}function k(a,b){var c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;U>=f;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;T>c;c++)d=a.heap[c],f=i[2*i[2*d+1]+1]+1,f>o&&(f=o,p++),i[2*d+1]=f,d>j||(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)e=a.heap[--c],e>j||(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}}function l(a,b,c){var d,e,f=new Array(U+1),g=0;for(d=1;U>=d;d++)f[d]=g=g+c[d-1]<<1;for(e=0;b>=e;e++){var h=a[2*e+1];0!==h&&(a[2*e]=i(f[h]++,h))}}function m(){var a,b,c,d,e,f=new Array(U+1);for(c=0,d=0;O-1>d;d++)for(ib[d]=c,a=0;a<1<<_[d];a++)hb[c++]=d;for(hb[c-1]=d,e=0,d=0;16>d;d++)for(jb[d]=e,a=0;a<1<<ab[d];a++)gb[e++]=d;for(e>>=7;R>d;d++)for(jb[d]=e<<7,a=0;a<1<<ab[d]-7;a++)gb[256+e++]=d;for(b=0;U>=b;b++)f[b]=0;for(a=0;143>=a;)eb[2*a+1]=8,a++,f[8]++;for(;255>=a;)eb[2*a+1]=9,a++,f[9]++;for(;279>=a;)eb[2*a+1]=7,a++,f[7]++;for(;287>=a;)eb[2*a+1]=8,a++,f[8]++;for(l(eb,Q+1,f),a=0;R>a;a++)fb[2*a+1]=5,fb[2*a]=i(a,5);kb=new nb(eb,_,P+1,Q,U),lb=new nb(fb,ab,0,R,U),mb=new nb(new Array(0),bb,0,S,W)}function n(a){var b;for(b=0;Q>b;b++)a.dyn_ltree[2*b]=0;for(b=0;R>b;b++)a.dyn_dtree[2*b]=0;for(b=0;S>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*X]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0}function o(a){a.bi_valid>8?f(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0}function p(a,b,c,d){o(a),d&&(f(a,c),f(a,~c)),E.arraySet(a.pending_buf,a.window,b,c,a.pending),a.pending+=c}function q(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function r(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&q(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!q(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d}function s(a,b,c){var d,f,i,j,k=0;if(0!==a.last_lit)do d=a.pending_buf[a.d_buf+2*k]<<8|a.pending_buf[a.d_buf+2*k+1],f=a.pending_buf[a.l_buf+k],k++,0===d?h(a,f,b):(i=hb[f],h(a,i+P+1,b),j=_[i],0!==j&&(f-=ib[i],g(a,f,j)),d--,i=e(d),h(a,i,c),j=ab[i],0!==j&&(d-=jb[i],g(a,d,j)));while(k<a.last_lit);h(a,X,b)}function t(a,b){var c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(a.heap_len=0,a.heap_max=T,c=0;i>c;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)e=a.heap[++a.heap_len]=2>j?++j:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);
for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)r(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],r(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,r(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],k(a,b),l(f,j,a.bl_count)}function u(a,b,c){var d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[2*(c+1)+1]=65535,d=0;c>=d;d++)e=g,g=b[2*(d+1)+1],++h<i&&e===g||(j>h?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*Y]++):10>=h?a.bl_tree[2*Z]++:a.bl_tree[2*$]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))}function v(a,b,c){var d,e,f=-1,i=b[1],j=0,k=7,l=4;for(0===i&&(k=138,l=3),d=0;c>=d;d++)if(e=i,i=b[2*(d+1)+1],!(++j<k&&e===i)){if(l>j){do h(a,e,a.bl_tree);while(0!==--j)}else 0!==e?(e!==f&&(h(a,e,a.bl_tree),j--),h(a,Y,a.bl_tree),g(a,j-3,2)):10>=j?(h(a,Z,a.bl_tree),g(a,j-3,3)):(h(a,$,a.bl_tree),g(a,j-11,7));j=0,f=e,0===i?(k=138,l=3):e===i?(k=6,l=3):(k=7,l=4)}}function w(a){var b;for(u(a,a.dyn_ltree,a.l_desc.max_code),u(a,a.dyn_dtree,a.d_desc.max_code),t(a,a.bl_desc),b=S-1;b>=3&&0===a.bl_tree[2*cb[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b}function x(a,b,c,d){var e;for(g(a,b-257,5),g(a,c-1,5),g(a,d-4,4),e=0;d>e;e++)g(a,a.bl_tree[2*cb[e]+1],3);v(a,a.dyn_ltree,b-1),v(a,a.dyn_dtree,c-1)}function y(a){var b,c=4093624447;for(b=0;31>=b;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return G;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return H;for(b=32;P>b;b++)if(0!==a.dyn_ltree[2*b])return H;return G}function z(a){pb||(m(),pb=!0),a.l_desc=new ob(a.dyn_ltree,kb),a.d_desc=new ob(a.dyn_dtree,lb),a.bl_desc=new ob(a.bl_tree,mb),a.bi_buf=0,a.bi_valid=0,n(a)}function A(a,b,c,d){g(a,(J<<1)+(d?1:0),3),p(a,b,c,!0)}function B(a){g(a,K<<1,3),h(a,X,eb),j(a)}function C(a,b,c,d){var e,f,h=0;a.level>0?(a.strm.data_type===I&&(a.strm.data_type=y(a)),t(a,a.l_desc),t(a,a.d_desc),h=w(a),e=a.opt_len+3+7>>>3,f=a.static_len+3+7>>>3,e>=f&&(e=f)):e=f=c+5,e>=c+4&&-1!==b?A(a,b,c,d):a.strategy===F||f===e?(g(a,(K<<1)+(d?1:0),3),s(a,eb,fb)):(g(a,(L<<1)+(d?1:0),3),x(a,a.l_desc.max_code+1,a.d_desc.max_code+1,h+1),s(a,a.dyn_ltree,a.dyn_dtree)),n(a),d&&o(a)}function D(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(hb[c]+P+1)]++,a.dyn_dtree[2*e(b)]++),a.last_lit===a.lit_bufsize-1}var E=a("../utils/common"),F=4,G=0,H=1,I=2,J=0,K=1,L=2,M=3,N=258,O=29,P=256,Q=P+1+O,R=30,S=19,T=2*Q+1,U=15,V=16,W=7,X=256,Y=16,Z=17,$=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ab=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],bb=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],cb=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],db=512,eb=new Array(2*(Q+2));d(eb);var fb=new Array(2*R);d(fb);var gb=new Array(db);d(gb);var hb=new Array(N-M+1);d(hb);var ib=new Array(O);d(ib);var jb=new Array(R);d(jb);var kb,lb,mb,nb=function(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length},ob=function(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b},pb=!1;c._tr_init=z,c._tr_stored_block=A,c._tr_flush_block=C,c._tr_tally=D,c._tr_align=B},{"../utils/common":4}],16:[function(a,b){"use strict";function c(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=c},{}]},{},[1])(1)}),Iterator.prototype={hasMore:function(){return this.cursor<this.length},next:function(){return this.array[this.cursor++]}};var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;9>=vv;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),NullExp.prototype.convert=nNop,NullExp.prototype.revert=nNop,NullExp.prototype.mulTo=nMulTo,NullExp.prototype.sqrTo=nSqrTo,Barrett.prototype.convert=barrettConvert,Barrett.prototype.revert=barrettRevert,Barrett.prototype.reduce=barrettReduce,Barrett.prototype.mulTo=barrettMulTo,Barrett.prototype.sqrTo=barrettSqrTo;var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],lplim=(1<<26)/lowprimes[lowprimes.length-1];BigInteger.prototype.chunkSize=bnpChunkSize,BigInteger.prototype.toRadix=bnpToRadix,BigInteger.prototype.fromRadix=bnpFromRadix,BigInteger.prototype.fromNumber=bnpFromNumber,BigInteger.prototype.bitwiseTo=bnpBitwiseTo,BigInteger.prototype.changeBit=bnpChangeBit,BigInteger.prototype.addTo=bnpAddTo,BigInteger.prototype.dMultiply=bnpDMultiply,BigInteger.prototype.dAddOffset=bnpDAddOffset,BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo,BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo,BigInteger.prototype.modInt=bnpModInt,BigInteger.prototype.millerRabin=bnpMillerRabin,BigInteger.prototype.clone=bnClone,BigInteger.prototype.intValue=bnIntValue,BigInteger.prototype.byteValue=bnByteValue,BigInteger.prototype.shortValue=bnShortValue,BigInteger.prototype.signum=bnSigNum,BigInteger.prototype.toByteArray=bnToByteArray,BigInteger.prototype.equals=bnEquals,BigInteger.prototype.min=bnMin,BigInteger.prototype.max=bnMax,BigInteger.prototype.and=bnAnd,BigInteger.prototype.or=bnOr,BigInteger.prototype.xor=bnXor,BigInteger.prototype.andNot=bnAndNot,BigInteger.prototype.not=bnNot,BigInteger.prototype.shiftLeft=bnShiftLeft,BigInteger.prototype.shiftRight=bnShiftRight,BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit,BigInteger.prototype.bitCount=bnBitCount,BigInteger.prototype.testBit=bnTestBit,BigInteger.prototype.setBit=bnSetBit,BigInteger.prototype.clearBit=bnClearBit,BigInteger.prototype.flipBit=bnFlipBit,BigInteger.prototype.add=bnAdd,BigInteger.prototype.subtract=bnSubtract,BigInteger.prototype.multiply=bnMultiply,BigInteger.prototype.divide=bnDivide,BigInteger.prototype.remainder=bnRemainder,BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder,BigInteger.prototype.modPow=bnModPow,BigInteger.prototype.modInverse=bnModInverse,BigInteger.prototype.pow=bnPow,BigInteger.prototype.gcd=bnGCD,BigInteger.prototype.isProbablePrime=bnIsProbablePrime,BigInteger.prototype.square=bnSquare,function(a,b,c,d){"use strict";function e(a,b){return"object"!=typeof b&&(b=b()),Object.keys(b).forEach(function(c){a[c]=b[c]}),a}function f(a){return{from:function(b){return a.prototype=Object.create(b.prototype),a.prototype.constructor=a,{extend:function(c){e(a.prototype,"object"!=typeof c?c(b.prototype):c)}}}}}function g(a,b){return b(a)}function h(b,l){function o(){c&&Cb.on("versionchange",function(b){Cb.close(),b.newVersion&&a.location.reload(!0)})}function t(a){this._cfg={version:a,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function D(a,b,c,d){if(0===a){Object.keys(rb).forEach(function(a){Q(b,a,rb[a].primKey,rb[a].indexes)});var e=Cb._createTransaction(Bb,tb,rb);e.idbtrans=b,e.idbtrans.onerror=F(c,["populating database"]),e.on("error").subscribe(c),O.newPSD(function(){O.PSD.trans=e;try{Cb.on("populate").fire(e)}catch(a){d.onerror=b.onerror=function(a){a.preventDefault()};try{b.abort()}catch(f){}b.db.close(),c(a)}})}else{var f=[],h=sb.filter(function(b){return b._cfg.version===a})[0];if(!h)throw new qb("Dexie specification of currently installed DB version is missing");rb=Cb._dbSchema=h._cfg.dbschema;var i=!1,j=sb.filter(function(b){return b._cfg.version>a});j.forEach(function(a){var d=rb,e=a._cfg.dbschema;kb(d,b),kb(e,b),rb=Cb._dbSchema=e;var h=P(d,e);h.add.forEach(function(a){f.push(function(b,c){Q(b,a[0],a[1].primKey,a[1].indexes),c()})}),h.change.forEach(function(a){if(a.recreate)throw new qb("Not yet support for changing primary key");f.push(function(b,c){var d=b.objectStore(a.name);a.add.forEach(function(a){T(d,a)}),a.change.forEach(function(a){d.deleteIndex(a.name),T(d,a)}),a.del.forEach(function(a){d.deleteIndex(a)}),c()})}),a._cfg.contentUpgrade&&f.push(function(b,d){i=!0;var f=Cb._createTransaction(Bb,[].slice.call(b.db.objectStoreNames,0),e);f.idbtrans=b;var h=0;f._promise=g(f._promise,function(a){return function(b,c,e){function f(a){return function(){a.apply(this,arguments),0===--h&&d()}}return++h,a.call(this,b,function(a,b){arguments[0]=f(a),arguments[1]=f(b),c.apply(this,arguments)},e)}}),b.onerror=F(c,["running upgrader function for version",a._cfg.version]),f.on("error").subscribe(c),a._cfg.contentUpgrade(f),0===h&&d()}),i&&ib()||f.push(function(a,b){S(e,a),b()})});var k=function(){try{f.length?f.shift()(b,k):R(rb,b)}catch(a){d.onerror=b.onerror=function(a){a.preventDefault()},b.abort(),b.db.close(),c(a)}};k()}}function P(a,b){var c={del:[],add:[],change:[]};for(var d in a)b[d]||c.del.push(d);for(var d in b){var e=a[d],f=b[d];if(e){var g={name:d,def:b[d],recreate:!1,del:[],add:[],change:[]};if(e.primKey.src!==f.primKey.src)g.recreate=!0,c.change.push(g);else{var h=e.indexes.reduce(function(a,b){return a[b.name]=b,a},{}),i=f.indexes.reduce(function(a,b){return a[b.name]=b,a},{});for(var j in h)i[j]||g.del.push(j);for(var j in i){var k=h[j],l=i[j];k?k.src!==l.src&&g.change.push(l):g.add.push(l)}(g.recreate||g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}else c.add.push([d,f])}return c}function Q(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});return d.forEach(function(a){T(e,a)}),e}function R(a,b){Object.keys(a).forEach(function(c){b.db.objectStoreNames.contains(c)||Q(b,c,a[c].primKey,a[c].indexes)})}function S(a,b){for(var c=0;c<b.db.objectStoreNames.length;++c){var e=b.db.objectStoreNames[c];(null===a[e]||a[e]===d)&&b.db.deleteObjectStore(e)}}function T(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function U(a,b){throw new qb("Table "+b[0]+" not part of transaction. Original Scope Function Source: "+h.Promise.PSD.trans.scopeFunc.toString())}function V(a,b,c,d){this.name=a,this.schema=c,this.hook=ub[a]?ub[a].hook:s(null,{creating:[m,i],reading:[k,j],updating:[n,i],deleting:[q,i]}),this._tpf=b,this._collClass=d||Z}function W(a,b,c,d){V.call(this,a,b,c,d||$)}function X(a,b,c,d){function e(a,b,c,d){return f._promise(a,c,d)}var f=this;this.db=Cb,this.mode=a,this.storeNames=b,this.idbtrans=null,this.on=s(this,["complete","error"],"abort"),this._reculock=0,this._blockedFuncs=[],this._psd=null,this.active=!0,this._dbschema=c,d&&(this.parent=d),this._tpf=e,this.tables=Object.create(vb);for(var g=b.length-1;-1!==g;--g){var h=b[g],i=Cb._tableFactory(a,c[h],e);this.tables[h]=i,this[h]||(this[h]=i)}}function Y(a,b,c){this._ctx={table:a,index:":id"===b?null:b,collClass:a._collClass,or:c}}function Z(a,b){var c=null,d=null;if(b)try{c=b()}catch(e){d=e}var f=a._ctx;this._ctx={table:f.table,index:f.index,isPrimKey:!f.index||f.table.schema.primKey.keyPath&&f.index===f.table.schema.primKey.name,range:c,op:"openCursor",dir:"next",unique:"",algorithm:null,filter:null,isMatch:null,offset:0,limit:1/0,error:d,or:f.or}}function $(){Z.apply(this,arguments)}function _(a,b){return a._cfg.version-b._cfg.version}function ab(a,b,c,d,e,f){c.forEach(function(c){var g=Cb._tableFactory(d,e[c],b);a.forEach(function(a){a[c]||(f?Object.defineProperty(a,c,{configurable:!0,enumerable:!0,get:function(){var a=O.PSD&&O.PSD.trans;return a&&a.db===Cb?a.tables[c]:g}}):a[c]=g)})})}function bb(a){a.forEach(function(a){for(var b in a)a[b]instanceof V&&delete a[b]})}function cb(a,b,c,d,e,f){var g=O.PSD;f=f||j,a.onerror||(a.onerror=F(e)),a.onsuccess=b?w(function(){var g=a.result;if(g){var h=function(){g.continue()};b(g,function(a){h=a},d,e)&&c(f(g.value),g,function(a){h=a}),h()}else d()},e,g):w(function(){var b=a.result;if(b){var e=function(){b.continue()};c(f(b.value),b,function(a){e=a}),e()}else d()},e,g)}function db(a){var b=[];return a.split(",").forEach(function(a){a=a.trim();var c=a.replace("&","").replace("++","").replace("*",""),d=0!==c.indexOf("[")?c:a.substring(a.indexOf("[")+1,a.indexOf("]")).split("+");b.push(new J(c,d||null,-1!==a.indexOf("&"),-1!==a.indexOf("*"),-1!==a.indexOf("++"),Array.isArray(d),-1!==d.indexOf(".")))}),b}function eb(a,b){return b>a?-1:a>b?1:0}function fb(a,b){return b>a?1:a>b?-1:0}function gb(a){return function(b,c){for(var d=0;;){var e=a(b[d],c[d]);if(0!==e)return e;if(++d,d===b.length||d===c.length)return a(b.length,c.length)}}}function hb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}function ib(){return navigator.userAgent.indexOf("Trident")>=0||navigator.userAgent.indexOf("MSIE")>=0}function jb(){if(Cb.verno=wb.version/10,Cb._dbSchema=rb={},tb=[].slice.call(wb.objectStoreNames,0),0!==tb.length){var a=wb.transaction(M(tb),"readonly");tb.forEach(function(b){for(var c=a.objectStore(b),d=c.keyPath,e=d&&"string"==typeof d&&-1!==d.indexOf("."),f=new J(d,d||"",!1,!1,!!c.autoIncrement,d&&"string"!=typeof d,e),g=[],h=0;h<c.indexNames.length;++h){var i=c.index(c.indexNames[h]);d=i.keyPath,e=d&&"string"==typeof d&&-1!==d.indexOf(".");var j=new J(i.name,d,!!i.unique,!!i.multiEntry,!1,d&&"string"!=typeof d,e);g.push(j)}rb[b]=new K(b,f,g,{})}),ab([ub],Cb._transPromiseFactory,Object.keys(rb),Bb,rb)}}function kb(a,b){for(var c=b.db.objectStoreNames,d=0;d<c.length;++d)for(var e=c[d],f=b.objectStore(e),g=0;g<f.indexNames.length;++g){var h=f.indexNames[g],i=f.index(h).keyPath,j="string"==typeof i?i:"["+[].slice.call(i).join("+")+"]";if(a[e]){var k=a[e].idxByName[j];k&&(k.name=h)}}}var lb=l&&l.addons||h.addons,mb=h.dependencies,nb=mb.indexedDB,ob=mb.IDBKeyRange,pb=(mb.IDBTransaction,mb.DOMError,mb.TypeError),qb=mb.Error,rb=this._dbSchema={},sb=[],tb=[],ub={},vb={},wb=null,xb=!0,yb=null,zb=!1,Ab="readonly",Bb="readwrite",Cb=this,Db=[],Eb=!1,Fb=!!N();this.version=function(a){if(wb)throw new qb("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=sb.filter(function(b){return b._cfg.version===a})[0];return b?b:(b=new t(a),sb.push(b),sb.sort(_),b)},e(t.prototype,{stores:function(a){this._cfg.storesSource=this._cfg.storesSource?e(this._cfg.storesSource,a):a;var b={};sb.forEach(function(a){e(b,a._cfg.storesSource)});var c=this._cfg.dbschema={};return this._parseStoresSpec(b,c),rb=Cb._dbSchema=c,bb([ub,Cb,vb]),ab([vb],U,Object.keys(c),Bb,c),ab([ub,Cb,this._cfg.tables],Cb._transPromiseFactory,Object.keys(c),Bb,c,!0),tb=Object.keys(c),this},upgrade:function(a){var b=this;return v(function(){a(Cb._createTransaction(Bb,Object.keys(b._cfg.dbschema),b._cfg.dbschema))}),this._cfg.contentUpgrade=a,this},_parseStoresSpec:function(a,b){Object.keys(a).forEach(function(c){if(null!==a[c]){var d={},e=db(a[c]),f=e.shift();if(f.multi)throw new qb("Primary key cannot be multi-valued");f.keyPath&&f.auto&&y(d,f.keyPath,0),e.forEach(function(a){if(a.auto)throw new qb("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new qb("Index must have a name and cannot be an empty string");y(d,a.keyPath,a.compound?a.keyPath.map(function(){return""}):"")}),b[c]=new K(c,f,e,d)}})}}),this._allTables=ub,this._tableFactory=function(a,b,c){return a===Ab?new V(b.name,c,b,Z):new W(b.name,c,b)},this._createTransaction=function(a,b,c,d){return new X(a,b,c,d)},this._transPromiseFactory=function(a,b,c){if(!xb||O.PSD&&O.PSD.letThrough){var d=Cb._createTransaction(a,b,rb);return d._promise(a,function(a,b){d.error(function(a){Cb.on("error").fire(a)}),c(function(b){d.complete(function(){a(b)})},b,d)})}var e=new O(function(d,f){Db.push({resume:function(){var g=Cb._transPromiseFactory(a,b,c);e.onuncatched=g.onuncatched,g.then(d,f)}})});return e},this._whenReady=function(a){return new O(!xb||O.PSD&&O.PSD.letThrough?a:function(b,c){v(function(){new O(function(){a(b,c)})}),Db.push({resume:function(){a(b,c)}})})},this.verno=0,this.open=function(){return new O(function(a,c){function d(a){zb=!1,yb=a,xb=!1,c(yb),Db.forEach(function(a){a.resume()}),Db=[]}if(wb||zb)throw new qb("Database already opened or being opened");try{if(yb=null,zb=!0,0===sb.length&&(Eb=!0),!nb)throw new qb("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using Safari, make sure to include indexedDB polyfill.");var e=!1,f=Eb?nb.open(b):nb.open(b,Math.round(10*Cb.verno));f.onerror=F(d,["opening database",b]),f.onblocked=function(a){Cb.on("blocked").fire(a)},f.onupgradeneeded=w(function(a){if(Eb&&!Cb._allowEmptyDB){f.onerror=function(a){a.preventDefault()},f.transaction.abort(),f.result.close();var c=nb.deleteDatabase(b);c.onsuccess=c.onerror=function(){d(new qb("Database '"+b+"' doesnt exist"))}}else{0===a.oldVersion&&(e=!0),f.transaction.onerror=F(d);var g=a.oldVersion>Math.pow(2,62)?0:a.oldVersion;D(g/10,f.transaction,d,f)}},d),f.onsuccess=w(function(){zb=!1,wb=f.result,Eb?jb():wb.objectStoreNames.length>0&&kb(rb,wb.transaction(M(wb.objectStoreNames),Ab)),wb.onversionchange=Cb.on("versionchange").fire,Fb||I(function(a){return-1===a.indexOf(b)?a.push(b):void 0}),O.newPSD(function(){function b(){xb=!1,Db.forEach(function(a){a.resume()}),Db=[],a()}O.PSD.letThrough=!0;try{var c=Cb.on.ready.fire();c&&"function"==typeof c.then?c.then(b,function(a){wb.close(),wb=null,d(a)}):u(b)}catch(e){d(e)}})},d)}catch(g){d(g)}})},this.close=function(){wb&&(wb.close(),wb=null,xb=!0,yb=null)},this.delete=function(){var a=arguments;return new O(function(c,d){function e(){Cb.close();var a=nb.deleteDatabase(b);a.onsuccess=function(){Fb||I(function(a){var c=a.indexOf(b);return c>=0?a.splice(c,1):void 0}),c()},a.onerror=F(d,["deleting",b]),a.onblocked=function(){Cb.on("blocked").fire()}}if(a.length>0)throw new qb("Arguments not allowed in db.delete()");zb?Db.push({resume:e}):e()})},this.backendDB=function(){return wb},this.isOpen=function(){return null!==wb},this.hasFailed=function(){return null!==yb},this.dynamicallyOpened=function(){return Eb},this.name=b,Object.defineProperty(this,"tables",{get:function(){return Object.keys(ub).map(function(a){return ub[a]})}}),this.on=s(this,"error","populate","blocked",{ready:[r,i],versionchange:[p,i]}),this.on.ready.subscribe=g(this.on.ready.subscribe,function(a){return function(b,c){function d(){return c||Cb.on.ready.unsubscribe(d),b.apply(this,arguments)}a.call(this,d),Cb.isOpen()&&(xb?Db.push({resume:d}):d())}}),v(function(){Cb.on("populate").fire(Cb._createTransaction(Bb,tb,rb)),Cb.on("error").fire(new qb)}),this.transaction=function(a,b,c){function d(b,d){var f=null;try{if(i)throw i;f=Cb._createTransaction(a,j,rb,e);var h=j.map(function(a){return f.tables[a]});h.push(f);var k,l=0;O.newPSD(function(){O.PSD.trans=f,f.scopeFunc=c,e&&(f.idbtrans=e.idbtrans,f._promise=g(f._promise,function(a){return function(b,c,d){function e(a){return function(b){var c=a(b);return 0===--l&&f.active&&O._rootExec(function(){f.active=!1,f.on.complete.fire()}),c}}return++l,a.call(this,b,function(a,b,d){return c(e(a),e(b),d)},d)}})),f.complete(function(){b(k)}),f.error(function(a){f.idbtrans.onerror=H,f.abort(),e&&(e.active=!1,e.on.error.fire(a));var b=d(a);e||b||Cb.on.error.fire(a)}),k=c.apply(f,h)}),(!f.idbtrans||e&&0===l)&&f._nop()}catch(m){f&&f.idbtrans&&(f.idbtrans.onerror=H),f&&f.abort(),e&&e.on.error.fire(m),u(function(){d(m)||Cb.on("error").fire(m)})}}b=[].slice.call(arguments,1,arguments.length-1),c=arguments[arguments.length-1];var e=O.PSD&&O.PSD.trans;e&&e.db===Cb&&-1===a.indexOf("!")||(e=null);var f=-1!==a.indexOf("?");a=a.replace("!","").replace("?","");var h=Array.isArray(b[0])?b.reduce(function(a,b){return a.concat(b)}):b,i=null,j=h.map(function(a){return"string"==typeof a?a:(a instanceof V||(i=i||new pb("Invalid type. Arguments following mode must be instances of Table or String")),a.name)});return"r"==a||a==Ab?a=Ab:"rw"==a||a==Bb?a=Bb:i=new qb("Invalid transaction mode: "+a),e&&(i||(e&&e.mode===Ab&&a===Bb&&(f?e=null:i=i||new qb("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY")),e&&j.forEach(function(a){e.tables.hasOwnProperty(a)||(f?e=null:i=i||new qb("Table "+a+" not included in parent transaction. Parent Transaction function: "+e.scopeFunc.toString()))}))),e?e._promise(a,d,"lock"):Cb._whenReady(d)},this.table=function(a){if(!Eb&&!ub.hasOwnProperty(a))throw new qb("Table does not exist");return ub[a]},e(V.prototype,function(){function a(){throw new qb("Current Transaction is READONLY")}return{_trans:function(a,b,c){return this._tpf(a,[this.name],b,c)},_idbstore:function(a,b,c){var d=this;return this._tpf(a,[this.name],function(a,c,e){b(a,c,e.idbtrans.objectStore(d.name),e)},c)},get:function(a,b){var c=this;return v(function(){b(c.schema.instanceTemplate)}),this._idbstore(Ab,function(b,d,e){var f=e.get(a);f.onerror=F(d,["getting",a,"from",c.name]),f.onsuccess=function(){b(c.hook.reading.fire(f.result))}}).then(b)},where:function(a){return new Y(this,a)},count:function(a){return this.toCollection().count(a)},offset:function(a){return this.toCollection().offset(a)},limit:function(a){return this.toCollection().limit(a)},reverse:function(){return this.toCollection().reverse()},filter:function(a){return this.toCollection().and(a)},each:function(a){var b=this;return v(function(){a(b.schema.instanceTemplate)}),this._idbstore(Ab,function(c,d,e){var f=e.openCursor();f.onerror=F(d,["calling","Table.each()","on",b.name]),cb(f,null,a,c,d,b.hook.reading.fire)})},toArray:function(a){var b=this;return v(function(){a([b.schema.instanceTemplate])}),this._idbstore(Ab,function(a,c,d){var e=[],f=d.openCursor();f.onerror=F(c,["calling","Table.toArray()","on",b.name]),cb(f,null,function(a){e.push(a)},function(){a(e)},c,b.hook.reading.fire)}).then(a)},orderBy:function(a){return new this._collClass(new Y(this,a))},toCollection:function(){return new this._collClass(new Y(this))},mapToClass:function(a,b){this.schema.mappedClass=a;var c=Object.create(a.prototype);this.schema.primKey.keyPath&&(y(c,this.schema.primKey.keyPath,this.schema.primKey.auto?0:""),z(a.prototype,this.schema.primKey.keyPath)),b&&E(c,b),this.schema.instanceTemplate=c;var d=Object.setPrototypeOf?function(b){return b?(Object.setPrototypeOf(b,a.prototype),b):b}:function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=d,this.hook("reading",d),a},defineClass:function(a){return this.mapToClass(h.defineClass(a),a)},add:a,put:a,"delete":a,clear:a,update:a}}),f(W).from(V).extend(function(){return{add:function(a,b){var c=this,e=this.hook.creating.fire;return this._idbstore(Bb,function(f,g,h,j){var k={};if(e!==i){var l=b||(h.keyPath?x(a,h.keyPath):d),m=e.call(k,l,a,j);l===d&&m!==d&&(h.keyPath?y(a,h.keyPath,m):b=m)}var n=b?h.add(a,b):h.add(a);n.onerror=F(function(a){return k.onerror&&k.onerror(a),g(a)},["adding",a,"into",c.name]),n.onsuccess=function(b){var c=h.keyPath;c&&y(a,c,b.target.result),k.onsuccess&&k.onsuccess(b.target.result),f(n.result)}})},put:function(a,b){var c=this,e=this.hook.creating.fire,f=this.hook.updating.fire;return e!==i||f!==i?this._trans(Bb,function(e,f,g){var h=b||c.schema.primKey.keyPath&&x(a,c.schema.primKey.keyPath);h===d?g.tables[c.name].add(a).then(e,f):(g._lock(),a=B(a),g.tables[c.name].where(":id").equals(h).modify(function(){this.value=a}).then(function(d){return 0===d?g.tables[c.name].add(a,b):h}).finally(function(){g._unlock()}).then(e,f))}):this._idbstore(Bb,function(d,e,f){var g=b?f.put(a,b):f.put(a);g.onerror=F(e,["putting",a,"into",c.name]),g.onsuccess=function(b){var c=f.keyPath;c&&y(a,c,b.target.result),d(g.result)}})},"delete":function(a){return this.hook.deleting.subscribers.length?this.where(":id").equals(a).delete():this._idbstore(Bb,function(b,c,d){var e=d.delete(a);e.onerror=F(c,["deleting",a,"from",d.name]),e.onsuccess=function(){b(e.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Bb,function(a,b,c){var d=c.clear();d.onerror=F(b,["clearing",c.name]),d.onsuccess=function(){a(d.result)}})},update:function(a,b){if("object"!=typeof b||Array.isArray(b))throw new qb("db.update(keyOrObject, modifications). modifications must be an object.");if("object"!=typeof a||Array.isArray(a))return this.where(":id").equals(a).modify(b);Object.keys(b).forEach(function(c){y(a,c,b[c])});var c=x(a,this.schema.primKey.keyPath);return c===d&&O.reject(new qb("Object does not contain its primary key")),this.where(":id").equals(c).modify(b)}}}),e(X.prototype,{_lock:function(){return++this._reculock,1===this._reculock&&O.PSD&&(O.PSD.lockOwnerFor=this),this},_unlock:function(){if(0===--this._reculock)for(O.PSD&&(O.PSD.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var a=this._blockedFuncs.shift();try{a()}catch(b){}}return this},_locked:function(){return this._reculock&&(!O.PSD||O.PSD.lockOwnerFor!==this)},_nop:function(a){this.tables[this.storeNames[0]].get(0).then(a)},_promise:function(a,b,c){var d=this;return O.newPSD(function(){var e;return d._locked()?e=new O(function(e,f){d._blockedFuncs.push(function(){d._promise(a,b,c).then(e,f)})}):(e=d.active?new O(function(e,f){if(!d.idbtrans&&a){if(!wb)throw new qb(yb?"Database not open. Following error in populate, ready or upgrade function made Dexie.open() fail: "+yb:"Database not open");var g=d.idbtrans=wb.transaction(M(d.storeNames),d.mode);g.onerror=function(a){d.on("error").fire(a&&a.target.error),a.preventDefault(),d.abort()},g.onabort=function(a){d.active=!1,d.on("abort").fire(a)},g.oncomplete=function(a){d.active=!1,d.on("complete").fire(a)}}c&&d._lock();try{b(e,f,d)}catch(i){h.spawn(function(){d.on("error").fire(i)}),d.abort(),f(i)}}):O.reject(G(new qb("Transaction is inactive. Original Scope Function Source: "+d.scopeFunc.toString()))),d.active&&c&&e.finally(function(){d._unlock()})),e.onuncatched=function(a){h.spawn(function(){d.on("error").fire(a)}),d.abort()},e})},complete:function(a){return this.on("complete",a)},error:function(a){return this.on("error",a)},abort:function(){if(this.idbtrans&&this.active)try{this.active=!1,this.idbtrans.abort(),this.on.error.fire(new qb("Transaction Aborted"))}catch(a){}},table:function(a){if(!this.tables.hasOwnProperty(a))throw new qb("Table "+a+" not in transaction");return this.tables[a]}}),e(Y.prototype,function(){function a(a,b){try{throw b}catch(c){a._ctx.error=c}return a}function b(a){return Array.prototype.slice.call(1===a.length&&Array.isArray(a[0])?a[0]:a)}function c(a){return"next"===a?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function d(a){return"next"===a?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function e(a,b,c,d,e,f){for(var g=Math.min(a.length,d.length),h=-1,i=0;g>i;++i){var j=b[i];if(j!==d[i])return e(a[i],c[i])<0?a.substr(0,i)+c[i]+c.substr(i+1):e(a[i],d[i])<0?a.substr(0,i)+d[i]+c.substr(i+1):h>=0?a.substr(0,h)+b[h]+c.substr(h+1):null;e(a[i],j)<0&&(h=i)}return g<d.length&&"next"===f?a+c.substr(a.length):g<a.length&&"prev"===f?a.substr(0,c.length):0>h?null:a.substr(0,h)+d[h]+c.substr(h+1)}function f(a,b,f){function g(a){h=c(a),i=d(a),j="next"===a?eb:fb,k=h(f),l=i(f),m=a}var h,i,j,k,l,m;g("next"),a._ondirectionchange=function(a){g(a)},a._addAlgorithm(function(a,c,d){var f=a.key;if("string"!=typeof f)return!1;var g=i(f);if(b(g,l))return c(function(){a.continue()}),!0;var h=e(f,g,k,l,j,m);return c(h?function(){a.continue(h)}:d),!1})}return{between:function(a,b,c,d){return c=c!==!1,d=d===!0,a>b||a===b&&(c||d)&&(!c||!d)?new this._ctx.collClass(this,function(){return ob.only(a)}).limit(0):new this._ctx.collClass(this,function(){return ob.bound(a,b,!c,!d)})},equals:function(a){return new this._ctx.collClass(this,function(){return ob.only(a)})},above:function(a){return new this._ctx.collClass(this,function(){return ob.lowerBound(a,!0)})},aboveOrEqual:function(a){return new this._ctx.collClass(this,function(){return ob.lowerBound(a)})},below:function(a){return new this._ctx.collClass(this,function(){return ob.upperBound(a,!0)})},belowOrEqual:function(a){return new this._ctx.collClass(this,function(){return ob.upperBound(a)})},startsWith:function(b){return"string"!=typeof b?a(new this._ctx.collClass(this),new pb("String expected")):this.between(b,b+String.fromCharCode(65535),!0,!0)},startsWithIgnoreCase:function(b){if("string"!=typeof b)return a(new this._ctx.collClass(this),new pb("String expected"));if(""===b)return this.startsWith(b);var c=new this._ctx.collClass(this,function(){return ob.bound(b.toUpperCase(),b.toLowerCase()+String.fromCharCode(65535))});return f(c,function(a,b){return 0===a.indexOf(b)},b),c._ondirectionchange=function(){a(c,new qb("reverse() not supported with WhereClause.startsWithIgnoreCase()"))},c},equalsIgnoreCase:function(b){if("string"!=typeof b)return a(new this._ctx.collClass(this),new pb("String expected"));var c=new this._ctx.collClass(this,function(){return ob.bound(b.toUpperCase(),b.toLowerCase())});return f(c,function(a,b){return a===b},b),c},anyOf:function(){var a=this._ctx,c=a.table.schema,d=a.index?c.idxByName[a.index]:c.primKey,e=d&&d.compound,f=b(arguments),g=e?gb(eb):eb;if(f.sort(g),0===f.length)return new this._ctx.collClass(this,ob.only("")).limit(0);var h=new this._ctx.collClass(this,function(){return ob.bound(f[0],f[f.length-1])});h._ondirectionchange=function(a){g="next"===a?eb:fb,e&&(g=gb(g)),f.sort(g)};var i=0;return h._addAlgorithm(function(a,b,c){for(var d=a.key;g(d,f[i])>0;)if(++i,i===f.length)return b(c),!1;return 0===g(d,f[i])?(b(function(){a.continue()}),!0):(b(function(){a.continue(f[i])}),!1)}),h}}}),e(Z.prototype,function(){function a(a,b){a.filter=hb(a.filter,b)
}function b(a,b){a.isMatch=hb(a.isMatch,b)}function c(a,b){if(a.isPrimKey)return b;var c=a.table.schema.idxByName[a.index];if(!c)throw new qb("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return a.isPrimKey?b:b.index(c.name)}function d(a,b){return c(a,b)[a.op](a.range||null,a.dir+a.unique)}function e(a,b,c,e,f){a.or?!function(){function g(){2===++k&&c()}function h(a,c,d){if(!i||i(c,d,g,e)){var f=c.primaryKey.toString();j.hasOwnProperty(f)||(j[f]=!0,b(a,c,d))}}var i=a.filter,j={},k=(a.table.schema.primKey.keyPath,0);a.or._iterate(h,g,e,f),cb(d(a,f),a.algorithm,h,g,e,a.table.hook.reading.fire)}():cb(d(a,f),hb(a.algorithm,a.filter),b,c,e,a.table.hook.reading.fire)}function f(a){return a.table.schema.instanceTemplate}return{_read:function(a,b){var c=this._ctx;return c.error?c.table._trans(null,function(a,b){b(c.error)}):c.table._idbstore(Ab,a).then(b)},_write:function(a){var b=this._ctx;return b.error?b.table._trans(null,function(a,c){c(b.error)}):b.table._idbstore(Bb,a,"locked")},_addAlgorithm:function(a){var b=this._ctx;b.algorithm=hb(b.algorithm,a)},_iterate:function(a,b,c,d){return e(this._ctx,a,b,c,d)},each:function(a){var b=this._ctx;return v(function(){a(f(b))}),this._read(function(c,d,f){e(b,a,c,d,f)})},count:function(a){v(function(){a(0)});var b=this,d=this._ctx;if(d.filter||d.algorithm||d.or){var f=0;return this._read(function(a,b,c){e(d,function(){return++f,!1},function(){a(f)},b,c)},a)}return this._read(function(a,e,f){var g=c(d,f),h=d.range?g.count(d.range):g.count();h.onerror=F(e,["calling","count()","on",b.name]),h.onsuccess=function(b){a(Math.min(b.target.result,Math.max(0,d.limit-d.offset)))}},a)},sortBy:function(a,b){function c(a,b){return b?c(a[g[b]],b-1):a[h]}function d(a,b){var d=c(a,i),e=c(b,i);return e>d?-j:d>e?j:0}var e=this._ctx;v(function(){b([f(e)])});var g=a.split(".").reverse(),h=g[0],i=g.length-1,j="next"===this._ctx.dir?1:-1;return this.toArray(function(a){return a.sort(d)}).then(b)},toArray:function(a){var b=this._ctx;return v(function(){a([f(b)])}),this._read(function(a,c,d){var f=[];e(b,function(a){f.push(a)},function(){a(f)},c,d)},a)},offset:function(b){var c=this._ctx;return 0>=b?this:(c.offset+=b,c.or||c.algorithm||c.filter?a(c,function(){return--b<0}):a(c,function(a,c){return 0===b?!0:1===b?(--b,!1):(c(function(){a.advance(b),b=0}),!1)}),this)},limit:function(b){return this._ctx.limit=Math.min(this._ctx.limit,b),a(this._ctx,function(a,c,d){return--b<=0&&c(d),b>=0}),this},until:function(b,c){var d=this._ctx;return v(function(){b(f(d))}),a(this._ctx,function(a,d,e){return b(a.value)?(d(e),c):!0}),this},first:function(a){var b=this;return v(function(){a(f(b._ctx))}),this.limit(1).toArray(function(a){return a[0]}).then(a)},last:function(a){return this.reverse().first(a)},and:function(c){var d=this;return v(function(){c(f(d._ctx))}),a(this._ctx,function(a){return c(a.value)}),b(this._ctx,c),this},or:function(a){return new Y(this._ctx.table,a,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(a){var b=this,c=this._ctx;return v(function(){a(f(b._ctx)[b._ctx.index])}),c.isPrimKey||(c.op="openKeyCursor"),this.each(function(b,c){a(c.key,c)})},eachUniqueKey:function(a){return this._ctx.unique="unique",this.eachKey(a)},keys:function(a){v(function(){a([f(c)[b._ctx.index]])});var b=this,c=this._ctx;c.isPrimKey||(c.op="openKeyCursor");var d=[];return this.each(function(a,b){d.push(b.key)}).then(function(){return d}).then(a)},uniqueKeys:function(a){return this._ctx.unique="unique",this.keys(a)},firstKey:function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)},lastKey:function(a){return this.reverse().firstKey(a)},distinct:function(){var b={};return a(this._ctx,function(a){var c=a.primaryKey.toString(),d=b.hasOwnProperty(c);return b[c]=!0,!d}),this}}}),f($).from(Z).extend({modify:function(a){var b=this,c=this._ctx,d=c.table.hook,f=d.updating.fire,g=d.deleting.fire;return v(function(){"function"==typeof a&&a.call({value:c.table.schema.instanceTemplate},c.table.schema.instanceTemplate)}),this._write(function(d,h,j,k){function l(a,b){z=b.primaryKey;var d={primKey:b.primaryKey,value:a};if(o.call(d,a)!==!1){var e=!d.hasOwnProperty("value"),f=e?b.delete():b.update(d.value);++s,f.onerror=F(function(a){return v.push(a),w.push(d.primKey),d.onerror&&d.onerror(a),n(),!0},e?["deleting",a,"from",c.table.name]:["modifying",a,"on",c.table.name]),f.onsuccess=function(){d.onsuccess&&d.onsuccess(d.value),++t,n()}}else d.onsuccess&&d.onsuccess(d.value)}function m(a){return a&&(v.push(a),w.push(z)),h(new L("Error modifying one or more objects",v,t,w))}function n(){u&&t+v.length===s&&(v.length>0?m():d(t))}var o;if("function"==typeof a)o=f===i&&g===i?a:function(b){var c=B(b);if(a.call(this,b)===!1)return!1;if(this.hasOwnProperty("value")){var d=C(c,this.value),e=f.call(this,d,this.primKey,c,k);e&&(b=this.value,Object.keys(e).forEach(function(a){y(b,a,e[a])}))}else g.call(this,this.primKey,b,k)};else if(f===i){var p=Object.keys(a),q=p.length;o=function(b){for(var c=!1,d=0;q>d;++d){var e=p[d],f=a[e];x(b,e)!==f&&(y(b,e,f),c=!0)}return c}}else{var r=a;a=A(r),o=function(b){var c=!1,d=f.call(this,a,this.primKey,B(b),k);return d&&e(a,d),Object.keys(a).forEach(function(d){var e=a[d];x(b,d)!==e&&(y(b,d,e),c=!0)}),d&&(a=A(r)),c}}var s=0,t=0,u=!1,v=[],w=[],z=null;b._iterate(l,function(){u=!0,n()},m,j)})},"delete":function(){return this.modify(function(){delete this.value})}}),e(this,{Collection:Z,Table:V,Transaction:X,Version:t,WhereClause:Y,WriteableCollection:$,WriteableTable:W}),o(),lb.forEach(function(a){a(Cb)})}function i(){}function j(a){return a}function k(a,b){return a===j?b:function(c){return b(a(c))}}function l(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function m(a,b){return a===i?b:function(){var c=a.apply(this,arguments);c!==d&&(arguments[0]=c);var e=this.onsuccess,f=this.onerror;delete this.onsuccess,delete this.onerror;var g=b.apply(this,arguments);return e&&(this.onsuccess=this.onsuccess?l(e,this.onsuccess):e),f&&(this.onerror=this.onerror?l(f,this.onerror):f),g!==d?g:c}}function n(a,b){return a===i?b:function(){var c=a.apply(this,arguments);c!==d&&e(arguments[0],c);var f=this.onsuccess,g=this.onerror;delete this.onsuccess,delete this.onerror;var h=b.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?l(f,this.onsuccess):f),g&&(this.onerror=this.onerror?l(g,this.onerror):g),c===d?h===d?d:h:h===d?c:e(c,h)}}function o(a,b){return a===i?b:function(){return a.apply(this,arguments)===!1?!1:b.apply(this,arguments)}}function p(a,b){return a===i?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function q(a,b){return a===i?b:function(){a.apply(this,arguments),b.apply(this,arguments)}}function r(a,b){return a===i?b:function(){var c=a.apply(this,arguments);if(c&&"function"==typeof c.then){var d=this,e=arguments;return c.then(function(){return b.apply(d,e)})}return b.apply(this,arguments)}}function s(b){function c(a,b,c){if(Array.isArray(a))return e(a);if("object"==typeof a)return d(a);b||(b=o),c||(c=i);var f={subscribers:[],fire:c,subscribe:function(a){f.subscribers.push(a),f.fire=b(f.fire,a)},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(b,c)}};return g[a]=h[a]=f,f}function d(b){Object.keys(b).forEach(function(d){var e=b[d];if(Array.isArray(e))c(d,b[d][0],b[d][1]);else{if("asap"!==e)throw new Error("Invalid event config");var f=c(d,null,function(){var b=arguments;f.subscribers.forEach(function(c){u(function(){c.apply(a,b)})})});f.subscribe=function(a){-1===f.subscribers.indexOf(a)&&f.subscribers.push(a)},f.unsubscribe=function(a){var b=f.subscribers.indexOf(a);-1!==b&&f.subscribers.splice(b,1)}}})}function e(a){function b(){return d?!1:void(d=!0)}var d=!1;a.forEach(function(a){c(a).subscribe(b)})}var f=arguments,g={},h=function(a,c){if(c){var d=[].slice.call(arguments,1),e=g[a];return e.subscribe.apply(e,d),b}return"string"==typeof a?g[a]:void 0};h.addEventType=c;for(var j=1,k=f.length;k>j;++j)c(f[j]);return h}function t(a){if(!a)throw new Error("Assertion failed")}function u(b){a.setImmediate?setImmediate(b):setTimeout(b,0)}function v(a){var b=setTimeout(a,1e3);clearTimeout(b)}function w(a,b,c){return function(){var d=O.PSD;O.PSD=c;try{a.apply(this,arguments)}catch(e){b(e)}finally{O.PSD=d}}}function x(a,b){if(a.hasOwnProperty(b))return a[b];if(!b)return a;if("string"!=typeof b){for(var c=[],e=0,f=b.length;f>e;++e){var g=x(a,b[e]);c.push(g)}return c}var h=b.indexOf(".");if(-1!==h){var i=a[b.substr(0,h)];return i===d?d:x(i,b.substr(h+1))}return d}function y(a,b,c){if(a&&b!==d)if("string"!=typeof b&&"length"in b){t("string"!=typeof c&&"length"in c);for(var e=0,f=b.length;f>e;++e)y(a,b[e],c[e])}else{var g=b.indexOf(".");if(-1!==g){var h=b.substr(0,g),i=b.substr(g+1);if(""===i)c===d?delete a[h]:a[h]=c;else{var j=a[h];j||(j=a[h]={}),y(j,i,c)}}else c===d?delete a[b]:a[b]=c}}function z(a,b){y(a,b,d)}function A(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function B(a){if(!a||"object"!=typeof a)return a;var b;if(Array.isArray(a)){b=[];for(var c=0,d=a.length;d>c;++c)b.push(B(a[c]))}else if(a instanceof Date)b=new Date,b.setTime(a.getTime());else{b=a.constructor?Object.create(a.constructor.prototype):{};for(var e in a)a.hasOwnProperty(e)&&(b[e]=B(a[e]))}return b}function C(a,b){var c={};for(var e in a)a.hasOwnProperty(e)&&(b.hasOwnProperty(e)?a[e]!==b[e]&&JSON.stringify(a[e])!=JSON.stringify(b[e])&&(c[e]=b[e]):c[e]=d);for(var e in b)b.hasOwnProperty(e)&&!a.hasOwnProperty(e)&&(c[e]=b[e]);return c}function D(a){if("function"==typeof a)return new a;if(Array.isArray(a))return[D(a[0])];if(a&&"object"==typeof a){var b={};return E(b,a),b}return a}function E(a,b){Object.keys(b).forEach(function(c){var d=D(b[c]);a[c]=d})}function F(a,b){return function(c){var d=c&&c.target.error||new Error;if(b){var e=" occured when "+b.map(function(a){switch(typeof a){case"function":return a();case"string":return a;default:return JSON.stringify(a)}}).join(" ");d.name?d.toString=function(){return d.name+e+(d.message?". "+d.message:"")}:d+=e}return a(d),c.stopPropagation(),c.preventDefault(),!1}}function G(a){try{throw a}catch(b){return b}}function H(a){a.preventDefault()}function I(a){var b,c=h.dependencies.localStorage;if(!c)return a([]);try{b=JSON.parse(c.getItem("Dexie.DatabaseNames")||"[]")}catch(d){b=[]}a(b)&&c.setItem("Dexie.DatabaseNames",JSON.stringify(b))}function J(a,b,c,d,e,f,g){this.name=a,this.keyPath=b,this.unique=c,this.multi=d,this.auto=e,this.compound=f,this.dotted=g;var h="string"==typeof b?b:b&&"["+[].join.call(b,"+")+"]";this.src=(c?"&":"")+(d?"*":"")+(e?"++":"")+h}function K(a,b,c,d){this.name=a,this.primKey=b||new J,this.indexes=c||[new J],this.instanceTemplate=d,this.mappedClass=null,this.idxByName=c.reduce(function(a,b){return a[b.name]=b,a},{})}function L(a,b,c,d){this.name="ModifyError",this.failures=b,this.failedKeys=d,this.successCount=c,this.message=b.join("\n")}function M(a){return 1===a.length?a[0]:a}function N(){var a=h.dependencies.indexedDB,b=a.getDatabaseNames||a.webkitGetDatabaseNames;return b&&b.bind(a)}var O=function(){function b(a){r.push([a,n.call(arguments,1)])}function c(){var b=r;r=[];for(var c=0,d=b.length;d>c;++c){var e=b[c];e[0].apply(a,e[1])}}function d(a){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],this._catched=!1;var b=this,c=!0;this._PSD=d.PSD;try{m(this,a,function(a){c?p(h,b,a):h(b,a)},function(a){return c?(p(j,b,a),!1):j(b,a)})}finally{c=!1}}function e(a,d){if(null===a._state)return void a._deferreds.push(d);var e=a._state?d.onFulfilled:d.onRejected;if(null===e)return(a._state?d.resolve:d.reject)(a._value);var f,h=q;q=!1,p=b;try{f=e(a._value),a._state||f&&"function"==typeof f.then&&f._state===!1||g(a),d.resolve(f)}catch(i){var j=d.reject(i);if(!j&&a.onuncatched)try{a.onuncatched(i)}catch(i){}}finally{if(h){for(;r.length>0;)c();p=o,q=!0}}}function f(a){var d=q;q=!1,p=b;try{a()}finally{if(d){for(;r.length>0;)c();p=o,q=!0}}}function g(a){a._catched=!0,a._parent&&g(a._parent)}function h(a,b){var c=d.PSD;d.PSD=a._PSD;try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"==typeof b||"function"==typeof b)&&"function"==typeof b.then)return void m(a,function(a,c){b.then(a,c)},function(b){h(a,b)},function(b){j(a,b)});a._state=!0,a._value=b,k.call(a)}catch(e){j(e)}finally{d.PSD=c}}function j(a,b){var c=d.PSD;if(d.PSD=a._PSD,a._state=!1,a._value=b,k.call(a),!a._catched)try{a.onuncatched&&a.onuncatched(a._value),d.on.error.fire(a._value)}catch(e){}return d.PSD=c,a._catched}function k(){for(var a=0,b=this._deferreds.length;b>a;a++)e(this,this._deferreds[a]);this._deferreds=[]}function l(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function m(a,b,c,d){var e=!1;try{b(function(a){e||(e=!0,c(a))},function(b){return e?a._catched:(e=!0,d(b))})}catch(f){if(e)return;return d(f)}}var n=[].slice,o="undefined"==typeof setImmediate?function(b){var c=arguments;setTimeout(function(){b.apply(a,n.call(c,1))},0)}:setImmediate,p=o,q=!0,r=[];return d.on=s(null,"error"),d.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&Array.isArray(arguments[0])?arguments[0]:arguments);return new d(function(b,c){function d(f,g){try{if(g&&("object"==typeof g||"function"==typeof g)){var h=g.then;if("function"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},d.prototype.then=function(a,b){var c=this,f=new d(function(d,f){null===c._state?e(c,new l(a,b,d,f)):p(e,c,new l(a,b,d,f))});return f._PSD=this._PSD,f.onuncatched=this.onuncatched,f._parent=this,f},d.prototype._then=function(a,b){e(this,new l(a,b,i,i))},d.prototype["catch"]=function(a){if(1===arguments.length)return this.then(null,a);var b=arguments[0],c=arguments[1];return"function"==typeof b?this.then(null,function(a){return a instanceof b?c(a):d.reject(a)}):this.then(null,function(a){return a&&a.name===b?c(a):d.reject(a)})},d.prototype["finally"]=function(a){return this.then(function(b){return a(),b},function(b){return a(),d.reject(b)})},d.prototype.onuncatched=null,d.resolve=function(a){var b=new d(function(){});return b._state=!0,b._value=a,b},d.reject=function(a){var b=new d(function(){});return b._state=!1,b._value=a,b},d.race=function(a){return new d(function(b,c){a.map(function(a){a.then(b,c)})})},d.PSD=null,d.newPSD=function(a){var b=d.PSD;d.PSD=b?Object.create(b):{};try{return a()}finally{d.PSD=b}},d._rootExec=f,d}();f(L).from(Error),h.delete=function(a){var b=new h(a),c=b.delete();return c.onblocked=function(a){return b.on("blocked",a),this},c},h.getDatabaseNames=function(a){return new O(function(a,b){var c=N();if(c){var d=c();d.onsuccess=function(b){a([].slice.call(b.target.result,0))},d.onerror=F(b)}else I(function(b){return a(b),!1})}).then(a)},h.defineClass=function(a){function b(a){a&&e(this,a)}return E(b.prototype,a),b},h.spawn=function(a){return O.newPSD(function(){return O.PSD.trans=null,a()})},h.vip=function(a){return O.newPSD(function(){return O.PSD.letThrough=!0,a()})},Object.defineProperty(h,"currentTransaction",{get:function(){return O.PSD&&O.PSD.trans||null}}),h.Promise=O,h.derive=f,h.extend=e,h.override=g,h.events=s,h.getByKeyPath=x,h.setByKeyPath=y,h.delByKeyPath=z,h.shallowClone=A,h.deepClone=B,h.addons=[],h.fakeAutoComplete=v,h.asap=u,h.ModifyError=L,h.MultiModifyError=L,h.IndexSpec=J,h.TableSchema=K;var P=a.idbModules&&a.idbModules.shimIndexedDB?a.idbModules:{};h.dependencies={indexedDB:P.shimIndexedDB||a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:P.IDBKeyRange||a.IDBKeyRange||a.webkitIDBKeyRange,IDBTransaction:P.IDBTransaction||a.IDBTransaction||a.webkitIDBTransaction,Error:a.Error||String,SyntaxError:a.SyntaxError||String,TypeError:a.TypeError||String,DOMError:a.DOMError||String,localStorage:null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:a.localStorage},h.version=1.04,b("Dexie",h)}.apply(this,"undefined"==typeof module||"undefined"!=typeof window&&this==self?[self,function(a,b){self[a]=b},!0]:[global,function(a,b){module.exports=b},!1]),function(a,b,c,d){"use strict";function e(){}function f(a,b){return a===e?b:function(){var c=a.apply(this,arguments);if(c&&"function"==typeof c.then){var d=this,e=arguments;return c.then(function(){return b.apply(d,e)})}return b.apply(this,arguments)}}var g=Dexie.defineClass({rev:Number,source:String,table:String,key:Object,type:Number,obj:Object,mods:Object,oldObj:Object}),h=Dexie.override,i=Dexie.Promise,j=!1;Dexie.Observable=function(b){function c(a){Dexie.Observable.latestRevision[b.name]<a&&(Dexie.Observable.latestRevision[b.name]=a,Dexie.spawn(function(){Dexie.Observable.on("latestRevisionIncremented").fire(b.name,a)}),A.setItem("Dexie.Observable/latestRevision/"+b.name,a))}function k(a){var b=a.name;a.hook("creating").subscribe(function(c,e,f){var g=d;return c===d&&a.schema.primKey.uuid&&(c=g=Dexie.createUUID()),this.onsuccess=function(a){f.tables._changes.add({source:f.source||null,table:b,key:a,type:x,obj:e}).then(function(a){f._lastWrittenRevision=a})},g}),a.hook("updating").subscribe(function(a,c,d,e){this.onsuccess=function(f){var g=Dexie.deepClone(a);for(var h in g)"undefined"==typeof g[h]&&(g[h]=null);e.tables._changes.add({source:e.source||null,table:b,key:c,type:y,mods:g,oldObj:d,obj:f}).then(function(a){e._lastWrittenRevision=a})}}),a.hook("deleting").subscribe(function(a,c,d){this.onsuccess=function(){d.tables._changes.add({source:d.source||null,table:b,key:a,type:z,oldObj:c}).then(function(a){d._lastWrittenRevision=a})}})}function l(a,c){if(a===b.name){if(E>=c)return;E=c,Dexie.vip(function(){m(c)})}}function m(c,d,e){if(!d&&m.ongoingOperation)return m.ongoingOperation;var f=!1,g=C;if(!g)return i.reject("Database closed");var h=b._changes.where("rev").above(g.myRevision).limit(1e3).toArray(function(a){if(a.length>0){var c=a[a.length-1];f=1e3==a.length,a.forEach(function(a){var c=b.table(a.table);a.obj&&(a.obj=c.hook.reading.fire(a.obj)),a.oldObj&&(a.oldObj=c.hook.reading.fire(a.oldObj))}),b.on("changes").fire(a,f),g.myRevision=c.rev}else e&&b.on("changes").fire([],!1);return b.table("_syncNodes").update(g,{lastHeartBeat:Date.now(),deleteTimeStamp:null})}).then(function(c){if(!c)throw j?new Error("Browser is shutting down"):(b.close(),alert("Out of sync"),a.location.reload(!0),new Error("Out of sync"));return f||Dexie.Observable.latestRevision[b.name]>g.myRevision?m(Dexie.Observable.latestRevision[b.name],(d||0)+1,f):void 0}).finally(function(){delete m.ongoingOperation});return d||(m.ongoingOperation=h),h}function n(){D=null;var a=C.id;Dexie.vip(function(){m(Dexie.Observable.latestRevision[b.name]).then(o).then(r).finally(function(){C&&C.id===a&&(D=setTimeout(n,w))})})}function o(){var a=C;return a?b.transaction("rw","_syncNodes","_changes","_intercomm",function(){var c=!1;b._syncNodes.where("lastHeartBeat").below(Date.now()-u).and(function(a){return"local"===a.type}).modify(function(d){d.deleteTimeStamp&&d.deleteTimeStamp<Date.now()?(delete this.value,A.removeItem("Dexie.Observable/deadnode:"+d.id+"/"+b.name),d.isMaster&&(b._syncNodes.update(a,{isMaster:1}),c=!0),b._intercomm.where("destinationNode").equals(d.id).modify(function(a){delete this.value,a.wantReply&&Dexie.spawn(function(){s(a)})})):d.deleteTimeStamp||(d.deleteTimeStamp=Date.now()+v)}).then(function(){return b._syncNodes.orderBy("myRevision").first(function(a){return b._changes.where("rev").below(a.myRevision).delete()})}).then(function(){return b.on("cleanup").fire(c)})}):i.reject("Database closed")}function p(){C&&(j=!0,C.deleteTimeStamp=1,C.lastHeartBeat=0,b._syncNodes.put(C),Dexie.Observable.wereTheOneDying=!0,A.setItem("Dexie.Observable/deadnode:"+C.id.toString()+"/"+b.name,"dead"))}function q(a,c){a!==b.name||Dexie.Observable.wereTheOneDying||Dexie.vip(function(){b._syncNodes.update(c,{deleteTimeStamp:1,lastHeartBeat:0}).then(o)})}function r(){return C?b.table("_intercomm").where("destinationNode").equals(C.id).modify(function(a){delete this.value,Dexie.spawn(function(){s(a)})}):i.reject("Database closed")}function s(a){if("response"===a.type){var c=F[a.requestId.toString()];c&&(a.isFailure?c.reject(a.message.error):c.resolve(a.message.result),delete F[a.requestId.toString()])}else{a.resolve=function(c){b.sendMessage("response",{result:c},a.sender,{requestId:a.id})},a.reject=function(c){b.sendMessage("response",{error:c.toString()},a.sender,{isFailure:!0,requestId:a.id})};var d=a.message;delete a.message,Dexie.extend(a,d),b.on.message.fire(a)}}function t(a){a===b.name&&r()}var u=2e4,v=2e4,w=2e3,x=1,y=2,z=3,A=Dexie.Observable.localStorageImpl,B=Dexie.defineClass({myRevision:Number,type:String,lastHeartBeat:Number,deleteTimeStamp:Number,url:String,isMaster:Number,syncProtocol:String,syncContext:null,syncOptions:Object,connected:!1,status:Number,appliedRemoteRevision:null,remoteBaseRevisions:[{local:Number,remote:null}],dbUploadState:{tablesToUpload:[String],currentTable:String,currentKey:null,localBaseRevision:Number}}),C=null;Object.defineProperty(b,"_localSyncNode",{get:function(){return C}});var D=null;Dexie.fakeAutoComplete(function(){b.version(1).stores({_syncNodes:"++id,myRevision,lastHeartBeat",_changes:"++rev",_intercomm:"++id,destinationNode",_uncommittedChanges:"++id,node"}),b._syncNodes.mapToClass(B),b._changes.mapToClass(g),C=new B({myRevision:0,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null})}),b.Version.prototype._parseStoresSpec=h(b.Version.prototype._parseStoresSpec,function(a){return function(b,c){b._changes="++rev",b._syncNodes="++id,myRevision,lastHeartBeat,url,isMaster,type,status",b._intercomm="++id,destinationNode",b._uncommittedChanges="++id,node",a.call(this,b,c),Object.keys(c).forEach(function(a){var b=c[a];0==b.primKey.name.indexOf("$$")&&(b.primKey.uuid=!0,b.primKey.name=b.primKey.name.substr(2),b.primKey.keyPath=b.primKey.keyPath.substr(2))}),Object.keys(c).forEach(function(a){0!=a.indexOf("_")&&0!=a.indexOf("$")&&(c[a].observable=!0)})}}),b._tableFactory=h(b._tableFactory,function(a){return function(c,d,e){var f=a.apply(this,arguments);return f.schema.observable&&e===b._transPromiseFactory&&k(f),"_syncNodes"===f.name&&e===b._transPromiseFactory&&f.mapToClass(B),f}}),b.on.addEventType({changes:"asap",cleanup:[f,e],message:"asap"}),b._createTransaction=h(b._createTransaction,function(a){return function(b,d,e,f){var g=!1;"readwrite"===b&&d.some(function(a){return e[a]&&e[a].observable})&&(g=!0,d=d.slice(0),-1===d.indexOf("_changes")&&d.push("_changes"));var h=a.call(this,b,d,e,f);return g&&(h._lastWrittenRevision=0,h.on("complete",function(){if(h._lastWrittenRevision)if(f){var a=function b(a){return a.parent?b(a.parent):a}(f);a._lastWrittenRevision=Math.max(h._lastWrittenRevision,a.lastWrittenRevision||0)}else c.timeoutHandle&&clearTimeout(c.timeoutHandle),c.timeoutHandle=setTimeout(function(){delete c.timeoutHandle,c(h._lastWrittenRevision)},25)}),h.parent&&h.parent.source&&(h.source=h.parent.source)),h}}),Dexie.Observable.latestRevision[b.name]=Dexie.Observable.latestRevision[b.name]||0,b.close=h(b.close,function(a){return function(){return c.timeoutHandle&&(clearTimeout(c.timeoutHandle),delete c.timeoutHandle),Dexie.Observable.on("latestRevisionIncremented").unsubscribe(l),Dexie.Observable.on("suicideNurseCall").unsubscribe(q),Dexie.Observable.on("intercomm").unsubscribe(t),Dexie.Observable.on("beforeunload").unsubscribe(p),C&&C.id&&(Dexie.Observable.on.suicideNurseCall.fire(b.name,C.id),A.setItem("Dexie.Observable/deadnode:"+C.id.toString()+"/"+b.name,"dead"),C.deleteTimeStamp=1,C.lastHeartBeat=0,b._syncNodes.put(C),C=null),D&&clearTimeout(D),D=null,a.apply(this,arguments)}}),b.delete=h(b.delete,function(a){return function(){return a.apply(this,arguments).then(function(a){return Dexie.Observable.latestRevision[b.name]=0,a})}}),b.on("ready",function(){return b.table("_changes").orderBy("rev").last(function(a){var c=a?a.rev:0;return C=new B({myRevision:c,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null,isMaster:0}),Dexie.Observable.latestRevision[b.name]<c&&(Dexie.Observable.latestRevision[b.name]=c,Dexie.spawn(function(){Dexie.Observable.on.latestRevisionIncremented.fire(c)})),b.transaction("rw","_syncNodes",function(){b._syncNodes.where("isMaster").equals(1).count(function(a){a||(C.isMaster=1),b._syncNodes.add(C).then(function(){Dexie.Observable.on("latestRevisionIncremented",l),Dexie.Observable.on("beforeunload",p),Dexie.Observable.on("suicideNurseCall",q),Dexie.Observable.on("intercomm",t),D=setTimeout(n,w)})})}).then(o)})},!0);var E=0,F={};b.sendMessage=function(a,c,d,e){if(!C)return i.reject("Database closed");e=e||{};var f={message:c,destinationNode:d,sender:C.id,type:a};Dexie.extend(f,e);var g=["_intercomm"];return e.wantReply&&g.push("_syncNodes"),b.transaction("rw",g,function(){function a(a){return b._intercomm.add(a).then(function(a){return A.setItem("Dexie.Observable/intercomm/"+b.name,a.toString()),Dexie.spawn(function(){Dexie.Observable.on.intercomm.fire(b.name)}),e.wantReply?new i(function(b,c){F[a.toString()]={resolve:b,reject:c}}):void 0})}return e.wantReply?b._syncNodes.where("id").equals(d).count(function(c){return c?a(f):b._syncNodes.where("isMaster").above(0).first(function(b){return f.destinationNode=b.id,a(f)})}):void a(f)})},b.broadcastMessage=function(a,c,d){if(!C)return i.reject("Database closed");var e=C.id;b._syncNodes.each(function(f){"local"!=f.type||!d&&f.id===e||b.sendMessage(a,c,f.id)})},b.observable={},b.observable.SyncNode=B};Dexie.Observable.latestRevision={},Dexie.Observable.on=Dexie.events(null,"latestRevisionIncremented","suicideNurseCall","intercomm","beforeunload"),Dexie.createUUID=function(){var a=Date.now(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:7&c|8).toString(16)});return b},Dexie.Observable._onStorage=function(a){if(0===a.key.indexOf("Dexie.Observable/")){var b=a.key.split("/"),c=b[1],d=b[2];if("latestRevision"===c){var e=parseInt(a.newValue,10);!isNaN(e)&&e>Dexie.Observable.latestRevision[d]&&(Dexie.Observable.latestRevision[d]=e,Dexie.spawn(function(){Dexie.Observable.on("latestRevisionIncremented").fire(d,e)}))}else if(0===c.indexOf("deadnode:")){var f=parseInt(c.split(":")[1],10);a.newValue&&Dexie.Observable.on.suicideNurseCall.fire(d,f)}else"intercomm"===c&&a.newValue&&Dexie.Observable.on.intercomm.fire(d)}},Dexie.Observable._onBeforeUnload=function(){Dexie.Observable.on.beforeunload.fire()},Dexie.Observable.localStorageImpl=a.localStorage,a.addEventListener("storage",Dexie.Observable._onStorage),a.addEventListener("beforeunload",Dexie.Observable._onBeforeUnload),Dexie.addons.push(Dexie.Observable)}.apply(this,"undefined"==typeof module||"undefined"!=typeof window&&this==window?[window,function(a,b){window[a]=b},!0]:[global,function(a,b){module.exports=b},!1]),function(){function a(a){a.Table.prototype.addObserver=function(a,b){var c=this._observers||(this._observers=[]),d=c.indexOf(b);if(-1===d&&c.push(b),a){var e=this;a.$on("$destroy",function(){e.removeObserver(b)})}},a.Table.prototype.removeObserver=function(a){var b=this._observers||(this._observers=[]),c=b.indexOf(a);-1!==c&&b.splice(c,1)},a.Table.prototype.notifyObservers=function(a){this._observers&&angular.forEach(this._observers,function(b){a(b)})}}Dexie.addons.push(a)}();var converters=function(){var a,b={},c=[];for(a=0;9>=a;++a){var d=a.toString();b[d]=a,c.push(d)}for(a=10;15>=a;++a){var e=String.fromCharCode("a".charCodeAt(0)+a-10),f=String.fromCharCode("A".charCodeAt(0)+a-10);b[e]=a,b[f]=a,c.push(e)}return{byteArrayToHexString:function(a){for(var b="",d=0;d<a.length;++d)a[d]<0&&(a[d]+=256),b+=c[a[d]>>4]+c[15&a[d]];return b},stringToByteArray:function(a){a=unescape(encodeURIComponent(a));for(var b=new Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b},hexStringToByteArray:function(a){var c=[],d=0;for(0!==a.length%2&&(c.push(b[a.charAt(0)]),++d);d<a.length-1;d+=2)c.push((b[a.charAt(d)]<<4)+b[a.charAt(d+1)]);return c},stringToHexString:function(a){return this.byteArrayToHexString(this.stringToByteArray(a))},hexStringToString:function(a){return this.byteArrayToString(this.hexStringToByteArray(a))},checkBytesToIntInput:function(a,b,c){var d=c||0;if(0>d)throw new Error("Start index should not be negative");if(a.length<d+b)throw new Error("Need at least "+b+" bytes to convert to an integer");return d},byteArrayToSignedShort:function(a,b){var c=this.checkBytesToIntInput(a,2,b),d=a[c];return d+=a[c+1]<<8},byteArrayToSignedInt32:function(a,b){var c=this.checkBytesToIntInput(a,4,b);return value=a[c],value+=a[c+1]<<8,value+=a[c+2]<<16,value+=a[c+3]<<24},byteArrayToBigInteger:function(a,b){for(var c,d,e=(this.checkBytesToIntInput(a,8,b),new BigInteger("0",10)),f=7;f>=0;f--)c=e.multiply(new BigInteger("256",10)),d=c.add(new BigInteger(a[b+f].toString(10),10)),e=d;return e},byteArrayToWordArray:function(a){for(var b=0,c=0,d=0,e=a.length,f=new Uint32Array((e/4|0)+(e%4==0?0:1));e-e%4>b;)f[c++]=a[b++]<<24|a[b++]<<16|a[b++]<<8|a[b++];e%4!=0&&(d=a[b++]<<24,e%4>1&&(d|=a[b++]<<16),e%4>2&&(d|=a[b++]<<8),f[c]=d);var g=new Object;return g.sigBytes=e,g.words=f,g},wordArrayToByteArray:function(a){var b=a.words.length;if(0==b)return new Array(0);var c,d,e=new Array(a.sigBytes),f=0;for(d=0;b-1>d;d++)c=a.words[d],e[f++]=c>>24,e[f++]=c>>16&255,e[f++]=c>>8&255,e[f++]=255&c;return c=a.words[b-1],e[f++]=c>>24,a.sigBytes%4==0&&(e[f++]=c>>16&255,e[f++]=c>>8&255,e[f++]=255&c),a.sigBytes%4>1&&(e[f++]=c>>16&255),a.sigBytes%4>2&&(e[f++]=c>>8&255),e},byteArrayToString:function(a,b,c){if(0==c)return"";if(b&&c){{this.checkBytesToIntInput(a,parseInt(c,10),parseInt(b,10))}a=a.slice(b,b+c)}return decodeURIComponent(escape(String.fromCharCode.apply(null,a)))},byteArrayToShortArray:function(a){var b,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;16>b;b++)c[b]=a[2*b]|a[2*b+1]<<8;return c},shortArrayToByteArray:function(a){var b,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(b=0;16>b;b++)c[2*b]=255&a[b],c[2*b+1]=a[b]>>8;return c},shortArrayToHexString:function(a){for(var b="",d=0;d<a.length;d++)b+=c[a[d]>>4&15]+c[15&a[d]]+c[a[d]>>12&15]+c[a[d]>>8&15];return b},intToBytes_:function(a,b,c,d){var e=Math.floor(c/2),f=-1*(e+1);if(a!=Math.floor(a)||f>a||a>c)throw new Error(a+" is not a "+8*b+" bit integer");var g,h=[],i=a>=0&&e>=a?0:a>e&&c>=a?1:2;2==i&&(a=-1*a-1);for(var j=0;b>j;j++)g=2==i?255-a%256:a%256,d?h.unshift(g):h.push(g),1==i?a=Math.floor(a/256):a>>=8;return h},int32ToBytes:function(a,b){return converters.intToBytes_(a,4,4294967295,b)}}}(),SHA256_buf=new Array,SHA256_len=0,SHA256_H=new Array;SHA256_hexchars=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"),SHA256_K=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298);var curve25519=function(){function a(a){a[31]&=127,a[31]|=64,a[0]&=248}function b(a,b){for(var c=0;32>c;c++)a[c]=b[c]}function c(a,b,c,d,e,f){c=0|c,e=0|e,f=0|f;for(var g=0,h=0;e>h;++h)g+=(255&b[h+c])+f*(255&d[h]),a[h+c]=255&g,g>>=8;
return g}function d(a,b,d,e,f){e=0|e,f=0|f;for(var g=31,h=0,i=0;e>i;i++){var j=f*(255&d[i]);h+=c(a,a,i,b,g,j)+(255&a[i+g])+j*(255&b[g]),a[i+g]=255&h,h>>=8}return a[i+g]=h+(255&a[i+g])&255,h>>8}function e(a,b,d,e,f){d=0|d,f=0|f;var g=0,h=(255&e[f-1])<<8;for(f>1&&(h|=255&e[f-2]);d-->=f;){var i=g<<16|(255&b[d])<<8;d>0&&(i|=255&b[d-1]);var j=d-f+1;i/=h,g+=c(b,b,j,e,f,-i),a[j]=i+g&255,c(b,b,j,e,f,-g),g=255&b[d],b[d]=0}b[f-1]=255&g}function f(a,b){for(;0!==b--&&0===a[b];);return b+1}function g(a,b,c,g){var h,i,j,k=32;for(j=0;32>j;j++)a[j]=b[j]=0;if(a[0]=1,h=f(c,32),0===h)return b;for(var l=new Array(32);;){if(i=k-h+1,e(l,g,k,c,h),k=f(g,k),0===k)return a;if(d(b,a,l,i,-1),i=h-k+1,e(l,c,h,g,k),h=f(c,h),0===h)return b;d(a,b,l,i,-1)}}function h(a,b){for(var c=0;G>c;c+=2)a[c/2]=255&b[c]|(255&b[c+1])<<8}function i(a){return a[0]>R-19&&(a[1]&a[3]&a[5]&a[7]&a[9])===Q&&(a[2]&a[4]&a[6]&a[8])===R||a[9]>Q}function j(a,b){for(var c=0;H>c;++c)b[2*c]=255&a[c],b[2*c+1]=(65280&a[c])>>8}function k(){return new Uint16Array(H)}function l(a,b){for(var c=0;H>c;++c)a[c]=b[c]}function m(a,b){a[0]=b;for(var c=1;H>c;++c)a[c]=0}function n(a,b,c){var d,e=k(),f=k(),g=k(),h=k(),i=k();for(W(f,b),W(g,f),W(e,g),V(g,e,b),V(e,g,f),W(f,e),V(h,f,g),W(f,h),W(g,f),W(f,g),W(g,f),W(f,g),V(g,f,h),W(f,g),W(h,f),d=1;5>d;d++)W(f,h),W(h,f);for(V(f,h,g),W(h,f),W(i,h),d=1;10>d;d++)W(h,i),W(i,h);for(V(h,i,f),d=0;5>d;d++)W(f,h),W(h,f);for(V(f,h,g),W(g,f),W(h,g),d=1;25>d;d++)W(g,h),W(h,g);for(V(g,h,f),W(h,g),W(i,h),d=1;50>d;d++)W(h,i),W(i,h);for(V(h,i,g),d=0;25>d;d++)W(i,h),W(h,i);V(g,h,f),W(f,g),W(g,f),0!==c?V(a,b,g):(W(f,g),W(g,f),W(f,g),V(a,f,e))}function o(a){var b=i(a)||a[9]<0,c=1&a[0];return 4294967295&((b?1:0)^c)}function p(a,b){var c=k(),d=k(),e=k();S(d,b,b),n(c,d,1),W(a,c),V(e,d,a),T(e,e,M),V(d,c,e),V(a,b,d)}function q(a,b,c,d,e,f,g,h){var i,j=[];return j[0]=65535&(i=h*h),j[1]=65535&(i=(i/65536|0)+2*h*g),j[2]=65535&(i=(i/65536|0)+2*h*f+g*g),j[3]=65535&(i=(i/65536|0)+2*h*e+2*g*f),j[4]=65535&(i=(i/65536|0)+2*h*d+2*g*e+f*f),j[5]=65535&(i=(i/65536|0)+2*h*c+2*g*d+2*f*e),j[6]=65535&(i=(i/65536|0)+2*h*b+2*g*c+2*f*d+e*e),j[7]=65535&(i=(i/65536|0)+2*h*a+2*g*b+2*f*c+2*e*d),j[8]=65535&(i=(i/65536|0)+2*g*a+2*f*b+2*e*c+d*d),j[9]=65535&(i=(i/65536|0)+2*f*a+2*e*b+2*d*c),j[10]=65535&(i=(i/65536|0)+2*e*a+2*d*b+c*c),j[11]=65535&(i=(i/65536|0)+2*d*a+2*c*b),j[12]=65535&(i=(i/65536|0)+2*c*a+b*b),j[13]=65535&(i=(i/65536|0)+2*b*a),j[14]=65535&(i=(i/65536|0)+a*a),j[15]=i/65536|0,j}function r(a,b){var c,d=q(b[15],b[14],b[13],b[12],b[11],b[10],b[9],b[8]),e=q(b[7],b[6],b[5],b[4],b[3],b[2],b[1],b[0]),f=q(b[15]+b[7],b[14]+b[6],b[13]+b[5],b[12]+b[4],b[11]+b[3],b[10]+b[2],b[9]+b[1],b[8]+b[0]);a[0]=65535&(c=8388608+e[0]+38*(f[8]-d[8]-e[8]+d[0]-128)),a[1]=65535&(c=8388480+(c/65536|0)+e[1]+38*(f[9]-d[9]-e[9]+d[1])),a[2]=65535&(c=8388480+(c/65536|0)+e[2]+38*(f[10]-d[10]-e[10]+d[2])),a[3]=65535&(c=8388480+(c/65536|0)+e[3]+38*(f[11]-d[11]-e[11]+d[3])),a[4]=65535&(c=8388480+(c/65536|0)+e[4]+38*(f[12]-d[12]-e[12]+d[4])),a[5]=65535&(c=8388480+(c/65536|0)+e[5]+38*(f[13]-d[13]-e[13]+d[5])),a[6]=65535&(c=8388480+(c/65536|0)+e[6]+38*(f[14]-d[14]-e[14]+d[6])),a[7]=65535&(c=8388480+(c/65536|0)+e[7]+38*(f[15]-d[15]-e[15]+d[7])),a[8]=65535&(c=8388480+(c/65536|0)+e[8]+f[0]-d[0]-e[0]+38*d[8]),a[9]=65535&(c=8388480+(c/65536|0)+e[9]+f[1]-d[1]-e[1]+38*d[9]),a[10]=65535&(c=8388480+(c/65536|0)+e[10]+f[2]-d[2]-e[2]+38*d[10]),a[11]=65535&(c=8388480+(c/65536|0)+e[11]+f[3]-d[3]-e[3]+38*d[11]),a[12]=65535&(c=8388480+(c/65536|0)+e[12]+f[4]-d[4]-e[4]+38*d[12]),a[13]=65535&(c=8388480+(c/65536|0)+e[13]+f[5]-d[5]-e[5]+38*d[13]),a[14]=65535&(c=8388480+(c/65536|0)+e[14]+f[6]-d[6]-e[6]+38*d[14]);var g=8388480+(c/65536|0)+e[15]+f[7]-d[7]-e[7]+38*d[15];u(a,g)}function s(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q,r=[];return r[0]=65535&(q=h*p),r[1]=65535&(q=(q/65536|0)+h*o+g*p),r[2]=65535&(q=(q/65536|0)+h*n+g*o+f*p),r[3]=65535&(q=(q/65536|0)+h*m+g*n+f*o+e*p),r[4]=65535&(q=(q/65536|0)+h*l+g*m+f*n+e*o+d*p),r[5]=65535&(q=(q/65536|0)+h*k+g*l+f*m+e*n+d*o+c*p),r[6]=65535&(q=(q/65536|0)+h*j+g*k+f*l+e*m+d*n+c*o+b*p),r[7]=65535&(q=(q/65536|0)+h*i+g*j+f*k+e*l+d*m+c*n+b*o+a*p),r[8]=65535&(q=(q/65536|0)+g*i+f*j+e*k+d*l+c*m+b*n+a*o),r[9]=65535&(q=(q/65536|0)+f*i+e*j+d*k+c*l+b*m+a*n),r[10]=65535&(q=(q/65536|0)+e*i+d*j+c*k+b*l+a*m),r[11]=65535&(q=(q/65536|0)+d*i+c*j+b*k+a*l),r[12]=65535&(q=(q/65536|0)+c*i+b*j+a*k),r[13]=65535&(q=(q/65536|0)+b*i+a*j),r[14]=65535&(q=(q/65536|0)+a*i),r[15]=q/65536|0,r}function t(a,b,c){var d,e=s(b[15],b[14],b[13],b[12],b[11],b[10],b[9],b[8],c[15],c[14],c[13],c[12],c[11],c[10],c[9],c[8]),f=s(b[7],b[6],b[5],b[4],b[3],b[2],b[1],b[0],c[7],c[6],c[5],c[4],c[3],c[2],c[1],c[0]),g=s(b[15]+b[7],b[14]+b[6],b[13]+b[5],b[12]+b[4],b[11]+b[3],b[10]+b[2],b[9]+b[1],b[8]+b[0],c[15]+c[7],c[14]+c[6],c[13]+c[5],c[12]+c[4],c[11]+c[3],c[10]+c[2],c[9]+c[1],c[8]+c[0]);a[0]=65535&(d=8388608+f[0]+38*(g[8]-e[8]-f[8]+e[0]-128)),a[1]=65535&(d=8388480+(d/65536|0)+f[1]+38*(g[9]-e[9]-f[9]+e[1])),a[2]=65535&(d=8388480+(d/65536|0)+f[2]+38*(g[10]-e[10]-f[10]+e[2])),a[3]=65535&(d=8388480+(d/65536|0)+f[3]+38*(g[11]-e[11]-f[11]+e[3])),a[4]=65535&(d=8388480+(d/65536|0)+f[4]+38*(g[12]-e[12]-f[12]+e[4])),a[5]=65535&(d=8388480+(d/65536|0)+f[5]+38*(g[13]-e[13]-f[13]+e[5])),a[6]=65535&(d=8388480+(d/65536|0)+f[6]+38*(g[14]-e[14]-f[14]+e[6])),a[7]=65535&(d=8388480+(d/65536|0)+f[7]+38*(g[15]-e[15]-f[15]+e[7])),a[8]=65535&(d=8388480+(d/65536|0)+f[8]+g[0]-e[0]-f[0]+38*e[8]),a[9]=65535&(d=8388480+(d/65536|0)+f[9]+g[1]-e[1]-f[1]+38*e[9]),a[10]=65535&(d=8388480+(d/65536|0)+f[10]+g[2]-e[2]-f[2]+38*e[10]),a[11]=65535&(d=8388480+(d/65536|0)+f[11]+g[3]-e[3]-f[3]+38*e[11]),a[12]=65535&(d=8388480+(d/65536|0)+f[12]+g[4]-e[4]-f[4]+38*e[12]),a[13]=65535&(d=8388480+(d/65536|0)+f[13]+g[5]-e[5]-f[5]+38*e[13]),a[14]=65535&(d=8388480+(d/65536|0)+f[14]+g[6]-e[6]-f[6]+38*e[14]);var h=8388480+(d/65536|0)+f[15]+g[7]-e[7]-f[7]+38*e[15];u(a,h)}function u(a,b){var c=b;a[15]=32767&c,c=19*(c/32768|0);for(var d=0;14>=d;++d)a[d]=65535&(c+=a[d]),c=c/65536|0;a[15]+=c}function v(a,b,c){var d;a[0]=65535&(d=19*((b[15]/32768|0)+(c[15]/32768|0))+b[0]+c[0]);for(var e=1;14>=e;++e)a[e]=65535&(d=(d/65536|0)+b[e]+c[e]);a[15]=(d/65536|0)+(32767&b[15])+(32767&c[15])}function w(a,b,c){var d;a[0]=65535&(d=524288+19*((b[15]/32768|0)-(c[15]/32768|0)-1)+b[0]-c[0]);for(var e=1;14>=e;++e)a[e]=65535&(d=(d/65536|0)+524280+b[e]-c[e]);a[15]=(d/65536|0)+32760+(32767&b[15])-(32767&c[15])}function x(a,b,c){var d;a[0]=65535&(d=b[0]*c);for(var e=1;14>=e;++e)a[e]=65535&(d=(d/65536|0)+b[e]*c);var f=(d/65536|0)+b[15]*c;u(a,f)}function y(a,b,c,d){S(a,c,d),T(b,c,d)}function z(a,b,c,d,e,f,g){V(e,b,c),V(f,a,d),S(a,e,f),T(b,e,f),W(e,a),W(a,b),V(f,a,g)}function A(a,b,c,d,e,f){W(a,c),W(b,d),V(e,a,b),T(b,a,b),U(f,b,121665),S(a,a,f),V(f,a,b)}function B(a,b,c){W(a,c),U(b,c,486662),S(a,a,b),S(a,a,M),V(b,a,c)}function C(a,d,e,f){var i,p,q=k(),r=k(),s=k(),t=k(),u=k(),v=[k(),k()],w=[k(),k()];for(null!==f?h(q,f):m(q,9),m(v[0],1),m(w[0],0),l(v[1],q),m(w[1],1),i=32;0!==i--;)for(p=8;0!==p--;){var x=(255&e[i])>>p&1,C=~(255&e[i])>>p&1,D=v[C],E=w[C],F=v[x],G=w[x];y(r,s,D,E),y(t,u,F,G),z(r,s,t,u,D,E,q),A(r,s,t,u,F,G)}if(n(r,w[0],0),V(q,v[0],r),j(q,a),null!==d){B(s,r,q),n(t,w[1],0),V(s,v[1],t),S(s,s,q),S(s,s,O),T(q,q,N),W(t,q),V(q,s,t),T(q,q,r),T(q,q,P),V(r,q,L),0!==o(r)?b(d,e):c(d,J,0,e,32,-1);var H=new Array(32),K=new Array(64),M=new Array(64);b(H,I),b(d,g(K,M,d,H)),0!==(128&d[31])&&c(d,d,0,I,32,1)}}function D(a,f,g){var h,i,j=new Array(32),k=new Array(32),l=new Array(64),m=new Array(64);b(j,a),b(k,f);var n=new Array(32);e(n,j,32,I,32),e(n,k,32,I,32);var o=new Array(32);for(c(o,k,0,j,32,-1),c(o,o,0,I,32,1),d(l,o,g,32,1),e(m,l,64,I,32),h=0,i=0;32>i;i++)h|=o[i]=l[i];return 0!==h?o:void 0}function E(a,b,c){var d,e,f,g=new Array(32),i=[k(),k()],q=[k(),k()],r=[k(),k(),k()],s=[k(),k(),k()],t=[k(),k(),k()],u=[k(),k(),k()],v=0,w=0,x=0,C=0;for(m(i[0],9),h(i[1],c),B(t[0],u[0],i[1]),p(t[0],u[0]),e=o(t[0]),S(u[0],u[0],P),V(u[1],K,t[0]),T(t[e],u[0],u[1]),S(t[1-e],u[0],u[1]),l(u[0],i[1]),T(u[0],u[0],N),W(u[1],u[0]),n(u[0],u[1],0),V(q[0],t[0],u[0]),T(q[0],q[0],i[1]),T(q[0],q[0],O),V(q[1],t[1],u[0]),T(q[1],q[1],i[1]),T(q[1],q[1],O),U(q[0],q[0],1),U(q[1],q[1],1),d=0;32>d;d++)v=v>>8^255&a[d]^(255&a[d])<<1,w=w>>8^255&b[d]^(255&b[d])<<1,C=~(v^w),x=C&(128&x)>>7^v,x^=C&(1&x)<<1,x^=C&(2&x)<<1,x^=C&(4&x)<<1,x^=C&(8&x)<<1,x^=C&(16&x)<<1,x^=C&(32&x)<<1,x^=C&(64&x)<<1,g[d]=255&x;for(x=(C&(128&x)<<1^v)>>8,m(r[0],1),l(r[1],i[x]),l(r[2],q[0]),m(s[0],0),m(s[1],1),m(s[2],1),v=0,w=0,d=32;0!==d--;)for(v=v<<8|255&a[d],w=w<<8|255&b[d],x=x<<8|255&g[d],e=8;0!==e--;)y(t[0],u[0],r[0],s[0]),y(t[1],u[1],r[1],s[1]),y(t[2],u[2],r[2],s[2]),f=((v^v>>1)>>e&1)+((w^w>>1)>>e&1),A(r[2],s[2],t[f],u[f],r[0],s[0]),f=x>>e&2^(x>>e&1)<<1,z(t[1],u[1],t[f],u[f],r[1],s[1],i[x>>e&1]),z(t[2],u[2],t[0],u[0],r[2],s[2],q[((v^w)>>e&2)>>1]);f=(1&v)+(1&w),n(t[0],s[f],0),V(t[1],r[f],t[0]);var D=[];return j(t[1],D),D}function F(b){var c=[],d=[];return b=b||[],a(b),C(c,d,b,null),{p:c,s:d,k:b}}var G=32,H=16,I=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16],J=[104,159,174,231,210,24,147,192,178,230,188,23,245,206,247,166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128],K=[22587,610,29883,44076,15515,9479,25859,56197,23910,4462,17831,16322,62102,36542,52412,16035],L=[5744,16384,61977,54121,8776,18501,26522,34893,23833,5823,55924,58749,24147,14085,13606,6080],M=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N=[9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=[27919,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0],P=[33224,601,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Q=33554431,R=67108863,S=v,T=w,U=x,V=t,W=r;return{sign:D,verify:E,keygen:F}}();curve25519_zero=function(){return[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},curve25519_one=function(){return[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},curve25519_two=function(){return[2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},curve25519_nine=function(){return[9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},curve25519_486671=function(){return[27919,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},curve25519_39420360=function(){return[33224,601,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},curve25519_r2y=function(){return[5744,16384,61977,54121,8776,18501,26522,34893,23833,5823,55924,58749,24147,14085,13606,6080]},curve25519_2y=function(){return[22587,610,29883,44076,15515,9479,25859,56197,23910,4462,17831,16322,62102,36542,52412,16035]},curve25519_clamp=function(a){return a[0]&=65528,a[15]&=32767,a[15]|=16384,a},curve25519_getbit=function(a,b){return~~(a[~~(b/16)]/Math.pow(2,b%16))%2},curve25519_prime=[65517,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,65535,32767],curve25519_order=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16],curve25519_order_times_8=[104,159,174,231,210,24,147,192,178,230,188,23,245,206,247,166,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,128],curve25519_convertToByteArray=function(a){var b,c=new Int8Array(32);for(b=0;16>b;b++)c[2*b]=255&a[b],c[2*b+1]=a[b]>>8;return c},curve25519_convertToShortArray=function(a){var b,c,d,e=new Array(16);for(b=0;16>b;b++)c=a[2*b],0>c&&(c+=256),d=a[2*b+1],0>d&&(d+=256),e[b]=c+256*d;return e},curve25519_fillShortArray=function(a,b){var c;for(c=0;16>c;c++)b[c]=a[c]},curve25519_fillByteArray=function(a,b){var c;for(c=0;32>c;c++)b[c]=a[c]},curve25519_log16=function(a,b){var c=shortArray_to_hex_string(b);addText(a+c)},curve25519_log32=function(a,b){var c=byteArray_to_hex_string(b);addText(a+c)},curve25519_cpy32=function(a){var b=new Int8Array(32);for(i=0;32>i;i++)b[i]=a[i];return b},curve25519_mula_small=function(a,b,c,d,e,f){var g=0;for(j=0;e>j;++j)g+=(255&b[j+c])+f*(255&d[j]),a[j+c]=255&g,g>>=8;return g},curve25519_mula32=function(a,b,c,d,e){var f=31,g=0;for(i=0;d>i;i++)zy=e*(255&c[i]),g+=curve25519_mula_small(a,a,i,b,f,zy)+(255&a[i+f])+zy*(255&b[f]),a[i+f]=255&g,g>>=8;return a[i+f]=g+(255&a[i+f])&255,g>>8},curve25519_divmod=function(a,b,c,d,e){var f=0,g=0,h=(255&d[e-1])<<8;for(e>1&&(h|=255&d[e-2]);c-->=e;)g=f<<16|(255&b[c])<<8,c>0&&(g|=255&b[c-1]),g=parseInt(g/h),f+=curve25519_mula_small(b,b,c-e+1,d,e,-g),a[c-e+1]=g+f&255,curve25519_mula_small(b,b,c-e+1,d,e,-f),f=255&b[c],b[c]=0;b[e-1]=255&f},curve25519_numsize=function(a,b){for(;0!=b--&&0==a[b];);return b+1},curve25519_egcd32=function(a,b,c,d){var e=0,f=32,g=0,h=0;for(h=0;32>h;h++)a[h]=b[h]=0;if(a[0]=1,e=curve25519_numsize(c,32),0==e)return b;for(temp=new Int8Array(32);;){if(g=f-e+1,curve25519_divmod(temp,d,f,c,e),f=curve25519_numsize(d,f),0==f)return a;if(curve25519_mula32(b,a,temp,g,-1),g=e-f+1,curve25519_divmod(temp,c,e,d,f),e=curve25519_numsize(c,e),0==e)return b;curve25519_mula32(a,b,temp,g,-1)}},curve25519_compare=function(a,b){var c;for(c=15;c>=0;c--){var d=a[c],e=b[c];if(d>e)return 1;if(e>d)return-1}return 0},curve25519_cpy16=function(a){var b,c=new Array(16);for(b=0;16>b;b++)c[b]=a[b];return c},curve25519_isNegative=function(a){return 1&a[0]},curve25519_isOverflow=function(a){if(a[15]>=32768)return 1;if(a[0]>=65536){var b;for(b=1;15>b;b++)if(a[b]<65535)return 0;return 1}return 0},curve25519_sqr8h=function(a,b,c,d,e,f,g,h,i){var j=0;a[0]=65535&(j=i*i),a[1]=65535&(j=~~(j/65536)+2*i*h),a[2]=65535&(j=~~(j/65536)+2*i*g+h*h),a[3]=65535&(j=~~(j/65536)+2*i*f+2*h*g),a[4]=65535&(j=~~(j/65536)+2*i*e+2*h*f+g*g),a[5]=65535&(j=~~(j/65536)+2*i*d+2*h*e+2*g*f),a[6]=65535&(j=~~(j/65536)+2*i*c+2*h*d+2*g*e+f*f),a[7]=65535&(j=~~(j/65536)+2*i*b+2*h*c+2*g*d+2*f*e),a[8]=65535&(j=~~(j/65536)+2*h*b+2*g*c+2*f*d+e*e),a[9]=65535&(j=~~(j/65536)+2*g*b+2*f*c+2*e*d),a[10]=65535&(j=~~(j/65536)+2*f*b+2*e*c+d*d),a[11]=65535&(j=~~(j/65536)+2*e*b+2*d*c),a[12]=65535&(j=~~(j/65536)+2*d*b+c*c),a[13]=65535&(j=~~(j/65536)+2*c*b),a[14]=65535&(j=~~(j/65536)+b*b),a[15]=~~(j/65536)},curve25519_sqrmodp=function(a,b){var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_sqr8h(c,b[15],b[14],b[13],b[12],b[11],b[10],b[9],b[8]),curve25519_sqr8h(e,b[7],b[6],b[5],b[4],b[3],b[2],b[1],b[0]),curve25519_sqr8h(d,b[15]+b[7],b[14]+b[6],b[13]+b[5],b[12]+b[4],b[11]+b[3],b[10]+b[2],b[9]+b[1],b[8]+b[0]);var f=0;a[0]=65535&(f=8388608+e[0]+38*(d[8]-c[8]-e[8]+c[0]-128)),a[1]=65535&(f=8388480+~~(f/65536)+e[1]+38*(d[9]-c[9]-e[9]+c[1])),a[2]=65535&(f=8388480+~~(f/65536)+e[2]+38*(d[10]-c[10]-e[10]+c[2])),a[3]=65535&(f=8388480+~~(f/65536)+e[3]+38*(d[11]-c[11]-e[11]+c[3])),a[4]=65535&(f=8388480+~~(f/65536)+e[4]+38*(d[12]-c[12]-e[12]+c[4])),a[5]=65535&(f=8388480+~~(f/65536)+e[5]+38*(d[13]-c[13]-e[13]+c[5])),a[6]=65535&(f=8388480+~~(f/65536)+e[6]+38*(d[14]-c[14]-e[14]+c[6])),a[7]=65535&(f=8388480+~~(f/65536)+e[7]+38*(d[15]-c[15]-e[15]+c[7])),a[8]=65535&(f=8388480+~~(f/65536)+e[8]+d[0]-c[0]-e[0]+38*c[8]),a[9]=65535&(f=8388480+~~(f/65536)+e[9]+d[1]-c[1]-e[1]+38*c[9]),a[10]=65535&(f=8388480+~~(f/65536)+e[10]+d[2]-c[2]-e[2]+38*c[10]),a[11]=65535&(f=8388480+~~(f/65536)+e[11]+d[3]-c[3]-e[3]+38*c[11]),a[12]=65535&(f=8388480+~~(f/65536)+e[12]+d[4]-c[4]-e[4]+38*c[12]),a[13]=65535&(f=8388480+~~(f/65536)+e[13]+d[5]-c[5]-e[5]+38*c[13]),a[14]=65535&(f=8388480+~~(f/65536)+e[14]+d[6]-c[6]-e[6]+38*c[14]),a[15]=8388480+~~(f/65536)+e[15]+d[7]-c[7]-e[7]+38*c[15],curve25519_reduce(a)},curve25519_mul8h=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=0;a[0]=65535&(r=i*q),a[1]=65535&(r=~~(r/65536)+i*p+h*q),a[2]=65535&(r=~~(r/65536)+i*o+h*p+g*q),a[3]=65535&(r=~~(r/65536)+i*n+h*o+g*p+f*q),a[4]=65535&(r=~~(r/65536)+i*m+h*n+g*o+f*p+e*q),a[5]=65535&(r=~~(r/65536)+i*l+h*m+g*n+f*o+e*p+d*q),a[6]=65535&(r=~~(r/65536)+i*k+h*l+g*m+f*n+e*o+d*p+c*q),a[7]=65535&(r=~~(r/65536)+i*j+h*k+g*l+f*m+e*n+d*o+c*p+b*q),a[8]=65535&(r=~~(r/65536)+h*j+g*k+f*l+e*m+d*n+c*o+b*p),a[9]=65535&(r=~~(r/65536)+g*j+f*k+e*l+d*m+c*n+b*o),a[10]=65535&(r=~~(r/65536)+f*j+e*k+d*l+c*m+b*n),a[11]=65535&(r=~~(r/65536)+e*j+d*k+c*l+b*m),a[12]=65535&(r=~~(r/65536)+d*j+c*k+b*l),a[13]=65535&(r=~~(r/65536)+c*j+b*k),a[14]=65535&(r=~~(r/65536)+b*j),a[15]=~~(r/65536)},curve25519_mulmodp=function(a,b,c){var d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_mul8h(d,b[15],b[14],b[13],b[12],b[11],b[10],b[9],b[8],c[15],c[14],c[13],c[12],c[11],c[10],c[9],c[8]),curve25519_mul8h(f,b[7],b[6],b[5],b[4],b[3],b[2],b[1],b[0],c[7],c[6],c[5],c[4],c[3],c[2],c[1],c[0]),curve25519_mul8h(e,b[15]+b[7],b[14]+b[6],b[13]+b[5],b[12]+b[4],b[11]+b[3],b[10]+b[2],b[9]+b[1],b[8]+b[0],c[15]+c[7],c[14]+c[6],c[13]+c[5],c[12]+c[4],c[11]+c[3],c[10]+c[2],c[9]+c[1],c[8]+c[0]);var g=0;a[0]=65535&(g=8388608+f[0]+38*(e[8]-d[8]-f[8]+d[0]-128)),a[1]=65535&(g=8388480+~~(g/65536)+f[1]+38*(e[9]-d[9]-f[9]+d[1])),a[2]=65535&(g=8388480+~~(g/65536)+f[2]+38*(e[10]-d[10]-f[10]+d[2])),a[3]=65535&(g=8388480+~~(g/65536)+f[3]+38*(e[11]-d[11]-f[11]+d[3])),a[4]=65535&(g=8388480+~~(g/65536)+f[4]+38*(e[12]-d[12]-f[12]+d[4])),a[5]=65535&(g=8388480+~~(g/65536)+f[5]+38*(e[13]-d[13]-f[13]+d[5])),a[6]=65535&(g=8388480+~~(g/65536)+f[6]+38*(e[14]-d[14]-f[14]+d[6])),a[7]=65535&(g=8388480+~~(g/65536)+f[7]+38*(e[15]-d[15]-f[15]+d[7])),a[8]=65535&(g=8388480+~~(g/65536)+f[8]+e[0]-d[0]-f[0]+38*d[8]),a[9]=65535&(g=8388480+~~(g/65536)+f[9]+e[1]-d[1]-f[1]+38*d[9]),a[10]=65535&(g=8388480+~~(g/65536)+f[10]+e[2]-d[2]-f[2]+38*d[10]),a[11]=65535&(g=8388480+~~(g/65536)+f[11]+e[3]-d[3]-f[3]+38*d[11]),a[12]=65535&(g=8388480+~~(g/65536)+f[12]+e[4]-d[4]-f[4]+38*d[12]),a[13]=65535&(g=8388480+~~(g/65536)+f[13]+e[5]-d[5]-f[5]+38*d[13]),a[14]=65535&(g=8388480+~~(g/65536)+f[14]+e[6]-d[6]-f[6]+38*d[14]),a[15]=8388480+~~(g/65536)+f[15]+e[7]-d[7]-f[7]+38*d[15],curve25519_reduce(a)},curve25519_mulasmall=function(a,b,c){var d=0;a[0]=65535&(d=b[0]*c),a[1]=65535&(d=~~(d/65536)+b[1]*c),a[2]=65535&(d=~~(d/65536)+b[2]*c),a[3]=65535&(d=~~(d/65536)+b[3]*c),a[4]=65535&(d=~~(d/65536)+b[4]*c),a[5]=65535&(d=~~(d/65536)+b[5]*c),a[6]=65535&(d=~~(d/65536)+b[6]*c),a[7]=65535&(d=~~(d/65536)+b[7]*c),a[8]=65535&(d=~~(d/65536)+b[8]*c),a[9]=65535&(d=~~(d/65536)+b[9]*c),a[10]=65535&(d=~~(d/65536)+b[10]*c),a[11]=65535&(d=~~(d/65536)+b[11]*c),a[12]=65535&(d=~~(d/65536)+b[12]*c),a[13]=65535&(d=~~(d/65536)+b[13]*c),a[14]=65535&(d=~~(d/65536)+b[14]*c),a[15]=~~(d/65536)+b[15]*c,curve25519_reduce(a)},curve25519_addmodp=function(a,b,c){var d=0;a[0]=65535&(d=19*(~~(b[15]/32768)+~~(c[15]/32768))+b[0]+c[0]),a[1]=65535&(d=~~(d/65536)+b[1]+c[1]),a[2]=65535&(d=~~(d/65536)+b[2]+c[2]),a[3]=65535&(d=~~(d/65536)+b[3]+c[3]),a[4]=65535&(d=~~(d/65536)+b[4]+c[4]),a[5]=65535&(d=~~(d/65536)+b[5]+c[5]),a[6]=65535&(d=~~(d/65536)+b[6]+c[6]),a[7]=65535&(d=~~(d/65536)+b[7]+c[7]),a[8]=65535&(d=~~(d/65536)+b[8]+c[8]),a[9]=65535&(d=~~(d/65536)+b[9]+c[9]),a[10]=65535&(d=~~(d/65536)+b[10]+c[10]),a[11]=65535&(d=~~(d/65536)+b[11]+c[11]),a[12]=65535&(d=~~(d/65536)+b[12]+c[12]),a[13]=65535&(d=~~(d/65536)+b[13]+c[13]),a[14]=65535&(d=~~(d/65536)+b[14]+c[14]),a[15]=~~(d/65536)+b[15]%32768+c[15]%32768},curve25519_submodp=function(a,b,c){var d=0;a[0]=65535&(d=524288+19*(~~(b[15]/32768)-~~(c[15]/32768)-1)+b[0]-c[0]),a[1]=65535&(d=~~(d/65536)+524280+b[1]-c[1]),a[2]=65535&(d=~~(d/65536)+524280+b[2]-c[2]),a[3]=65535&(d=~~(d/65536)+524280+b[3]-c[3]),a[4]=65535&(d=~~(d/65536)+524280+b[4]-c[4]),a[5]=65535&(d=~~(d/65536)+524280+b[5]-c[5]),a[6]=65535&(d=~~(d/65536)+524280+b[6]-c[6]),a[7]=65535&(d=~~(d/65536)+524280+b[7]-c[7]),a[8]=65535&(d=~~(d/65536)+524280+b[8]-c[8]),a[9]=65535&(d=~~(d/65536)+524280+b[9]-c[9]),a[10]=65535&(d=~~(d/65536)+524280+b[10]-c[10]),a[11]=65535&(d=~~(d/65536)+524280+b[11]-c[11]),a[12]=65535&(d=~~(d/65536)+524280+b[12]-c[12]),a[13]=65535&(d=~~(d/65536)+524280+b[13]-c[13]),a[14]=65535&(d=~~(d/65536)+524280+b[14]-c[14]),a[15]=~~(d/65536)+32760+b[15]%32768-c[15]%32768},curve25519_invmodp=function(a,b,c){var d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;for(curve25519_sqrmodp(e,b),curve25519_sqrmodp(f,e),curve25519_sqrmodp(d,f),curve25519_mulmodp(f,d,b),curve25519_mulmodp(d,f,e),curve25519_sqrmodp(e,d),curve25519_mulmodp(g,e,f),curve25519_sqrmodp(e,g),curve25519_sqrmodp(f,e),curve25519_sqrmodp(e,f),curve25519_sqrmodp(f,e),curve25519_sqrmodp(e,f),curve25519_mulmodp(f,e,g),curve25519_sqrmodp(e,f),curve25519_sqrmodp(g,e),i=1;5>i;i++)curve25519_sqrmodp(e,g),curve25519_sqrmodp(g,e);for(curve25519_mulmodp(e,g,f),curve25519_sqrmodp(g,e),curve25519_sqrmodp(h,g),i=1;10>i;i++)curve25519_sqrmodp(g,h),curve25519_sqrmodp(h,g);for(curve25519_mulmodp(g,h,e),i=0;5>i;i++)curve25519_sqrmodp(e,g),curve25519_sqrmodp(g,e);for(curve25519_mulmodp(e,g,f),curve25519_sqrmodp(f,e),curve25519_sqrmodp(g,f),i=1;25>i;i++)curve25519_sqrmodp(f,g),curve25519_sqrmodp(g,f);for(curve25519_mulmodp(f,g,e),curve25519_sqrmodp(g,f),curve25519_sqrmodp(h,g),i=1;50>i;i++)curve25519_sqrmodp(g,h),curve25519_sqrmodp(h,g);for(curve25519_mulmodp(g,h,f),i=0;25>i;i++)curve25519_sqrmodp(h,g),curve25519_sqrmodp(g,h);curve25519_mulmodp(f,g,e),curve25519_sqrmodp(e,f),curve25519_sqrmodp(f,e),1==c?curve25519_mulmodp(a,b,f):(curve25519_sqrmodp(e,f),curve25519_sqrmodp(f,e),curve25519_sqrmodp(e,f),curve25519_mulmodp(a,e,d))},curve25519_sqrtmodp=function(a,b){var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_addmodp(c,b,b),curve25519_invmodp(d,c,1),curve25519_sqrmodp(e,d),curve25519_mulmodp(f,c,e),curve25519_submodp(a,f,curve25519_one()),curve25519_mulmodp(c,d,a),curve25519_mulmodp(a,b,c)},curve25519_reduce=function(a){if(curve25519_reduce2(a),!(32767!=a[15]||65535!=a[14]||65535!=a[13]||65535!=a[12]||65535!=a[11]||65535!=a[10]||65535!=a[9]||65535!=a[8]||65535!=a[7]||65535!=a[6]||65535!=a[5]||65535!=a[4]||65535!=a[3]||65535!=a[2]||65535!=a[1]||a[0]<65517)){var b;for(b=1;16>b;b++)a[b]=0;a[0]=a[0]-65517}},curve25519_reduce2=function(a){var b=a[15];32768>b||(a[15]=b%32768,b=19*~~(b/32768),a[0]=65535&(b+=a[0]),(b=~~(b/65536))<1||(a[1]=65535&(b+=a[1]),(b=~~(b/65536))<1||(a[2]=65535&(b+=a[2]),(b=~~(b/65536))<1||(a[3]=65535&(b+=a[3]),(b=~~(b/65536))<1||(a[4]=65535&(b+=a[4]),(b=~~(b/65536))<1||(a[5]=65535&(b+=a[5]),(b=~~(b/65536))<1||(a[6]=65535&(b+=a[6]),(b=~~(b/65536))<1||(a[7]=65535&(b+=a[7]),(b=~~(b/65536))<1||(a[8]=65535&(b+=a[8]),(b=~~(b/65536))<1||(a[9]=65535&(b+=a[9]),(b=~~(b/65536))<1||(a[10]=65535&(b+=a[10]),(b=~~(b/65536))<1||(a[11]=65535&(b+=a[11]),(b=~~(b/65536))<1||(a[12]=65535&(b+=a[12]),(b=~~(b/65536))<1||(a[13]=65535&(b+=a[13]),(b=~~(b/65536))<1||(a[14]=65535&(b+=a[14]),(b=~~(b/65536))<1||(a[15]+=b))))))))))))))))},curve25519_x_to_y2=function(a,b){var c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_sqrmodp(c,b),curve25519_mulasmall(d,b,486662),curve25519_addmodp(a,c,d),curve25519_addmodp(c,a,curve25519_one()),curve25519_mulmodp(a,c,b)},curve25519_prep=function(a,b,c,d){curve25519_addmodp(a,c,d),curve25519_submodp(b,c,d)},curve25519_dbl=function(a,b,c,d){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];curve25519_sqrmodp(e,c),curve25519_sqrmodp(f,d),curve25519_submodp(g,e,f),curve25519_mulmodp(a,f,e),curve25519_mulasmall(f,g,121665),curve25519_addmodp(h,f,e),curve25519_mulmodp(b,h,g)},curve25519_keygen=function(a,b){return curve25519_clamp(b),curve25519_(b,curve25519_nine(),a)},curve25519_sign=function(a,b,c,d){for(tmp1=new Int8Array(65),tmp2=new Int8Array(33),i=0;32>i;i++)a[i]=0;for(curve25519_mula_small(a,c,0,b,32,-1),curve25519_mula_small(a,a,0,curve25519_order,32,parseInt((15-a[31])/16)),curve25519_mula32(tmp1,a,d,32,1),curve25519_divmod(tmp2,tmp1,64,curve25519_order,32),w=0,k=0;32>k;k++)a[k]=tmp1[k],w|=a[k];return 0!=w},curve25519_verify=function(a,b,c,e){d=new Int8Array(32),yx=new Array(new Array(16),new Array(16),new Array(16)),yz=new Array(new Array(16),new Array(16),new Array(16));var f=new Array(new Array(16),new Array(16)),g=new Array(new Array(16),new Array(16)),h=new Array(new Array(16),new Array(16),new Array(16)),i=new Array(new Array(16),new Array(16),new Array(16)),j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=[curve25519_nine(),curve25519_convertToShortArray(e)];for(curve25519_x_to_y2(g[0],q[1]),curve25519_sqrtmodp(h[0],g[0]),o=curve25519_isNegative(h[0]),curve25519_addmodp(i[0],g[0],curve25519_39420360()),curve25519_mulmodp(i[1],curve25519_2y(),h[0]),curve25519_submodp(h[o],i[0],i[1]),curve25519_addmodp(h[1-o],i[0],i[1]),g[0]=curve25519_cpy16(q[1]),curve25519_submodp(i[0],g[0],curve25519_nine()),curve25519_sqrmodp(i[1],i[0]),curve25519_invmodp(i[0],i[1],0),curve25519_mulmodp(g[0],h[0],i[0]),curve25519_submodp(g[1],g[0],q[1]),curve25519_submodp(f[0],g[1],curve25519_486671()),curve25519_mulmodp(g[0],h[1],i[0]),curve25519_submodp(g[1],g[0],q[1]),curve25519_submodp(f[1],g[1],curve25519_486671()),n=0;32>n;n++)j=j>>8^255&b[n]^(255&b[n])<<1,k=k>>8^255&c[n]^(255&c[n])<<1,m=~(j^k),l=m&(128&l)>>7^j,l^=m&(1&l)<<1,l^=m&(2&l)<<1,l^=m&(4&l)<<1,l^=m&(8&l)<<1,l^=m&(16&l)<<1,l^=m&(32&l)<<1,l^=m&(64&l)<<1,d[n]=255&l;for(l=(m&(128&l)<<1^j)>>8,yx[0]=curve25519_cpy16(curve25519_one()),yx[1]=curve25519_cpy16(q[l]),yx[2]=curve25519_cpy16(f[0]),yz[0]=curve25519_cpy16(curve25519_zero()),yz[1]=curve25519_cpy16(curve25519_one()),yz[2]=curve25519_cpy16(curve25519_one()),j=0,k=0,n=32;0!=n--;n=n)for(j=j<<8|255&b[n],k=k<<8|255&c[n],l=l<<8|255&d[n],o=8;0!=o--;o=o)p=((j^j>>1)>>o&1)+((k^k>>1)>>o&1),curve25519_prep(h[0],i[0],yx[0],yz[0]),curve25519_prep(h[1],i[1],yx[1],yz[1]),curve25519_prep(h[2],i[2],yx[2],yz[2]),curve25519_dbl(yx[0],yz[0],h[p],i[p]),p=l>>o&2^(l>>o&1)<<1,curve25519_sum(yx[1],yz[1],h[1],i[1],h[p],i[p],q[l>>o&1]),curve25519_sum(yx[2],yz[2],h[2],i[2],h[0],i[0],f[((j^k)>>o&2)>>1]);p=(1&j)+(1&k),curve25519_invmodp(h[0],yz[p],0),curve25519_mulmodp(h[1],yx[p],h[0]);var r=curve25519_convertToByteArray(h[1]);curve25519_fillByteArray(r,a)};var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;c>e;e+=3)for(var f=(b[e>>>2]>>>24-8*(e%4)&255)<<16|(b[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|b[e+2>>>2]>>>24-8*((e+2)%4)&255,g=0;4>g&&c>e+.75*g;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));for(var e=[],f=0,g=0;c>g;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<2*(g%4),i=d.indexOf(a.charAt(g))>>>6-2*(g%4);e[f>>>2]|=(h|i)<<24-8*(f%4),f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var f=CryptoJS,g=f.lib,h=g.WordArray,i=g.Hasher,g=f.algo,j=[],k=0;64>k;k++)j[k]=4294967296*a.abs(a.sin(k+1))|0;g=g.MD5=i.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[f+0],i=a[f+1],k=a[f+2],l=a[f+3],m=a[f+4],n=a[f+5],o=a[f+6],p=a[f+7],q=a[f+8],r=a[f+9],s=a[f+10],t=a[f+11],u=a[f+12],v=a[f+13],w=a[f+14],x=a[f+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,j[0]),B=b(B,y,z,A,i,12,j[1]),A=b(A,B,y,z,k,17,j[2]),z=b(z,A,B,y,l,22,j[3]),y=b(y,z,A,B,m,7,j[4]),B=b(B,y,z,A,n,12,j[5]),A=b(A,B,y,z,o,17,j[6]),z=b(z,A,B,y,p,22,j[7]),y=b(y,z,A,B,q,7,j[8]),B=b(B,y,z,A,r,12,j[9]),A=b(A,B,y,z,s,17,j[10]),z=b(z,A,B,y,t,22,j[11]),y=b(y,z,A,B,u,7,j[12]),B=b(B,y,z,A,v,12,j[13]),A=b(A,B,y,z,w,17,j[14]),z=b(z,A,B,y,x,22,j[15]),y=c(y,z,A,B,i,5,j[16]),B=c(B,y,z,A,o,9,j[17]),A=c(A,B,y,z,t,14,j[18]),z=c(z,A,B,y,h,20,j[19]),y=c(y,z,A,B,n,5,j[20]),B=c(B,y,z,A,s,9,j[21]),A=c(A,B,y,z,x,14,j[22]),z=c(z,A,B,y,m,20,j[23]),y=c(y,z,A,B,r,5,j[24]),B=c(B,y,z,A,w,9,j[25]),A=c(A,B,y,z,l,14,j[26]),z=c(z,A,B,y,q,20,j[27]),y=c(y,z,A,B,v,5,j[28]),B=c(B,y,z,A,k,9,j[29]),A=c(A,B,y,z,p,14,j[30]),z=c(z,A,B,y,u,20,j[31]),y=d(y,z,A,B,n,4,j[32]),B=d(B,y,z,A,q,11,j[33]),A=d(A,B,y,z,t,16,j[34]),z=d(z,A,B,y,w,23,j[35]),y=d(y,z,A,B,i,4,j[36]),B=d(B,y,z,A,m,11,j[37]),A=d(A,B,y,z,p,16,j[38]),z=d(z,A,B,y,s,23,j[39]),y=d(y,z,A,B,v,4,j[40]),B=d(B,y,z,A,h,11,j[41]),A=d(A,B,y,z,l,16,j[42]),z=d(z,A,B,y,o,23,j[43]),y=d(y,z,A,B,r,4,j[44]),B=d(B,y,z,A,u,11,j[45]),A=d(A,B,y,z,x,16,j[46]),z=d(z,A,B,y,k,23,j[47]),y=e(y,z,A,B,h,6,j[48]),B=e(B,y,z,A,p,10,j[49]),A=e(A,B,y,z,w,15,j[50]),z=e(z,A,B,y,n,21,j[51]),y=e(y,z,A,B,u,6,j[52]),B=e(B,y,z,A,l,10,j[53]),A=e(A,B,y,z,s,15,j[54]),z=e(z,A,B,y,i,21,j[55]),y=e(y,z,A,B,q,6,j[56]),B=e(B,y,z,A,x,10,j[57]),A=e(A,B,y,z,o,15,j[58]),z=e(z,A,B,y,v,21,j[59]),y=e(y,z,A,B,m,6,j[60]),B=e(B,y,z,A,t,10,j[61]),A=e(A,B,y,z,k,15,j[62]),z=e(z,A,B,y,r,21,j[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;
c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=i.clone.call(this);return a._hash=this._hash.clone(),a}}),f.MD5=i._createHelper(g),f.HmacMD5=i._createHmacHelper(g)}(Math),function(){var a=CryptoJS,b=a.lib,c=b.Base,d=b.WordArray,b=a.algo,e=b.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:b.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,e=c.hasher.create(),f=d.create(),g=f.words,h=c.keySize,c=c.iterations;g.length<h;){i&&e.update(i);var i=e.update(a).finalize(b);e.reset();for(var j=1;c>j;j++)i=e.finalize(i),e.reset();f.concat(i)}return f.sigBytes=4*h,f}});a.EvpKDF=function(a,b,c){return e.create(c).compute(a,b)}}(),CryptoJS.lib.Cipher||function(a){var b=CryptoJS,c=b.lib,d=c.Base,e=c.WordArray,f=c.BufferedBlockAlgorithm,g=b.enc.Base64,h=b.algo.EvpKDF,i=c.Cipher=f.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?o:n).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?o:n).decrypt(a,b,c,d)}}}});c.StreamCipher=i.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var j=b.mode={},k=function(b,c,d){var e=this._iv;e?this._iv=a:e=this._prevBlock;for(var f=0;d>f;f++)b[c+f]^=e[f]},l=(c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();l.Encryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;k.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)}}),l.Decryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),k.call(this,a,b,d),this._prevBlock=e}}),j=j.CBC=l,l=(b.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,f=[],g=0;c>g;g+=4)f.push(d);c=e.create(f,c),a.concat(c)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},c.BlockCipher=i.extend({cfg:i.cfg.extend({mode:j,padding:l}),reset:function(){i.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var m=c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),j=(b.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return a=a.salt,(a?e.create([1398893684,1701076831]).concat(a).concat(b):b).toString(g)},parse:function(a){a=g.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=e.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return m.create({ciphertext:a,salt:c})}},n=c.SerializableCipher=d.extend({cfg:d.extend({format:j}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);return b=e.finalize(b),e=e.cfg,m.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),b=(b.kdf={}).OpenSSL={execute:function(a,b,c,d){return d||(d=e.random(8)),a=h.create({keySize:b+c}).compute(a,d),c=e.create(a.words.slice(b),4*c),a.sigBytes=4*b,m.create({key:a,iv:c,salt:d})}},o=c.PasswordBasedCipher=n.extend({cfg:n.cfg.extend({kdf:b}),encrypt:function(a,b,c,d){return d=this.cfg.extend(d),c=d.kdf.execute(c,a.keySize,a.ivSize),d.iv=c.iv,a=n.encrypt.call(this,a,b,c.key,d),a.mixIn(c),a},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt),d.iv=c.iv,n.decrypt.call(this,a,b,c.key,d)}})}(),function(){for(var a=CryptoJS,b=a.lib.BlockCipher,c=a.algo,d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=0;256>o;o++)n[o]=128>o?o<<1:o<<1^283;for(var p=0,q=0,o=0;256>o;o++){var r=q^q<<1^q<<2^q<<3^q<<4,r=r>>>8^255&r^99;d[p]=r,e[r]=p;var s=n[p],t=n[s],u=n[t],v=257*n[r]^16843008*r;f[p]=v<<24|v>>>8,g[p]=v<<16|v>>>16,h[p]=v<<8|v>>>24,i[p]=v,v=16843009*u^65537*t^257*s^16843008*p,j[r]=v<<24|v>>>8,k[r]=v<<16|v>>>16,l[r]=v<<8|v>>>24,m[r]=v,p?(p=s^n[n[n[u^s]]],q^=n[n[q]]):p=q=1}var w=[0,1,2,4,8,16,32,64,128,27,54],c=c.AES=b.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,a=4*((this._nRounds=c+6)+1),e=this._keySchedule=[],f=0;a>f;f++)if(c>f)e[f]=b[f];else{var g=e[f-1];f%c?c>6&&4==f%c&&(g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g]):(g=g<<8|g>>>24,g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g],g^=w[f/c|0]<<24),e[f]=e[f-c]^g}for(b=this._invKeySchedule=[],c=0;a>c;c++)f=a-c,g=c%4?e[f]:e[f-4],b[c]=4>c||4>=f?g:j[d[g>>>24]]^k[d[g>>>16&255]]^l[d[g>>>8&255]]^m[d[255&g]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,f,g,h,i,d)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,j,k,l,m,e),c=a[b+1],a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;i>o;o++)var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],m=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++],j=p,k=q,l=r;p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],m=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++],a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=m},keySize:8});a.AES=b._createHelper(c)}();var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(a){for(var b=CryptoJS,c=b.lib,d=c.WordArray,e=c.Hasher,c=b.algo,f=[],g=[],h=function(a){return 4294967296*(a-(0|a))|0},i=2,j=0;64>j;){var k;a:{k=i;for(var l=a.sqrt(k),m=2;l>=m;m++)if(!(k%m)){k=!1;break a}k=!0}k&&(8>j&&(f[j]=h(a.pow(i,.5))),g[j]=h(a.pow(i,1/3)),j++),i++}var n=[],c=c.SHA256=e.extend({_doReset:function(){this._hash=new d.init(f.slice(0))},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],e=c[1],f=c[2],h=c[3],i=c[4],j=c[5],k=c[6],l=c[7],m=0;64>m;m++){if(16>m)n[m]=0|a[b+m];else{var o=n[m-15],p=n[m-2];n[m]=((o<<25|o>>>7)^(o<<14|o>>>18)^o>>>3)+n[m-7]+((p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10)+n[m-16]}o=l+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&j^~i&k)+g[m]+n[m],p=((d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22))+(d&e^d&f^e&f),l=k,k=j,j=i,i=h+o|0,h=f,f=e,e=d,d=o+p|0}c[0]=c[0]+d|0,c[1]=c[1]+e|0,c[2]=c[2]+f|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0,c[5]=c[5]+j|0,c[6]=c[6]+k|0,c[7]=c[7]+l|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;return c[e>>>5]|=128<<24-e%32,c[(e+64>>>9<<4)+14]=a.floor(d/4294967296),c[(e+64>>>9<<4)+15]=d,b.sigBytes=4*c.length,this._process(),this._hash},clone:function(){var a=e.clone.call(this);return a._hash=this._hash.clone(),a}});b.SHA256=e._createHelper(c),b.HmacSHA256=e._createHmacHelper(c)}(Math),function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\x00"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random"),angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){function e(b){return angular.isString(b)?void a.$watch(b,function(){angular.forEach(g,function(a){a(d.$modelValue)})}):angular.isArray(b)?void angular.forEach(b,function(b){a.$watch(b,function(){angular.forEach(g,function(a){a(d.$modelValue)})})}):void(angular.isObject(b)&&angular.forEach(b,function(b,c){angular.isString(b)&&a.$watch(b,function(){g[c](d.$modelValue)}),angular.isArray(b)&&angular.forEach(b,function(b){a.$watch(b,function(){g[c](d.$modelValue)})})}))}var f,g={},h=a.$eval(c.uiValidate);h&&(angular.isString(h)&&(h={validator:h}),angular.forEach(h,function(b,c){f=function(e){var f=a.$eval(b,{$value:e});return angular.isObject(f)&&angular.isFunction(f.then)?(f.then(function(){d.$setValidity(c,!0)},function(){d.$setValidity(c,!1)}),e):f?(d.$setValidity(c,!0),e):(d.$setValidity(c,!1),e)},g[c]=f,d.$formatters.push(f),d.$parsers.push(f)}),c.uiValidateWatch&&e(a.$eval(c.uiValidateWatch)))}}}),function(a){"use strict";if(a.URL=a.URL||a.webkitURL,a.Blob&&a.URL)try{return void new Blob}catch(b){}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},d=function(a,b,c){this.data=a,this.size=a.length,this.type=b,this.encoding=c},e=c.prototype,f=d.prototype,g=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=a.URL||a.webkitURL||a,l=k.createObjectURL,m=k.revokeObjectURL,n=k,o=a.btoa,p=a.atob,q=a.ArrayBuffer,r=a.Uint8Array,s=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;return k.createObjectURL||(n=a.URL=function(a){var b,c=document.createElementNS("http://www.w3.org/1999/xhtml","a");return c.href=a,"origin"in c||("data:"===c.protocol.toLowerCase()?c.origin=null:(b=a.match(s),c.origin=b&&b[1])),c}),n.createObjectURL=function(a){var b,c=a.type;return null===c&&(c="application/octet-stream"),a instanceof d?(b="data:"+c,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):o?b+";base64,"+o(a.data):b+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(a){var c=this.data;if(r&&(a instanceof q||a instanceof r)){for(var e="",f=new r(a),i=0,j=f.length;j>i;i++)e+=String.fromCharCode(f[i]);c.push(e)}else if("Blob"===b(a)||"File"===b(a)){if(!g)throw new h("NOT_READABLE_ERR");var k=new g;c.push(k.readAsBinaryString(a))}else a instanceof d?"base64"===a.encoding&&p?c.push(p(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!=typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=arguments.length;return 3>e&&(c=null),new d(this.data.slice(a,e>1?b:this.data.length),c,this.encoding)},f.toString=function(){return"[object Blob]"},f.close=function(){this.size=0,delete this.data},c}(a);a.Blob=function(a,b){var d=b?b.type||"":"",e=new c;if(a)for(var f=0,g=a.length;g>f;f++)e.append(a[f]);return e.getBlob(d)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),c.dispatchEvent(d)},g=a.webkitRequestFileSystem,h=a.requestFileSystem||g||a.mozRequestFileSystem,i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=0,l=10,m=function(b){var d=function(){"string"==typeof b?c().revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,l)},n=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(f){i(f)}}},o=function(b,i){var l,o,p,q=this,r=b.type,s=!1,t=function(){n(q,"writestart progress write writeend".split(" "))},u=function(){if((s||!l)&&(l=c().createObjectURL(b)),o)o.location.href=l;else{var d=a.open(l,"_blank");void 0==d&&"undefined"!=typeof safari&&(a.location.href=l)}q.readyState=q.DONE,t(),m(l)},v=function(a){return function(){return q.readyState!==q.DONE?a.apply(this,arguments):void 0}},w={create:!0,exclusive:!1};return q.readyState=q.INIT,i||(i="download"),e?(l=c().createObjectURL(b),d.href=l,d.download=i,f(d),q.readyState=q.DONE,t(),void m(l)):(a.chrome&&r&&r!==j&&(p=b.slice||b.webkitSlice,b=p.call(b,0,b.size,j),s=!0),g&&"download"!==i&&(i+=".download"),(r===j||g)&&(o=a),h?(k+=b.size,void h(a.TEMPORARY,k,v(function(a){a.root.getDirectory("saved",w,v(function(a){var c=function(){a.getFile(i,w,v(function(a){a.createWriter(v(function(c){c.onwriteend=function(b){o.location.href=a.toURL(),q.readyState=q.DONE,n(q,"writeend",b),m(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&u()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=q["on"+a]}),c.write(b),q.abort=function(){c.abort(),q.readyState=q.DONE},q.readyState=q.WRITING}),u)}),u)};a.getFile(i,{create:!1},v(function(a){a.remove(),c()}),v(function(a){a.code===a.NOT_FOUND_ERR?c():u()}))}),u)}),u)):void u())},p=o.prototype,q=function(a,b){return new o(a,b)};return p.abort=function(){var a=this;a.readyState=a.DONE,n(a,"abort")},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,q}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);if("undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),function(){function a(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}function b(a){return a.offsetHeight}function c(){var a=document.body,b=document.documentElement;return window.pageYOffset||b.scrollTop||a.scrollTop}function d(a){var b,c={top:0,left:0},d=a&&a.ownerDocument;if(d)return b=d.documentElement,void 0!==typeof a.getBoundingClientRect&&(c=a.getBoundingClientRect()),{top:c.top+(window.pageYOffset||b.scrollTop)-(b.clientTop||0),left:c.left+(window.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}}var e;e=angular.module("infinite-scroll",[]),e.directive("infiniteScroll",["$rootScope","$window","$timeout",function(e,f,g){return{link:function(h,i,j){var k,l,m,n;return f=angular.element(f),f.height=a,f.scrollTop=c,m=0,null!=j.infiniteScrollDistance&&h.$watch(j.infiniteScrollDistance,function(a){return m=parseInt(a,10)}),n=!0,k=!1,null!=j.infiniteScrollDisabled&&h.$watch(j.infiniteScrollDisabled,function(a){return n=!a,n&&k?(k=!1,l()):void 0}),l=function(){var a,c,g,l;return l=f.height()+f.scrollTop(),a=d(i[0]).top+b(i[0]),c=a-l,g=c<=f.height()*m,g&&n?e.$$phase?h.$eval(j.infiniteScroll):h.$apply(j.infiniteScroll):g?k=!0:void 0},f.on("scroll",l),h.$on("$destroy",function(){return f.off("scroll",l)}),g(function(){return j.infiniteScrollImmediateCheck?h.$eval(j.infiniteScrollImmediateCheck)?l():void 0:l()},0)}}}])}(),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.techan=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";b.exports="0.6.0-2"},{}],2:[function(a,b){"use strict";b.exports=function(){function a(b){return a.up(b)}function b(){return a.d=c,a.up=d,a.dn=e,a}var c=function(a){return a.date},d=function(a){return a.up},e=function(a){return a.down};return a.date=function(a){return arguments.length?(c=a,b()):c},a.up=function(a){return arguments.length?(d=a,b()):d},a.down=function(a){return arguments.length?(e=a,b()):e},b()}},{}],3:[function(a,b){"use strict";b.exports=function(){function a(b){return a.ts(b)}function b(){return a.d=c,a.ts=d,a.ks=e,a.sa=f,a.sb=g,a.c=h,a.pts=i,a.pks=j,a.pssb=k,a}var c=function(a){return a.date},d=function(a){return a.tenkanSen},e=function(a){return a.kijunSen},f=function(a){return a.senkouSpanA},g=function(a){return a.senkouSpanB},h=function(a){return a.chikouSpan},i=function(a){return a.parameters.tenkanSen},j=function(a){return a.parameters.kijunSen},k=function(a){return a.parameters.senkouSpanB};return a.date=function(a){return arguments.length?(c=a,b()):c},a.tenkanSen=function(a){return arguments.length?(d=a,b()):d},a.kijunSen=function(a){return arguments.length?(e=a,b()):e},a.senkouSpanA=function(a){return arguments.length?(f=a,b()):f},a.senkouSpanB=function(a){return arguments.length?(g=a,b()):g},a.chikouSpan=function(a){return arguments.length?(h=a,b()):h},a.ptenanSen=function(a){return arguments.length?(i=a,b()):i},a.pkijunSen=function(a){return arguments.length?(j=a,b()):j},a.psenkouSpanB=function(a){return arguments.length?(k=a,b()):k},b()}},{}],4:[function(a,b){"use strict";b.exports=function(){return{atrtrailingstop:a("./atrtrailingstop"),ichimoku:a("./ichimoku"),macd:a("./macd"),ohlc:a("./ohlc"),rsi:a("./rsi"),trendline:a("./trendline"),value:a("./value"),volume:a("./volume")}}},{"./atrtrailingstop":2,"./ichimoku":3,"./macd":5,"./ohlc":6,"./rsi":7,"./trendline":8,"./value":9,"./volume":10}],5:[function(a,b){"use strict";b.exports=function(){function a(b){return a.m(b)}function b(){return a.d=c,a.m=d,a.s=f,a.dif=g,a.z=e,a}var c=function(a){return a.date},d=function(a){return a.macd},e=function(a){return a.zero},f=function(a){return a.signal},g=function(a){return a.difference};return a.date=function(a){return arguments.length?(c=a,b()):c},a.macd=function(a){return arguments.length?(d=a,b()):d},a.signal=function(a){return arguments.length?(f=a,b()):f},a.difference=function(a){return arguments.length?(g=a,b()):g},b()}},{}],6:[function(a,b){"use strict";b.exports=function(){function a(b){return a.c(b)}function b(){return a.d=c,a.o=d,a.h=e,a.l=f,a.c=g,a.v=h,a}var c=function(a){return a.date},d=function(a){return a.open},e=function(a){return a.high},f=function(a){return a.low},g=function(a){return a.close},h=function(a){return a.volume};return a.date=function(a){return arguments.length?(c=a,b()):c},a.open=function(a){return arguments.length?(d=a,b()):d},a.high=function(a){return arguments.length?(e=a,b()):e},a.low=function(a){return arguments.length?(f=a,b()):f},a.close=function(a){return arguments.length?(g=a,b()):g},a.volume=function(a){return arguments.length?(h=a,b()):h},b()}},{}],7:[function(a,b){"use strict";b.exports=function(){function a(b){return a.r(b)}function b(){return a.d=c,a.r=d,a.ob=e,a.os=f,a.m=g,a}var c=function(a){return a.date},d=function(a){return a.rsi},e=function(a){return a.overbought},f=function(a){return a.oversold},g=function(a){return a.middle};return a.date=function(a){return arguments.length?(c=a,b()):c},a.rsi=function(a){return arguments.length?(d=a,b()):d},a.overbought=function(a){return arguments.length?(e=a,b()):e},a.oversold=function(a){return arguments.length?(f=a,b()):f},a.middle=function(a){return arguments.length?(g=a,b()):g},b()}},{}],8:[function(a,b){"use strict";b.exports=function(){function a(b){return a.sv(b)}function b(){return a.sd=c,a.sv=d,a.ed=e,a.ev=f,a}var c=function(a,b){return arguments.length<2?a.start.date:void(a.start.date=b)},d=function(a,b){return arguments.length<2?a.start.value:void(a.start.value=b)},e=function(a,b){return arguments.length<2?a.end.date:void(a.end.date=b)},f=function(a,b){return arguments.length<2?a.end.value:void(a.end.value=b)};return a.startDate=function(a){return arguments.length?(c=a,b()):c},a.startValue=function(a){return arguments.length?(d=a,b()):d},a.endDate=function(a){return arguments.length?(e=a,b()):e},a.endValue=function(a){return arguments.length?(f=a,b()):f},b()}},{}],9:[function(a,b){"use strict";b.exports=function(){function a(b){return a.v(b)}function b(){return a.d=c,a.v=d,a.z=e,a}var c=function(a){return a.date},d=function(b,c){return arguments.length<2?b.value:(b.value=c,a)},e=function(a){return a.zero};return a.date=function(a){return arguments.length?(c=a,b()):c},a.value=function(a){return arguments.length?(d=a,b()):d},a.zero=function(a){return arguments.length?(e=a,b()):e},b()}},{}],10:[function(a,b){"use strict";b.exports=function(){function a(b){return a.v(b)}function b(){return a.d=c,a.v=d,a}var c=function(a){return a.date},d=function(a){return a.volume};return a.date=function(a){return arguments.length?(c=a,b()):c},a.volume=function(a){return arguments.length?(d=a,b()):d},b()}},{}],11:[function(a,b){"use strict";function c(a,b){return b?{date:a,value:b}:{date:a,value:null}}b.exports=function(a,b,d){return function(){function e(a){return e.init(),a.map(function(a,b){var d=e.atr(a);return b>=f.period?c(f.accessor.d(a),d):c(f.accessor.d(a))}).filter(function(a){return null!==a.value})}var f={},g=d(),h=null,i=0,j=0;return e.init=function(){return g.accessor(e.accessor()).period(f.period).init(),h=null,i=0,j=0,e},e.atr=function(a){var b=null===h?f.accessor.h(a)-f.accessor.l(a):Math.max(f.accessor.h(a)-f.accessor.l(a),Math.abs(f.accessor.h(a)-f.accessor.c(h)),Math.abs(f.accessor.l(a)-f.accessor.c(h)));return h=a,i=j++<=f.period?g.average(b):(i*(f.period-1)+b)/f.period},a(e,f).accessor(b()).period(14),e}}},{}],12:[function(a,b){"use strict";b.exports=function(a,b,c){return function(){function d(a){return g.accessor(e.accessor).period(e.period).init(),a.map(function(a,b){var c=e.accessor.c(a),d=g.atr(a)*f;return b>=e.period?{date:e.accessor.d(a),close:c,up:c-d,down:c+d}:{date:e.accessor.d(a),up:null,down:null}}).filter(function(a){return null!==a.up&&null!==a.down}).reduce(function(a,b,c){var d=a[c-1],e=0===c?b.up:null,f=null;return d&&null!==d.up&&(b.close>d.up?e=Math.max(b.up,d.up):f=b.down),d&&null!==d.down&&(b.close<d.down?f=Math.min(b.down,d.down):e=b.up),a.push({date:b.date,up:e,down:f}),a},[])}var e={},f=3,g=c();return d.multiplier=function(a){return arguments.length?(f=a,d):f},a(d,e).accessor(b()).period(14),d}}},{}],13:[function(a,b){"use strict";b.exports=function(a,b,c){return function(){function d(a){return d.init(),a.map(e).filter(function(a){return null!==a.value})}function e(a,b){var c=d.average(j.accessor(a));return b+1<j.period&&(c=null),{date:j.accessor.d(a),value:c}}var f,g,h,i,j={};return d.init=function(){return f=null,g=c(j.period),h=0,i=0,d},d.average=function(a){return i<j.period?(h+=a)/++i:(i===j.period&&(f=h/i++),f+=g*(a-f))},a(d,j).accessor(b()).period(10),d}}},{}],14:[function(a,b){"use strict";function c(a,b,c){return{parameters:a,date:b,chikouSpan:c,tenkanSen:null,kijunSen:null,senkouSpanA:null,senkouSpanB:null}}function d(a,b){return null!==a&&null!==b?e(a,b):null}function e(a,b){return(a+b)/2}b.exports=function(a,b){return function(){function f(a){for(var b={tenkanSen:i,kijunSen:j,senkouSpanB:k},c=new Array(a.length),d=c.length-1;d>=0;d--)c[d]=g(b,a,d);return c}function g(a,b,f){for(var g=b[f],i=h.accessor.l(g),j=h.accessor.h(g),k=c(a,h.accessor.d(g),h.accessor.c(g)),l=0,m=l+1;l<a.senkouSpanB&&f-l>=0;l++,m=l+1)g=b[f-l],i=Math.min(i,h.accessor.l(g)),j=Math.max(j,h.accessor.h(g)),k.tenkanSen=m===a.tenkanSen?e(i,j):k.tenkanSen,k.kijunSen=m===a.kijunSen?e(i,j):k.kijunSen,k.senkouSpanB=m===a.senkouSpanB?e(i,j):k.senkouSpanB;return k.senkouSpanA=d(k.tenkanSen,k.kijunSen),k}var h={},i=9,j=26,k=52;return f.tenkanSen=function(a){return arguments.length?(i=a,f):i},f.kijunSen=function(a){return arguments.length?(j=a,f):j},f.senkouSpanB=function(a){return arguments.length?(k=a,f):k},a(f,h).accessor(b()),f}}},{}],15:[function(a,b){"use strict";function c(a){return 2/(a+1)}function d(a){return 1/a}b.exports=function(){var b=a("./indicatormixin")(),e=a("../accessor")(),f=a("./ema"),g=f(b,e.ohlc,c),h=a("./sma")(b,e.ohlc),i=a("./atr")(b,e.ohlc,h);return{atr:i,atrtrailingstop:a("./atrtrailingstop")(b,e.ohlc,i),ema:g,ichimoku:a("./ichimoku")(b,e.ohlc),macd:a("./macd")(b,e.ohlc,g),rsi:a("./rsi")(b,e.ohlc,g),sma:h,wilderma:f(b,e.ohlc,d)}}},{"../accessor":4,"./atr":11,"./atrtrailingstop":12,"./ema":13,"./ichimoku":14,"./indicatormixin":16,"./macd":17,"./rsi":18,"./sma":19}],16:[function(a,b){"use strict";b.exports=function(){return function(a,b){var c={};return c.period=function(d){return b.period=d,a.period=function(c){return arguments.length?(b.period=c,a):b.period},c},c.accessor=function(d){return b.accessor=d,a.accessor=function(c){return arguments.length?(b.accessor=c,a):b.accessor},c},c}}},{}],17:[function(a,b){"use strict";function c(a,b,c,d,e){return b?{date:a,macd:b,signal:c,difference:d,zero:e}:{date:a,macd:null,signal:null,difference:null,zero:null}}b.exports=function(a,b,d){return function(){function e(a){var b=Math.max(g,h)-1,d=b+i-1;return j.accessor(e.accessor()).period(i).init(),k.accessor(e.accessor()).period(g).init(),l.accessor(e.accessor()).period(h).init(),a.map(function(a,e){h=k.average(f.accessor(a)),g=l.average(f.accessor(a));var i=h-g,m=e>=b?j.average(i):null;return e>=d?c(f.accessor.d(a),i,m,i-m,0):c(f.accessor.d(a))}).filter(function(a){return null!==a.macd})}var f={},g=12,h=26,i=9,j=d(),k=d(),l=d();return e.fast=function(a){return arguments.length?(g=a,e):g},e.slow=function(a){return arguments.length?(h=a,e):h},e.signal=function(a){return arguments.length?(i=a,e):i},a(e,f).accessor(b()),e}}},{}],18:[function(a,b){"use strict";function c(a,b,c,d,e){return b?{date:a,rsi:b,middle:c,overbought:d,oversold:e}:{date:a,rsi:null,middle:null,overbought:null,oversold:null}}b.exports=function(a,b,d){return function(){function e(a){return j.accessor(e.accessor()).period(f.period).init(),k.accessor(e.accessor()).period(f.period).init(),a.map(function(b,d){if(1>d)return c(f.accessor.d(b));var e=f.accessor(b)-f.accessor(a[d-1]),l=k.average(Math.max(e,0)),m=Math.abs(j.average(Math.min(e,0)));if(d>=f.period){var n=100-100/(1+l/m);return c(f.accessor.d(b),n,h,g,i)}return c(f.accessor.d(b))}).filter(function(a){return null!==a.rsi})}var f={},g=70,h=50,i=30,j=d(),k=d();return e.overbought=function(a){return arguments.length?(g=a,e):g},e.middle=function(a){return arguments.length?(h=a,e):h},e.oversold=function(a){return arguments.length?(i=a,e):i},a(e,f).accessor(b()).period(14),e}}},{}],19:[function(a,b){"use strict";b.exports=function(a,b){return function(){function c(a){return c.init(),a.map(d).filter(function(a){return null!==a.value})}function d(a,b){var d=c.average(h.accessor(a));return b+1<h.period&&(d=null),{date:h.accessor.d(a),value:d}}var e,f,g,h={};return c.init=function(){return g=0,e=[],f=0,c},c.average=function(a){return g+=a,e.length+1<h.period?(e.push(a),g/++f):(e.length<h.period&&(e.push(a),g+=a),g-=e[f],e[f]=a,++f===h.period&&(f=0),g/h.period)
},a(c,h).accessor(b()).period(10),c}}},{}],20:[function(a,b){"use strict";function c(a,b,c){a.selectAll("path.up").attr("d",b),a.selectAll("path.down").attr("d",c)}b.exports=function(a,b,d){return function(){function e(a){var c=b.groupSelect(a,b.dataMapper.array);c.entry.append("path").attr("class","up"),c.entry.append("path").attr("class","down"),e.refresh(a)}function f(){h.init(g.accessor.d,g.xScale,g.accessor.up,g.yScale),i.init(g.accessor.d,g.xScale,g.accessor.dn,g.yScale)}var g={},h=b.pathLine(),i=b.pathLine();return e.refresh=function(a){c(a,h,i)},d(e,g).plot(a(),f),f(),e}}},{}],21:[function(a,b){"use strict";function c(a,b,c,f,i,j,k,l,m){var n="left"===f.orient()||"top"===f.orient()?-1:1,o=a.select("g.translate"),p=b.groupSelect(o,d(c,f.scale()));p.entry.append("path"),p.entry.append("text"),o.attr("transform","translate("+m[0]+","+m[1]+")"),p.selection.selectAll("path").attr("d",h(c,f,j,k,l,n)),p.selection.selectAll("text").text(g(c,i)).call(e,c,f,n)}function d(a,b){return function(c){var d=b.range(),e=d[0],f=d[d.length-1];return d=f>e?[e,f]:[f,e],c.filter(function(c){if(!a(c))return!1;var e=b(a(c));return e&&!isNaN(e)&&d[0]<=e&&e<=d[1]})}}function e(a,b,c,d){var e=c.scale();switch(c.orient()){case"left":case"right":a.attr({x:d*(Math.max(c.innerTickSize(),0)+c.tickPadding()),y:f(b,e),dy:".32em"}).style("text-anchor",0>d?"end":"start");break;case"top":case"bottom":a.attr({x:f(b,e),y:d*(Math.max(c.innerTickSize(),0)+c.tickPadding()),dy:0>d?"0em":".72em"}).style("text-anchor","middle")}}function f(a,b){return function(c){return b(a(c))}}function g(a,b){return function(c){return b(a(c))}}function h(a,b,c,d,e,f){return function(g){var h=b.scale(),i=h(a(g)),j=e;switch(b.orient()){case"left":case"right":var k=0;return e>c/2?j=c/2:k=c/2-e,["M",0,i,"l",f*b.innerTickSize(),-j,"l",0,-k,"l",f*d,0,"l",0,c,"l",f*-d,0,"l",0,-k].join(" ");case"top":case"bottom":var l=0;return e>d/2?j=d/2:l=d/2-e,["M",i,0,"l",-j,f*b.innerTickSize(),"l",-l,0,"l",0,f*c,"l",d,0,"l",0,f*-c,"l",-l,0].join(" ");default:throw"Unsupported axis.orient() = "+b.orient()}}}b.exports=function(a,b,d,e){return function(){function f(a){a.selectAll("g.translate").data(d.dataMapper.array).enter().append("g").attr("class","translate"),f.refresh(a)}var g,h={},i=a(),j=4,k=14,l=50,m=[0,0];return f.refresh=function(a){var b=g?g:i.tickFormat()?i.tickFormat():i.scale().tickFormat();c(a,d,h.accessor,i,b,k,l,j,m)},f.axis=function(a){return arguments.length?(i=a,f):i},f.format=function(a){return arguments.length?(g=a,f):g},f.height=function(a){return arguments.length?(k=a,f):k},f.width=function(a){return arguments.length?(l=a,f):l},f.translate=function(a){return arguments.length?(m=a,f):m},e(f,h).accessor(b()),f}}},{}],22:[function(a,b){"use strict";function c(a,b,c,d){return function(e){var f=[],g=c(a.o(e)),h=c(a.c(e)),i=d(b),j=b(a.d(e))-i/2;return f.push("M",j,g,"l",i,0),g!=h&&f.push("L",j+i,h,"l",-i,0,"L",j,g),f.join(" ")}}function d(a,b,c,d){return function(e){var f=[],g=c(a.o(e)),h=c(a.c(e)),i=d(b),j=b(a.d(e)),k=j-i/2;return f.push("M",j,c(a.h(e)),"L",j,Math.min(g,h)),g==h&&f.push("M",k,g,"l",i,0),f.push("M",j,Math.max(g,h),"L",j,c(a.l(e))),f.join(" ")}}b.exports=function(a,b,e,f,g){return function(){function a(b){var c=f.groupSelect(b,f.dataMapper.array,k.accessor.d),d=f.groupUpDownEqual(b.datum(),k.accessor);f.appendUpDownEqual(c.selection,k.accessor,["candle","body"],d),f.appendUpDownEqual(c.selection,k.accessor,["candle","wick"],d),a.refresh(b)}function b(){h=f.joinPath(k.accessor,k.xScale,k.yScale,c),i=f.joinPath(k.accessor,k.xScale,k.yScale,d),j=f.lineWidth(k.xScale,1,4)}var h,i,j,k={};return a.refresh=function(a){a.selectAll("path.candle.body").attr("d",h),a.selectAll("path.candle.wick").attr("d",i).style("stroke-width",j)},g(a,k).plot(e(),b),a}}},{}],23:[function(a,b){"use strict";function c(a,b){a.select("g.data.top").style("display",b)}function d(a,b){return function(c){if(!c)return"M 0 0";var d=a(c);return["M",b[0],d,"L",b[b.length-1],d].join(" ")}}function e(a,b){return function(c){if(!c)return"M 0 0";var d=a(c);return["M",d,b[0],"L",d,b[b.length-1]].join(" ")}}b.exports=function(a,b,f,g,h,i){return function(){function a(b){var c=b.selectAll("g.data.top").data([q],function(a){return a}),d=c.enter(),e=d.append("g").attr("class","data top").style("display","none");c.exit().remove(),e.append("path").attr("class","horizontal wire"),e.append("path").attr("class","vertical wire"),h.annotation.append(e,o,"x"),h.annotation.append(e,p,"y"),b.selectAll("rect").data([0]).enter().append("rect").style({fill:"none","pointer-events":"all"}),a.refresh(b)}function b(a,b,c,d){return function(){var e=f(this),g=m.xScale.invert(e[0]),i=m.yScale.invert(e[1]);j(a.datum(g),b.datum(i),c.each(h.annotation.update(o,e[0])),d.each(h.annotation.update(p,e[1]))),n.move([g,i])}}function j(a,b,c,f){var g=m.xScale,i=m.yScale;a.attr("d",e(g,k||i.range())),b.attr("d",d(i,l||g.range())),c.each(h.annotation.refresh(o)),f.each(h.annotation.refresh(p))}var k,l,m={},n=g("enter","out","move"),o=[],p=[],q=0;return a.refresh=function(a){var d=m.xScale.range(),e=m.yScale.range(),f=a.selectAll("g.data"),g=a.selectAll("rect"),h=f.selectAll("path.vertical"),i=f.selectAll("path.horizontal"),k=f.selectAll("g.axisannotation.x > g"),l=f.selectAll("g.axisannotation.y > g");g.attr({x:Math.min.apply(null,d),y:Math.min.apply(null,e),height:Math.abs(e[e.length-1]-e[0]),width:Math.abs(d[d.length-1]-d[0])}).on("mouseenter",function(){c(a,"inline"),n.enter()}).on("mouseout",function(){c(a,"none"),n.out()}).on("mousemove",b(h,i,k,l)),j(h,i,k,l)},a.xAnnotation=function(b){return arguments.length?(o=b instanceof Array?b:[b],q++,a):o},a.yAnnotation=function(b){return arguments.length?(p=b instanceof Array?b:[b],q++,a):p},a.verticalWireRange=function(b){return arguments.length?(k=b,a):k},a.horizontalWireRange=function(b){return arguments.length?(l=b,a):l},i(a,m).xScale().yScale().on(n),a}}},{}],24:[function(a,b){"use strict";function c(a){return function(b){return-a(b)}}function d(){return Math.random().toString(36).substr(2,9)}b.exports=function(a,b,e,f){return function(){function g(a){var b=e.groupSelect(a,e.dataMapper.array),c="kumoclipup-"+d(),f="kumoclipdown-"+d();b.entry.append("clipPath").attr({id:f,"class":"kumoclipdown"}).append("path"),b.entry.append("clipPath").attr({id:c,"class":"kumoclipup"}).append("path"),b.entry.append("path").attr({"class":"kumo down","clip-path":"url(#"+f+")"}),b.entry.append("path").attr({"class":"kumo up","clip-path":"url(#"+c+")"}),b.entry.append("path").attr("class","senkouspanb"),b.entry.append("path").attr("class","senkouspana"),b.entry.append("path").attr("class","chikouspan"),b.entry.append("path").attr("class","kijunsen"),b.entry.append("path").attr("class","tenkansen"),g.refresh(a)}function h(a,b){a.selectAll(".kumoclipdown path").attr("d",m.y1(b.range()[0])),a.selectAll(".kumoclipup path").attr("d",m.y1(b.range()[1])),a.selectAll("path.kumo.down").attr("d",n),a.selectAll("path.kumo.up").attr("d",n),a.selectAll("path.senkouspanb").attr("d",p),a.selectAll("path.senkouspana").attr("d",o),a.selectAll("path.chikouspan").attr("d",q),a.selectAll("path.kijunsen").attr("d",s),a.selectAll("path.tenkansen").attr("d",r)}function i(){o.init(l.accessor.d,l.xScale,l.accessor.sa,l.yScale,l.accessor.pks),p.init(l.accessor.d,l.xScale,l.accessor.sb,l.yScale,l.accessor.pks),q.init(l.accessor.d,l.xScale,l.accessor.c,l.yScale,c(l.accessor.pks)),r.init(l.accessor.d,l.xScale,l.accessor.ts,l.yScale),s.init(l.accessor.d,l.xScale,l.accessor.ks,l.yScale)}function j(){return a().interpolate("monotone").defined(function(a){return null!==l.accessor.sb(a)}).x(function(a){return l.xScale(l.accessor.d(a),l.accessor.pks(a))}).y0(function(a){return l.yScale(l.accessor.sb(a))})}function k(){return a().interpolate("monotone").defined(function(a){return null!==l.accessor.sa(a)&&null!==l.accessor.sb(a)}).x(function(a){return l.xScale(l.accessor.d(a),l.accessor.pks(a))}).y0(function(a){return l.yScale(l.accessor.sa(a))}).y1(function(a){return l.yScale(l.accessor.sb(a))})}var l={},m=j(),n=k(),o=e.pathLine(),p=e.pathLine(),q=e.pathLine(),r=e.pathLine(),s=e.pathLine();return g.refresh=function(a){h(a,l.yScale)},f(g,l).plot(b(),i),i(),g}}},{}],25:[function(a,b){"use strict";function c(){return d3.event}b.exports=function(b){var d=a("../scale")(b),e=a("../accessor")(),f=a("./plot")(b.svg.line,b.select),g=a("./plotmixin")(b.scale.linear,d.financetime),h=a("./line"),i=a("./axisannotation")(b.svg.axis,e.value,f,g);return{atr:h(e.value,f,g),atrtrailingstop:a("./atrtrailingstop")(e.atrtrailingstop,f,g),axisannotation:i,candlestick:a("./candlestick")(b.scale.linear,b.extent,e.ohlc,f,g),crosshair:a("./crosshair")(b.select,c,b.mouse,b.dispatch,f,g),ema:h(e.value,f,g),ichimoku:a("./ichimoku")(b.svg.area,e.ichimoku,f,g),ohlc:a("./ohlc")(b.scale.linear,b.extent,e.ohlc,f,g),close:h(e.ohlc,f,g),volume:a("./volume")(e.volume,f,g),rsi:a("./rsi")(e.rsi,f,g),macd:a("./macd")(e.macd,f,g),momentum:h(e.value,f,g,!0),moneyflow:h(e.value,f,g,!0),sma:h(e.value,f,g),supstance:a("./supstance")(b.behavior.drag,c,b.select,b.dispatch,e.value,f,g),trendline:a("./trendline")(b.behavior.drag,c,b.select,b.dispatch,e.trendline,f,g),wilderma:h(e.value,f,g)}}},{"../accessor":4,"../scale":36,"./atrtrailingstop":20,"./axisannotation":21,"./candlestick":22,"./crosshair":23,"./ichimoku":24,"./line":26,"./macd":27,"./ohlc":28,"./plot":29,"./plotmixin":30,"./rsi":31,"./supstance":32,"./trendline":33,"./volume":34}],26:[function(a,b){"use strict";function c(a,b,c,d,e,f,g){a.selectAll("path.line").attr("d",f),g&&a.selectAll("path.zero").attr("d",e.horizontalPathLine(c,b.z,d))}b.exports=function(a,b,d,e){return e=e||!1,function(){function f(a){var c=b.groupSelect(a,b.dataMapper.array);c.entry.append("path").attr("class","line"),e&&c.selection.append("path").attr("class","zero"),f.refresh(a)}function g(){i.init(h.accessor.d,h.xScale,h.accessor,h.yScale)}var h={},i=b.pathLine();return f.refresh=function(a){c(a,h.accessor,h.xScale,h.yScale,b,i,e)},d(f,h).plot(a(),g),g(),f}}},{}],27:[function(a,b){"use strict";function c(a,b,c,d,e,f,g,h){a.selectAll("path.difference").attr("d",f),a.selectAll("path.zero").attr("d",e.horizontalPathLine(b.d,c,b.z,d)),a.selectAll("path.macd").attr("d",g),a.selectAll("path.signal").attr("d",h)}function d(a,b,c,d){return function(e){var f=c(0),g=c(a.dif(e))-f,h=d(b),i=b(a.d(e))-h/2;return["M",i,f,"l",0,g,"l",h,0,"l",0,-g].join(" ")}}b.exports=function(a,b,e){return function(){function f(a){var c=b.groupSelect(a,b.dataMapper.array,i.accessor.d);c.selection.append("path").attr("class","difference"),c.selection.append("path").attr("class","zero"),c.selection.append("path").attr("class","macd"),c.selection.append("path").attr("class","signal"),f.refresh(a)}function g(){h=b.joinPath(i.accessor,i.xScale,i.yScale,d),j.init(i.accessor.d,i.xScale,i.accessor.m,i.yScale),k.init(i.accessor.d,i.xScale,i.accessor.s,i.yScale)}var h,i={},j=b.pathLine(),k=b.pathLine();return f.refresh=function(a){c(a,i.accessor,i.xScale,i.yScale,b,h,j,k)},e(f,i).plot(a(),g),g(),f}}},{}],28:[function(a,b){"use strict";function c(a,b,c,d){return function(e){var f=c(a.o(e)),g=c(a.c(e)),h=d(b),i=b(a.d(e)),j=i-h/2;return["M",j,f,"l",h/2,0,"M",i,c(a.h(e)),"L",i,c(a.l(e)),"M",i,g,"l",h/2,0].join(" ")}}b.exports=function(a,b,d,e,f){return function(){function a(b){var c=e.groupSelect(b,e.dataMapper.array,i.accessor.d);e.appendUpDownEqual(c.selection,i.accessor,"ohlc"),a.refresh(b)}function b(){g=e.joinPath(i.accessor,i.xScale,i.yScale,c),h=e.lineWidth(i.xScale,1,2)}var g,h,i={};return a.refresh=function(a){a.selectAll("path.ohlc").attr("d",g).style("stroke-width",h)},f(a,i).plot(d(),b),a}}},{}],29:[function(a,b){"use strict";b.exports=function(a,b){function c(a,b,c){var d=a.selectAll("g.data").data(b,c);return d.exit().remove(),d}function d(a){return a.enter().append("g").attr("class","data")}function e(){function b(a){return c(a)}var c=a().interpolate("monotone");return b.init=function(a,b,d,e,f){return c.defined(function(a){return null!==d(a)}).x(function(c){return b(a(c),void 0===f?f:f(c))}).y(function(a){return e(d(a))})},b.d3=function(){return c},b}function f(a,b){return a.o(b)<a.c(b)}function g(a,b){return a.o(b)>a.c(b)}function h(a,b){return a.reduce(function(a,c){return f(b,c)?a.up.push(c):g(b,c)?a.down.push(c):a.equal.push(c),a},{up:[],down:[],equal:[]})}function i(a,b,c,d){var e=c instanceof Array?c:[c];d=d||h(a.datum(),b),j(a,d.up,e,"up"),j(a,d.down,e,"down"),j(a,d.equal,e,"equal")}function j(a,b,c,d){a.selectAll("path."+c.join(".")+"."+d).data([b]).enter().append("path").attr("class",c.join(" ")+" "+d)}function k(a){return Math.max(a.band(),1)}return{dataMapper:{unity:function(a){return a},array:function(a){return[a]}},dataSelection:c,dataEntry:d,groupSelect:function(a,b,e){var f=c(a,b,e),g=d(f);return{selection:f,entry:g}},groupUpDownEqual:h,appendUpDownEqual:i,horizontalPathLine:function(a,b,c,d){return function(e){var f=e[0],g=e[e.length-1];return["M",b(a(f)),d(c(f)),"L",b(a(g)),d(c(g))].join(" ")}},pathLine:e,barWidth:k,lineWidth:function(a,b,c){return b=b||1,c=c||1,function(){return Math.min(b,k(a)/c)}},joinPath:function(a,b,c,d){return function(e){return e.map(d(a,b,c,k)).join(" ")}},interaction:{mousedispatch:function(a){return function(c){return c.on("mouseenter",function(c){b(this.parentNode).classed("mouseover",!0),a.mouseenter(c)}).on("mouseleave",function(c){var d=b(this.parentNode);d.classed("dragging")||(d.classed("mouseover",!1),a.mouseout(c))}).on("mousemove",function(b){a.mousemove(b)})}},dragStartEndDispatch:function(a,c){return a.on("dragstart",function(a){b(this.parentNode.parentNode).classed("dragging",!0),c.dragstart(a)}).on("dragend",function(a){b(this.parentNode.parentNode).classed("dragging",!1),c.dragend(a)})}},annotation:{append:function(a,c,d,e,f){var g=arguments.length,h=a.append("g").attr("class","axisannotation "+d).selectAll("g").data(function(a){var b=g>3?f(e(a)):null;return c.map(function(a){var c=g>3?a.axis().scale().invert(b):null;return[{value:c}]})});h.enter().append("g").attr("class",function(a,b){return b}).each(function(a,d){this.__annotation__=d,c[d](b(this))})},update:function(a,b){return function(c){var d=a[this.__annotation__];c[0].value=d.axis().scale().invert(b)}},refresh:function(a){return function(){a[this.__annotation__].refresh(b(this))}}}}}},{}],30:[function(a,b){"use strict";b.exports=function(a,b){return function(c,d){var e={};return e.xScale=function(a){return d.xScale=b(),c.xScale=function(b){return arguments.length?(d.xScale=b,a&&a(),c):d.xScale},e},e.yScale=function(b){return d.yScale=a(),c.yScale=function(a){return arguments.length?(d.yScale=a,b&&b(),c):d.yScale},e},e.accessor=function(a,b){return d.accessor=a,c.accessor=function(a){return arguments.length?(d.accessor=a,b&&b(),c):d.accessor},e},e.on=function(a,b){return c.on=function(d,e){return a.on(d,e),b&&b(),c},e},e.plot=function(a,b){return e.xScale(b).yScale(b).accessor(a,b)},e}}},{}],31:[function(a,b){"use strict";function c(a,b,c,d,e,f){a.selectAll("path.overbought").attr("d",e.horizontalPathLine(b.d,c,b.ob,d)),a.selectAll("path.middle").attr("d",e.horizontalPathLine(b.d,c,b.m,d)),a.selectAll("path.oversold").attr("d",e.horizontalPathLine(b.d,c,b.os,d)),a.selectAll("path.rsi").attr("d",f)}b.exports=function(a,b,d){return function(){function e(a){var c=b.groupSelect(a,b.dataMapper.array,g.accessor.d);c.entry.append("path").attr("class","overbought"),c.entry.append("path").attr("class","middle"),c.entry.append("path").attr("class","oversold"),c.entry.append("path").attr("class","rsi"),e.refresh(a)}function f(){h.init(g.accessor.d,g.xScale,g.accessor.r,g.yScale)}var g={},h=b.pathLine();return e.refresh=function(a){c(a,g.accessor,g.xScale,g.yScale,b,h)},d(e,g).plot(a(),f),f(),e}}},{}],32:[function(a,b){"use strict";function c(a,b,c,e,f,g,h){a.selectAll(".supstance path").attr("d",d(c,e,f)),a.selectAll(".interaction path").attr("d",d(c,e,f)),g.each(b.annotation.refresh(h))}function d(a,b,c){return function(d){var e=[],f=b.range();return e.push("M",f[0],c(a(d))),e.push("L",f[f.length-1],c(a(d))),e.join(" ")}}b.exports=function(a,b,d,e,f,g,h){function i(){function a(c){var e=g.groupSelect(c,g.dataMapper.unity);e.entry.append("g").attr("class","supstance").append("path"),g.annotation.append(e.entry,i,"y",b.accessor,b.yScale);var f=e.entry.append("g").attr("class","interaction").style({opacity:0,fill:"none"}).call(g.interaction.mousedispatch(d));f.append("path").style("stroke-width",16),a.refresh(c)}var b={},d=e("mouseenter","mouseout","mousemove","drag","dragstart","dragend"),i=[];return a.refresh=function(a){c(a,g,b.accessor,b.xScale,b.yScale,a.selectAll(".axisannotation.y > g"),i)},a.drag=function(a){a.selectAll(".interaction path").call(j(d,b.accessor,b.xScale,b.yScale,i))},a.annotation=function(b){return arguments.length?(i=b instanceof Array?b:[b],a):i},h(a,b).plot(f()).on(d),a}function j(e,f,h,i,j){var k=a().origin(function(a){return{x:0,y:i(f(a))}}).on("drag",function(a){var k=i.invert(b().y),l=d(this.parentNode.parentNode),m=l.selectAll(".axisannotation.y > g");f.v(a,k),m.each(g.annotation.update(j,b().y)),c(l,g,f,h,i,m,j),e.drag(a)});return g.interaction.dragStartEndDispatch(k,e)}return i}},{}],33:[function(a,b){"use strict";function c(a,b,c,f){a.selectAll(".trendline path.body").attr("d",d(b,c,f)),a.selectAll(".trendline circle.start").attr(e(b.sd,c,b.sv,f)),a.selectAll(".trendline circle.end").attr(e(b.ed,c,b.ev,f)),a.selectAll(".interaction path.body").attr("d",d(b,c,f)),a.selectAll(".interaction circle.start").attr(e(b.sd,c,b.sv,f)),a.selectAll(".interaction circle.end").attr(e(b.ed,c,b.ev,f))}function d(a,b,c){return function(d){var e=[];return e.push("M",b(a.sd(d)),c(a.sv(d))),e.push("L",b(a.ed(d)),c(a.ev(d))),e.join(" ")}}function e(a,b,c,d){return{cx:function(c){return b(a(c))},cy:function(a){return d(c(a))}}}b.exports=function(a,b,d,e,f,g,h){function i(){function a(b){var c=g.groupSelect(b,g.dataMapper.unity),e=c.entry.append("g").attr("class","trendline");e.append("path").attr("class","body"),e.append("circle").attr({"class":"start",r:1}),e.append("circle").attr({"class":"end",r:1});var f=c.entry.append("g").attr("class","interaction").style({opacity:0,fill:"none"}).call(g.interaction.mousedispatch(d));f.append("path").attr("class","body").style("stroke-width",16),f.append("circle").attr({"class":"start",r:8}),f.append("circle").attr({"class":"end",r:8}),a.refresh(b)}var b={},d=e("mouseenter","mouseout","mousemove","drag","dragstart","dragend");return a.refresh=function(a){c(a,b.accessor,b.xScale,b.yScale)},a.drag=function(a){a.selectAll(".interaction circle.start").call(j(d,b.accessor,b.accessor.sd,b.xScale,b.accessor.sv,b.yScale)),a.selectAll(".interaction circle.end").call(j(d,b.accessor,b.accessor.ed,b.xScale,b.accessor.ev,b.yScale)),a.selectAll(".interaction path.body").call(k(d,b.accessor,b.xScale,b.yScale))},h(a,b).plot(f()).on(d),a}function j(e,f,h,i,j,k){var m=a();return m.origin(function(a){return{x:i(h(a)),y:k(j(a))}}).on("drag",function(a){l(h,i,b().x,j,k,b().y,a),c(d(this.parentNode.parentNode),f,i,k),e.drag(a)}),g.interaction.dragStartEndDispatch(m,e)}function k(e,f,h,i){var j={},k=a();return k.origin(function(a){return j.start={date:h(f.sd(a)),value:i(f.sv(a))},j.end={date:h(f.ed(a)),value:i(f.ev(a))},{x:0,y:0}}).on("drag",function(a){l(f.sd,h,b().x+j.start.date,f.sv,i,b().y+j.start.value,a),l(f.ed,h,b().x+j.end.date,f.ev,i,b().y+j.end.value,a),c(d(this.parentNode.parentNode),f,h,i),e.drag(a)}),g.interaction.dragStartEndDispatch(k,e)}function l(a,b,c,d,e,f,g){var h=b.invert(c);h&&a(g,h),d(g,e.invert(f))}return i}},{}],34:[function(a,b){"use strict";function c(a,b,c,d){return function(e){var f=a.v(e);if(isNaN(f))return null;var g=c(0),h=c(f)-g,i=d(b),j=b(a.d(e))-i/2;return["M",j,g,"l",0,h,"l",i,0,"l",0,-h].join(" ")}}b.exports=function(a,b,d){return function(){function e(a){var c=b.groupSelect(a,b.dataMapper.array,h.accessor.d);h.accessor.o&&h.accessor.c?b.appendUpDownEqual(c.selection,h.accessor,"volume"):c.entry.append("path").attr("class","volume"),e.refresh(a)}function f(){g=b.joinPath(h.accessor,h.xScale,h.yScale,c)}var g,h={};return e.refresh=function(a){a.selectAll("path.volume").attr("d",g)},d(e,h).plot(a(),f),e}}},{}],35:[function(a,b){"use strict";b.exports=function(a,b,c,d,e,f){function g(b,i,n,o,p){function q(a,d){var e=v[+a];return d=d||0,void 0===e&&(e=i[0]>a?-1:c(i,a)),b(e+d)}function r(){return x=h(b,i,n),q}function s(){v=k(i)}function u(){return s(),b.domain([0,i.length-1]),r(),b.domain(b.range().map(e(o,x)).map(b.invert)),p=b.domain(),r()}var v,w={tickFormat:t[t.length-1][2]},x=3;return b=b||a(),i=i||[new Date(0),new Date(1)],n=void 0===n?.2:n,o=void 0===o?.65:o,p=p||b.domain(),q.invert=function(a){var b=i[q.invertToIndex(a)];return b?b:null},q.invertToIndex=function(a){return Math.round(b.invert(a))},q.domain=function(a){if(!arguments.length){var c=b.domain();return c[0]<0&&c[c.length-1]<0?[]:(c=[Math.max(Math.ceil(c[0]),0),Math.min(Math.floor(c[c.length-1]),i.length-1)],i.slice(c[0],c[c.length-1]+1))}return i=a,u()},q.copy=function(){return g(b.copy(),i,n,o,p)},q.band=function(){return x},q.outerPadding=function(a){return arguments.length?(o=a,u()):o},q.padding=function(a){return arguments.length?(n=a,u()):n},q.zoomable=function(){return f(b,r,p)},q.ticks=function(a,c){var d=q.domain(),e=b.domain();if(!d.length)return[];var f=void 0===a?j(d,e,10):"number"==typeof a?j(d,e,a):null;w.tickFormat=f?f[2]:j(d,e,10)[2],f&&(a=f[0],c=f[1]);var g=a.range(d[0],+d[d.length-1]+1,c);return g.map(l(d)).reduce(m,[])},q.tickFormat=function(){return function(a){return w.tickFormat(a)}},d(q,b,r,"range"),s(),r()}function h(a,b,c){return Math.abs(a(b.length-1)-a(0))/Math.max(1,b.length-1)*(1-c)}function i(a,b){return a.length/(b[b.length-1]-b[0])}function j(a,b,d){if(1==a.length)return q;var e=a[a.length-1]-a[0],f=1>e/r,g=f?v:t,h=f?u:s,j=Math.min(Math.round(i(a,b)*d),d),k=e/j,l=c(h,k);return l==g.length?g[l-1]:l?g[k/h[l-1]<h[l]/k?l-1:l]:g[l]}function k(a){var b={};return a.forEach(function(a,c){b[+a]=c}),b}function l(a){var b=k(a);return function(d){var e=b[+d];return void 0!==e?a[e]:a[c(a,d)]}}function m(a,b){return(0===a.length||a[a.length-1]!==b)&&a.push(b),a}var n=b.format("%b %e"),o=b.format.multi([["%b %Y",function(a){return a.getMonth()}],["%Y",function(){return!0}]]),p=b.format.multi([[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(){return!0}]]),q=[b.second,1,b.format.multi([[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%b %e",function(){return!0}]])],r=864e5,s=[r,6048e5,2592e6,7776e6,31536e6],t=[[b.day,1,n],[b.monday,1,n],[b.month,1,o],[b.month,3,o],[b.year,1,o]],u=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5],v=[[b.second,1,p],[b.second,5,p],[b.second,15,p],[b.second,30,p],[b.minute,1,p],[b.minute,5,p],[b.minute,15,p],[b.minute,30,p],[b.hour,1,p],[b.hour,3,p],[b.hour,6,p],[b.hour,12,p],[b.day,1,n]];return g}},{}],36:[function(a,b){"use strict";function c(a,b,c,d){return b.length>0?a.extent(b,c).map(e(d)):[]}function d(a,b,d,e){return a.scale.linear().domain(c(a,b,d,e)).range([1,0])}function e(a,b){return a=a||0,function(c,d,e){if(e.length>2)throw"array.length > 2 unsupported. array.length = "+e.length;return b=b||e[e.length-1]-e[0],c+(2*d-1)*b*a}}function f(a,b){return a.map(b).reduce(function(a,b){return a.concat(b)}).filter(function(a){return null!==a})}b.exports=function(b){var c=a("./zoomable")(),g=a("../util")(),h=a("../accessor")(),i=a("./financetime")(b.scale.linear,b.time,b.bisect,g.rebindCallback,e,c);return{financetime:i,analysis:{supstance:function(){return b.scale.linear()},trendline:function(){return b.scale.linear()}},plot:{time:function(a,b){return b=b||h.value(),i().domain(a.map(b.d))},atr:function(a,c){return c=c||h.value(),d(b,a,c,.04)},ichimoku:function(a,c){c=c||h.ichimoku();var d=f(a,function(b,d){var e=a[d+c.pks(b)],f=a[d-c.pks(b)];return[c.ts(b),c.ks(b),f?c.sa(f):null,f?c.sb(f):null,e?c.c(e):null]});return b.scale.linear().domain(b.extent(d).map(e(.02))).range([1,0])},percent:function(a,b){var c=a.domain();return b=b||c[0],a.copy().domain([c[0],c[c.length-1]].map(function(a){return(a-b)/b}))},ohlc:function(a,c){return c=c||h.ohlc(),b.scale.linear().domain([b.min(a.map(c.low())),b.max(a.map(c.high()))].map(e(.02))).range([1,0])},volume:function(a,c){return c=c||h.ohlc().v,b.scale.linear().domain([0,1.15*b.max(a.map(c))]).range([1,0])},atrtrailingstop:function(a,c){c=c||h.atrtrailingstop();var d=f(a,function(a){return[c.up(a),c.dn(a)]});return b.scale.linear().domain(b.extent(d).map(e(.04))).range([1,0])},rsi:function(){return b.scale.linear().domain([0,100]).range([1,0])},momentum:function(a,c){return c=c||h.value(),d(b,a,c,.04)},moneyflow:function(a,c){return c=c||h.value(),d(b,a,c,.04)},macd:function(a,c){return c=c||h.macd(),d(b,a,c,.04)},movingaverage:function(a,c){return c=c||h.value(),d(b,a,c)}},position:{}}}},{"../accessor":4,"../util":39,"./financetime":35,"./zoomable":37}],37:[function(a,b){"use strict";b.exports=function(){function a(b,c,d){var e={},f=!0;return e.invert=b.invert,e.domain=function(a){return arguments.length?(b.domain(f?[Math.max(d[0],a[0]),Math.min(d[1],a[1])]:a),c&&c(),e):b.domain()},e.range=function(){if(!arguments.length)return b.range();throw"zoomable is a read only range. Use this scale for zooming only"},e.copy=function(){return a(b.copy(),c,d)},e.clamp=function(a){return arguments.length?(f=a,e):f},e}return a}},{}],38:[function(a,b){"use strict";var c;if("undefined"!=typeof window)c=window.d3;else{if("object"!=typeof b)throw"Unsupported runtime environment: Could not find d3. Ensure defined globally on window, or available as dependency.";c=a("d3")}b.exports=function(b){return{version:a("../build/version"),accessor:a("./accessor")(),indicator:a("./indicator")(),plot:a("./plot")(b),scale:a("./scale")(b)}}(c)},{"../build/version":1,"./accessor":4,"./indicator":15,"./plot":25,"./scale":36,d3:"d3"}],39:[function(a,b){"use strict";function c(a,b,c){for(var e,f=2,g=arguments.length;++f<g;)a[e=arguments[f]]=d(a,b,b[e],c);return a}function d(a,b,c,d){return function(){var e=c.apply(b,arguments);return d&&e===b&&d(),e===b?a:e}}b.exports=function(){return{rebindCallback:c,rebind:function(){var a=Array.prototype.slice.call(arguments,0);return a.splice(2,0,void 0),c.apply(this,a)}}}},{}]},{},[38])(38)}),function(){"use strict";"undefined"!=typeof process&&process.on("uncaughtException",function(a){console.log("Caught exception: "+a)});var a=angular.module("fim.base",["ngAnimate","ngSanitize","ngTouch","ngTable","ngRoute","ngCookies","ui.bootstrap","ui.validate","pascalprecht.translate","infinite-scroll"]);a.run(["$log","$rootScope","$translate","plugins","serverService",function(a,b,c,d,e){if(a.log("fim.base application started"),isNodeJS){var f=require("nw.gui").Window.get();f.on("close",function(){var a=this;d.get("alerts").confirm({title:"Close Mofowallet",message:"Are you sure you want to exit MofoWallet?"}).then(function(b){if(b){var c=0;angular.forEach(["TYPE_NXT","TYPE_FIM"],function(b){e.isRunning(b)&&(e.addListener(b,"exit",function(){c--,0==c&&a.close(!0)}),c++,e.stopServer(b))}),0==c?(a.hide(),a.close(!0)):d.get("alerts").wait({title:"Please wait",message:"Shutting down"})}})})}}]),a.config(["$translateProvider","$httpProvider",function(a,b){a.useStaticFilesLoader({prefix:"./i18n/",suffix:".json"}),a.preferredLanguage("en"),a.useLocalStorage(),delete b.defaults.headers.common["X-Requested-With"]}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("Setting",function(){var a=null;return{initialize:function(b){return a=b.settings.defineClass({id:String,label:String,value:Object}),a.prototype.save=function(){return b.settings.put(this)},a.prototype.delete=function(){return b.settings.delete(this.id_rs)},a.prototype.update=function(a){return angular.extend(this,a),b.settings.update(this.id,a)},a},get:function(){return a}}})}(),function(){"use strict";var a=angular.module("fim.base");a.factory("Account",function(){var a=null;return{initialize:function(b){return a=b.accounts.defineClass({id:String,id_rs:String,publicKey:String,name:String,engine:String}),a.prototype.formatEngine=function(){return"TYPE_FIM"==this.engine?"FIM accounts":"NXT accounts"},a.prototype.save=function(){return b.accounts.put(this)},a.prototype.delete=function(){return b.accounts.delete(this.id_rs)},a.prototype.update=function(a){return angular.extend(this,a),b.accounts.update(this.id_rs,a)},a},get:function(){return a}}})}(),function(){"use strict";var a=angular.module("fim.base");a.factory("Contact",function(){var a=null;return{initialize:function(b){return a=b.contacts.defineClass({id_rs:String,name:String,email:String,website:String,publicKey:String}),a.prototype.update=function(a){return angular.extend(this,a),b.contacts.update(this.id_rs,a)},a.prototype.save=function(){return b.contacts.put(this)},a.prototype.save=function(){return b.contacts.put(this)},a},get:function(){return a}}})}(),function(){"use strict";var a=angular.module("fim.base");a.factory("Node",function(){var a=null;return{initialize:function(b){return a=b.nodes.defineClass({url:String,port:Number,downloaded:Number,success_timestamp:Number,failed_timestamp:Number,success_status:Number,failed_status:Number,start_timestamp:Number,supports_cors:Boolean,scan_height:Number,onfork:Boolean,version:String,lastBlock:String}),a.prototype.update=function(a){return angular.extend(this,a),b.nodes.update(this.id,a)},a.prototype.save=function(){return b.nodes.put(this)},a.prototype.save=function(){return b.nodes.put(this)},a.prototype.delete=function(){return b.nodes.delete(this.id)},a},get:function(){return a}}})}(),function(){"use strict";var a=angular.module("fim.base");a.factory("MasspayPluginPayment",function(){var a=null;return{initialize:function(b){return a=b.masspay_payments.defineClass({index:Number,senderRS:String,recipientRS:String,amountNQT:String,feeNQT:String,deadline:Number,message:String,messageIsPublic:Boolean,transactionBytes:String,transactionResult:String,transactionSuccess:Boolean,broadcastResult:String,broadcastSuccess:Boolean,created:Boolean,broadcasted:Boolean,blockchainStatus:String}),a.prototype.update=function(a){return angular.extend(this,a),b.masspay_payments.update(this.id,a)},a.prototype.save=function(){return b.masspay_payments.put(this)},a.prototype.delete=function(){return b.masspay_payments.delete(this.id)},a},get:function(){return a}}})}(),!AmCharts)var AmCharts={themes:{},maps:{},inheriting:{},charts:[],onReadyArray:[],useUTC:!1,updateRate:40,uid:0,lang:{},translations:{},mapTranslations:{},windows:{},initHandlers:[]};AmCharts.Class=function(a){var b=function(){arguments[0]!==AmCharts.inheriting&&(this.events={},this.construct.apply(this,arguments))};a.inherits?(b.prototype=new a.inherits(AmCharts.inheriting),b.base=a.inherits.prototype,delete a.inherits):(b.prototype.createEvents=function(){for(var a=0,b=arguments.length;b>a;a++)this.events[arguments[a]]=[]},b.prototype.listenTo=function(a,b,c){this.removeListener(a,b,c),a.events[b].push({handler:c,scope:this})},b.prototype.addListener=function(a,b,c){this.removeListener(this,a,b),this.events[a].push({handler:b,scope:c})},b.prototype.removeListener=function(a,b,c){if(a&&a.events)for(a=a.events[b],b=a.length-1;b>=0;b--)a[b].handler===c&&a.splice(b,1)},b.prototype.fire=function(a,b){for(var c=this.events[a],d=0,e=c.length;e>d;d++){var f=c[d];f.handler.call(f.scope,b)}});for(var c in a)b.prototype[c]=a[c];return b},AmCharts.addChart=function(a){AmCharts.charts.push(a)},AmCharts.removeChart=function(a){for(var b=AmCharts.charts,c=b.length-1;c>=0;c--)b[c]==a&&b.splice(c,1)},AmCharts.isModern=!0,AmCharts.getIEVersion=function(){var a=0;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=/MSIE ([0-9]{1,}[.0-9]{0,})/;null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(b=navigator.userAgent,c=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/,null!=c.exec(b)&&(a=parseFloat(RegExp.$1)));
return a},AmCharts.applyLang=function(a,b){var c=AmCharts.translations;b.dayNames=AmCharts.dayNames,b.shortDayNames=AmCharts.shortDayNames,b.monthNames=AmCharts.monthNames,b.shortMonthNames=AmCharts.shortMonthNames,c&&(c=c[a])&&(AmCharts.lang=c,c.monthNames&&(b.dayNames=c.dayNames,b.shortDayNames=c.shortDayNames,b.monthNames=c.monthNames,b.shortMonthNames=c.shortMonthNames))},AmCharts.IEversion=AmCharts.getIEVersion(),9>AmCharts.IEversion&&0<AmCharts.IEversion&&(AmCharts.isModern=!1,AmCharts.isIE=!0),AmCharts.dx=0,AmCharts.dy=0,(document.addEventListener||window.opera)&&(AmCharts.isNN=!0,AmCharts.isIE=!1,AmCharts.dx=.5,AmCharts.dy=.5),document.attachEvent&&(AmCharts.isNN=!1,AmCharts.isIE=!0,AmCharts.isModern||(AmCharts.dx=0,AmCharts.dy=0)),window.chrome&&(AmCharts.chrome=!0),AmCharts.handleResize=function(){for(var a=AmCharts.charts,b=0;b<a.length;b++){var c=a[b];c&&c.div&&c.handleResize()}},AmCharts.handleMouseUp=function(a){for(var b=AmCharts.charts,c=0;c<b.length;c++){var d=b[c];d&&d.handleReleaseOutside(a)}},AmCharts.handleMouseMove=function(a){for(var b=AmCharts.charts,c=0;c<b.length;c++){var d=b[c];d&&d.handleMouseMove(a)}},AmCharts.handleWheel=function(a){for(var b=AmCharts.charts,c=0;c<b.length;c++){var d=b[c];if(d&&d.mouseIsOver){d.mouseWheelScrollEnabled||d.mouseWheelZoomEnabled?d.handleWheel(a):a.stopPropagation&&a.stopPropagation();break}}},AmCharts.resetMouseOver=function(){for(var a=AmCharts.charts,b=0;b<a.length;b++){var c=a[b];c&&(c.mouseIsOver=!1)}},AmCharts.ready=function(a){AmCharts.onReadyArray.push(a)},AmCharts.handleLoad=function(){AmCharts.isReady=!0;for(var a=AmCharts.onReadyArray,b=0;b<a.length;b++){var c=a[b];isNaN(AmCharts.processDelay)?c():setTimeout(c,AmCharts.processDelay*b)}},AmCharts.addInitHandler=function(a,b){AmCharts.initHandlers.push({method:a,types:b})},AmCharts.callInitHandler=function(a){var b=AmCharts.initHandlers;if(AmCharts.initHandlers)for(var c=0;c<b.length;c++){var d=b[c];d.types?-1!=d.types.indexOf(a.type)&&d.method(a):d.method(a)}},AmCharts.getUniqueId=function(){return AmCharts.uid++,"AmChartsEl-"+AmCharts.uid},AmCharts.isNN&&(document.addEventListener("mousemove",AmCharts.handleMouseMove,!0),window.addEventListener("resize",AmCharts.handleResize,!0),document.addEventListener("mouseup",AmCharts.handleMouseUp,!0),window.addEventListener("load",AmCharts.handleLoad,!0),window.addEventListener("DOMMouseScroll",AmCharts.handleWheel,!0),document.addEventListener("mousewheel",AmCharts.handleWheel,!0)),AmCharts.isIE&&(document.attachEvent("onmousemove",AmCharts.handleMouseMove),window.attachEvent("onresize",AmCharts.handleResize),document.attachEvent("onmouseup",AmCharts.handleMouseUp),window.attachEvent("onload",AmCharts.handleLoad)),AmCharts.clear=function(){var a=AmCharts.charts;if(a)for(var b=0;b<a.length;b++)a[b].clear();AmCharts.charts=null,AmCharts.isNN&&(document.removeEventListener("mousemove",AmCharts.handleMouseMove,!0),window.removeEventListener("resize",AmCharts.handleResize,!0),document.removeEventListener("mouseup",AmCharts.handleMouseUp,!0),window.removeEventListener("load",AmCharts.handleLoad,!0),window.removeEventListener("DOMMouseScroll",AmCharts.handleWheel,!0),document.removeEventListener("mousewheel",AmCharts.handleWheel,!0)),AmCharts.isIE&&(document.detachEvent("onmousemove",AmCharts.handleMouseMove),window.detachEvent("onresize",AmCharts.handleResize),document.detachEvent("onmouseup",AmCharts.handleMouseUp),window.detachEvent("onload",AmCharts.handleLoad))},AmCharts.makeChart=function(a,b,c){var d=b.type,e=b.theme;AmCharts.isString(e)&&(e=AmCharts.themes[e],b.theme=e);var f;switch(d){case"serial":f=new AmCharts.AmSerialChart(e);break;case"xy":f=new AmCharts.AmXYChart(e);break;case"pie":f=new AmCharts.AmPieChart(e);break;case"radar":f=new AmCharts.AmRadarChart(e);break;case"gauge":f=new AmCharts.AmAngularGauge(e);break;case"funnel":f=new AmCharts.AmFunnelChart(e);break;case"map":f=new AmCharts.AmMap(e);break;case"stock":f=new AmCharts.AmStockChart(e)}return AmCharts.extend(f,b),AmCharts.isReady?isNaN(c)?f.write(a):setTimeout(function(){AmCharts.realWrite(f,a)},c):AmCharts.ready(function(){isNaN(c)?f.write(a):setTimeout(function(){AmCharts.realWrite(f,a)},c)}),f},AmCharts.realWrite=function(a,b){a.write(b)},AmCharts.toBoolean=function(a,b){if(void 0===a)return b;switch(String(a).toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1;default:return Boolean(a)}},AmCharts.removeFromArray=function(a,b){var c;if(void 0!=b&&void 0!=a)for(c=a.length-1;c>=0;c--)a[c]==b&&a.splice(c,1)},AmCharts.getDecimals=function(a){var b=0;return isNaN(a)||(a=String(a),-1!=a.indexOf("e-")?b=Number(a.split("-")[1]):-1!=a.indexOf(".")&&(b=a.split(".")[1].length)),b},AmCharts.wrappedText=function(a,b,c,d,e,f,g,h,i){var j=AmCharts.text(a,b,c,d,e,f,g),k="\n";if(AmCharts.isModern||(k="<br>"),i>10)return j;if(j){var l=j.getBBox();if(l.width>h){l=Math.ceil(l.width/h),j.remove();for(var j=[],m=0;-1<(index=b.indexOf(" ",m));)j.push(index),m=index+1;Math.round(b.length/2);for(var n,m=0;m<j.length;m+=Math.ceil(j.length/l))n=j[m],b=b.substr(0,n)+k+b.substr(n+1);if(isNaN(n)){if(0==i)for(m=1;l>m;m++)n=Math.round(b.length/l*m),b=b.substr(0,n)+k+b.substr(n);return AmCharts.text(a,b,c,d,e,f,g)}return AmCharts.wrappedText(a,b,c,d,e,f,g,h,i+1)}return j}},AmCharts.getStyle=function(a,b){var c="";return document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),c=a.currentStyle[b]),c},AmCharts.removePx=function(a){return void 0!=a?Number(a.substring(0,a.length-2)):void 0},AmCharts.getURL=function(a,b){if(a)if("_self"!=b&&b)if("_top"==b&&window.top)window.top.location.href=a;else if("_parent"==b&&window.parent)window.parent.location.href=a;else if("_blank"==b)window.open(a);else{var c=document.getElementsByName(b)[0];c?c.src=a:(c=AmCharts.windows[b])&&c.opener&&!c.opener.closed?c.location.href=a:AmCharts.windows[b]=window.open(a)}else window.location.href=a},AmCharts.ifArray=function(a){return a&&0<a.length?!0:!1},AmCharts.callMethod=function(a,b){var c;for(c=0;c<b.length;c++){var d=b[c];if(d){d[a]&&d[a]();var e=d.length;if(e>0){var f;for(f=0;e>f;f++){var g=d[f];g&&g[a]&&g[a]()}}}}},AmCharts.toNumber=function(a){return"number"==typeof a?a:Number(String(a).replace(/[^0-9\-.]+/g,""))},AmCharts.toColor=function(a){if(""!==a&&void 0!==a)if(-1!=a.indexOf(",")){a=a.split(",");var b;for(b=0;b<a.length;b++){var c=a[b].substring(a[b].length-6,a[b].length);a[b]="#"+c}}else a=a.substring(a.length-6,a.length),a="#"+a;return a},AmCharts.toCoordinate=function(a,b,c){var d;return void 0!==a&&(a=String(a),c&&b>c&&(b=c),d=Number(a),-1!=a.indexOf("!")&&(d=b-Number(a.substr(1))),-1!=a.indexOf("%")&&(d=b*Number(a.substr(0,a.length-1))/100)),d},AmCharts.fitToBounds=function(a,b,c){return b>a&&(a=b),a>c&&(a=c),a},AmCharts.isDefined=function(a){return void 0===a?!1:!0},AmCharts.stripNumbers=function(a){return a.replace(/[0-9]+/g,"")},AmCharts.roundTo=function(a,b){if(0>b)return a;var c=Math.pow(10,b);return Math.round(a*c)/c},AmCharts.toFixed=function(a,b){var c=String(Math.round(a*Math.pow(10,b)));if(b>0){var d=c.length;if(b>d){var e;for(e=0;b-d>e;e++)c="0"+c}return d=c.substring(0,c.length-b),""===d&&(d=0),d+"."+c.substring(c.length-b,c.length)}return String(c)},AmCharts.formatDuration=function(a,b,c,d,e,f){var g=AmCharts.intervals,h=f.decimalSeparator;if(a>=g[b].contains){var i=a-Math.floor(a/g[b].contains)*g[b].contains;return"ss"==b&&(i=AmCharts.formatNumber(i,f),1==i.split(h)[0].length&&(i="0"+i)),("mm"==b||"hh"==b)&&10>i&&(i="0"+i),c=i+""+d[b]+c,a=Math.floor(a/g[b].contains),b=g[b].nextInterval,AmCharts.formatDuration(a,b,c,d,e,f)}if("ss"==b&&(a=AmCharts.formatNumber(a,f),1==a.split(h)[0].length&&(a="0"+a)),("mm"==b||"hh"==b)&&10>a&&(a="0"+a),c=a+""+d[b]+c,g[e].count>g[b].count)for(a=g[b].count;a<g[e].count;a++)b=g[b].nextInterval,"ss"==b||"mm"==b||"hh"==b?c="00"+d[b]+c:"DD"==b&&(c="0"+d[b]+c);return":"==c.charAt(c.length-1)&&(c=c.substring(0,c.length-1)),c},AmCharts.formatNumber=function(a,b,c,d,e){a=AmCharts.roundTo(a,b.precision),isNaN(c)&&(c=b.precision);var f=b.decimalSeparator;b=b.thousandsSeparator;var g;g=0>a?"-":"",a=Math.abs(a);var h=String(a),i=!1;-1!=h.indexOf("e")&&(i=!0),c>=0&&!i&&(h=AmCharts.toFixed(a,c));var j="";if(i)j=h;else{var k,h=h.split("."),i=String(h[0]);for(k=i.length;k>=0;k-=3)j=k!=i.length?0!==k?i.substring(k-3,k)+b+j:i.substring(k-3,k)+j:i.substring(k-3,k);void 0!==h[1]&&(j=j+f+h[1]),void 0!==c&&c>0&&"0"!=j&&(j=AmCharts.addZeroes(j,f,c))}return j=g+j,""===g&&!0===d&&0!==a&&(j="+"+j),!0===e&&(j+="%"),j},AmCharts.addZeroes=function(a,b,c){return a=a.split(b),void 0===a[1]&&c>0&&(a[1]="0"),a[1].length<c?(a[1]+="0",AmCharts.addZeroes(a[0]+b+a[1],b,c)):void 0!==a[1]?a[0]+b+a[1]:a[0]},AmCharts.scientificToNormal=function(a){var b;a=String(a).split("e");var c;if("-"==a[1].substr(0,1)){for(b="0.",c=0;c<Math.abs(Number(a[1]))-1;c++)b+="0";b+=a[0].split(".").join("")}else{var d=0;for(b=a[0].split("."),b[1]&&(d=b[1].length),b=a[0].split(".").join(""),c=0;c<Math.abs(Number(a[1]))-d;c++)b+="0"}return b},AmCharts.toScientific=function(a,b){if(0===a)return"0";var c=Math.floor(Math.log(Math.abs(a))*Math.LOG10E);return Math.pow(10,c),mantissa=String(mantissa).split(".").join(b),String(mantissa)+"e"+c},AmCharts.randomColor=function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},AmCharts.hitTest=function(a,b,c){var d=!1,e=a.x,f=a.x+a.width,g=a.y,h=a.y+a.height,i=AmCharts.isInRectangle;return d||(d=i(e,g,b)),d||(d=i(e,h,b)),d||(d=i(f,g,b)),d||(d=i(f,h,b)),d||!0===c||(d=AmCharts.hitTest(b,a,!0)),d},AmCharts.isInRectangle=function(a,b,c){return a>=c.x-5&&a<=c.x+c.width+5&&b>=c.y-5&&b<=c.y+c.height+5?!0:!1},AmCharts.isPercents=function(a){return-1!=String(a).indexOf("%")?!0:void 0},AmCharts.findPosX=function(a){var b=a,c=a.offsetLeft;if(a.offsetParent){for(;a=a.offsetParent;)c+=a.offsetLeft;for(;(b=b.parentNode)&&b!=document.body;)c-=b.scrollLeft||0}return c},AmCharts.findPosY=function(a){var b=a,c=a.offsetTop;if(a.offsetParent){for(;a=a.offsetParent;)c+=a.offsetTop;for(;(b=b.parentNode)&&b!=document.body;)c-=b.scrollTop||0}return c},AmCharts.findIfFixed=function(a){if(a.offsetParent)for(;a=a.offsetParent;)if("fixed"==AmCharts.getStyle(a,"position"))return!0;return!1},AmCharts.findIfAuto=function(a){return a.style&&"auto"==AmCharts.getStyle(a,"overflow")?!0:a.parentNode?AmCharts.findIfAuto(a.parentNode):!1},AmCharts.findScrollLeft=function(a,b){return a.scrollLeft&&(b+=a.scrollLeft),a.parentNode?AmCharts.findScrollLeft(a.parentNode,b):b},AmCharts.findScrollTop=function(a,b){return a.scrollTop&&(b+=a.scrollTop),a.parentNode?AmCharts.findScrollTop(a.parentNode,b):b},AmCharts.formatValue=function(a,b,c,d,e,f,g,h){if(b){void 0===e&&(e="");var i;for(i=0;i<c.length;i++){var j=c[i],k=b[j];void 0!==k&&(k=f?AmCharts.addPrefix(k,h,g,d):AmCharts.formatNumber(k,d),a=a.replace(new RegExp("\\[\\["+e+j+"\\]\\]","g"),k))}}return a},AmCharts.formatDataContextValue=function(a,b){if(a){var c,d=a.match(/\[\[.*?\]\]/g);for(c=0;c<d.length;c++){var e=d[c],e=e.substr(2,e.length-4);void 0!==b[e]&&(a=a.replace(new RegExp("\\[\\["+e+"\\]\\]","g"),b[e]))}}return a},AmCharts.massReplace=function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];void 0===d&&(d=""),a=a.replace(c,d)}return a},AmCharts.cleanFromEmpty=function(a){return a.replace(/\[\[[^\]]*\]\]/g,"")},AmCharts.addPrefix=function(a,b,c,d,e){var f,g,h,i=AmCharts.formatNumber(a,d),j="";if(0===a)return"0";if(0>a&&(j="-"),a=Math.abs(a),a>1){for(f=b.length-1;f>-1;f--)if(a>=b[f].number&&(g=a/b[f].number,h=Number(d.precision),1>h&&(h=1),c=AmCharts.roundTo(g,h),h=AmCharts.formatNumber(c,{precision:-1,decimalSeparator:d.decimalSeparator,thousandsSeparator:d.thousandsSeparator}),!e||g==c)){i=j+""+h+b[f].prefix;break}}else for(f=0;f<c.length;f++)if(a<=c[f].number){g=a/c[f].number,h=Math.abs(Math.round(Math.log(g)*Math.LOG10E)),g=AmCharts.roundTo(g,h),i=j+""+g+c[f].prefix;break}return i},AmCharts.remove=function(a){a&&a.remove()},AmCharts.recommended=function(){var a="js";return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")||swfobject&&swfobject.hasFlashPlayerVersion("8")&&(a="flash"),a},AmCharts.getEffect=function(a){return">"==a&&(a="easeOutSine"),"<"==a&&(a="easeInSine"),"elastic"==a&&(a="easeOutElastic"),a},AmCharts.getObjById=function(a,b){var c,d;for(d=0;d<a.length;d++){var e=a[d];e.id==b&&(c=e)}return c},AmCharts.applyTheme=function(a,b,c){b||(b=AmCharts.theme),b&&b[c]&&AmCharts.extend(a,b[c])},AmCharts.isString=function(a){return"string"==typeof a?!0:!1},AmCharts.extend=function(a,b,c){for(var d in b)c?a.hasOwnProperty(d)||(a[d]=b[d]):a[d]=b[d];return a},AmCharts.copyProperties=function(a,b){for(var c in a)a.hasOwnProperty(c)&&"events"!=c&&void 0!==a[c]&&"function"!=typeof a[c]&&"cname"!=c&&(b[c]=a[c])},AmCharts.processObject=function(a,b,c){return!1==a instanceof b&&(a=AmCharts.extend(new b(c),a)),a},AmCharts.fixNewLines=function(a){var b=RegExp("\\n","g");return a&&(a=a.replace(b,"<br />")),a},AmCharts.fixBrakes=function(a){if(AmCharts.isModern){var b=RegExp("<br>","g");a&&(a=a.replace(b,"\n"))}else a=AmCharts.fixNewLines(a);return a},AmCharts.deleteObject=function(a,b){if(a&&((void 0===b||null===b)&&(b=20),0!==b))if("[object Array]"===Object.prototype.toString.call(a))for(var c=0;c<a.length;c++)AmCharts.deleteObject(a[c],b-1),a[c]=null;else if(a&&!a.tagName)try{for(c in a)a[c]&&("object"==typeof a[c]&&AmCharts.deleteObject(a[c],b-1),"function"!=typeof a[c]&&(a[c]=null))}catch(d){}},AmCharts.bounce=function(a,b,c,d,e){return(b/=e)<1/2.75?7.5625*d*b*b+c:2/2.75>b?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:2.5/2.75>b?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},AmCharts.easeInSine=function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},AmCharts.easeOutSine=function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},AmCharts.easeOutElastic=function(a,b,c,d,e){a=1.70158;var f=0,g=d;return 0===b?c:1==(b/=e)?c+d:(f||(f=.3*e),g<Math.abs(d)?(g=d,a=f/4):a=f/(2*Math.PI)*Math.asin(d/g),g*Math.pow(2,-10*b)*Math.sin(2*(b*e-a)*Math.PI/f)+d+c)},AmCharts.AxisBase=AmCharts.Class({construct:function(a){this.createEvents("clickItem","rollOverItem","rollOutItem"),this.viY=this.viX=this.y=this.x=this.dy=this.dx=0,this.axisThickness=1,this.axisColor="#000000",this.axisAlpha=1,this.gridCount=this.tickLength=5,this.gridAlpha=.15,this.gridThickness=1,this.gridColor="#000000",this.dashLength=0,this.labelFrequency=1,this.showLastLabel=this.showFirstLabel=!0,this.fillColor="#FFFFFF",this.fillAlpha=0,this.labelsEnabled=!0,this.labelRotation=0,this.autoGridCount=!0,this.valueRollOverColor="#CC0000",this.offset=0,this.guides=[],this.visible=!0,this.counter=0,this.guides=[],this.ignoreAxisWidth=this.inside=!1,this.minHorizontalGap=75,this.minVerticalGap=35,this.titleBold=!0,this.minorGridEnabled=!1,this.minorGridAlpha=.07,this.autoWrap=!1,this.titleAlign="middle",this.labelOffset=0,AmCharts.applyTheme(this,a,"AxisBase")},zoom:function(a,b){this.start=a,this.end=b,this.dataChanged=!0,this.draw()},fixAxisPosition:function(){var a=this.position;"H"==this.orientation?("left"==a&&(a="bottom"),"right"==a&&(a="top")):("bottom"==a&&(a="left"),"top"==a&&(a="right")),this.position=a},draw:function(){var a=this.chart;this.allLabels=[],this.counter=0,this.destroy(),this.fixAxisPosition(),this.labels=[];var b=a.container,c=b.set();a.gridSet.push(c),this.set=c,b=b.set(),a.axesLabelsSet.push(b),this.labelsSet=b,this.axisLine=new this.axisRenderer(this),this.autoGridCount?("V"==this.orientation?(a=this.height/this.minVerticalGap,3>a&&(a=3)):a=this.width/this.minHorizontalGap,this.gridCountR=Math.max(a,1)):this.gridCountR=this.gridCount,this.axisWidth=this.axisLine.axisWidth,this.addTitle()},setOrientation:function(a){this.orientation=a?"H":"V"},addTitle:function(){var a=this.title;if(a){var b=this.chart,c=this.titleColor;void 0===c&&(c=b.color);var d=this.titleFontSize;isNaN(d)&&(d=b.fontSize+1),this.titleLabel=AmCharts.text(b.container,a,c,b.fontFamily,d,this.titleAlign,this.titleBold)}},positionTitle:function(){var a=this.titleLabel;if(a){var b,c,d=this.labelsSet,e={};0<d.length()?e=d.getBBox():(e.x=0,e.y=0,e.width=this.viW,e.height=this.viH),d.push(a);var d=e.x,f=e.y;AmCharts.VML&&(this.rotate?d-=this.x:f-=this.y);var g=e.width,e=e.height,h=this.viW,i=this.viH,j=0,k=a.getBBox().height/2,l=this.inside,m=this.titleAlign;switch(this.position){case"top":b="left"==m?-1:"right"==m?h:h/2,c=f-10-k;break;case"bottom":b="left"==m?-1:"right"==m?h:h/2,c=f+e+10+k;break;case"left":b=d-10-k,l&&(b-=5),c="left"==m?i+1:"right"==m?-1:i/2,j=-90;break;case"right":b=d+g+10+k-3,l&&(b+=7),c="left"==m?i+2:"right"==m?-2:i/2,j=-90}this.marginsChanged?(a.translate(b,c),this.tx=b,this.ty=c):a.translate(this.tx,this.ty),this.marginsChanged=!1,0!==j&&a.rotate(j)}},pushAxisItem:function(a,b){var c=this,d=a.graphics();0<d.length()&&(b?c.labelsSet.push(d):c.set.push(d)),(d=a.getLabel())&&(this.labelsSet.push(d),d.click(function(b){c.handleMouse(b,a,"clickItem")}).mouseover(function(b){c.handleMouse(b,a,"rollOverItem")}).mouseout(function(b){c.handleMouse(b,a,"rollOutItem")}))},handleMouse:function(a,b,c){this.fire(c,{type:c,value:b.value,serialDataItem:b.serialDataItem,axis:this,target:b.label,chart:this.chart,event:a})},addGuide:function(a){for(var b=this.guides,c=!1,d=0;d<b.length;d++)b[d]==a&&(c=!0);c||b.push(a)},removeGuide:function(a){var b,c=this.guides;for(b=0;b<c.length;b++)c[b]==a&&c.splice(b,1)},handleGuideOver:function(a){clearTimeout(this.chart.hoverInt);var b=a.graphics.getBBox(),c=b.x+b.width/2,b=b.y+b.height/2,d=a.fillColor;void 0===d&&(d=a.lineColor),this.chart.showBalloon(a.balloonText,d,!0,c,b)},handleGuideOut:function(){this.chart.hideBalloon()},addEventListeners:function(a,b){var c=this;a.mouseover(function(){c.handleGuideOver(b)}),a.mouseout(function(){c.handleGuideOut(b)})},getBBox:function(){var a=this.labelsSet.getBBox();return AmCharts.VML||(a={x:a.x+this.x,y:a.y+this.y,width:a.width,height:a.height}),a},destroy:function(){AmCharts.remove(this.set),AmCharts.remove(this.labelsSet);var a=this.axisLine;a&&AmCharts.remove(a.set),AmCharts.remove(this.grid0)}}),AmCharts.ValueAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(a){this.cname="ValueAxis",this.createEvents("axisChanged","logarithmicAxisFailed","axisSelfZoomed","axisZoomed"),AmCharts.ValueAxis.base.construct.call(this,a),this.dataChanged=!0,this.stackType="none",this.position="left",this.unitPosition="right",this.recalculateToPercents=this.includeHidden=this.includeGuidesInMinMax=this.integersOnly=!1,this.durationUnits={DD:"d. ",hh:":",mm:":",ss:""},this.scrollbar=!1,this.baseValue=0,this.radarCategoriesEnabled=!0,this.gridType="polygons",this.useScientificNotation=!1,this.axisTitleOffset=10,this.minMaxMultiplier=1,this.logGridLimit=2,this.treatZeroAs=0,AmCharts.applyTheme(this,a,this.cname)},updateData:function(){0>=this.gridCountR&&(this.gridCountR=1),this.totals=[],this.data=this.chart.chartData;var a=this.chart;"xy"!=a.type&&(this.stackGraphs("smoothedLine"),this.stackGraphs("line"),this.stackGraphs("column"),this.stackGraphs("step")),this.recalculateToPercents&&this.recalculate(),this.synchronizationMultiplier&&this.synchronizeWith?(AmCharts.isString(this.synchronizeWith)&&(this.synchronizeWith=a.getValueAxisById(this.synchronizeWith)),this.synchronizeWith&&(this.synchronizeWithAxis(this.synchronizeWith),this.foundGraphs=!0)):(this.foundGraphs=!1,this.getMinMax())},draw:function(){AmCharts.ValueAxis.base.draw.call(this);var a=this.chart,b=this.set;if("duration"==this.type&&(this.duration="ss"),!0===this.dataChanged&&(this.updateData(),this.dataChanged=!1),this.logarithmic){var c=this.treatZeroAs,d=this.getMin(0,this.data.length-1);if(c>0&&0==d&&(this.minReal=d=c),0>=d||0>=this.minimum)return void this.fire("logarithmicAxisFailed",{type:"logarithmicAxisFailed",chart:a})}this.grid0=null;var e,f,g=a.dx,h=a.dy,c=!1,d=this.logarithmic;if(isNaN(this.min)||isNaN(this.max)||!this.foundGraphs||1/0==this.min||-1/0==this.max)c=!0;else{var i,j=this.labelFrequency,k=this.showFirstLabel,l=this.showLastLabel,m=1,n=0,o=Math.round((this.max-this.min)/this.step)+1;!0===d?(i=Math.log(this.max)*Math.LOG10E-Math.log(this.minReal)*Math.LOG10E,this.stepWidth=this.axisWidth/i,i>this.logGridLimit&&(o=Math.ceil(Math.log(this.max)*Math.LOG10E)+1,n=Math.round(Math.log(this.minReal)*Math.LOG10E),o>this.gridCountR&&(m=Math.ceil(o/this.gridCountR)))):this.stepWidth=this.axisWidth/(this.max-this.min);var p=0;1>this.step&&-1<this.step&&(p=AmCharts.getDecimals(this.step)),this.integersOnly&&(p=0),p>this.maxDecCount&&(p=this.maxDecCount);var q=this.precision;isNaN(q)||(p=q),this.max=AmCharts.roundTo(this.max,this.maxDecCount),this.min=AmCharts.roundTo(this.min,this.maxDecCount),f={},f.precision=p,f.decimalSeparator=a.nf.decimalSeparator,f.thousandsSeparator=a.nf.thousandsSeparator,this.numberFormatter=f;var r,s=this.guides;if(e=s.length,e>0){var t=this.fillAlpha;for(f=this.fillAlpha=0;e>f;f++){var u=s[f],v=0/0,w=u.above;isNaN(u.toValue)||(v=this.getCoordinate(u.toValue),r=new this.axisItemRenderer(this,v,"",!0,0/0,0/0,u),this.pushAxisItem(r,w));var x=0/0;isNaN(u.value)||(x=this.getCoordinate(u.value),r=new this.axisItemRenderer(this,x,u.label,!0,0/0,(v-x)/2,u),this.pushAxisItem(r,w)),isNaN(v-x)||(r=new this.guideFillRenderer(this,x,v,u),this.pushAxisItem(r,w),r=r.graphics(),u.graphics=r,u.balloonText&&this.addEventListeners(r,u))}this.fillAlpha=t}for(this.exponential=!1,f=n;o>f;f+=m)s=AmCharts.roundTo(this.step*f+this.min,p),-1!=String(s).indexOf("e")&&(this.exponential=!0,String(s).split("e"));this.duration&&(this.maxInterval=AmCharts.getMaxInterval(this.max,this.duration));var y,p=this.step,s=this.minorGridAlpha;for(this.minorGridEnabled&&(y=this.getMinorGridStep(p,this.stepWidth*p)),f=n;o>f;f+=m)if(n=p*f+this.min,d&&this.max-this.min>5*this.min&&(n-=this.min),n=AmCharts.roundTo(n,this.maxDecCount+1),!(this.integersOnly&&Math.round(n)!=n||!isNaN(q)&&Number(AmCharts.toFixed(n,q))!=n)){if(!0===d&&(0===n&&(n=this.minReal),i>this.logGridLimit&&(n=Math.pow(10,f))),r=this.formatValue(n,!1,f),Math.round(f/j)!=f/j&&(r=void 0),(0===f&&!k||f==o-1&&!l)&&(r=" "),e=this.getCoordinate(n),r=new this.axisItemRenderer(this,e,r,void 0,void 0,void 0,void 0,this.boldLabels),this.pushAxisItem(r),n==this.baseValue&&"radar"!=a.type){var z,A,u=this.viW,w=this.viH;r=this.viX,t=this.viY,"H"==this.orientation?e>=0&&u+1>=e&&(z=[e,e,e+g],A=[w,0,h]):e>=0&&w+1>=e&&(z=[0,u,u+g],A=[e,e,e+h]),z&&(e=AmCharts.fitToBounds(2*this.gridAlpha,0,1),e=AmCharts.line(a.container,z,A,this.gridColor,e,1,this.dashLength),e.translate(r,t),this.grid0=e,a.axesSet.push(e),e.toBack())}if(!isNaN(y)&&s>0&&o-1>f){for(r=this.gridAlpha,this.gridAlpha=this.minorGridAlpha,e=1;p/y>e;e++)t=this.getCoordinate(n+y*e),t=new this.axisItemRenderer(this,t,"",!1,0,0,!1,!1,0,!0),this.pushAxisItem(t);this.gridAlpha=r}}i=this.baseValue,this.min>this.baseValue&&this.max>this.baseValue&&(i=this.min),this.min<this.baseValue&&this.max<this.baseValue&&(i=this.max),d&&i<this.minReal&&(i=this.minReal),this.baseCoord=this.getCoordinate(i),i={type:"axisChanged",target:this,chart:a},i.min=d?this.minReal:this.min,i.max=this.max,this.fire("axisChanged",i),this.axisCreated=!0}d=this.axisLine.set,i=this.labelsSet,this.positionTitle(),"radar"!=a.type?(a=this.viX,y=this.viY,b.translate(a,y),i.translate(a,y)):d.toFront(),!this.visible||c?(b.hide(),d.hide(),i.hide()):(b.show(),d.show(),i.show()),this.axisY=this.y-this.viY,this.axisX=this.x-this.viX},formatValue:function(a,b,c){var d=this.exponential,e=this.logarithmic,f=this.numberFormatter,g=this.chart;return!0===this.logarithmic&&(d=-1!=String(a).indexOf("e")?!0:!1),this.useScientificNotation&&(d=!0),this.usePrefixes&&(d=!1),d?(valueText=-1==String(a).indexOf("e")?a.toExponential(15):String(a),c=valueText.split("e"),b=Number(c[0]),c=Number(c[1]),b=AmCharts.roundTo(b,14),10==b&&(b=1,c+=1),valueText=b+"e"+c,0===a&&(valueText="0"),1==a&&(valueText="1")):(e&&(d=String(a).split("."),d[1]?(f.precision=d[1].length,0>c&&(f.precision=Math.abs(c))):f.precision=-1),valueText=this.usePrefixes?AmCharts.addPrefix(a,g.prefixesOfBigNumbers,g.prefixesOfSmallNumbers,f,!b):AmCharts.formatNumber(a,f,f.precision)),this.duration&&(valueText=AmCharts.formatDuration(a,this.duration,"",this.durationUnits,this.maxInterval,f)),this.recalculateToPercents?valueText+="%":(f=this.unit)&&(valueText="left"==this.unitPosition?f+valueText:valueText+f),this.labelFunction&&(valueText=this.labelFunction(a,valueText,this).toString()),valueText},getMinorGridStep:function(a,b){var c=[5,4,2];60>b&&c.shift();for(var d=Math.floor(Math.log(Math.abs(a))*Math.LOG10E),e=0;e<c.length;e++){var f=a/c[e],g=Math.floor(Math.log(Math.abs(f))*Math.LOG10E);if(!(0<Math.abs(d-g)))if(1>a){if(g=Math.pow(10,-g)*f,g==Math.round(g))return f}else if(f==Math.round(f))return f}},stackGraphs:function(a){var b=this.stackType;"stacked"==b&&(b="regular"),"line"==b&&(b="none"),"100% stacked"==b&&(b="100%"),this.stackType=b;var c,d,e,f,g,h=[],i=[],j=[],k=[],l=this.chart.graphs,m=this.baseValue,n=!1;if(("line"==a||"step"==a||"smoothedLine"==a)&&(n=!0),n&&("regular"==b||"100%"==b))for(g=0;g<l.length;g++)f=l[g],f.hidden||(e=f.type,f.chart==this.chart&&f.valueAxis==this&&a==e&&f.stackable&&(d&&(f.stackGraph=d),d=f));for(d=this.start;d<=this.end;d++){var o=0;for(g=0;g<l.length;g++)if(f=l[g],f.hidden)f.newStack&&(j[d]=0/0,i[d]=0/0);else if(e=f.type,f.chart==this.chart&&f.valueAxis==this&&a==e&&f.stackable)if(e=this.data[d].axes[this.id].graphs[f.id],c=e.values.value,isNaN(c))f.newStack&&(j[d]=0/0,i[d]=0/0);else{var p=AmCharts.getDecimals(c);p>o&&(o=p),isNaN(k[d])?k[d]=Math.abs(c):k[d]+=Math.abs(c),k[d]=AmCharts.roundTo(k[d],o),p=f.fillToGraph,n&&p&&(p=this.data[d].axes[this.id].graphs[p.id])&&(e.values.open=p.values.value),"regular"==b&&(n&&(isNaN(h[d])?(h[d]=c,e.values.close=c,e.values.open=this.baseValue):(e.values.close=isNaN(c)?h[d]:c+h[d],e.values.open=h[d],h[d]=e.values.close)),"column"==a&&(f.newStack&&(j[d]=0/0,i[d]=0/0),e.values.close=c,0>c?(e.values.close=c,isNaN(i[d])?e.values.open=m:(e.values.close+=i[d],e.values.open=i[d]),i[d]=e.values.close):(e.values.close=c,isNaN(j[d])?e.values.open=m:(e.values.close+=j[d],e.values.open=j[d]),j[d]=e.values.close)))}}for(d=this.start;d<=this.end;d++)for(g=0;g<l.length;g++)f=l[g],f.hidden?f.newStack&&(j[d]=0/0,i[d]=0/0):(e=f.type,f.chart==this.chart&&f.valueAxis==this&&a==e&&f.stackable&&(e=this.data[d].axes[this.id].graphs[f.id],c=e.values.value,isNaN(c)||(h=c/k[d]*100,e.values.percents=h,e.values.total=k[d],f.newStack&&(j[d]=0/0,i[d]=0/0),"100%"==b&&(isNaN(i[d])&&(i[d]=0),isNaN(j[d])&&(j[d]=0),0>h?(e.values.close=AmCharts.fitToBounds(h+i[d],-100,100),e.values.open=i[d],i[d]=e.values.close):(e.values.close=AmCharts.fitToBounds(h+j[d],-100,100),e.values.open=j[d],j[d]=e.values.close)))))},recalculate:function(){var a,b=this.chart,c=b.graphs;for(a=0;a<c.length;a++){var d=c[a];if(d.valueAxis==this){var e="value";("candlestick"==d.type||"ohlc"==d.type)&&(e="open");var f,g,h=this.end+2,h=AmCharts.fitToBounds(this.end+1,0,this.data.length-1),i=this.start;i>0&&i--;var j;if(g=this.start,d.compareFromStart&&(g=0),!isNaN(b.startTime)&&(j=b.categoryAxis)){minDuration=j.minDuration();var k=new Date(b.startTime+minDuration/2),l=AmCharts.resetDateToMin(new Date(b.startTime),j.minPeriod).getTime();AmCharts.resetDateToMin(new Date(k),j.minPeriod).getTime()>l&&g++}for((j=b.recalculateFromDate)&&(b.dataDateFormat&&(j=AmCharts.stringToDate(j,b.dataDateFormat)),g=b.getClosestIndex(b.chartData,"time",j.getTime(),!0,0,b.chartData.length),h=b.chartData.length-1),j=g;h>=j&&(g=this.data[j].axes[this.id].graphs[d.id],f=g.values[e],isNaN(f));j++);for(this.recBaseValue=f,e=i;h>=e;e++){g=this.data[e].axes[this.id].graphs[d.id],g.percents={};var m,i=g.values;for(m in i)g.percents[m]="percents"!=m?i[m]/f*100-100:i[m]}}}},getMinMax:function(){var a,b=!1,c=this.chart,d=c.graphs;for(a=0;a<d.length;a++){var e=d[a].type;("line"==e||"step"==e||"smoothedLine"==e)&&this.expandMinMax&&(b=!0)}if(b&&(0<this.start&&this.start--,this.end<this.data.length-1&&this.end++),"serial"==c.type&&(!0!==c.categoryAxis.parseDates||b||this.end<this.data.length-1&&this.end++),b=this.minMaxMultiplier,this.min=this.getMin(this.start,this.end),this.max=this.getMax(),b=(this.max-this.min)*(b-1),this.min-=b,this.max+=b,b=this.guides.length,this.includeGuidesInMinMax&&b>0)for(c=0;b>c;c++)d=this.guides[c],d.toValue<this.min&&(this.min=d.toValue),d.value<this.min&&(this.min=d.value),d.toValue>this.max&&(this.max=d.toValue),d.value>this.max&&(this.max=d.value);isNaN(this.minimum)||(this.min=this.minimum),isNaN(this.maximum)||(this.max=this.maximum),this.min>this.max&&(b=this.max,this.max=this.min,this.min=b),isNaN(this.minTemp)||(this.min=this.minTemp),isNaN(this.maxTemp)||(this.max=this.maxTemp),this.minReal=this.min,this.maxReal=this.max,0===this.min&&0===this.max&&(this.max=9),this.min>this.max&&(this.min=this.max-1),b=this.min,c=this.max,d=this.max-this.min,a=0===d?Math.pow(10,Math.floor(Math.log(Math.abs(this.max))*Math.LOG10E))/10:Math.pow(10,Math.floor(Math.log(Math.abs(d))*Math.LOG10E))/10,isNaN(this.maximum)&&isNaN(this.maxTemp)&&(this.max=Math.ceil(this.max/a)*a+a),isNaN(this.minimum)&&isNaN(this.minTemp)&&(this.min=Math.floor(this.min/a)*a-a),0>this.min&&b>=0&&(this.min=0),0<this.max&&0>=c&&(this.max=0),"100%"==this.stackType&&(this.min=0>this.min?-100:0,this.max=0>this.max?0:100),d=this.max-this.min,a=Math.pow(10,Math.floor(Math.log(Math.abs(d))*Math.LOG10E))/10,this.step=Math.ceil(d/this.gridCountR/a)*a,d=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),d=this.fixStepE(d),a=Math.ceil(this.step/d),a>5&&(a=10),5>=a&&a>2&&(a=5),this.step=Math.ceil(this.step/(d*a))*d*a,1>d?(this.maxDecCount=Math.abs(Math.log(Math.abs(d))*Math.LOG10E),this.maxDecCount=Math.round(this.maxDecCount),this.step=AmCharts.roundTo(this.step,this.maxDecCount+1)):this.maxDecCount=0,this.min=this.step*Math.floor(this.min/this.step),this.max=this.step*Math.ceil(this.max/this.step),0>this.min&&b>=0&&(this.min=0),0<this.max&&0>=c&&(this.max=0),1<this.minReal&&1<this.max-this.minReal&&(this.minReal=Math.floor(this.minReal)),d=Math.pow(10,Math.floor(Math.log(Math.abs(this.minReal))*Math.LOG10E)),0===this.min&&(this.minReal=d),0===this.min&&1<this.minReal&&(this.minReal=1),0<this.min&&0<this.minReal-this.step&&(this.minReal=this.min+this.step<this.minReal?this.min+this.step:this.min),d=Math.log(c)*Math.LOG10E-Math.log(b)*Math.LOG10E,this.logarithmic&&(d>2?(this.minReal=this.min=Math.pow(10,Math.floor(Math.log(Math.abs(b))*Math.LOG10E)),this.max=Math.pow(10,Math.ceil(Math.log(Math.abs(c))*Math.LOG10E))):(c=Math.pow(10,Math.floor(Math.log(Math.abs(this.min))*Math.LOG10E))/10,b=Math.pow(10,Math.floor(Math.log(Math.abs(b))*Math.LOG10E))/10,b>c&&(this.minReal=this.min=10*b)))},fixStepE:function(a){a=a.toExponential(0).split("e");var b=Number(a[1]);return 9==Number(a[0])&&b++,this.generateNumber(1,b)},generateNumber:function(a,b){var c,d="";c=0>b?Math.abs(b)-1:Math.abs(b);var e;for(e=0;c>e;e++)d+="0";return Number(0>b?"0."+d+String(a):String(a)+d)},getMin:function(a,b){var c,d;for(d=a;b>=d;d++){var e,f=this.data[d].axes[this.id].graphs;for(e in f)if(f.hasOwnProperty(e)){var g=this.chart.getGraphById(e);if(g.includeInMinMax&&(!g.hidden||this.includeHidden)){isNaN(c)&&(c=1/0),this.foundGraphs=!0,g=f[e].values,this.recalculateToPercents&&(g=f[e].percents);var h;if(this.minMaxField)h=g[this.minMaxField],c>h&&(c=h);else for(var i in g)g.hasOwnProperty(i)&&"percents"!=i&&"total"!=i&&(h=g[i],c>h&&(c=h))}}}return c},getMax:function(){var a,b;for(b=this.start;b<=this.end;b++){var c,d=this.data[b].axes[this.id].graphs;for(c in d)if(d.hasOwnProperty(c)){var e=this.chart.getGraphById(c);if(e.includeInMinMax&&(!e.hidden||this.includeHidden)){isNaN(a)&&(a=-1/0),this.foundGraphs=!0,e=d[c].values,this.recalculateToPercents&&(e=d[c].percents);
var f;if(this.minMaxField)f=e[this.minMaxField],f>a&&(a=f);else for(var g in e)e.hasOwnProperty(g)&&"percents"!=g&&"total"!=g&&(f=e[g],f>a&&(a=f))}}}return a},dispatchZoomEvent:function(a,b){var c={type:"axisZoomed",startValue:a,endValue:b,target:this,chart:this.chart};this.fire(c.type,c)},zoomToValues:function(a,b){if(a>b){var c=b;b=a,a=c}a<this.min&&(a=this.min),b>this.max&&(b=this.max),c={type:"axisSelfZoomed"},c.chart=this.chart,c.valueAxis=this,c.multiplier=this.axisWidth/Math.abs(this.getCoordinate(b)-this.getCoordinate(a)),c.position=this.getCoordinate("V"==this.orientation?this.reversed?a:b:this.reversed?b:a),this.fire(c.type,c)},coordinateToValue:function(a){if(isNaN(a))return 0/0;var b=this.axisWidth,c=this.stepWidth,d=this.reversed,e=this.rotate,f=this.min,g=this.minReal;return!0===this.logarithmic?Math.pow(10,(e?!0===d?(b-a)/c:a/c:!0===d?a/c:(b-a)/c)+Math.log(g)*Math.LOG10E):!0===d?e?f-(a-b)/c:a/c+f:e?a/c+f:f-(a-b)/c},getCoordinate:function(a){if(isNaN(a))return 0/0;var b=this.rotate,c=this.reversed,d=this.axisWidth,e=this.stepWidth,f=this.min,g=this.minReal;return!0===this.logarithmic?(0==a&&(a=this.treatZeroAs),a=Math.log(a)*Math.LOG10E-Math.log(g)*Math.LOG10E,b=b?!0===c?d-e*a:e*a:!0===c?e*a:d-e*a):b=!0===c?b?d-e*(a-f):e*(a-f):b?e*(a-f):d-e*(a-f),b=this.rotate?b+(this.x-this.viX):b+(this.y-this.viY),1e7<Math.abs(b)&&(b=1e7*(b/Math.abs(b))),Math.round(b)},synchronizeWithAxis:function(a){this.synchronizeWith=a,this.listenTo(this.synchronizeWith,"axisChanged",this.handleSynchronization)},handleSynchronization:function(a){var b=this.synchronizeWith;a=b.min;var c=b.max,b=b.step,d=this.synchronizationMultiplier;d&&(this.min=a*d,this.max=c*d,this.step=b*d,a=Math.pow(10,Math.floor(Math.log(Math.abs(this.step))*Math.LOG10E)),a=Math.abs(Math.log(Math.abs(a))*Math.LOG10E),this.maxDecCount=a=Math.round(a),this.draw())}}),AmCharts.RecAxis=AmCharts.Class({construct:function(a){var b=a.chart,c=a.axisThickness,d=a.axisColor,e=a.axisAlpha,f=a.offset,g=a.dx,h=a.dy,i=a.viX,j=a.viY,k=a.viH,l=a.viW,m=b.container;"H"==a.orientation?(d=AmCharts.line(m,[0,l],[0,0],d,e,c),this.axisWidth=a.width,"bottom"==a.position?(a=c/2+f+k+j-1,c=i):(a=-c/2-f+j+h,c=g+i)):(this.axisWidth=a.height,"right"==a.position?(d=AmCharts.line(m,[0,0,-g],[0,k,k-h],d,e,c),a=j+h,c=c/2+f+g+l+i-1):(d=AmCharts.line(m,[0,0],[0,k],d,e,c),a=j,c=-c/2-f+i)),d.translate(c,a),b.axesSet.push(d),this.set=d}}),AmCharts.RecItem=AmCharts.Class({construct:function(a,b,c,d,e,f,g,h,i,j,k){b=Math.round(b),this.value=c,void 0==c&&(c=""),i||(i=0),void 0==d&&(d=!0);var l=a.chart.fontFamily,m=a.fontSize;void 0==m&&(m=a.chart.fontSize);var n=a.color;void 0==n&&(n=a.chart.color),void 0!==k&&(n=k);var o=a.chart.container,p=o.set();this.set=p;var q=a.axisThickness,r=a.axisColor,s=a.axisAlpha,t=a.tickLength,u=a.gridAlpha,v=a.gridThickness,w=a.gridColor,x=a.dashLength,y=a.fillColor,z=a.fillAlpha,A=a.labelsEnabled;k=a.labelRotation;var B,C,D=a.counter,E=a.inside,F=a.labelOffset,G=a.dx,H=a.dy,I=a.orientation,J=a.position,K=a.previousCoord,L=a.viH,M=a.viW,N=a.offset;g?(A=!0,isNaN(g.tickLength)||(t=g.tickLength),void 0!=g.lineColor&&(w=g.lineColor),void 0!=g.color&&(n=g.color),isNaN(g.lineAlpha)||(u=g.lineAlpha),isNaN(g.dashLength)||(x=g.dashLength),isNaN(g.lineThickness)||(v=g.lineThickness),!0===g.inside&&(E=!0),isNaN(g.labelRotation)||(k=g.labelRotation),isNaN(g.fontSize)||(m=g.fontSize),g.position&&(J=g.position),void 0!==g.boldLabel&&(h=g.boldLabel),isNaN(g.labelOffset)||(F=g.labelOffset)):""===c&&(t=0),C="start",e&&(C="middle");var O,P=k*Math.PI/180,Q=0,R=0,S=0,T=O=0,U=0;"V"==I&&(k=0);var V;A&&(V=a.autoWrap&&0===k?AmCharts.wrappedText(o,c,n,l,m,C,h,e,0):AmCharts.text(o,c,n,l,m,C,h),C=V.getBBox(),T=C.width,U=C.height),"H"==I?(b>=0&&M+1>=b&&(t>0&&s>0&&M+1>=b+i&&(B=AmCharts.line(o,[b+i,b+i],[0,t],r,s,v),p.push(B)),u>0&&(C=AmCharts.line(o,[b,b+G,b+G],[L,L+H,H],w,u,v,x),p.push(C))),R=0,Q=b,g&&90==k&&E&&(Q-=m),!1===d?(C="start",R="bottom"==J?E?R+t:R-t:E?R-t:R+t,Q+=3,e&&(Q+=e/2-3,C="middle"),k>0&&(C="middle")):C="middle",1==D&&z>0&&!g&&!j&&M>K&&(d=AmCharts.fitToBounds(b,0,M),K=AmCharts.fitToBounds(K,0,M),O=d-K,O>0&&(fill=AmCharts.rect(o,O,a.height,y,z),fill.translate(d-O+G,H),p.push(fill))),"bottom"==J?(R+=L+m/2+N,E?(k>0?(R=L-T/2*Math.sin(P)-t-3,Q+=T/2*Math.cos(P)-4+2):0>k?(R=L+T*Math.sin(P)-t-3+2,Q+=-T*Math.cos(P)-U*Math.sin(P)-4):R-=t+m+3+3,R-=F):(k>0?(R=L+T/2*Math.sin(P)+t+3,Q-=T/2*Math.cos(P)):0>k?(R=L+t+3-T/2*Math.sin(P)+2,Q+=T/2*Math.cos(P)):R+=t+q+3+3,R+=F)):(R+=H+m/2-N,Q+=G,E?(k>0?(R=T/2*Math.sin(P)+t+3,Q-=T/2*Math.cos(P)):R+=t+3,R+=F):(k>0?(R=-(T/2)*Math.sin(P)-t-6,Q+=T/2*Math.cos(P)):R-=t+m+3+q+3,R-=F)),"bottom"==J?O=(E?L-t-1:L+q-1)+N:(S=G,O=(E?H:H-t-q+1)-N),f&&(Q+=f),f=Q,k>0&&(f+=T/2*Math.cos(P)),V&&(m=0,E&&(m=T/2*Math.cos(P)),f+m>M+2||0>f)&&(V.remove(),V=null)):(b>=0&&L+1>=b&&(t>0&&s>0&&L+1>=b+i&&(B=AmCharts.line(o,[0,t],[b+i,b+i],r,s,v),p.push(B)),u>0&&(C=AmCharts.line(o,[0,G,M+G],[b,b+H,b+H],w,u,v,x),p.push(C))),C="end",(!0===E&&"left"==J||!1===E&&"right"==J)&&(C="start"),R=b-m/2,1==D&&z>0&&!g&&!j&&(d=AmCharts.fitToBounds(b,0,L),K=AmCharts.fitToBounds(K,0,L),P=d-K,fill=AmCharts.polygon(o,[0,a.width,a.width,0],[0,0,P,P],y,z),fill.translate(G,d-P+H),p.push(fill)),R+=m/2,"right"==J?(Q+=G+M+N,R+=H,E?(f||(R-=m/2+3),Q=Q-(t+4)-F):(Q+=t+4+q,R-=2,Q+=F)):E?(Q+=t+4-N,f||(R-=m/2+3),g&&(Q+=G,R+=H),Q+=F):(Q+=-t-q-4-2-N,R-=2,Q-=F),B&&("right"==J?(S+=G+N+M,O+=H,S=E?S-q:S+q):(S-=N,E||(S-=t+q))),f&&(R+=f),E=-3,"right"==J&&(E+=H),V&&(R>L+1||E>R)&&(V.remove(),V=null)),B&&B.translate(S,O),!1===a.visible&&(B&&B.remove(),V&&(V.remove(),V=null)),V&&(V.attr({"text-anchor":C}),V.translate(Q,R),0!==k&&V.rotate(-k,a.chart.backgroundColor),a.allLabels.push(V)," "!=c&&(this.label=V)),j||(a.counter=0===D?1:0,a.previousCoord=b),0===this.set.node.childNodes.length&&this.set.remove()},graphics:function(){return this.set},getLabel:function(){return this.label}}),AmCharts.RecFill=AmCharts.Class({construct:function(a,b,c,d){var e=a.dx,f=a.dy,g=a.orientation,h=0;if(b>c){var i=b;b=c,c=i}var j=d.fillAlpha;isNaN(j)&&(j=0),i=a.chart.container,d=d.fillColor,"V"==g?(b=AmCharts.fitToBounds(b,0,a.viH),c=AmCharts.fitToBounds(c,0,a.viH)):(b=AmCharts.fitToBounds(b,0,a.viW),c=AmCharts.fitToBounds(c,0,a.viW)),c-=b,isNaN(c)&&(c=4,h=2,j=0),0>c&&"object"==typeof d&&(d=d.join(",").split(",").reverse()),"V"==g?(a=AmCharts.rect(i,a.width,c,d,j),a.translate(e,b-h+f)):(a=AmCharts.rect(i,c,a.height,d,j),a.translate(b-h+e,f)),this.set=i.set([a])},graphics:function(){return this.set},getLabel:function(){}}),AmCharts.AmChart=AmCharts.Class({construct:function(a){this.theme=a,this.version="3.11.3",AmCharts.addChart(this),this.createEvents("dataUpdated","init","rendered","drawn","failed"),this.height=this.width="100%",this.dataChanged=!0,this.chartCreated=!1,this.previousWidth=this.previousHeight=0,this.backgroundColor="#FFFFFF",this.borderAlpha=this.backgroundAlpha=0,this.color=this.borderColor="#000000",this.fontFamily="Verdana",this.fontSize=11,this.usePrefixes=!1,this.precision=-1,this.percentPrecision=2,this.decimalSeparator=".",this.thousandsSeparator=",",this.labels=[],this.allLabels=[],this.titles=[],this.marginRight=this.marginLeft=this.autoMarginOffset=0,this.timeOuts=[],this.creditsPosition="top-left";var b=document.createElement("div"),c=b.style;c.overflow="hidden",c.position="relative",c.textAlign="left",this.chartDiv=b,b=document.createElement("div"),c=b.style,c.overflow="hidden",c.position="relative",c.textAlign="left",this.legendDiv=b,this.titleHeight=0,this.hideBalloonTime=150,this.handDrawScatter=2,this.handDrawThickness=1,this.prefixesOfBigNumbers=[{number:1e3,prefix:"k"},{number:1e6,prefix:"M"},{number:1e9,prefix:"G"},{number:1e12,prefix:"T"},{number:1e15,prefix:"P"},{number:1e18,prefix:"E"},{number:1e21,prefix:"Z"},{number:1e24,prefix:"Y"}],this.prefixesOfSmallNumbers=[{number:1e-24,prefix:"y"},{number:1e-21,prefix:"z"},{number:1e-18,prefix:"a"},{number:1e-15,prefix:"f"},{number:1e-12,prefix:"p"},{number:1e-9,prefix:"n"},{number:1e-6,prefix:""},{number:.001,prefix:"m"}],this.panEventsEnabled=!0,AmCharts.bezierX=3,AmCharts.bezierY=6,this.product="amcharts",this.animations=[],this.balloon=new AmCharts.AmBalloon(this.theme),this.balloon.chart=this,AmCharts.applyTheme(this,a,"AmChart")},drawChart:function(){this.drawBackground(),this.redrawLabels(),this.drawTitles(),this.brr()},drawBackground:function(){AmCharts.remove(this.background);var a=this.container,b=this.backgroundColor,c=this.backgroundAlpha,d=this.set;AmCharts.isModern||0!==c||(c=.001);var e=this.updateWidth();this.realWidth=e;var f=this.updateHeight();this.realHeight=f,this.background=b=AmCharts.polygon(a,[0,e-1,e-1,0],[0,0,f-1,f-1],b,c,1,this.borderColor,this.borderAlpha),d.push(b),(b=this.backgroundImage)&&(this.path&&(b=this.path+b),this.bgImg=a=a.image(b,0,0,e,f),d.push(a))},drawTitles:function(){var a=this.titles;if(AmCharts.ifArray(a)){var b,c=20;for(b=0;b<a.length;b++){var d=a[b],e=d.color;void 0===e&&(e=this.color);var f=d.size;isNaN(f)&&(f=this.fontSize+2),isNaN(d.alpha);var g=this.marginLeft,e=AmCharts.text(this.container,d.text,e,this.fontFamily,f);e.translate(g+(this.realWidth-this.marginRight-g)/2,c),e.node.style.pointerEvents="none",g=!0,void 0!==d.bold&&(g=d.bold),g&&e.attr({"font-weight":"bold"}),e.attr({opacity:d.alpha}),c+=f+6,this.freeLabelsSet.push(e)}}},write:function(a){if(a="object"!=typeof a?document.getElementById(a):a){a.innerHTML="",this.div=a,a.style.overflow="hidden",a.style.textAlign="left";var b=this.chartDiv,c=this.legendDiv,d=this.legend,e=c.style,f=b.style;this.measure();var g,h=document.createElement("div");g=h.style,g.position="relative",this.containerDiv=h,a.appendChild(h);var i=this.exportConfig;if(i&&AmCharts.AmExport&&!this.AmExport&&(this.AmExport=new AmCharts.AmExport(this,i)),this.amExport&&AmCharts.AmExport&&(this.AmExport=AmCharts.extend(this.amExport,new AmCharts.AmExport(this),!0)),this.AmExport&&this.AmExport.init&&this.AmExport.init(),d)switch(d=this.addLegend(d,d.divId),d.position){case"bottom":h.appendChild(b),h.appendChild(c);break;case"top":h.appendChild(c),h.appendChild(b);break;case"absolute":g.width=a.style.width,g.height=a.style.height,e.position="absolute",f.position="absolute",void 0!==d.left&&(e.left=d.left+"px"),void 0!==d.right&&(e.right=d.right+"px"),void 0!==d.top&&(e.top=d.top+"px"),void 0!==d.bottom&&(e.bottom=d.bottom+"px"),d.marginLeft=0,d.marginRight=0,h.appendChild(b),h.appendChild(c);break;case"right":g.width=a.style.width,g.height=a.style.height,e.position="relative",f.position="absolute",h.appendChild(b),h.appendChild(c);break;case"left":g.width=a.style.width,g.height=a.style.height,e.position="absolute",f.position="relative",h.appendChild(b),h.appendChild(c);break;case"outside":h.appendChild(b)}else h.appendChild(b);this.listenersAdded||(this.addListeners(),this.listenersAdded=!0),this.initChart()}},createLabelsSet:function(){AmCharts.remove(this.labelsSet),this.labelsSet=this.container.set(),this.freeLabelsSet.push(this.labelsSet)},initChart:function(){this.initHC||(AmCharts.callInitHandler(this),this.initHC=!0),AmCharts.applyLang(this.language,this);var a=this.numberFormatter;a&&(isNaN(a.precision)||(this.precision=a.precision),void 0!==a.thousandsSeparator&&(this.thousandsSeparator=a.thousandsSeparator),void 0!==a.decimalSeparator&&(this.decimalSeparator=a.decimalSeparator)),(a=this.percentFormatter)&&!isNaN(a.precision)&&(this.percentPrecision=a.precision),this.nf={precision:this.precision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator},this.pf={precision:this.percentPrecision,thousandsSeparator:this.thousandsSeparator,decimalSeparator:this.decimalSeparator},this.divIsFixed=AmCharts.findIfFixed(this.chartDiv),this.previousHeight=this.divRealHeight,this.previousWidth=this.divRealWidth,this.destroy(),this.startInterval(),a=0,document.attachEvent&&!window.opera&&(a=1),this.dmouseX=this.dmouseY=0;var b=document.getElementsByTagName("html")[0];b&&window.getComputedStyle&&(b=window.getComputedStyle(b,null))&&(this.dmouseY=AmCharts.removePx(b.getPropertyValue("margin-top")),this.dmouseX=AmCharts.removePx(b.getPropertyValue("margin-left"))),this.mouseMode=a,(a=this.container)?(a.container.innerHTML="",this.chartDiv.appendChild(a.container),a.setSize(this.realWidth,this.realHeight)):a=new AmCharts.AmDraw(this.chartDiv,this.realWidth,this.realHeight,this),AmCharts.VML||AmCharts.SVG?(a.handDrawn=this.handDrawn,a.handDrawScatter=this.handDrawScatter,a.handDrawThickness=this.handDrawThickness,this.container=a,this.set&&this.set.remove(),this.set=a.set(),this.gridSet&&this.gridSet.remove(),this.gridSet=a.set(),this.cursorLineSet&&this.cursorLineSet.remove(),this.cursorLineSet=a.set(),this.graphsBehindSet&&this.graphsBehindSet.remove(),this.graphsBehindSet=a.set(),this.bulletBehindSet&&this.bulletBehindSet.remove(),this.bulletBehindSet=a.set(),this.columnSet&&this.columnSet.remove(),this.columnSet=a.set(),this.graphsSet&&this.graphsSet.remove(),this.graphsSet=a.set(),this.trendLinesSet&&this.trendLinesSet.remove(),this.trendLinesSet=a.set(),this.axesSet&&this.axesSet.remove(),this.axesSet=a.set(),this.cursorSet&&this.cursorSet.remove(),this.cursorSet=a.set(),this.scrollbarsSet&&this.scrollbarsSet.remove(),this.scrollbarsSet=a.set(),this.bulletSet&&this.bulletSet.remove(),this.bulletSet=a.set(),this.freeLabelsSet&&this.freeLabelsSet.remove(),this.axesLabelsSet&&this.axesLabelsSet.remove(),this.axesLabelsSet=a.set(),this.freeLabelsSet=a.set(),this.balloonsSet&&this.balloonsSet.remove(),this.balloonsSet=a.set(),this.zoomButtonSet&&this.zoomButtonSet.remove(),this.zoomButtonSet=a.set(),this.linkSet&&this.linkSet.remove(),this.linkSet=a.set(),this.renderFix()):this.fire("failed",{type:"failed",chart:this})},measure:function(){var a=this.div;if(a){var b=this.chartDiv,c=a.offsetWidth,d=a.offsetHeight,e=this.container;a.clientHeight&&(c=a.clientWidth,d=a.clientHeight);var f=AmCharts.removePx(AmCharts.getStyle(a,"padding-left")),g=AmCharts.removePx(AmCharts.getStyle(a,"padding-right")),h=AmCharts.removePx(AmCharts.getStyle(a,"padding-top")),i=AmCharts.removePx(AmCharts.getStyle(a,"padding-bottom"));isNaN(f)||(c-=f),isNaN(g)||(c-=g),isNaN(h)||(d-=h),isNaN(i)||(d-=i),f=a.style,a=f.width,f=f.height,-1!=a.indexOf("px")&&(c=AmCharts.removePx(a)),-1!=f.indexOf("px")&&(d=AmCharts.removePx(f)),a=AmCharts.toCoordinate(this.width,c),f=AmCharts.toCoordinate(this.height,d),this.balloon=AmCharts.processObject(this.balloon,AmCharts.AmBalloon,this.theme),this.balloon.chart=this,(a!=this.previousWidth||f!=this.previousHeight)&&a>0&&f>0&&(b.style.width=a+"px",b.style.height=f+"px",e&&e.setSize(a,f)),this.balloon.setBounds(2,2,a-2,f),this.realWidth=a,this.realHeight=f,this.divRealWidth=c,this.divRealHeight=d}},destroy:function(){this.chartDiv.innerHTML="",this.clearTimeOuts(),this.interval&&clearInterval(this.interval),this.interval=0/0},clearTimeOuts:function(){var a=this.timeOuts;if(a){var b;for(b=0;b<a.length;b++)clearTimeout(a[b])}this.timeOuts=[]},clear:function(a){AmCharts.callMethod("clear",[this.chartScrollbar,this.scrollbarV,this.scrollbarH,this.chartCursor]),this.chartCursor=this.scrollbarH=this.scrollbarV=this.chartScrollbar=null,this.clearTimeOuts(),this.interval&&clearInterval(this.interval),this.container&&(this.container.remove(this.chartDiv),this.container.remove(this.legendDiv)),a||AmCharts.removeChart(this)},setMouseCursor:function(a){"auto"==a&&AmCharts.isNN&&(a="default"),this.chartDiv.style.cursor=a,this.legendDiv.style.cursor=a},redrawLabels:function(){this.labels=[];var a=this.allLabels;this.createLabelsSet();var b;for(b=0;b<a.length;b++)this.drawLabel(a[b])},drawLabel:function(a){if(this.container){var b=a.y,c=a.text,d=a.align,e=a.size,f=a.color,g=a.rotation,h=a.alpha,i=a.bold,j=AmCharts.toCoordinate(a.x,this.realWidth),b=AmCharts.toCoordinate(b,this.realHeight);j||(j=0),b||(b=0),void 0===f&&(f=this.color),isNaN(e)&&(e=this.fontSize),d||(d="start"),"left"==d&&(d="start"),"right"==d&&(d="end"),"center"==d&&(d="middle",g?b=this.realHeight-b+b/2:j=this.realWidth/2-j),void 0===h&&(h=1),void 0===g&&(g=0),b+=e/2,c=AmCharts.text(this.container,c,f,this.fontFamily,e,d,i,h),c.translate(j,b),0!==g&&c.rotate(g),a.url?(c.setAttr("cursor","pointer"),c.click(function(){AmCharts.getURL(a.url)})):c.node.style.pointerEvents="none",this.labelsSet.push(c),this.labels.push(c)}},addLabel:function(a,b,c,d,e,f,g,h,i,j){a={x:a,y:b,text:c,align:d,size:e,color:f,alpha:h,rotation:g,bold:i,url:j},this.container&&this.drawLabel(a),this.allLabels.push(a)},clearLabels:function(){var a,b=this.labels;for(a=b.length-1;a>=0;a--)b[a].remove();this.labels=[],this.allLabels=[]},updateHeight:function(){var a=this.divRealHeight,b=this.legend;if(b){var c=this.legendDiv.offsetHeight,b=b.position;("top"==b||"bottom"==b)&&(a-=c,(0>a||isNaN(a))&&(a=0),this.chartDiv.style.height=a+"px")}return a},updateWidth:function(){var a=this.divRealWidth,b=this.divRealHeight,c=this.legend;if(c){var d=this.legendDiv,e=d.offsetWidth;isNaN(c.width)||(e=c.width);var f=d.offsetHeight,d=d.style,g=this.chartDiv.style,c=c.position;("right"==c||"left"==c)&&(a-=e,(0>a||isNaN(a))&&(a=0),g.width=a+"px","left"==c?g.left=e+"px":d.left=a+"px",b>f&&(d.top=(b-f)/2+"px"))}return a},getTitleHeight:function(){var a=0,b=this.titles;if(0<b.length){var c,a=15;for(c=0;c<b.length;c++){var d=b[c].size;isNaN(d)&&(d=this.fontSize+2),a+=d+6}}return a},addTitle:function(a,b,c,d,e){return isNaN(b)&&(b=this.fontSize+2),a={text:a,size:b,color:c,alpha:d,bold:e},this.titles.push(a),a},handleWheel:function(a){var b=0;a||(a=window.event),a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3),b&&this.handleWheelReal(b,a.shiftKey),a.preventDefault&&a.preventDefault()},handleWheelReal:function(){},addListeners:function(){var a=this,b=a.chartDiv;document.addEventListener?(a.panEventsEnabled&&(b.style.msTouchAction="none"),"ontouchstart"in document.documentElement&&(b.addEventListener("touchstart",function(b){a.handleTouchMove.call(a,b),a.handleTouchStart.call(a,b)},!0),b.addEventListener("touchmove",function(b){a.handleTouchMove.call(a,b)},!0),b.addEventListener("touchend",function(b){a.handleTouchEnd.call(a,b)},!0)),b.addEventListener("mousedown",function(b){a.mouseIsOver=!0,a.handleMouseMove.call(a,b),a.handleMouseDown.call(a,b)},!0),b.addEventListener("mouseover",function(b){a.handleMouseOver.call(a,b)},!0),b.addEventListener("mouseout",function(b){a.handleMouseOut.call(a,b)},!0)):(b.attachEvent("onmousedown",function(b){a.handleMouseDown.call(a,b)}),b.attachEvent("onmouseover",function(b){a.handleMouseOver.call(a,b)}),b.attachEvent("onmouseout",function(b){a.handleMouseOut.call(a,b)}))},dispDUpd:function(){var a;this.dispatchDataUpdated&&(this.dispatchDataUpdated=!1,a="dataUpdated",this.fire(a,{type:a,chart:this})),this.chartCreated||(a="init",this.fire(a,{type:a,chart:this})),this.chartRendered||(a="rendered",this.fire(a,{type:a,chart:this}),this.chartRendered=!0),a="drawn",this.fire(a,{type:a,chart:this})},validateSize:function(){var a=this;a.measure();var b=a.legend;if((a.realWidth!=a.previousWidth||a.realHeight!=a.previousHeight)&&0<a.realWidth&&0<a.realHeight){if(a.sizeChanged=!0,b){clearTimeout(a.legendInitTO);var c=setTimeout(function(){b.invalidateSize()},100);a.timeOuts.push(c),a.legendInitTO=c}a.marginsUpdated="xy"!=a.type?!1:!0,clearTimeout(a.initTO),c=setTimeout(function(){a.initChart()},150),a.timeOuts.push(c),a.initTO=c}a.renderFix(),b&&b.renderFix()},invalidateSize:function(){this.previousHeight=this.previousWidth=0/0,this.invalidateSizeReal()},invalidateSizeReal:function(){var a=this;a.marginsUpdated=!1,clearTimeout(a.validateTO);var b=setTimeout(function(){a.validateSize()},5);a.timeOuts.push(b),a.validateTO=b},validateData:function(a){this.chartCreated&&(this.dataChanged=!0,this.marginsUpdated="xy"!=this.type?!1:!0,this.initChart(a))},validateNow:function(){this.chartRendered=!1,this.write(this.div)},showItem:function(a){a.hidden=!1,this.initChart()},hideItem:function(a){a.hidden=!0,this.initChart()},hideBalloon:function(){var a=this;clearInterval(a.hoverInt),clearTimeout(a.balloonTO),a.hoverInt=setTimeout(function(){a.hideBalloonReal.call(a)},a.hideBalloonTime)},cleanChart:function(){},hideBalloonReal:function(){var a=this.balloon;a&&a.hide()},showBalloon:function(a,b,c,d,e){var f=this;clearTimeout(f.balloonTO),clearInterval(f.hoverInt),f.balloonTO=setTimeout(function(){f.showBalloonReal.call(f,a,b,c,d,e)},1)},showBalloonReal:function(a,b,c,d,e){this.handleMouseMove();var f=this.balloon;f.enabled&&(f.followCursor(!1),f.changeColor(b),!c||f.fixedPosition?(f.setPosition(d,e),f.followCursor(!1)):f.followCursor(!0),a&&f.showBalloon(a))},handleTouchMove:function(a){this.hideBalloon();var b=this.chartDiv;a.touches&&(a=a.touches.item(0),this.mouseX=a.pageX-AmCharts.findPosX(b),this.mouseY=a.pageY-AmCharts.findPosY(b))},handleMouseOver:function(){AmCharts.resetMouseOver(),this.mouseIsOver=!0},handleMouseOut:function(){AmCharts.resetMouseOver(),this.mouseIsOver=!1},handleMouseMove:function(a){if(this.mouseIsOver){var b=this.chartDiv;a||(a=window.event);var c,d;if(a){switch(this.posX=AmCharts.findPosX(b),this.posY=AmCharts.findPosY(b),this.mouseMode){case 1:if(c=a.clientX-this.posX,d=a.clientY-this.posY,!this.divIsFixed){var e,f,b=document.body;b&&(e=b.scrollLeft,y1=b.scrollTop),(b=document.documentElement)&&(f=b.scrollLeft,y2=b.scrollTop),e=Math.max(e,f),f=Math.max(y1,y2),c+=e,d+=f}break;case 0:this.divIsFixed?(c=a.clientX-this.posX,d=a.clientY-this.posY):(c=a.pageX-this.posX,d=a.pageY-this.posY)}a.touches&&(a=a.touches.item(0),c=a.pageX-this.posX,d=a.pageY-this.posY),this.mouseX=c-this.dmouseX,this.mouseY=d-this.dmouseY}}},handleTouchStart:function(a){this.handleMouseDown(a)},handleTouchEnd:function(a){AmCharts.resetMouseOver(),this.handleReleaseOutside(a)},handleReleaseOutside:function(){},handleMouseDown:function(a){AmCharts.resetMouseOver(),this.mouseIsOver=!0,a&&a.preventDefault&&(this.panEventsEnabled?a.preventDefault():a.touches||a.preventDefault())},addLegend:function(a,b){a=AmCharts.processObject(a,AmCharts.AmLegend,this.theme),a.divId=b;var c;return c="object"!=typeof b&&b?document.getElementById(b):b,this.legend=a,a.chart=this,c?(a.div=c,a.position="outside",a.autoMargins=!1):a.div=this.legendDiv,c=this.handleLegendEvent,this.listenTo(a,"showItem",c),this.listenTo(a,"hideItem",c),this.listenTo(a,"clickMarker",c),this.listenTo(a,"rollOverItem",c),this.listenTo(a,"rollOutItem",c),this.listenTo(a,"rollOverMarker",c),this.listenTo(a,"rollOutMarker",c),this.listenTo(a,"clickLabel",c),a},removeLegend:function(){this.legend=void 0,this.legendDiv.innerHTML=""},handleResize:function(){(AmCharts.isPercents(this.width)||AmCharts.isPercents(this.height))&&this.invalidateSizeReal(),this.renderFix()},renderFix:function(){if(!AmCharts.VML){var a=this.container;a&&a.renderFix()}},getSVG:function(){return AmCharts.hasSVG?this.container:void 0},animate:function(a,b,c,d,e,f,g){return a["an_"+b]&&AmCharts.removeFromArray(this.animations,a["an_"+b]),c={obj:a,frame:0,attribute:b,from:c,to:d,time:e,effect:f,suffix:g},a["an_"+b]=c,this.animations.push(c),c},setLegendData:function(a){var b=this.legend;b&&b.setData(a)},startInterval:function(){var a=this;clearInterval(a.interval),a.interval=setInterval(function(){a.updateAnimations.call(a)},AmCharts.updateRate)},stopAnim:function(a){AmCharts.removeFromArray(this.animations,a)},updateAnimations:function(){var a;for(this.container&&this.container.update(),a=this.animations.length-1;a>=0;a--){var b=this.animations[a],c=1e3*b.time/AmCharts.updateRate,d=b.frame+1,e=b.obj,f=b.attribute;if(c>=d){b.frame++;var g=Number(b.from),h=Number(b.to)-g,c=AmCharts[b.effect](0,d,g,h,c);0===h?(this.animations.splice(a,1),e.node.style[f]=Number(b.to)+b.suffix):e.node.style[f]=c+b.suffix}else e.node.style[f]=Number(b.to)+b.suffix,this.animations.splice(a,1)}},inIframe:function(){try{return window.self!==window.top}catch(a){return!0}},brr:function(){var a,b=window.location.hostname.split(".");if(2<=b.length&&(a=b[b.length-2]+"."+b[b.length-1]),this.amLink&&(b=this.amLink.parentNode)&&b.removeChild(this.amLink),b=this.creditsPosition,"amcharts.com"!=a||!0===this.inIframe()){var c=a=0,d=this.realWidth,e=this.realHeight;("serial"==this.type||"xy"==this.type)&&(a=this.marginLeftReal,c=this.marginTopReal,d=a+this.plotAreaWidth,e=c+this.plotAreaHeight);var f="http://www.amcharts.com/javascript-charts/",g="JavaScript charts",h="JS chart by amCharts";"ammap"==this.product&&(f="http://www.ammap.com/javascript-maps/",g="Interactive JavaScript maps",h="JS map by amCharts");var i=document.createElement("a"),h=document.createTextNode(h);i.setAttribute("href",f),i.setAttribute("title",g),i.appendChild(h),this.chartDiv.appendChild(i),this.amLink=i,f=i.style,f.position="absolute",f.textDecoration="none",f.color=this.color,f.fontFamily=this.fontFamily,f.fontSize=this.fontSize+"px",f.opacity=.7,f.display="block";var g=i.offsetWidth,i=i.offsetHeight,h=5+a,j=c+5;"bottom-left"==b&&(h=5+a,j=e-i-3),"bottom-right"==b&&(h=d-g-5,j=e-i-3),"top-right"==b&&(h=d-g-5,j=c+5),f.left=h+"px",f.top=j+"px"}}}),AmCharts.Slice=AmCharts.Class({construct:function(){}}),AmCharts.SerialDataItem=AmCharts.Class({construct:function(){}}),AmCharts.GraphDataItem=AmCharts.Class({construct:function(){}}),AmCharts.Guide=AmCharts.Class({construct:function(a){this.cname="Guide",AmCharts.applyTheme(this,a,this.cname)}}),AmCharts.AmGraph=AmCharts.Class({construct:function(a){this.cname="AmGraph",this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph"),this.type="line",this.stackable=!0,this.columnCount=1,this.columnIndex=0,this.centerCustomBullets=this.showBalloon=!0,this.maxBulletSize=50,this.minBulletSize=4,this.balloonText="[[value]]",this.hidden=this.scrollbar=this.animationPlayed=!1,this.pointPosition="middle",this.depthCount=1,this.includeInMinMax=!0,this.negativeBase=0,this.visibleInLegend=!0,this.showAllValueLabels=!1,this.showBulletsAt=this.showBalloonAt="close",this.lineThickness=1,this.dashLength=0,this.connect=!0,this.lineAlpha=1,this.bullet="none",this.bulletBorderThickness=2,this.bulletBorderAlpha=0,this.bulletAlpha=1,this.bulletSize=8,this.cornerRadiusTop=this.hideBulletsCount=this.bulletOffset=0,this.cursorBulletAlpha=1,this.gradientOrientation="vertical",this.dy=this.dx=0,this.periodValue="",this.clustered=!0,this.periodSpan=1,this.y=this.x=0,this.switchable=!0,this.tcc=this.minDistance=1,this.labelRotation=0,this.labelAnchor="auto",this.labelOffset=3,AmCharts.applyTheme(this,a,this.cname)},draw:function(){var a=this.chart,b=this.chart.type;isNaN(this.precision)||(this.numberFormatter?this.numberFormatter.precision=this.precision:this.numberFormatter={precision:this.precision,decimalSeparator:a.decimalSeparator,thousandsSeparator:a.thousandsSeparator});var c=a.container;this.container=c,this.destroy();var d=c.set(),e=c.set();this.behindColumns?(a.graphsBehindSet.push(d),a.bulletBehindSet.push(e)):(a.graphsSet.push(d),a.bulletSet.push(e));var f=this.bulletAxis;if(AmCharts.isString(f)&&(this.bulletAxis=a.getValueAxisById(f)),this.bulletSet=e,!this.scrollbar){var f=a.marginLeftReal,g=a.marginTopReal;d.translate(f,g),e.translate(f,g)}c=c.set(),AmCharts.remove(this.columnsSet),d.push(c),this.set=d,this.columnsSet=c,this.columnsArray=[],this.ownColumns=[],this.allBullets=[],this.animationArray=[],d=this.labelPosition,d||(c=this.valueAxis.stackType,d="top","column"==this.type&&(a.rotate&&(d="right"),"100%"==c||"regular"==c)&&(d="middle"),this.labelPosition=d),AmCharts.ifArray(this.data)&&(a=!1,"xy"==b?this.xAxis.axisCreated&&this.yAxis.axisCreated&&(a=!0):this.valueAxis.axisCreated&&(a=!0),!this.hidden&&a&&this.createGraph())},createGraph:function(){var a=this,b=a.chart;if(a.startAlpha=b.startAlpha,a.seqAn=b.sequencedAnimation,a.baseCoord=a.valueAxis.baseCoord,void 0===a.fillAlphas&&(a.fillAlphas=0),a.bulletColorR=a.bulletColor,void 0===a.bulletColorR&&(a.bulletColorR=a.lineColorR,a.bulletColorNegative=a.negativeLineColor),void 0===a.bulletAlpha&&(a.bulletAlpha=a.lineAlpha),clearTimeout(a.playedTO),!isNaN(a.valueAxis.min)&&!isNaN(a.valueAxis.max)){switch(b.type){case"serial":a.categoryAxis&&(a.createSerialGraph(),"candlestick"==a.type&&1>a.valueAxis.minMaxMultiplier&&a.positiveClip(a.set));break;case"radar":a.createRadarGraph();break;case"xy":a.createXYGraph(),a.positiveClip(a.set)}a.playedTO=setTimeout(function(){a.setAnimationPlayed.call(a)},500*a.chart.startDuration)}},setAnimationPlayed:function(){this.animationPlayed=!0},createXYGraph:function(){var a=[],b=[],c=this.xAxis,d=this.yAxis;this.pmh=d.viH+1,this.pmw=c.viW+1,this.pmy=this.pmx=0;var e;for(e=this.start;e<=this.end;e++){var f=this.data[e].axes[c.id].graphs[this.id],g=f.values,h=g.x,i=g.y,g=c.getCoordinate(h),j=d.getCoordinate(i);!isNaN(h)&&!isNaN(i)&&(a.push(g),b.push(j),h=this.createBullet(f,g,j,e),i=this.labelText)&&(f=this.createLabel(f,g,j,i),this.positionLabel(g,j,f,h),this.allBullets.push(f))}this.drawLineGraph(a,b),this.launchAnimation()},createRadarGraph:function(){var a,b,c,d=this.valueAxis.stackType,e=[],f=[];for(c=this.start;c<=this.end;c++){var g,h=this.data[c].axes[this.valueAxis.id].graphs[this.id];if(g="none"==d||"3d"==d?h.values.value:h.values.close,isNaN(g))this.drawLineGraph(e,f),e=[],f=[];else{var i=this.y-(this.valueAxis.getCoordinate(g)-this.height),j=180-360/(this.end-this.start+1)*c;g=i*Math.sin(j/180*Math.PI),i*=Math.cos(j/180*Math.PI),e.push(g),f.push(i);var j=this.createBullet(h,g,i,c),k=this.labelText;k&&(h=this.createLabel(h,g,i,k),this.positionLabel(g,i,h,j),this.allBullets.push(h)),isNaN(a)&&(a=g),isNaN(b)&&(b=i)}}e.push(a),f.push(b),this.drawLineGraph(e,f),this.launchAnimation()},positionLabel:function(a,b,c,d,e,f){switch(fontSize=this.fontSize,lA="middle",lR=0,lC=!1,lP=this.labelPosition,lBB=c.getBBox(),cBB=null,graphDataItem=d.graphDataItem,isRotated=this.chart.rotate,isNegative=graphDataItem.isNegative,void 0===fontSize&&(fontSize=this.chart.fontSize),b-=lBB.height/4/2,lP){case"top":lP=isRotated?"top":isNegative?"bottom":"top";break;case"right":lP=isRotated&&isNegative?"left":"right";break;case"bottom":lP=isRotated?"bottom":isNegative?"top":"bottom";break;case"left":lP=isRotated&&isNegative?"right":"left"}e=graphDataItem.columnGraphics;var g=f=0;switch(e&&(f=e.x,g=e.y),lP){case"top":b-=d.size/2+lBB.height/2+this.labelOffset;break;case"right":lA="start",a+=d.size/2+this.labelOffset;break;case"bottom":b+=d.size/2+lBB.height/2+this.labelOffset;break;case"left":lA="end",a-=d.size/2+this.labelOffset;break;case"inside":"column"==this.type&&(lC=!0,isRotated?isNegative?(lA="end",a=f-3-this.labelOffset):(lA="start",a=f+3+this.labelOffset):b=isNegative?g+7+this.labelOffset:g-10-this.labelOffset);break;case"middle":"column"==this.type&&(lC=!0,isRotated?a-=(a-f)/2+this.labelOffset-3:b-=(b-g)/2+this.labelOffset-3)}return"auto"!=this.labelAnchor&&(lA=this.labelAnchor),c.attr({"text-anchor":lA}),this.labelRotation&&c.rotate(this.labelRotation),c.translate(a,b),lBB=c.getBBox(),e&&lC&&(lBB.height>graphDataItem.columnHeight||lBB.width>graphDataItem.columnWidth)&&(c.remove(),c=!1),c&&"serial"==this.chart.type&&(isRotated?(0>b||b>this.height)&&(c.remove(),c=!1):(0>a||a>this.width)&&(c.remove(),c=!1)),c},getGradRotation:function(){var a=270;return"horizontal"==this.gradientOrientation&&(a=0),this.gradientRotation=a},createSerialGraph:function(){this.dashLengthSwitched=this.fillColorsSwitched=this.lineColorSwitched=void 0;var a=this.chart,b=this.id,c=this.index,d=this.data,e=this.chart.container,f=this.valueAxis,g=this.type,h=this.columnWidthReal,i=this.showBulletsAt;isNaN(this.columnWidth)||(h=this.columnWidth),isNaN(h)&&(h=.8);var j,k,l,m,n,o,p=this.useNegativeColorIfDown,q=this.width,r=this.height,s=this.y,t=this.rotate,u=this.columnCount,v=AmCharts.toCoordinate(this.cornerRadiusTop,h/2),w=this.connect,x=[],y=[],z=this.chart.graphs.length,A=this.dx/this.tcc,B=this.dy/this.tcc,C=f.stackType,D=this.start,E=this.end,F=this.scrollbar,G=this.categoryAxis,H=this.baseCoord,I=this.negativeBase,J=this.columnIndex,K=this.lineThickness,L=this.lineAlpha,M=this.lineColorR,N=this.dashLength,O=this.set,P=this.getGradRotation(),Q=this.chart.columnSpacing,R=G.cellWidth,S=(R*h-u)/u;
Q>S&&(Q=S);var T,U,V,W,X,Y,Z,$=r+1,_=q+1,ab=0,bb=0,cb=this.fillColorsR,db=this.negativeFillColors,eb=this.negativeLineColor,fb=this.fillAlphas,gb=this.negativeFillAlphas;"object"==typeof fb&&(fb=fb[0]),"object"==typeof gb&&(gb=gb[0]);var hb=f.getCoordinate(f.min);if(f.logarithmic&&(hb=f.getCoordinate(f.minReal)),this.minCoord=hb,this.resetBullet&&(this.bullet="none"),!(F||"line"!=g&&"smoothedLine"!=g&&"step"!=g||(1==d.length&&"step"!=g&&"none"==this.bullet&&(this.bullet="round",this.resetBullet=!0),!db&&void 0==eb||p))){var ib=I;ib>f.max&&(ib=f.max),ib<f.min&&(ib=f.min),f.logarithmic&&(ib=f.minReal);var jb=f.getCoordinate(ib),kb=f.getCoordinate(f.max);t?($=r,_=Math.abs(kb-jb),W=r,X=Math.abs(hb-jb),Z=bb=0,f.reversed?(ab=0,Y=jb):(ab=jb,Y=0)):(_=q,$=Math.abs(kb-jb),X=q,W=Math.abs(hb-jb),Y=ab=0,f.reversed?(Z=s,bb=jb):Z=jb+1)}var lb=Math.round;this.pmx=lb(ab),this.pmy=lb(bb),this.pmh=lb($),this.pmw=lb(_),this.nmx=lb(Y),this.nmy=lb(Z),this.nmh=lb(W),this.nmw=lb(X),AmCharts.isModern||(this.nmy=this.nmx=0,this.nmh=this.height),this.clustered||(u=1),h="column"==g?(R*h-Q*(u-1))/u:R*h,1>h&&(h=1);var mb=this.fixedColumnWidth;isNaN(mb)||(h=mb);var nb;if("line"==g||"step"==g||"smoothedLine"==g){if(D>0){for(nb=D-1;nb>-1;nb--)if(T=d[nb],U=T.axes[f.id].graphs[b],V=U.values.value,!isNaN(V)){D=nb;break}if(this.lineColorField)for(nb=D;nb>-1;nb--)if(T=d[nb],U=T.axes[f.id].graphs[b],U.lineColor){this.bulletColorSwitched=this.lineColorSwitched=U.lineColor;break}if(this.fillColorsField)for(nb=D;nb>-1;nb--)if(T=d[nb],U=T.axes[f.id].graphs[b],U.fillColors){this.fillColorsSwitched=U.fillColors;break}if(this.dashLengthField)for(nb=D;nb>-1;nb--)if(T=d[nb],U=T.axes[f.id].graphs[b],!isNaN(U.dashLength)){this.dashLengthSwitched=U.dashLength;break}}if(E<d.length-1)for(nb=E+1;nb<d.length;nb++)if(T=d[nb],U=T.axes[f.id].graphs[b],V=U.values.value,!isNaN(V)){E=nb;break}}E<d.length-1&&E++;var ob=[],pb=[],qb=!1;("line"==g||"step"==g||"smoothedLine"==g)&&(this.stackable&&"regular"==C||"100%"==C||this.fillToGraph)&&(qb=!0);var rb=this.noStepRisers,sb=-1e3,tb=-1e3,ub=this.minDistance,vb=!0,wb=!1;for(nb=D;E>=nb;nb++){T=d[nb],U=T.axes[f.id].graphs[b],U.index=nb;var xb,yb=0/0;if(p&&void 0==this.openField)for(var zb=nb+1;zb<d.length&&(!d[zb]||!(xb=d[nb+1].axes[f.id].graphs[b])||!xb.values||(yb=xb.values.value,isNaN(yb)));zb++);var Ab,Bb,Cb,Db,Eb,Fb,Gb=0/0,Hb=0/0,Ib=0/0,Jb=0/0,Kb=0/0,Lb=0/0,Mb=0/0,Nb=0/0,Ob=0/0,Pb=0/0,Qb=0/0,Rb=0/0,Sb=0/0,Tb=0/0,Ub=0/0,Vb=0/0,Wb=0/0,Xb=void 0,Yb=cb,Zb=fb,$b=M,_b=this.proCandlesticks,ac=this.pattern;void 0!=U.pattern&&(ac=U.pattern),void 0!=U.color&&(Yb=U.color),U.fillColors&&(Yb=U.fillColors),isNaN(U.alpha)||(Zb=U.alpha),isNaN(U.dashLength)||(N=U.dashLength);var bc=U.values;if(f.recalculateToPercents&&(bc=U.percents),bc){if(Tb=this.stackable&&"none"!=C&&"3d"!=C?bc.close:bc.value,("candlestick"==g||"ohlc"==g)&&(Tb=bc.close,Vb=bc.low,Mb=f.getCoordinate(Vb),Ub=bc.high,Ob=f.getCoordinate(Ub)),Wb=bc.open,Ib=f.getCoordinate(Tb),isNaN(Wb)||(Kb=f.getCoordinate(Wb),p&&(yb=Wb,Wb=Kb=0/0)),p&&(void 0==this.openField?xb&&(xb.isNegative=Tb>yb?!0:!1,isNaN(yb)&&(U.isNegative=!vb)):U.isNegative=yb>Tb?!0:!1),!F)switch(this.showBalloonAt){case"close":U.y=Ib;break;case"open":U.y=Kb;break;case"high":U.y=Ob;break;case"low":U.y=Mb}var Gb=T.x[G.id],cc=this.periodSpan-1,dc=Math.floor(R/2)+Math.floor(cc*R/2),ec=dc,fc=0;if("left"==this.stepDirection&&(fc=(2*R+cc*R)/2,Gb-=fc),"center"==this.stepDirection&&(fc=R/2,Gb-=fc),"start"==this.pointPosition&&(Gb-=R/2+Math.floor(cc*R/2),dc=0,ec=Math.floor(R)+Math.floor(cc*R)),"end"==this.pointPosition&&(Gb+=R/2+Math.floor(cc*R/2),dc=Math.floor(R)+Math.floor(cc*R),ec=0),rb){var gc=this.columnWidth;isNaN(gc)||(dc*=gc,ec*=gc)}switch(F||(U.x=Gb),-1e5>Gb&&(Gb=-1e5),Gb>q+1e5&&(Gb=q+1e5),t?(Hb=Ib,Jb=Kb,Kb=Ib=Gb,isNaN(Wb)&&!this.fillToGraph&&(Jb=H),Lb=Mb,Nb=Ob):(Jb=Hb=Gb,isNaN(Wb)&&!this.fillToGraph&&(Kb=H)),(!_b&&Wb>Tb||_b&&o>Tb)&&(U.isNegative=!0,db&&(Yb=db),gb&&(Zb=gb),void 0!=eb&&($b=eb)),wb=!1,isNaN(Tb)||(p?Tb>yb?(vb&&(wb=!0),vb=!1):(vb||(wb=!0),vb=!0):U.isNegative=I>Tb?!0:!1,o=Tb),g){case"line":isNaN(Tb)?w||(this.drawLineGraph(x,y,ob,pb),x=[],y=[],ob=[],pb=[]):((Math.abs(Hb-sb)>=ub||Math.abs(Ib-tb)>=ub)&&(x.push(Hb),y.push(Ib),sb=Hb,tb=Ib),Pb=Hb,Qb=Ib,Rb=Hb,Sb=Ib,!qb||isNaN(Kb)||isNaN(Jb)||(ob.push(Jb),pb.push(Kb)),(wb||void 0!=U.lineColor||void 0!=U.fillColors||!isNaN(U.dashLength))&&(this.drawLineGraph(x,y,ob,pb),x=[Hb],y=[Ib],ob=[],pb=[],!qb||isNaN(Kb)||isNaN(Jb)||(ob.push(Jb),pb.push(Kb)),p?vb?(this.lineColorSwitched=M,this.fillColorsSwitched=cb):(this.lineColorSwitched=eb,this.fillColorsSwitched=db):(this.lineColorSwitched=U.lineColor,this.fillColorsSwitched=U.fillColors),this.dashLengthSwitched=U.dashLength),U.gap&&(this.drawLineGraph(x,y,ob,pb),x=[],y=[],ob=[],pb=[]));break;case"smoothedLine":isNaN(Tb)?w||(this.drawSmoothedGraph(x,y,ob,pb),x=[],y=[],ob=[],pb=[]):((Math.abs(Hb-sb)>=ub||Math.abs(Ib-tb)>=ub)&&(x.push(Hb),y.push(Ib),sb=Hb,tb=Ib),Pb=Hb,Qb=Ib,Rb=Hb,Sb=Ib,!qb||isNaN(Kb)||isNaN(Jb)||(ob.push(Jb),pb.push(Kb)),void 0==U.lineColor&&void 0==U.fillColors&&isNaN(U.dashLength)||(this.drawSmoothedGraph(x,y,ob,pb),x=[Hb],y=[Ib],ob=[],pb=[],!qb||isNaN(Kb)||isNaN(Jb)||(ob.push(Jb),pb.push(Kb)),this.lineColorSwitched=U.lineColor,this.fillColorsSwitched=U.fillColors,this.dashLengthSwitched=U.dashLength),U.gap&&(this.drawSmoothedGraph(x,y,ob,pb),x=[],y=[],ob=[],pb=[]));break;case"step":if(isNaN(Tb))w||((1>=this.periodSpan||1<this.periodSpan&&Hb-j>dc+ec)&&(j=k=0/0),this.drawLineGraph(x,y,ob,pb),x=[],y=[],ob=[],pb=[]);else{if(t?(isNaN(j)||(x.push(j),y.push(Ib-dc)),y.push(Ib-dc),x.push(Hb),y.push(Ib+ec),x.push(Hb),!qb||isNaN(Kb)||isNaN(Jb)||(ob.push(l),pb.push(Kb-dc),ob.push(Jb),pb.push(Kb-dc),ob.push(Jb),pb.push(Kb+ec))):(isNaN(k)||(y.push(k),x.push(j),y.push(k),x.push(Hb-dc)),x.push(Hb-dc),y.push(Ib),x.push(Hb+ec),y.push(Ib),!qb||isNaN(Kb)||isNaN(Jb)||(ob.push(Jb-dc),pb.push(m),ob.push(Jb-dc),pb.push(Kb),ob.push(Jb+ec),pb.push(Kb))),j=Hb,k=Ib,l=Jb,m=Kb,Pb=Hb,Qb=Ib,Rb=Hb,Sb=Ib,wb||void 0!=U.lineColor||void 0!=U.fillColors||!isNaN(U.dashLength)){var hc=x[x.length-2],ic=y[y.length-2];x.pop(),y.pop(),this.drawLineGraph(x,y,ob,pb),x=[hc],y=[ic],ob=[],pb=[],this.lineColorSwitched=U.lineColor,this.fillColorsSwitched=U.fillColors,this.dashLengthSwitched=U.dashLength,p&&(vb?(this.lineColorSwitched=M,this.fillColorsSwitched=cb):(this.lineColorSwitched=eb,this.fillColorsSwitched=db))}(rb||U.gap)&&(j=k=0/0,this.drawLineGraph(x,y,ob,pb),x=[],y=[],ob=[],pb=[])}break;case"column":Eb=$b,void 0!=U.lineColor&&(Eb=U.lineColor);var jc=this.topRadius;if(!isNaN(Tb)){p||(U.isNegative=I>Tb?!0:!1),U.isNegative&&(db&&(Yb=db),void 0!=eb&&(Eb=eb));var kc=f.min,lc=f.max;if(!(kc>Tb&&kc>Wb||Tb>lc&&Wb>lc)){var mc;if(t){"3d"==C?(Bb=Ib-(u/2-this.depthCount+1)*(h+Q)+Q/2+B*J,Ab=Jb+A*J,mc=J):(Bb=Math.floor(Ib-(u/2-J)*(h+Q)+Q/2),Ab=Jb,mc=0),Cb=h,Pb=Hb,Qb=Bb+h/2,isNaN(Jb)||Jb>Hb&&!U.isNegative&&(Pb=Jb),Rb=Hb,Sb=Bb+h/2,Bb+Cb>r+mc*B&&(Cb=r-Bb+mc*B),mc*B>Bb&&(Cb+=Bb,Bb=mc*B),Db=Hb-Jb;var nc=Ab;Ab=AmCharts.fitToBounds(Ab,0,q),Db+=nc-Ab,Db=AmCharts.fitToBounds(Db,-Ab,q-Ab+A*J),r>Bb&&Cb>0&&(Xb=new AmCharts.Cuboid(e,Db,Cb,A-a.d3x,B-a.d3y,Yb,Zb,K,Eb,L,P,v,t,N,ac,jc),U.columnWidth=Math.abs(Db),U.columnHeight=Math.abs(Cb))}else{"3d"==C?(Ab=Hb-(u/2-this.depthCount+1)*(h+Q)+Q/2+A*J,Bb=Kb+B*J,mc=J):(Ab=Hb-(u/2-J)*(h+Q)+Q/2,Bb=Kb,mc=0),Cb=h,Pb=Ab+h/2,Qb=Ib,isNaN(Kb)||Ib>Kb&&!U.isNegative&&(Qb=Kb),Rb=Ab+h/2,Sb=Ib,Ab+Cb>q+mc*A&&(Cb=q-Ab+mc*A),mc*A>Ab&&(Cb+=Ab-mc*A,Ab=mc*A),Db=Ib-Kb;var oc=Bb;Bb=AmCharts.fitToBounds(Bb,this.dy,r),Db+=oc-Bb,Db=AmCharts.fitToBounds(Db,-Bb+B*J,r-Bb),q+J*A>Ab&&Cb>0&&(this.showOnAxis&&(Bb-=B/2),Xb=new AmCharts.Cuboid(e,Cb,Db,A-a.d3x,B-a.d3y,Yb,Zb,K,Eb,this.lineAlpha,P,v,t,N,ac,jc),U.columnHeight=Math.abs(Db),U.columnWidth=Math.abs(Cb))}}Xb&&(Fb=Xb.set,U.columnGraphics=Fb,Fb.translate(Ab,Bb),this.columnsSet.push(Fb),(U.url||this.showHandOnHover)&&Fb.setAttr("cursor","pointer"),!F)&&("none"==C&&(n=t?(this.end+1-nb)*z-c:z*nb+c),"3d"==C&&(t?(n=(this.end+1-nb)*z-c-1e3*this.depthCount,Pb+=A*this.columnIndex,Rb+=A*this.columnIndex,U.y+=A*this.columnIndex):(n=(z-c)*(nb+1)+1e3*this.depthCount,Qb+=B*this.columnIndex,Sb+=B*this.columnIndex,U.y+=B*this.columnIndex)),("regular"==C||"100%"==C)&&(n=t?0<bc.value?(this.end+1-nb)*z+c:(this.end+1-nb)*z-c:0<bc.value?z*nb+c:z*nb-c),this.columnsArray.push({column:Xb,depth:n}),U.x=t?Bb+Cb/2:Ab+Cb/2,this.ownColumns.push(Xb),this.animateColumns(Xb,nb,Hb,Jb,Ib,Kb),this.addListeners(Fb,U))}break;case"candlestick":if(!isNaN(Wb)&&!isNaN(Tb)){var pc,qc;if(Eb=$b,void 0!=U.lineColor&&(Eb=U.lineColor),t){if(Bb=Ib-h/2,Ab=Jb,Cb=h,Bb+Cb>r&&(Cb=r-Bb),0>Bb&&(Cb+=Bb,Bb=0),r>Bb&&Cb>0){var rc,sc;Tb>Wb?(rc=[Hb,Nb],sc=[Jb,Lb]):(rc=[Jb,Nb],sc=[Hb,Lb]),!isNaN(Nb)&&!isNaN(Lb)&&r>Ib&&Ib>0&&(pc=AmCharts.line(e,rc,[Ib,Ib],Eb,L,K),qc=AmCharts.line(e,sc,[Ib,Ib],Eb,L,K)),Db=Hb-Jb,Xb=new AmCharts.Cuboid(e,Db,Cb,A,B,Yb,fb,K,Eb,L,P,v,t,N,ac)}}else if(Ab=Hb-h/2,Bb=Kb+K/2,Cb=h,Ab+Cb>q&&(Cb=q-Ab),0>Ab&&(Cb+=Ab,Ab=0),Db=Ib-Kb,q>Ab&&Cb>0){_b&&Tb>=Wb&&(Zb=0);var tc,uc,Xb=new AmCharts.Cuboid(e,Cb,Db,A,B,Yb,Zb,K,Eb,L,P,v,t,N,ac);Tb>Wb?(tc=[Ib,Ob],uc=[Kb,Mb]):(tc=[Kb,Ob],uc=[Ib,Mb]),!isNaN(Ob)&&!isNaN(Mb)&&q>Hb&&Hb>0&&(pc=AmCharts.line(e,[Hb,Hb],tc,Eb,L,K),qc=AmCharts.line(e,[Hb,Hb],uc,Eb,L,K))}Xb&&(Fb=Xb.set,U.columnGraphics=Fb,O.push(Fb),Fb.translate(Ab,Bb-K/2),(U.url||this.showHandOnHover)&&Fb.setAttr("cursor","pointer"),pc&&(O.push(pc),O.push(qc)),Pb=Hb,Qb=Ib,t?(Sb=Ib,Rb=Hb,"open"==i&&(Rb=Jb),"high"==i&&(Rb=Nb),"low"==i&&(Rb=Lb)):(Sb=Ib,"open"==i&&(Sb=Kb),"high"==i&&(Sb=Ob),"low"==i&&(Sb=Mb),Rb=Hb),F||(U.x=t?Bb+Cb/2:Ab+Cb/2,this.animateColumns(Xb,nb,Hb,Jb,Ib,Kb),this.addListeners(Fb,U)))}break;case"ohlc":if(!(isNaN(Wb)||isNaN(Ub)||isNaN(Vb)||isNaN(Tb))){Wb>Tb&&(U.isNegative=!0,void 0!=eb&&($b=eb));var vc,wc,xc;if(t){var yc=Ib-h/2,yc=AmCharts.fitToBounds(yc,0,r),zc=AmCharts.fitToBounds(Ib,0,r),Ac=Ib+h/2,Ac=AmCharts.fitToBounds(Ac,0,r);wc=AmCharts.line(e,[Jb,Jb],[yc,zc],$b,L,K,N),Ib>0&&r>Ib&&(vc=AmCharts.line(e,[Lb,Nb],[Ib,Ib],$b,L,K,N)),xc=AmCharts.line(e,[Hb,Hb],[zc,Ac],$b,L,K,N),Sb=Ib,Rb=Hb,"open"==i&&(Rb=Jb),"high"==i&&(Rb=Nb),"low"==i&&(Rb=Lb)}else{var Bc=Hb-h/2,Bc=AmCharts.fitToBounds(Bc,0,q),Cc=AmCharts.fitToBounds(Hb,0,q),Dc=Hb+h/2,Dc=AmCharts.fitToBounds(Dc,0,q);wc=AmCharts.line(e,[Bc,Cc],[Kb,Kb],$b,L,K,N),Hb>0&&q>Hb&&(vc=AmCharts.line(e,[Hb,Hb],[Mb,Ob],$b,L,K,N)),xc=AmCharts.line(e,[Cc,Dc],[Ib,Ib],$b,L,K,N),Sb=Ib,"open"==i&&(Sb=Kb),"high"==i&&(Sb=Ob),"low"==i&&(Sb=Mb),Rb=Hb}O.push(wc),O.push(vc),O.push(xc),Pb=Hb,Qb=Ib}}if(!F&&!isNaN(Tb)){var Ec=this.hideBulletsCount;if(this.end-this.start<=Ec||0===Ec){var Fc=this.createBullet(U,Rb,Sb,nb),Gc=this.labelText;if(Gc){var Hc=this.createLabel(U,Rb,Sb,Gc);(Hc=this.positionLabel(Pb,Qb,Hc,Fc,Cb,Db))&&this.allBullets.push(Hc)}if("regular"==C||"100%"==C){var Ic=f.totalText;if(Ic){var Jc=this.createLabel(U,0,0,Ic,f.totalTextColor);this.allBullets.push(Jc);var Kc,Lc,Mc=Jc.getBBox(),Nc=Mc.width,Oc=Mc.height,Pc=f.totals[nb];Pc&&Pc.remove();var Qc=0;"column"!=g&&(Qc=bulletSize),t?(Lc=Ib,Kc=0>Tb?Hb-Nc/2-2-Qc:Hb+Nc/2+3+Qc):(Kc=Hb,Lc=0>Tb?Ib+Oc/2+Qc:Ib-Oc/2-3-Qc),Jc.translate(Kc,Lc),f.totals[nb]=Jc,t?(0>Lc||Lc>r)&&Jc.remove():(0>Kc||Kc>q)&&Jc.remove()}}}}}}("line"==g||"step"==g||"smoothedLine"==g)&&("smoothedLine"==g?this.drawSmoothedGraph(x,y,ob,pb):this.drawLineGraph(x,y,ob,pb),F||this.launchAnimation()),this.bulletsHidden&&this.hideBullets()},animateColumns:function(a,b,c){var d=this;c=d.chart.startDuration,c>0&&!d.animationPlayed&&(d.seqAn?(a.set.hide(),d.animationArray.push(a),a=setTimeout(function(){d.animate.call(d)},c/(d.end-d.start+1)*(b-d.start)*1e3),d.timeOuts.push(a)):d.animate(a))},createLabel:function(a,b,c,d,e){var f=this.chart,g=a.labelColor;g||(g=this.color),g||(g=f.color),e&&(g=e),e=this.fontSize,void 0===e&&(this.fontSize=e=f.fontSize);var h=this.labelFunction;return d=f.formatString(d,a),d=AmCharts.cleanFromEmpty(d),h&&(d=h(a,d)),a=AmCharts.text(this.container,d,g,f.fontFamily,e),a.node.style.pointerEvents="none",a.translate(b,c),this.bulletSet.push(a),a},positiveClip:function(a){a.clipRect(this.pmx,this.pmy,this.pmw,this.pmh)},negativeClip:function(a){a.clipRect(this.nmx,this.nmy,this.nmw,this.nmh)},drawLineGraph:function(a,b,c,d){var e=this;if(1<a.length){var f=e.set,g=e.chart,h=e.container,i=h.set(),j=h.set();f.push(j),f.push(i);var k=e.lineAlpha,l=e.lineThickness,f=e.fillAlphas,m=e.lineColorR,n=e.negativeLineAlpha;isNaN(n)&&(n=k);var o=e.lineColorSwitched;o&&(m=o);var o=e.fillColorsR,p=e.fillColorsSwitched;p&&(o=p);var q=e.dashLength;(p=e.dashLengthSwitched)&&(q=p);var p=e.negativeLineColor,r=e.negativeFillColors,s=e.negativeFillAlphas,t=e.baseCoord;0!==e.negativeBase&&(t=e.valueAxis.getCoordinate(e.negativeBase)),k=AmCharts.line(h,a,b,m,k,l,q,!1,!0),i.push(k),i.click(function(a){e.handleGraphEvent(a,"clickGraph")}).mouseover(function(a){e.handleGraphEvent(a,"rollOverGraph")}).mouseout(function(a){e.handleGraphEvent(a,"rollOutGraph")}),void 0===p||e.useNegativeColorIfDown||(l=AmCharts.line(h,a,b,p,n,l,q,!1,!0),j.push(l)),(f>0||s>0)&&(l=a.join(";").split(";"),n=b.join(";").split(";"),k=g.type,"serial"==k?0<c.length?(c.reverse(),d.reverse(),l=a.concat(c),n=b.concat(d)):e.rotate?(n.push(n[n.length-1]),l.push(t),n.push(n[0]),l.push(t),n.push(n[0]),l.push(l[0])):(l.push(l[l.length-1]),n.push(t),l.push(l[0]),n.push(t),l.push(a[0]),n.push(n[0])):"xy"==k&&(b=e.fillToAxis)&&(AmCharts.isString(b)&&(b=g.getValueAxisById(b)),"H"==b.orientation?(t="top"==b.position?0:b.viH,l.push(l[l.length-1]),n.push(t),l.push(l[0]),n.push(t),l.push(a[0]),n.push(n[0])):(t="left"==b.position?0:b.viW,n.push(n[n.length-1]),l.push(t),n.push(n[0]),l.push(t),n.push(n[0]),l.push(l[0]))),a=e.gradientRotation,f>0&&(g=AmCharts.polygon(h,l,n,o,f,1,"#000",0,a),g.pattern(e.pattern),i.push(g)),(r||void 0!==p)&&(isNaN(s)&&(s=f),r||(r=p),h=AmCharts.polygon(h,l,n,r,s,1,"#000",0,a),h.pattern(e.pattern),j.push(h),j.click(function(a){e.handleGraphEvent(a,"clickGraph")}).mouseover(function(a){e.handleGraphEvent(a,"rollOverGraph")}).mouseout(function(a){e.handleGraphEvent(a,"rollOutGraph")}))),e.applyMask(j,i)}},applyMask:function(a,b){var c=a.length();"serial"!=this.chart.type||this.scrollbar||(this.positiveClip(b),c>0&&this.negativeClip(a))},drawSmoothedGraph:function(a,b,c,d){if(1<a.length){var e=this.set,f=this.container,g=f.set(),h=f.set();e.push(h),e.push(g);var i=this.lineAlpha,j=this.lineThickness,e=this.dashLength,k=this.fillAlphas,l=this.lineColorR,m=this.fillColorsR,n=this.negativeLineColor,o=this.negativeFillColors,p=this.negativeFillAlphas,q=this.baseCoord,r=this.lineColorSwitched;r&&(l=r),(r=this.fillColorsSwitched)&&(m=r),r=this.negativeLineAlpha,isNaN(r)&&(r=i),i=new AmCharts.Bezier(f,a,b,l,i,j,m,0,e),g.push(i.path),void 0!==n&&(j=new AmCharts.Bezier(f,a,b,n,r,j,m,0,e),h.push(j.path)),k>0&&(i=a.join(";").split(";"),l=b.join(";").split(";"),j="",0<c.length?(c.push("M"),d.push("M"),c.reverse(),d.reverse(),i=a.concat(c),l=b.concat(d)):(this.rotate?(j+=" L"+q+","+b[b.length-1],j+=" L"+q+","+b[0]):(j+=" L"+a[a.length-1]+","+q,j+=" L"+a[0]+","+q),j+=" L"+a[0]+","+b[0]),c=new AmCharts.Bezier(f,i,l,0/0,0,0,m,k,e,j),c.path.pattern(this.pattern),g.push(c.path),o||void 0!==n)&&(p||(p=k),o||(o=n),a=new AmCharts.Bezier(f,a,b,0/0,0,0,o,p,e,j),a.path.pattern(this.pattern),h.push(a.path)),this.applyMask(h,g)}},launchAnimation:function(){var a=this,b=a.chart.startDuration;if(b>0&&!a.animationPlayed){var c=a.set,d=a.bulletSet;AmCharts.VML||(c.attr({opacity:a.startAlpha}),d.attr({opacity:a.startAlpha})),c.hide(),d.hide(),a.seqAn?(b=setTimeout(function(){a.animateGraphs.call(a)},a.index*b*1e3),a.timeOuts.push(b)):a.animateGraphs()}},animateGraphs:function(){var a=this.chart,b=this.set,c=this.bulletSet,d=this.x,e=this.y;b.show(),c.show();var f=a.startDuration,a=a.startEffect;b&&(this.rotate?(b.translate(-1e3,e),c.translate(-1e3,e)):(b.translate(d,-1e3),c.translate(d,-1e3)),b.animate({opacity:1,translate:d+","+e},f,a),c.animate({opacity:1,translate:d+","+e},f,a))},animate:function(a){var b=this.chart,c=this.animationArray;!a&&0<c.length&&(a=c[0],c.shift()),c=AmCharts[AmCharts.getEffect(b.startEffect)],b=b.startDuration,a&&(this.rotate?a.animateWidth(b,c):a.animateHeight(b,c),a.set.show())},legendKeyColor:function(){var a=this.legendColor,b=this.lineAlpha;return void 0===a&&(a=this.lineColorR,0===b&&(b=this.fillColorsR)&&(a="object"==typeof b?b[0]:b)),a},legendKeyAlpha:function(){var a=this.legendAlpha;return void 0===a&&(a=this.lineAlpha,this.fillAlphas>a&&(a=this.fillAlphas),0===a&&(a=this.bulletAlpha),0===a&&(a=1)),a},createBullet:function(a,b,c,d){if(!isNaN(b)&&!isNaN(c)){d=this.container;var e=this.bulletOffset,f=this.bulletSize;isNaN(a.bulletSize)||(f=a.bulletSize);var g=a.values.value,h=this.maxValue,i=this.minValue,j=this.maxBulletSize,k=this.minBulletSize;isNaN(h)||(isNaN(g)||(f=(g-i)/(h-i)*(j-k)+k),i==h&&(f=j)),h=f,this.bulletAxis&&(f=a.values.error,isNaN(f)||(g=f),f=this.bulletAxis.stepWidth*g),f<this.minBulletSize&&(f=this.minBulletSize),this.rotate?b=a.isNegative?b-e:b+e:c=a.isNegative?c+e:c-e;var l,k=this.bulletColorR;a.lineColor&&(this.bulletColorSwitched=a.lineColor),this.bulletColorSwitched&&(k=this.bulletColorSwitched),a.isNegative&&void 0!==this.bulletColorNegative&&(k=this.bulletColorNegative),void 0!==a.color&&(k=a.color);var m;"xy"==this.chart.type&&this.valueField&&(m=this.pattern,a.pattern&&(m=a.pattern)),e=this.bullet,a.bullet&&(e=a.bullet);var g=this.bulletBorderThickness,i=this.bulletBorderColorR,j=this.bulletBorderAlpha,n=this.bulletAlpha;i||(i=k),this.useLineColorForBulletBorder&&(i=this.lineColorR);var o=a.alpha;return isNaN(o)||(n=o),("none"!=this.bullet||a.bullet)&&(l=AmCharts.bullet(d,e,f,k,n,g,i,j,h,0,m)),(this.customBullet||a.customBullet)&&(m=this.customBullet,a.customBullet&&(m=a.customBullet),m&&(l&&l.remove(),"function"==typeof m?(l=new m,l.chart=this.chart,a.bulletConfig&&(l.availableSpace=c,l.graph=this,l.graphDataItem=a,l.bulletY=c,a.bulletConfig.minCoord=this.minCoord-c,l.bulletConfig=a.bulletConfig),l.write(d),l=l.set):(this.chart.path&&(m=this.chart.path+m),l=d.set(),d=d.image(m,0,0,f,f),l.push(d),this.centerCustomBullets&&d.translate(-f/2,-f/2)))),l&&((a.url||this.showHandOnHover)&&l.setAttr("cursor","pointer"),"serial"==this.chart.type&&(0>b-0||b-0>this.width||-f/2>c||c-0>this.height)&&(l.remove(),l=null),l&&(this.bulletSet.push(l),l.translate(b,c),this.addListeners(l,a),this.allBullets.push(l)),a.bx=b,a.by=c),l?(l.size=f||0,a.bulletGraphics=l):l={size:0},l.graphDataItem=a,l}},showBullets:function(){var a,b=this.allBullets;for(this.bulletsHidden=!1,a=0;a<b.length;a++)b[a].show()},hideBullets:function(){var a,b=this.allBullets;for(this.bulletsHidden=!0,a=0;a<b.length;a++)b[a].hide()},addListeners:function(a,b){var c=this;a.mouseover(function(a){c.handleRollOver(b,a)}).mouseout(function(a){c.handleRollOut(b,a)}).touchend(function(a){c.handleRollOver(b,a),c.chart.panEventsEnabled&&c.handleClick(b,a)}).touchstart(function(a){c.handleRollOver(b,a)}).click(function(a){c.handleClick(b,a)}).dblclick(function(a){c.handleDoubleClick(b,a)}).contextmenu(function(a){c.handleRightClick(b,a)})},handleRollOver:function(a,b){if(a){var c=this.chart,d={type:"rollOverGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};if(this.fire("rollOverGraphItem",d),c.fire("rollOverGraphItem",d),clearTimeout(c.hoverInt),d=this.showBalloon,c.chartCursor&&"serial"==c.type&&(d=!1,!c.chartCursor.valueBalloonsEnabled&&this.showBalloon&&(d=!0)),d){var d=c.formatString(this.balloonText,a,!0),e=this.balloonFunction;e&&(d=e(a,a.graph)),d=AmCharts.cleanFromEmpty(d),e=c.getBalloonColor(this,a),c.balloon.showBullet=!1,c.balloon.pointerOrientation="V";var f=a.x,g=a.y;c.rotate&&(f=a.y,g=a.x),c.showBalloon(d,e,!0,f+c.marginLeftReal,g+c.marginTopReal)}}this.handleGraphEvent(b,"rollOverGraph")},handleRollOut:function(a,b){if(this.chart.hideBalloon(),a){var c={type:"rollOutGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("rollOutGraphItem",c),this.chart.fire("rollOutGraphItem",c)}this.handleGraphEvent(b,"rollOutGraph")},handleClick:function(a,b){if(a){var c={type:"clickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("clickGraphItem",c),this.chart.fire("clickGraphItem",c),AmCharts.getURL(a.url,this.urlTarget)}this.handleGraphEvent(b,"clickGraph")},handleGraphEvent:function(a,b){var c={type:b,graph:this,target:this,chart:this.chart,event:a};this.fire(b,c),this.chart.fire(b,c)},handleRightClick:function(a,b){if(a){var c={type:"rightClickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("rightClickGraphItem",c),this.chart.fire("rightClickGraphItem",c)}},handleDoubleClick:function(a,b){if(a){var c={type:"doubleClickGraphItem",item:a,index:a.index,graph:this,target:this,chart:this.chart,event:b};this.fire("doubleClickGraphItem",c),this.chart.fire("doubleClickGraphItem",c)}},zoom:function(a,b){this.start=a,this.end=b,this.draw()},changeOpacity:function(a){var b=this.set;if(b&&b.setAttr("opacity",a),b=this.ownColumns){var c;for(c=0;c<b.length;c++){var d=b[c].set;d&&d.setAttr("opacity",a)}}(b=this.bulletSet)&&b.setAttr("opacity",a)},destroy:function(){AmCharts.remove(this.set),AmCharts.remove(this.bulletSet);var a=this.timeOuts;if(a){var b;for(b=0;b<a.length;b++)clearTimeout(a[b])}this.timeOuts=[]}}),AmCharts.ChartCursor=AmCharts.Class({construct:function(a){this.cname="ChartCursor",this.createEvents("changed","zoomed","onHideCursor","draw","selected","moved"),this.enabled=!0,this.cursorAlpha=1,this.selectionAlpha=.2,this.cursorColor="#CC0000",this.categoryBalloonAlpha=1,this.color="#FFFFFF",this.type="cursor",this.zoomed=!1,this.zoomable=!0,this.pan=!1,this.categoryBalloonDateFormat="MMM DD, YYYY",this.categoryBalloonEnabled=this.valueBalloonsEnabled=!0,this.rolledOver=!1,this.cursorPosition="middle",this.bulletsEnabled=this.skipZoomDispatch=!1,this.bulletSize=8,this.selectWithoutZooming=this.oneBalloonOnly=!1,this.graphBulletSize=1.7,this.animationDuration=.3,this.zooming=!1,this.adjustment=0,this.avoidBalloonOverlapping=!0,AmCharts.applyTheme(this,a,this.cname)},draw:function(){var a=this;a.destroy();var b=a.chart,c=b.container;a.rotate=b.rotate,a.container=c,c=c.set(),c.translate(a.x,a.y),a.set=c,b.cursorSet.push(c),c=new AmCharts.AmBalloon,c.chart=b,a.categoryBalloon=c,AmCharts.copyProperties(b.balloon,c),c.cornerRadius=0,c.shadowAlpha=0,c.borderThickness=1,c.borderAlpha=1,c.showBullet=!1;var d=a.categoryBalloonColor;if(void 0===d&&(d=a.cursorColor),c.fillColor=d,c.fillAlpha=a.categoryBalloonAlpha,c.borderColor=d,c.color=a.color,d=a.valueLineAxis,AmCharts.isString(d)&&(d=b.getValueAxisById(d)),d||(d=b.valueAxes[0]),a.valueLineAxis=d,a.valueLineBalloonEnabled&&(d=new AmCharts.AmBalloon,a.vaBalloon=d,AmCharts.copyProperties(c,d),d.animationDuration=0,a.rotate||(d.pointerOrientation="H")),a.rotate&&(c.pointerOrientation="H"),a.extraWidth=0,a.prevX=[],a.prevY=[],a.prevTX=[],a.prevTY=[],a.valueBalloonsEnabled)for(c=0;c<b.graphs.length;c++)d=new AmCharts.AmBalloon,d.chart=b,AmCharts.copyProperties(b.balloon,d),b.graphs[c].valueBalloon=d;"cursor"==a.type?a.createCursor():a.createCrosshair(),a.interval=setInterval(function(){a.detectMovement.call(a)},40)},updateData:function(){var a=this.chart;this.data=a.chartData,this.firstTime=a.firstTime,this.lastTime=a.lastTime},createCursor:function(){var a,b,c,d,e=this.chart,f=this.cursorAlpha,g=e.categoryAxis,h=this.categoryBalloon;c=e.dx,d=e.dy;var i=this.width,j=this.height,e=e.rotate;h.pointerWidth=g.tickLength,e?(a=[0,i,i+c],b=[0,0,d],c=[c,0,0],d=[d,0,j]):(a=[c,0,0],b=[d,0,j],c=[0,i,i+c],d=[0,0,d]),this.line=a=AmCharts.line(this.container,a,b,this.cursorColor,f,1),(b=this.fullRectSet)?(b.push(a),b.translate(this.x,this.y)):this.set.push(a),this.valueLineEnabled&&(a=this.valueLineAlpha,isNaN(a)||(f=a),this.vLine=f=AmCharts.line(this.container,c,d,this.cursorColor,f,1),this.set.push(f)),this.setBalloonBounds(h,g,e),(g=this.vaBalloon)&&this.setBalloonBounds(g,this.valueLineAxis,!e),this.hideCursor()},createCrosshair:function(){var a=this.cursorAlpha,b=this.container,c=AmCharts.line(b,[0,0],[0,this.height],this.cursorColor,a,1),a=AmCharts.line(b,[0,this.width],[0,0],this.cursorColor,a,1);this.set.push(c),this.set.push(a),this.vLine=c,this.hLine=a,this.hideCursor()},detectMovement:function(){var a=this.chart;if(a.mouseIsOver){var b=a.mouseX-this.x,c=a.mouseY-this.y;b>-.5&&b<this.width+1&&c>0&&c<this.height?(this.drawing?this.rolledOver||a.setMouseCursor("crosshair"):this.pan&&(this.rolledOver||a.setMouseCursor("move")),this.rolledOver=!0,(this.valueLineEnabled||this.valueLineBalloonEnabled)&&this.updateVLine(b,c),this.setPosition()):this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)}else this.rolledOver&&(this.handleMouseOut(),this.rolledOver=!1)},updateVLine:function(a,b){var c=this.vLine,d=this.vaBalloon;if((c||d)&&!this.panning&&!this.drawing){c&&c.show();var e,f=this.valueLineAxis,g=this.rotate;if(g?(c&&c.translate(a,0),f&&(e=f.coordinateToValue(a)),c=a):(c&&c.translate(0,b),f&&(e=f.coordinateToValue(b)),c=b-1),d&&!isNaN(e)&&this.prevLineValue!=e){var h=f.formatValue(e,!0);d&&(this.setBalloonPosition(d,f,c,!g),d.showBalloon(h))}this.prevLineValue=e}},getMousePosition:function(){var a,b=this.width,c=this.height;return a=this.chart,this.rotate?(a=a.mouseY-this.y,0>a&&(a=0),a>c&&(a=c)):(a=a.mouseX-this.x-1,0>a&&(a=0),a>b&&(a=b)),a},updateCrosshair:function(){var a=this.chart,b=a.mouseX-this.x,c=a.mouseY-this.y,d=this.vLine,e=this.hLine,b=AmCharts.fitToBounds(b,0,this.width),c=AmCharts.fitToBounds(c,0,this.height);0<this.cursorAlpha&&(d.show(),e.show(),d.translate(b,0),e.translate(0,c)),this.zooming&&(a.hideXScrollbar&&(b=0/0),a.hideYScrollbar&&(c=0/0),this.updateSelectionSize(b,c)),this.fireMoved(),a.mouseIsOver||this.zooming||this.hideCursor()},fireMoved:function(){var a=this.chart,b={type:"moved",target:this};b.chart=a,b.zooming=this.zooming,b.x=a.mouseX-this.x,b.y=a.mouseY-this.y,this.fire("moved",b)},updateSelectionSize:function(a,b){AmCharts.remove(this.selection);var c=this.selectionPosX,d=this.selectionPosY,e=0,f=0,g=this.width,h=this.height;isNaN(a)||(c>a&&(e=a,g=c-a),a>c&&(e=c,g=a-c),c==a&&(e=a,g=0),g+=this.extraWidth,e-=this.extraWidth/2),isNaN(b)||(d>b&&(f=b,h=d-b),b>d&&(f=d,h=b-d),d==b&&(f=b,h=0),h+=this.extraWidth,f-=this.extraWidth/2),g>0&&h>0&&(c=AmCharts.rect(this.container,g,h,this.cursorColor,this.selectionAlpha),c.translate(e+this.x,f+this.y),this.selection=c)},arrangeBalloons:function(){var a=this.valueBalloons,b=this.x,c=this.y,d=this.height+c;a.sort(this.compareY);var e;for(e=0;e<a.length;e++){var f=a[e].balloon;f.setBounds(b,c,b+this.width,d),f.prevX=this.prevX[e],f.prevY=this.prevY[e],f.prevTX=this.prevTX[e],f.prevTY=this.prevTY[e],f.draw(),d=f.yPos-3}this.arrangeBalloons2()},compareY:function(a,b){return a.yy<b.yy?1:-1},arrangeBalloons2:function(){var a=this.valueBalloons;a.reverse();var b,c,d,e=this.x,f=a.length;for(d=0;f>d;d++){var g=a[d].balloon;b=g.bottom;var h=g.bottom-g.yPos,i=f-d-1;d>0&&c+3>b-h&&(g.setBounds(e,c+3,e+this.width,c+h+3),g.prevX=this.prevX[i],g.prevY=this.prevY[i],g.prevTX=this.prevTX[i],g.prevTY=this.prevTY[i],g.draw()),g.set&&g.set.show(),this.prevX[i]=g.prevX,this.prevY[i]=g.prevY,this.prevTX[i]=g.prevTX,this.prevTY[i]=g.prevTY,c=g.bottom}},showBullets:function(){AmCharts.remove(this.allBullets);var a=this.container,b=a.set();this.set.push(b),this.set.show(),this.allBullets=b;var c,b=this.chart.graphs;for(c=0;c<b.length;c++){var d=b[c];if(!d.hidden&&d.balloonText){var e=this.data[this.index].axes[d.valueAxis.id].graphs[d.id],f=e.y;if(!isNaN(f)){var g,h;g=e.x,this.rotate?(h=f,f=g):h=g,d=AmCharts.circle(a,this.bulletSize/2,this.chart.getBalloonColor(d,e,!0),d.cursorBulletAlpha),d.translate(h,f),this.allBullets.push(d)}}}},destroy:function(){this.clear(),AmCharts.remove(this.selection),this.selection=null;var a=this.categoryBalloon;a&&a.destroy(),(a=this.vaBalloon)&&a.destroy(),this.destroyValueBalloons(),AmCharts.remove(this.set)},clear:function(){clearInterval(this.interval)},destroyValueBalloons:function(){var a=this.valueBalloons;if(a){var b;for(b=0;b<a.length;b++)a[b].balloon.hide()}},zoom:function(a,b,c,d){var e=this.chart;this.destroyValueBalloons(),this.zooming=!1;var f;this.rotate?this.selectionPosY=f=e.mouseY:this.selectionPosX=f=e.mouseX,this.start=a,this.end=b,this.startTime=c,this.endTime=d,this.zoomed=!0,d=e.categoryAxis,e=this.rotate,b=this.width,c=this.height,a=d.stepWidth,this.fullWidth&&(f=1,d.parseDates&&!d.equalSpacing&&(f=d.minDuration()),e?this.extraWidth=c=a*f:(this.extraWidth=b=a*f,this.categoryBalloon.minWidth=b),this.line&&this.line.remove(),this.line=AmCharts.rect(this.container,b,c,this.cursorColor,this.cursorAlpha,0),this.fullRectSet&&this.fullRectSet.push(this.line)),this.stepWidth=a,this.tempVal=this.valueBalloonsEnabled,this.valueBalloonsEnabled=!1,this.setPosition(),this.valueBalloonsEnabled=this.tempVal,this.hideCursor()},hideObj:function(a){a&&a.hide()},hideCursor:function(a){void 0===a&&(a=!0),this.hideObj(this.set),this.hideObj(this.categoryBalloon),this.hideObj(this.line),this.hideObj(this.vLine),this.hideObj(this.hLine),this.hideObj(this.vaBalloon),this.hideObj(this.allBullets),this.destroyValueBalloons(),this.selectWithoutZooming||AmCharts.remove(this.selection),this.previousIndex=0/0,a&&this.fire("onHideCursor",{type:"onHideCursor",chart:this.chart,target:this}),this.drawing||this.chart.setMouseCursor("auto"),this.normalizeBulletSize()},setPosition:function(a,b,c){void 0===b&&(b=!0),"cursor"==this.type?(this.tempPosition=0/0,AmCharts.ifArray(this.data)&&(isNaN(a)&&(a=this.getMousePosition()),(a!=this.previousMousePosition||!0===this.zoomed||this.oneBalloonOnly)&&!isNaN(a)&&("mouse"==this.cursorPosition&&(this.tempPosition=a),isNaN(c)&&(c=this.chart.categoryAxis.xToIndex(a)),c!=this.previousIndex||this.zoomed||"mouse"==this.cursorPosition||this.oneBalloonOnly)&&(this.updateCursor(c,b),this.zoomed=!1),this.previousMousePosition=a)):this.updateCrosshair()},normalizeBulletSize:function(){var a=this.resizedBullets;if(a)for(var b=0;b<a.length;b++){var c=a[b],d=c.bulletGraphics;d&&(d.translate(c.bx,c.by,1),c=c.graph,isNaN(this.graphBulletAlpha)||(d.setAttr("fill-opacity",c.bulletAlpha),d.setAttr("stroke-opacity",c.bulletBorderAlpha)))}},updateCursor:function(a,b){var c=this.chart,d=this.fullWidth,e=c.mouseX-this.x,f=c.mouseY-this.y;if(this.drawingNow&&(AmCharts.remove(this.drawingLine),this.drawingLine=AmCharts.line(this.container,[this.x+this.drawStartX,this.x+e],[this.y+this.drawStartY,this.y+f],this.cursorColor,1,1)),this.enabled){void 0===b&&(b=!0),this.index=a+=this.adjustment;var g=c.categoryAxis,h=c.dx,i=c.dy,j=this.x+1,k=this.y+1,l=this.width,m=this.height,n=this.data[a];if(this.fireMoved(),n){var o=n.x[g.id],p=c.rotate,q=this.stepWidth,r=this.categoryBalloon,s=this.firstTime,t=this.lastTime,u=this.cursorPosition,v=this.zooming,w=this.panning,x=c.graphs;if(c.mouseIsOver||v||w||this.forceShow)if(this.forceShow=!1,w){var h=this.panClickPos,c=this.panClickEndTime,v=this.panClickStartTime,y=this.panClickEnd,j=this.panClickStart,e=(p?h-f:h-e)/q;(!g.parseDates||g.equalSpacing)&&(e=Math.round(e)),0!==e&&(h={type:"zoomed",target:this},h.chart=this.chart,g.parseDates&&!g.equalSpacing?(c+e>t&&(e=t-c),s>v+e&&(e=s-v),h.start=Math.round(v+e),h.end=Math.round(c+e),this.fire(h.type,h)):y+e>=this.data.length||0>j+e||(h.start=j+e,h.end=y+e,this.fire(h.type,h)))}else{if("start"==u?o-=g.cellWidth/2:"mouse"==u&&(c.mouseIsOver?o=p?f-2:e-2:isNaN(this.tempPosition)||(o=this.tempPosition-2)),p){if(0>o){if(!v)return void this.hideCursor();o=0}if(o>m+1){if(!v)return void this.hideCursor();o=m+1}}else{if(0>o){if(!v)return void this.hideCursor();o=0}if(o>l){if(!v)return void this.hideCursor();o=l}}if(0<this.cursorAlpha){var z=this.line;p?(s=0,t=o+i,d&&(t-=g.cellWidth/2)):(s=o,t=0,d&&(s-=g.cellWidth/2)),q=this.animationDuration,q>0&&!this.zooming?isNaN(this.previousX)?z.translate(s,t):(z.translate(this.previousX,this.previousY),z.animate({translate:s+","+t},q,"easeOutSine")):z.translate(s,t),this.previousX=s,this.previousY=t,z.show()
}if(this.linePos=p?o+i:o,v&&(d&&z.hide(),p?this.updateSelectionSize(0/0,o):this.updateSelectionSize(o,0/0)),q=!0,v&&(q=!1),this.categoryBalloonEnabled&&q?(this.setBalloonPosition(r,g,o,p),(s=this.categoryBalloonFunction)?r.showBalloon(s(n.category)):g.parseDates?(g=AmCharts.formatDate(n.category,this.categoryBalloonDateFormat,c),-1!=g.indexOf("fff")&&(g=AmCharts.formatMilliseconds(g,n.category)),r.showBalloon(g)):r.showBalloon(AmCharts.fixNewLines(n.category))):r.hide(),x&&this.bulletsEnabled&&this.showBullets(),this.oneBalloonOnly){for(o=1/0,g=0;g<x.length;g++)s=x[g],s.showBalloon&&!s.hidden&&s.balloonText&&(t=n.axes[s.valueAxis.id].graphs[s.id],r=t.y,isNaN(r)||(p?Math.abs(e-r)<o&&(o=Math.abs(e-r),y=s):Math.abs(f-r)<o&&(o=Math.abs(f-r),y=s)));this.mostCloseGraph&&(y=this.mostCloseGraph)}if((a!=this.previousIndex||y!=this.previousMostCloseGraph)&&(this.normalizeBulletSize(),this.destroyValueBalloons(),this.resizedBullets=[],x&&this.valueBalloonsEnabled&&q&&c.balloon.enabled)){for(this.valueBalloons=q=[],g=0;g<x.length;g++)if(s=x[g],r=0/0,(!this.oneBalloonOnly||s==y)&&s.showBalloon&&!s.hidden&&s.balloonText&&("step"==s.type&&"left"==s.stepDirection&&(n=this.data[a+1]),n)){if((t=n.axes[s.valueAxis.id].graphs[s.id])&&(r=t.y),this.showNextAvailable&&isNaN(r)&&a+1<this.data.length)for(o=a+1;o<this.data.length&&(!(d=this.data[o])||(t=d.axes[s.valueAxis.id].graphs[s.id],r=t.y,isNaN(r)));o++);isNaN(r)||(d=t.x,i=!0,p?(o=r,(0>d||d>m)&&(i=!1)):(o=d,d=r,(0>o||o>l+h+1)&&(i=!1)),i&&(i=this.graphBulletSize,z=this.graphBulletAlpha,1==i&&isNaN(z)||!AmCharts.isModern||!(u=t.bulletGraphics)||(u.getBBox(),u.translate(t.bx,t.by,i),this.resizedBullets.push(t),isNaN(z)||(u.setAttr("fill-opacity",z),u.setAttr("stroke-opacity",z))),i=s.valueBalloon,z=c.getBalloonColor(s,t),i.setBounds(j,k,j+l,k+m),i.pointerOrientation="H",u=this.balloonPointerOrientation,"vertical"==u&&(i.pointerOrientation="V"),"horizontal"==u&&(i.pointerOrientation="H"),i.changeColor(z),void 0!==s.balloonAlpha&&(i.fillAlpha=s.balloonAlpha),void 0!==s.balloonTextColor&&(i.color=s.balloonTextColor),i.setPosition(o+j,d+k),o=c.formatString(s.balloonText,t,!0),(d=s.balloonFunction)&&(o=d(t,s).toString()),""!==o&&(p?i.showBalloon(o):(i.text=o,i.show=!0),q.push({yy:r,balloon:i})),!p&&i.set&&(i.set.hide(),s=i.textDiv)&&(s.style.visibility="hidden")))}this.avoidBalloonOverlapping&&this.arrangeBalloons()}b?(h={type:"changed"},h.index=a,h.chart=this.chart,h.zooming=v,h.mostCloseGraph=y,h.position=p?f:e,h.target=this,c.fire("changed",h),this.fire("changed",h),this.skipZoomDispatch=!1):(this.skipZoomDispatch=!0,c.updateLegendValues(a)),this.previousIndex=a,this.previousMostCloseGraph=y}}}else this.hideCursor()},setBalloonPosition:function(a,b,c,d){var e=b.position,f=b.inside;b=b.axisThickness;var g=this.chart,h=g.dx,g=g.dy,i=this.x,j=this.y,k=this.width,l=this.height;d?(f&&("right"==e?a.setBounds(i,j+g,i+k+h,j+c+g):a.setBounds(i,j+g,i+k+h,j+c)),"right"==e?f?a.setPosition(i+k+h,j+c+g):a.setPosition(i+k+h+b,j+c+g):f?a.setPosition(i,j+c):a.setPosition(i-b,j+c)):"top"==e?f?a.setPosition(i+c+h,j+g):a.setPosition(i+c+h,j+g-b+1):f?a.setPosition(i+c,j+l):a.setPosition(i+c,j+l+b-1)},setBalloonBounds:function(a,b,c){var d=b.position,e=b.inside,f=b.axisThickness,g=b.tickLength,h=this.chart,i=h.dx,h=h.dy,j=this.x,k=this.y,l=this.width,m=this.height;c?(e&&(a.pointerWidth=0),"right"==d?e?a.setBounds(j,k+h,j+l+i,k+m+h):a.setBounds(j+l+i+f,k+h,j+l+1e3,k+m+h):e?a.setBounds(j,k,l+j,m+k):a.setBounds(-1e3,-1e3,j-g-f,k+m+15)):(a.maxWidth=l,b.parseDates&&(g=0,a.pointerWidth=0),"top"==d?e?a.setBounds(j+i,k+h,l+i+j,m+k):a.setBounds(j+i,-1e3,l+i+j,k+h-g-f):e?a.setBounds(j,k,l+j,m+k-g):a.setBounds(j,k+m+g+f-1,j+l,k+m+g+f))},enableDrawing:function(a){this.enabled=!a,this.hideCursor(),this.rolledOver=!1,this.drawing=a},isZooming:function(a){a&&a!=this.zooming&&this.handleMouseDown("fake"),a||a==this.zooming||this.handleMouseUp()},handleMouseOut:function(){if(this.enabled)if(this.zooming)this.setPosition();else{this.index=void 0;var a={type:"changed",index:void 0,target:this};a.chart=this.chart,this.fire("changed",a),this.hideCursor()}},handleReleaseOutside:function(){this.handleMouseUp()},handleMouseUp:function(){var a,b=this.chart,c=this.data;if(b){var d=b.mouseX-this.x,e=b.mouseY-this.y;if(this.drawingNow){this.drawingNow=!1,AmCharts.remove(this.drawingLine),a=this.drawStartX;var f=this.drawStartY;(2<Math.abs(a-d)||2<Math.abs(f-e))&&(a={type:"draw",target:this,chart:b,initialX:a,initialY:f,finalX:d,finalY:e},this.fire(a.type,a))}if(this.enabled&&0<c.length){if(this.pan)this.rolledOver=!1;else if(this.zoomable&&this.zooming){if(a=this.selectWithoutZooming?{type:"selected"}:{type:"zoomed"},a.target=this,a.chart=b,"cursor"==this.type)this.rotate?this.selectionPosY=e:this.selectionPosX=e=d,4>Math.abs(e-this.initialMouse)&&this.fromIndex==this.index||(this.index<this.fromIndex?(a.end=this.fromIndex,a.start=this.index):(a.end=this.index,a.start=this.fromIndex),e=b.categoryAxis,e.parseDates&&!e.equalSpacing&&(c[a.start]&&(a.start=c[a.start].time),c[a.end]&&(a.end=b.getEndTime(c[a.end].time))),this.skipZoomDispatch||this.fire(a.type,a));else{var g=this.initialMouseX,h=this.initialMouseY;3>Math.abs(d-g)&&3>Math.abs(e-h)||(c=Math.min(g,d),f=Math.min(h,e),d=Math.abs(g-d),e=Math.abs(h-e),b.hideXScrollbar&&(c=0,d=this.width),b.hideYScrollbar&&(f=0,e=this.height),a.selectionHeight=e,a.selectionWidth=d,a.selectionY=f,a.selectionX=c,this.skipZoomDispatch||this.fire(a.type,a))}this.selectWithoutZooming||AmCharts.remove(this.selection)}this.skipZoomDispatch=!1}}this.panning=this.zooming=!1},showCursorAt:function(a){var b=this.chart.categoryAxis;a=b.parseDates?b.dateToCoordinate(a):b.categoryToCoordinate(a),this.previousMousePosition=0/0,this.forceShow=!0,this.setPosition(a,!1)},clearSelection:function(){AmCharts.remove(this.selection)},handleMouseDown:function(a){if(this.zoomable||this.pan||this.drawing){var b=this.rotate,c=this.chart,d=c.mouseX-this.x,e=c.mouseY-this.y;(d>0&&d<this.width&&e>0&&e<this.height||"fake"==a)&&(this.setPosition(),this.selectWithoutZooming&&AmCharts.remove(this.selection),this.drawing?(this.drawStartY=e,this.drawStartX=d,this.drawingNow=!0):this.pan?(this.zoomable=!1,c.setMouseCursor("move"),this.panning=!0,this.panClickPos=b?e:d,this.panClickStart=this.start,this.panClickEnd=this.end,this.panClickStartTime=this.startTime,this.panClickEndTime=this.endTime):this.zoomable&&("cursor"==this.type?(this.fromIndex=this.index,b?(this.initialMouse=e,this.selectionPosY=this.linePos):(this.initialMouse=d,this.selectionPosX=this.linePos)):(this.initialMouseX=d,this.initialMouseY=e,this.selectionPosX=d,this.selectionPosY=e),this.zooming=!0))}}}),AmCharts.SimpleChartScrollbar=AmCharts.Class({construct:function(a){this.createEvents("zoomed"),this.backgroundColor="#D4D4D4",this.backgroundAlpha=1,this.selectedBackgroundColor="#EFEFEF",this.scrollDuration=this.selectedBackgroundAlpha=1,this.resizeEnabled=!0,this.hideResizeGrips=!1,this.scrollbarHeight=20,this.updateOnReleaseOnly=!1,9>document.documentMode&&(this.updateOnReleaseOnly=!0),this.dragIconWidth=18,this.dragIconHeight=25,AmCharts.applyTheme(this,a,"SimpleChartScrollbar")},draw:function(){var a=this;a.destroy(),a.interval=setInterval(function(){a.updateScrollbar.call(a)},40);var b=a.chart.container,c=a.rotate,d=a.chart,e=b.set();a.set=e,d.scrollbarsSet.push(e);var f,g;if(c?(f=a.scrollbarHeight,g=d.plotAreaHeight):(g=a.scrollbarHeight,f=d.plotAreaWidth),a.width=f,(a.height=g)&&f){var h=AmCharts.rect(b,f,g,a.backgroundColor,a.backgroundAlpha,1,a.backgroundColor,a.backgroundAlpha);a.bg=h,e.push(h),h=AmCharts.rect(b,f,g,"#000",.005),e.push(h),a.invisibleBg=h,h.click(function(){a.handleBgClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()}).touchend(function(){a.handleBgClick()}),h=AmCharts.rect(b,f,g,a.selectedBackgroundColor,a.selectedBackgroundAlpha),a.selectedBG=h,e.push(h),f=AmCharts.rect(b,f,g,"#000",.005),a.dragger=f,e.push(f),f.mousedown(function(b){a.handleDragStart(b)}).mouseup(function(){a.handleDragStop()}).mouseover(function(){a.handleDraggerOver()}).mouseout(function(){a.handleMouseOut()}).touchstart(function(b){a.handleDragStart(b)}).touchend(function(){a.handleDragStop()}),f=d.pathToImages,c?(h=f+"dragIconH.gif",f=a.dragIconWidth,c=a.dragIconHeight):(h=f+"dragIcon.gif",c=a.dragIconWidth,f=a.dragIconHeight),g=b.image(h,0,0,c,f);var h=b.image(h,0,0,c,f),i=10,j=20;d.panEventsEnabled&&(i=25,j=a.scrollbarHeight);var k=AmCharts.rect(b,i,j,"#000",.005),l=AmCharts.rect(b,i,j,"#000",.005);l.translate(-(i-c)/2,-(j-f)/2),k.translate(-(i-c)/2,-(j-f)/2),c=b.set([g,l]),b=b.set([h,k]),a.iconLeft=c,e.push(a.iconLeft),a.iconRight=b,e.push(b),c.mousedown(function(){a.leftDragStart()}).mouseup(function(){a.leftDragStop()}).mouseover(function(){a.iconRollOver()}).mouseout(function(){a.iconRollOut()}).touchstart(function(){a.leftDragStart()}).touchend(function(){a.leftDragStop()}),b.mousedown(function(){a.rightDragStart()}).mouseup(function(){a.rightDragStop()}).mouseover(function(){a.iconRollOver()}).mouseout(function(){a.iconRollOut()}).touchstart(function(){a.rightDragStart()}).touchend(function(){a.rightDragStop()}),AmCharts.ifArray(d.chartData)?e.show():e.hide(),a.hideDragIcons(),a.clipDragger(!1)}e.translate(a.x,a.y),e.node.style.msTouchAction="none"},updateScrollbarSize:function(a,b){a=Math.round(a),b=Math.round(b);var c,d,e,f,g=this.dragger;this.rotate?(c=0,d=a,e=this.width+1,f=b-a,g.setAttr("height",b-a),g.setAttr("y",d)):(c=a,d=0,e=b-a,f=this.height+1,g.setAttr("width",b-a),g.setAttr("x",c)),this.clipAndUpdate(c,d,e,f)},updateScrollbar:function(){var a,b,c,d=!1,e=this.x,f=this.y,g=this.dragger,h=this.getDBox();if(h){b=h.x+e,c=h.y+f;var i=h.width,h=h.height,j=this.rotate,k=this.chart,l=this.width,m=this.height,n=k.mouseX,o=k.mouseY;a=this.initialMouse,this.forceClip&&this.clipDragger(!0),k.mouseIsOver&&(this.dragging&&(k=this.initialCoord,j?(a=k+(o-a),0>a&&(a=0),k=m-h,a>k&&(a=k),g.setAttr("y",a)):(a=k+(n-a),0>a&&(a=0),k=l-i,a>k&&(a=k),g.setAttr("x",a)),this.clipDragger(!0)),this.resizingRight&&(j?(a=o-c,a+c>m+f&&(a=m-c+f),0>a?(this.resizingRight=!1,d=this.resizingLeft=!0):(0===a&&(a=.1),g.setAttr("height",a))):(a=n-b,a+b>l+e&&(a=l-b+e),0>a?(this.resizingRight=!1,d=this.resizingLeft=!0):(0===a&&(a=.1),g.setAttr("width",a))),this.clipDragger(!0)),this.resizingLeft&&(j?(b=c,c=o,f>c&&(c=f),c>m+f&&(c=m+f),a=!0===d?b-c:h+b-c,0>a?(this.resizingRight=!0,this.resizingLeft=!1,g.setAttr("y",b+h-f)):(0===a&&(a=.1),g.setAttr("y",c-f),g.setAttr("height",a))):(c=n,e>c&&(c=e),c>l+e&&(c=l+e),a=!0===d?b-c:i+b-c,0>a?(this.resizingRight=!0,this.resizingLeft=!1,g.setAttr("x",b+i-e)):(0===a&&(a=.1),g.setAttr("x",c-e),g.setAttr("width",a))),this.clipDragger(!0)))}},stopForceClip:function(){this.forceClip=!1},clipDragger:function(a){var b=this.getDBox();if(b){var c=b.x,d=b.y,e=b.width,b=b.height,f=!1;this.rotate?(c=0,e=this.width+1,(this.clipY!=d||this.clipH!=b)&&(f=!0)):(d=0,b=this.height+1,(this.clipX!=c||this.clipW!=e)&&(f=!0)),f&&(this.clipAndUpdate(c,d,e,b),a&&(this.updateOnReleaseOnly||this.dispatchScrollbarEvent()))}},maskGraphs:function(){},clipAndUpdate:function(a,b,c,d){this.clipX=a,this.clipY=b,this.clipW=c,this.clipH=d,this.selectedBG.clipRect(a,b,c,d),this.updateDragIconPositions(),this.maskGraphs(a,b,c,d)},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var a=this.chart;a.hideBalloon();var b=this.getDBox(),c=b.x,d=b.y,e=b.width,b=b.height;this.rotate?(c=d,e=this.height/b):e=this.width/e,a={type:"zoomed",position:c,chart:a,target:this,multiplier:e},this.fire(a.type,a)}},updateDragIconPositions:function(){var a,b,c=this.getDBox(),d=c.x,e=c.y,f=this.iconLeft,g=this.iconRight,h=this.scrollbarHeight;this.rotate?(a=this.dragIconWidth,b=this.dragIconHeight,f.translate((h-b)/2,e-a/2),g.translate((h-b)/2,e+c.height-a/2)):(a=this.dragIconHeight,b=this.dragIconWidth,f.translate(d-b/2,(h-a)/2),g.translate(d-b/2+c.width,(h-a)/2))},showDragIcons:function(){this.resizeEnabled&&(this.iconLeft.show(),this.iconRight.show())},hideDragIcons:function(){this.resizingLeft||this.resizingRight||this.dragging||((this.hideResizeGrips||!this.resizeEnabled)&&(this.iconLeft.hide(),this.iconRight.hide()),this.removeCursors())},removeCursors:function(){this.chart.setMouseCursor("auto")},relativeZoom:function(a,b){this.dragger.stop(),this.multiplier=a,this.position=b,this.updateScrollbarSize(b,this.rotate?b+this.height/a:b+this.width/a)},destroy:function(){this.clear(),AmCharts.remove(this.set),AmCharts.remove(this.iconRight),AmCharts.remove(this.iconLeft)},clear:function(){clearInterval(this.interval)},handleDragStart:function(){var a=this.chart;this.dragger.stop(),this.removeCursors(),this.dragging=!0;var b=this.getDBox();this.rotate?(this.initialCoord=b.y,this.initialMouse=a.mouseY):(this.initialCoord=b.x,this.initialMouse=a.mouseX)},handleDragStop:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent()),this.dragging=!1,this.mouseIsOver&&this.removeCursors(),this.updateScrollbar()},handleDraggerOver:function(){this.handleMouseOver()},leftDragStart:function(){this.dragger.stop(),this.resizingLeft=!0},leftDragStop:function(){this.resizingLeft=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease()},rightDragStart:function(){this.dragger.stop(),this.resizingRight=!0},rightDragStop:function(){this.resizingRight=!1,this.mouseIsOver||this.removeCursors(),this.updateOnRelease()},iconRollOut:function(){this.removeCursors()},iconRollOver:function(){this.chart.setMouseCursor(this.rotate?"n-resize":"e-resize"),this.handleMouseOver()},getDBox:function(){return this.dragger?this.dragger.getBBox():void 0},handleBgClick:function(){var a=this;if(!a.resizingRight&&!a.resizingLeft){a.zooming=!0;var b,c,d=a.scrollDuration,e=a.dragger;b=a.getDBox();var f=b.height,g=b.width;c=a.chart;var h=a.y,i=a.x,j=a.rotate;j?(b="y",c=c.mouseY-f/2-h,c=AmCharts.fitToBounds(c,0,a.height-f)):(b="x",c=c.mouseX-g/2-i,c=AmCharts.fitToBounds(c,0,a.width-g)),a.updateOnReleaseOnly?(a.skipEvent=!1,e.setAttr(b,c),a.dispatchScrollbarEvent(),a.clipDragger()):(c=Math.round(c),j?e.animate({y:c},d,">"):e.animate({x:c},d,">"),a.forceClip=!0,clearTimeout(a.forceTO),a.forceTO=setTimeout(function(){a.stopForceClip.call(a)},5e3*d))}},updateOnRelease:function(){this.updateOnReleaseOnly&&(this.updateScrollbar(),this.skipEvent=!1,this.dispatchScrollbarEvent())},handleReleaseOutside:function(){this.set&&((this.resizingLeft||this.resizingRight||this.dragging)&&(this.updateOnRelease(),this.removeCursors()),this.mouseIsOver=this.dragging=this.resizingRight=this.resizingLeft=!1,this.hideDragIcons(),this.updateScrollbar())},handleMouseOver:function(){this.mouseIsOver=!0,this.showDragIcons()},handleMouseOut:function(){this.mouseIsOver=!1,this.hideDragIcons()}}),AmCharts.ChartScrollbar=AmCharts.Class({inherits:AmCharts.SimpleChartScrollbar,construct:function(a){this.cname="ChartScrollbar",AmCharts.ChartScrollbar.base.construct.call(this,a),this.graphLineColor="#BBBBBB",this.graphLineAlpha=0,this.graphFillColor="#BBBBBB",this.graphFillAlpha=1,this.selectedGraphLineColor="#888888",this.selectedGraphLineAlpha=0,this.selectedGraphFillColor="#888888",this.selectedGraphFillAlpha=1,this.gridCount=0,this.gridColor="#FFFFFF",this.gridAlpha=.7,this.skipEvent=this.autoGridCount=!1,this.color="#FFFFFF",this.scrollbarCreated=!1,this.offset=0,AmCharts.applyTheme(this,a,this.cname)},init:function(){var a=this.categoryAxis,b=this.chart;if(a||(this.categoryAxis=a=new AmCharts.CategoryAxis),a.chart=b,a.id="scrollbar",a.dateFormats=b.categoryAxis.dateFormats,a.markPeriodChange=b.categoryAxis.markPeriodChange,a.boldPeriodBeginning=b.categoryAxis.boldPeriodBeginning,a.axisItemRenderer=AmCharts.RecItem,a.axisRenderer=AmCharts.RecAxis,a.guideFillRenderer=AmCharts.RecFill,a.inside=!0,a.fontSize=this.fontSize,a.tickLength=0,a.axisAlpha=0,AmCharts.isString(this.graph)&&(this.graph=AmCharts.getObjById(b.graphs,this.graph)),a=this.graph){var c=this.valueAxis;c||(this.valueAxis=c=new AmCharts.ValueAxis,c.visible=!1,c.scrollbar=!0,c.axisItemRenderer=AmCharts.RecItem,c.axisRenderer=AmCharts.RecAxis,c.guideFillRenderer=AmCharts.RecFill,c.labelsEnabled=!1,c.chart=b),b=this.unselectedGraph,b||(b=new AmCharts.AmGraph,b.scrollbar=!0,this.unselectedGraph=b,b.negativeBase=a.negativeBase,b.noStepRisers=a.noStepRisers),b=this.selectedGraph,b||(b=new AmCharts.AmGraph,b.scrollbar=!0,this.selectedGraph=b,b.negativeBase=a.negativeBase,b.noStepRisers=a.noStepRisers)}this.scrollbarCreated=!0},draw:function(){var a=this;AmCharts.ChartScrollbar.base.draw.call(a),a.scrollbarCreated||a.init();var b=a.chart,c=b.chartData,d=a.categoryAxis,e=a.rotate,f=a.x,g=a.y,h=a.width,i=a.height,j=b.categoryAxis,k=a.set;if(d.setOrientation(!e),d.parseDates=j.parseDates,d.rotate=e,d.equalSpacing=j.equalSpacing,d.minPeriod=j.minPeriod,d.startOnAxis=j.startOnAxis,d.viW=h,d.viH=i,d.width=h,d.height=i,d.gridCount=a.gridCount,d.gridColor=a.gridColor,d.gridAlpha=a.gridAlpha,d.color=a.color,d.tickLength=0,d.axisAlpha=0,d.autoGridCount=a.autoGridCount,d.parseDates&&!d.equalSpacing&&d.timeZoom(b.firstTime,b.lastTime),d.zoom(0,c.length-1),j=a.graph){var l=a.valueAxis,m=j.valueAxis;l.id=m.id,l.rotate=e,l.setOrientation(e),l.width=h,l.height=i,l.viW=h,l.viH=i,l.dataProvider=c,l.reversed=m.reversed,l.logarithmic=m.logarithmic,l.gridAlpha=0,l.axisAlpha=0,k.push(l.set),e?(l.y=g,l.x=0):(l.x=f,l.y=0);var n,f=1/0,g=-1/0;for(n=0;n<c.length;n++){var o,p=c[n].axes[m.id].graphs[j.id].values;for(o in p)if(p.hasOwnProperty(o)&&"percents"!=o&&"total"!=o){var q=p[o];f>q&&(f=q),q>g&&(g=q)}}1/0!=f&&(l.minimum=f),-1/0!=g&&(l.maximum=g+.1*(g-f)),f==g&&(--l.minimum,l.maximum+=1),void 0!==a.minimum&&(l.minimum=a.minimum),void 0!==a.maximum&&(l.maximum=a.maximum),l.zoom(0,c.length-1),o=a.unselectedGraph,o.id=j.id,o.rotate=e,o.chart=b,o.data=c,o.valueAxis=l,o.chart=j.chart,o.categoryAxis=a.categoryAxis,o.periodSpan=j.periodSpan,o.valueField=j.valueField,o.openField=j.openField,o.closeField=j.closeField,o.highField=j.highField,o.lowField=j.lowField,o.lineAlpha=a.graphLineAlpha,o.lineColorR=a.graphLineColor,o.fillAlphas=a.graphFillAlpha,o.fillColorsR=a.graphFillColor,o.connect=j.connect,o.hidden=j.hidden,o.width=h,o.height=i,o.pointPosition=j.pointPosition,o.stepDirection=j.stepDirection,o.periodSpan=j.periodSpan,m=a.selectedGraph,m.id=j.id,m.rotate=e,m.chart=b,m.data=c,m.valueAxis=l,m.chart=j.chart,m.categoryAxis=d,m.periodSpan=j.periodSpan,m.valueField=j.valueField,m.openField=j.openField,m.closeField=j.closeField,m.highField=j.highField,m.lowField=j.lowField,m.lineAlpha=a.selectedGraphLineAlpha,m.lineColorR=a.selectedGraphLineColor,m.fillAlphas=a.selectedGraphFillAlpha,m.fillColorsR=a.selectedGraphFillColor,m.connect=j.connect,m.hidden=j.hidden,m.width=h,m.height=i,m.pointPosition=j.pointPosition,m.stepDirection=j.stepDirection,m.periodSpan=j.periodSpan,b=a.graphType,b||(b=j.type),o.type=b,m.type=b,c=c.length-1,o.zoom(0,c),m.zoom(0,c),m.set.click(function(){a.handleBackgroundClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()}),o.set.click(function(){a.handleBackgroundClick()}).mouseover(function(){a.handleMouseOver()}).mouseout(function(){a.handleMouseOut()}),k.push(o.set),k.push(m.set)}k.push(d.set),k.push(d.labelsSet),a.bg.toBack(),a.invisibleBg.toFront(),a.dragger.toFront(),a.iconLeft.toFront(),a.iconRight.toFront()},timeZoom:function(a,b,c){this.startTime=a,this.endTime=b,this.timeDifference=b-a,this.skipEvent=!AmCharts.toBoolean(c),this.zoomScrollbar(),this.skipEvent||this.dispatchScrollbarEvent()},zoom:function(a,b){this.start=a,this.end=b,this.skipEvent=!0,this.zoomScrollbar()},dispatchScrollbarEvent:function(){if(this.skipEvent)this.skipEvent=!1;else{var a,b,c=this.chart.chartData,d=this.dragger.getBBox();a=d.x;var e=d.y,f=d.width,d=d.height,g=this.chart;this.rotate?(a=e,b=d):b=f,f={type:"zoomed",target:this},f.chart=g;var h=this.categoryAxis,i=this.stepWidth,e=g.minSelectedTime,d=!1;h.parseDates&&!h.equalSpacing?(c=g.lastTime,g=g.firstTime,h.minDuration(),h=Math.round(a/i)+g,a=this.dragging?h+this.timeDifference:Math.round((a+b)/i)+g,h>a&&(h=a),e>0&&e>a-h&&(a=Math.round(h+(a-h)/2),d=Math.round(e/2),h=a-d,a+=d,d=!0),a>c&&(a=c),h>a-e&&(h=a-e),g>h&&(h=g),h+e>a&&(a=h+e),(h!=this.startTime||a!=this.endTime)&&(this.startTime=h,this.endTime=a,f.start=h,f.end=a,f.startDate=new Date(h),f.endDate=new Date(a),this.fire(f.type,f))):(h.startOnAxis||(a+=i/2),b-=this.stepWidth/2,e=h.xToIndex(a),a=h.xToIndex(a+b),(e!=this.start||this.end!=a)&&(h.startOnAxis&&(this.resizingRight&&e==a&&a++,this.resizingLeft&&e==a&&(e>0?e--:a=1)),this.start=e,this.end=this.dragging?this.start+this.difference:a,f.start=this.start,f.end=this.end,h.parseDates&&(c[this.start]&&(f.startDate=new Date(c[this.start].time)),c[this.end]&&(f.endDate=new Date(c[this.end].time))),this.fire(f.type,f))),d&&this.zoomScrollbar()}},zoomScrollbar:function(){var a,b;a=this.chart;var c=a.chartData,d=this.categoryAxis;d.parseDates&&!d.equalSpacing?(c=d.stepWidth,d=a.firstTime,a=c*(this.startTime-d),b=c*(this.endTime-d)):(a=c[this.start].x[d.id],b=c[this.end].x[d.id],c=d.stepWidth,d.startOnAxis||(d=c/2,a-=d,b+=d)),this.stepWidth=c,this.updateScrollbarSize(a,b)},maskGraphs:function(a,b,c,d){var e=this.selectedGraph;e&&e.set.clipRect(a,b,c,d)},handleDragStart:function(){AmCharts.ChartScrollbar.base.handleDragStart.call(this),this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0)},handleBackgroundClick:function(){AmCharts.ChartScrollbar.base.handleBackgroundClick.call(this),this.dragging||(this.difference=this.end-this.start,this.timeDifference=this.endTime-this.startTime,0>this.timeDifference&&(this.timeDifference=0))}}),AmCharts.AmBalloon=AmCharts.Class({construct:function(a){this.cname="AmBalloon",this.enabled=!0,this.fillColor="#FFFFFF",this.fillAlpha=.8,this.borderThickness=2,this.borderColor="#FFFFFF",this.borderAlpha=1,this.cornerRadius=0,this.maxWidth=220,this.horizontalPadding=8,this.verticalPadding=4,this.pointerWidth=6,this.pointerOrientation="V",this.color="#000000",this.adjustBorderColor=!0,this.show=this.follow=this.showBullet=!1,this.bulletSize=3,this.shadowAlpha=.4,this.shadowColor="#000000",this.fadeOutDuration=this.animationDuration=.3,this.fixedPosition=!1,this.offsetY=6,this.offsetX=1,this.textAlign="center",AmCharts.isModern||(this.offsetY*=1.5),AmCharts.applyTheme(this,a,this.cname)},draw:function(){var a=this.pointToX,b=this.pointToY;this.deltaSignX=this.deltaSignY=1;var c=this.chart;if(AmCharts.VML&&(this.fadeOutDuration=0),this.xAnim&&c.stopAnim(this.xAnim),this.yAnim&&c.stopAnim(this.yAnim),!isNaN(a)){var d=this.follow,e=c.container,f=this.set;if(AmCharts.remove(f),this.removeDiv(),f=e.set(),f.node.style.pointerEvents="none",this.set=f,c.balloonsSet.push(f),this.show){var g=this.l,h=this.t,i=this.r,j=this.b,k=this.balloonColor,l=this.fillColor,m=this.borderColor,n=l;void 0!=k&&(this.adjustBorderColor?n=m=k:l=k);var o=this.horizontalPadding,p=this.verticalPadding,q=this.pointerWidth,r=this.pointerOrientation,s=this.cornerRadius,t=c.fontFamily,u=this.fontSize;void 0==u&&(u=c.fontSize);var k=document.createElement("div"),v=k.style;v.pointerEvents="none",v.position="absolute";var w=this.minWidth,x="";isNaN(w)||(x="min-width:"+(w-2*o)+"px; "),k.innerHTML='<div style="text-align:'+this.textAlign+"; "+x+"max-width:"+this.maxWidth+"px; font-size:"+u+"px; color:"+this.color+"; font-family:"+t+'">'+this.text+"</div>",c.chartDiv.appendChild(k),this.textDiv=k,u=k.offsetWidth,t=k.offsetHeight,k.clientHeight&&(u=k.clientWidth,t=k.clientHeight),t+=2*p,x=u+2*o,!isNaN(w)&&w>x&&(x=w),window.opera&&(t+=2);var y=!1,u=this.offsetY;c.handDrawn&&(u+=c.handDrawScatter+2),"H"!=r?(w=a-x/2,h+t+10>b&&"down"!=r?(y=!0,d&&(b+=u),u=b+q,this.deltaSignY=-1):(d&&(b-=u),u=b-t-q,this.deltaSignY=1)):(2*q>t&&(q=t/2),u=b-t/2,g+(i-g)/2>a?(w=a+q,this.deltaSignX=-1):(w=a-x-q,this.deltaSignX=1)),u+t>=j&&(u=j-t),h>u&&(u=h),g>w&&(w=g),w+x>i&&(w=i-x);var z,h=u+p,j=w+o,p=this.shadowAlpha,A=this.shadowColor,o=this.borderThickness,B=this.bulletSize;s>0||0===q?(p>0&&(a=AmCharts.rect(e,x,t,l,0,o+1,A,p,this.cornerRadius),AmCharts.isModern?a.translate(1,1):a.translate(4,4),f.push(a)),l=AmCharts.rect(e,x,t,l,this.fillAlpha,o,m,this.borderAlpha,this.cornerRadius),this.showBullet&&(z=AmCharts.circle(e,B,n,this.fillAlpha),f.push(z))):(n=[],s=[],"H"!=r?(g=a-w,g>x-q&&(g=x-q),q>g&&(g=q),n=[0,g-q,a-w,g+q,x,x,0,0],s=y?[0,0,b-u,0,0,t,t,0]:[t,t,b-u,t,t,0,0,t]):(n=b-u,n>t-q&&(n=t-q),q>n&&(n=q),s=[0,n-q,b-u,n+q,t,t,0,0],n=g+(i-g)/2>a?[0,0,a>w?0:a-w,0,0,x,x,0]:[x,x,w+x>a?x:a-w,x,x,0,0,x]),p>0&&(a=AmCharts.polygon(e,n,s,l,0,o,A,p),a.translate(1,1),f.push(a)),l=AmCharts.polygon(e,n,s,l,this.fillAlpha,o,m,this.borderAlpha)),this.bg=l,f.push(l),l.toFront(),e=1*this.deltaSignX,v.left=j+"px",v.top=h+"px",f.translate(w-e,u),l=l.getBBox(),this.bottom=u+t+1,this.yPos=l.y+u,z&&z.translate(this.pointToX-w+e,b-u),b=this.animationDuration,0<this.animationDuration&&!d&&!isNaN(this.prevX)&&(f.translate(this.prevX,this.prevY),f.animate({translate:w-e+","+u},b,"easeOutSine"),k&&(v.left=this.prevTX+"px",v.top=this.prevTY+"px",this.xAnim=c.animate({node:k},"left",this.prevTX,j,b,"easeOutSine","px"),this.yAnim=c.animate({node:k},"top",this.prevTY,h,b,"easeOutSine","px"))),this.prevX=w-e,this.prevY=u,this.prevTX=j,this.prevTY=h}}},followMouse:function(){if(this.follow&&this.show){var a=this.chart.mouseX-this.offsetX*this.deltaSignX,b=this.chart.mouseY;if(this.pointToX=a,this.pointToY=b,a!=this.previousX||b!=this.previousY)if(this.previousX=a,this.previousY=b,0===this.cornerRadius)this.draw();else{var c=this.set;if(c){var d=c.getBBox(),a=a-d.width/2,e=b-d.height-10;a<this.l&&(a=this.l),a>this.r-d.width&&(a=this.r-d.width),e<this.t&&(e=b+10),c.translate(a,e),b=this.textDiv.style,b.left=a+this.horizontalPadding+"px",b.top=e+this.verticalPadding+"px"}}}},changeColor:function(a){this.balloonColor=a},setBounds:function(a,b,c,d){this.l=a,this.t=b,this.r=c,this.b=d,this.destroyTO&&clearTimeout(this.destroyTO)},showBalloon:function(a){this.text=a,this.show=!0,this.destroyTO&&clearTimeout(this.destroyTO),a=this.chart,this.fadeAnim1&&a.stopAnim(this.fadeAnim1),this.fadeAnim2&&a.stopAnim(this.fadeAnim2),this.draw()},hide:function(){var a=this,b=a.fadeOutDuration,c=a.chart;if(b>0){a.destroyTO=setTimeout(function(){a.destroy.call(a)},1e3*b),a.follow=!1,a.show=!1;var d=a.set;d&&(d.setAttr("opacity",a.fillAlpha),a.fadeAnim1=d.animate({opacity:0},b,"easeInSine")),a.textDiv&&(a.fadeAnim2=c.animate({node:a.textDiv},"opacity",1,0,b,"easeInSine",""))}else a.show=!1,a.follow=!1,a.destroy()},setPosition:function(a,b,c){this.pointToX=a,this.pointToY=b,c&&(a==this.previousX&&b==this.previousY||this.draw()),this.previousX=a,this.previousY=b},followCursor:function(a){var b=this;(b.follow=a)?(b.pShowBullet=b.showBullet,b.showBullet=!1):void 0!==b.pShowBullet&&(b.showBullet=b.pShowBullet),clearInterval(b.interval);var c=b.chart.mouseX,d=b.chart.mouseY;!isNaN(c)&&a&&(b.pointToX=c-b.offsetX*b.deltaSignX,b.pointToY=d,b.followMouse(),b.interval=setInterval(function(){b.followMouse.call(b)},40))},removeDiv:function(){if(this.textDiv){var a=this.textDiv.parentNode;a&&a.removeChild(this.textDiv)}},destroy:function(){clearInterval(this.interval),AmCharts.remove(this.set),this.removeDiv(),this.set=null}}),AmCharts.AmCoordinateChart=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(a){AmCharts.AmCoordinateChart.base.construct.call(this,a),this.theme=a,this.createEvents("rollOverGraphItem","rollOutGraphItem","clickGraphItem","doubleClickGraphItem","rightClickGraphItem","clickGraph","rollOverGraph","rollOutGraph"),this.startAlpha=1,this.startDuration=0,this.startEffect="elastic",this.sequencedAnimation=!0,this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" "),this.balloonDateFormat="MMM DD, YYYY",this.valueAxes=[],this.graphs=[],this.guides=[],this.gridAboveGraphs=!1,AmCharts.applyTheme(this,a,"AmCoordinateChart")},initChart:function(){AmCharts.AmCoordinateChart.base.initChart.call(this);var a=this.categoryAxis;a&&(this.categoryAxis=AmCharts.processObject(a,AmCharts.CategoryAxis,this.theme)),this.processValueAxes(),this.createValueAxes(),this.processGraphs(),this.processGuides(),AmCharts.VML&&(this.startAlpha=1),this.setLegendData(this.graphs),this.gridAboveGraphs&&this.gridSet.toFront()},createValueAxes:function(){if(0===this.valueAxes.length){var a=new AmCharts.ValueAxis;this.addValueAxis(a)}},parseData:function(){this.processValueAxes(),this.processGraphs()},parseSerialData:function(){var a,b=this.graphs,c={},d=this.seriesIdField;d||(d=this.categoryField),this.chartData=[];var e=this.dataProvider;if(e){var f,g,h,i=!1,j=this.categoryAxis;j&&(i=j.parseDates,g=j.forceShowField,h=j.labelColorField,f=j.categoryFunction);var k,l,m,n={};i&&(a=AmCharts.extractPeriod(j.minPeriod),k=a.period,l=a.count,m=AmCharts.getPeriodDuration(k,l));var o={};this.lookupTable=o;var p,q=this.dataDateFormat,r={};for(p=0;p<e.length;p++){var s={},t=e[p];if(a=t[this.categoryField],s.dataContext=t,s.category=f?f(a,t,j):String(a),g&&(s.forceShow=t[g]),h&&(s.labelColor=t[h]),o[t[d]]=s,!i||(a=j.categoryFunction?j.categoryFunction(a,t,j):a instanceof Date?AmCharts.newDate(a,j.minPeriod):q?AmCharts.stringToDate(a,q):new Date(a),a=AmCharts.resetDateToMin(a,k,l,j.firstDayOfWeek),s.category=a,s.time=a.getTime(),!isNaN(s.time))){var u=this.valueAxes;s.axes={},s.x={};var v;for(v=0;v<u.length;v++){var w=u[v].id;s.axes[w]={},s.axes[w].graphs={};var x;for(x=0;x<b.length;x++){a=b[x];var y=a.id,z=a.periodValue;if(a.valueAxis.id==w){s.axes[w].graphs[y]={};var A={};A.index=p;var B=t;a.dataProvider&&(B=c),A.values=this.processValues(B,a,z),!a.connect&&r&&r[y]&&s.time-n[y]>1.1*m&&(r[y].gap=!0),this.processFields(a,A,B),A.category=s.category,A.serialDataItem=s,A.graph=a,s.axes[w].graphs[y]=A,n[y]=s.time,r[y]=A}}}this.chartData[p]=s}}}for(c=0;c<b.length;c++)a=b[c],a.dataProvider&&this.parseGraphData(a)},processValues:function(a,b,c){var d,e={},f=!1;return"candlestick"!=b.type&&"ohlc"!=b.type||""===c||(f=!0),d=Number(a[b.valueField+c]),isNaN(d)||(e.value=d),d=Number(a[b.errorField+c]),isNaN(d)||(e.error=d),f&&(c="Open"),d=Number(a[b.openField+c]),isNaN(d)||(e.open=d),f&&(c="Close"),d=Number(a[b.closeField+c]),isNaN(d)||(e.close=d),f&&(c="Low"),d=Number(a[b.lowField+c]),isNaN(d)||(e.low=d),f&&(c="High"),d=Number(a[b.highField+c]),isNaN(d)||(e.high=d),e},parseGraphData:function(a){var b=a.dataProvider,c=a.seriesIdField;c||(c=this.seriesIdField),c||(c=this.categoryField);var d;for(d=0;d<b.length;d++){var e=b[d],f=this.lookupTable[String(e[c])],g=a.valueAxis.id;f&&(g=f.axes[g].graphs[a.id],g.serialDataItem=f,g.values=this.processValues(e,a,a.periodValue),this.processFields(a,g,e))}},addValueAxis:function(a){a.chart=this,this.valueAxes.push(a),this.validateData()},removeValueAxesAndGraphs:function(){var a,b=this.valueAxes;for(a=b.length-1;a>-1;a--)this.removeValueAxis(b[a])},removeValueAxis:function(a){var b,c=this.graphs;for(b=c.length-1;b>=0;b--){var d=c[b];d&&d.valueAxis==a&&this.removeGraph(d)}for(c=this.valueAxes,b=c.length-1;b>=0;b--)c[b]==a&&c.splice(b,1);this.validateData()},addGraph:function(a){this.graphs.push(a),this.chooseGraphColor(a,this.graphs.length-1),this.validateData()},removeGraph:function(a){var b,c=this.graphs;for(b=c.length-1;b>=0;b--)c[b]==a&&(c.splice(b,1),a.destroy());this.validateData()},processValueAxes:function(){var a,b=this.valueAxes;for(a=0;a<b.length;a++){var c=b[a],c=AmCharts.processObject(c,AmCharts.ValueAxis,this.theme);b[a]=c,c.chart=this,c.id||(c.id="valueAxisAuto"+a+"_"+(new Date).getTime()),void 0===c.usePrefixes&&(c.usePrefixes=this.usePrefixes)}},processGuides:function(){var a=this.guides,b=this.categoryAxis;if(a)for(var c=0;c<a.length;c++){var d=a[c];(void 0!==d.category||void 0!==d.date)&&b&&b.addGuide(d);var e=d.valueAxis;e?(AmCharts.isString(e)&&(e=this.getValueAxisById(e)),e?e.addGuide(d):this.valueAxes[0].addGuide(d)):isNaN(d.value)||this.valueAxes[0].addGuide(d)
}},processGraphs:function(){var a,b=this.graphs;for(a=0;a<b.length;a++){var c=b[a],c=AmCharts.processObject(c,AmCharts.AmGraph,this.theme);b[a]=c,this.chooseGraphColor(c,a),c.chart=this,AmCharts.isString(c.valueAxis)&&(c.valueAxis=this.getValueAxisById(c.valueAxis)),c.valueAxis||(c.valueAxis=this.valueAxes[0]),c.id||(c.id="graphAuto"+a+"_"+(new Date).getTime())}},formatString:function(a,b,c){var d=b.graph,e=d.valueAxis;return e.duration&&b.values.value&&(e=AmCharts.formatDuration(b.values.value,e.duration,"",e.durationUnits,e.maxInterval,e.numberFormatter),a=a.split("[[value]]").join(e)),a=AmCharts.massReplace(a,{"[[title]]":d.title,"[[description]]":b.description}),a=c?AmCharts.fixNewLines(a):AmCharts.fixBrakes(a),a=AmCharts.cleanFromEmpty(a)},getBalloonColor:function(a,b,c){var d=a.lineColor,e=a.balloonColor;return c&&(e=d),c=a.fillColorsR,"object"==typeof c?d=c[0]:void 0!==c&&(d=c),b.isNegative&&(c=a.negativeLineColor,a=a.negativeFillColors,"object"==typeof a?c=a[0]:void 0!==a&&(c=a),void 0!==c&&(d=c)),void 0!==b.color&&(d=b.color),void 0===e&&(e=d),e},getGraphById:function(a){return AmCharts.getObjById(this.graphs,a)},getValueAxisById:function(a){return AmCharts.getObjById(this.valueAxes,a)},processFields:function(a,b,c){if(a.itemColors){var d=a.itemColors,e=b.index;b.color=e<d.length?d[e]:AmCharts.randomColor()}for(d="lineColor color alpha fillColors description bullet customBullet bulletSize bulletConfig url labelColor dashLength pattern".split(" "),e=0;e<d.length;e++){var f=d[e],g=a[f+"Field"];g&&(g=c[g],AmCharts.isDefined(g)&&(b[f]=g))}b.dataContext=c},chooseGraphColor:function(a,b){if(a.lineColor)a.lineColorR=a.lineColor;else{var c;c=this.colors.length>b?this.colors[b]:AmCharts.randomColor(),a.lineColorR=c}a.fillColorsR=a.fillColors?a.fillColors:a.lineColorR,a.bulletBorderColorR=a.bulletBorderColor?a.bulletBorderColor:a.useLineColorForBulletBorder?a.lineColorR:a.bulletColor,a.bulletColorR=a.bulletColor?a.bulletColor:a.lineColorR,(c=this.patterns)&&(a.pattern=c[b])},handleLegendEvent:function(a){var b=a.type;if(a=a.dataItem,!this.legend.data&&a){var c=a.hidden,d=a.showBalloon;switch(b){case"clickMarker":this.textClickEnabled&&(d?this.hideGraphsBalloon(a):this.showGraphsBalloon(a));break;case"clickLabel":d?this.hideGraphsBalloon(a):this.showGraphsBalloon(a);break;case"rollOverItem":c||this.highlightGraph(a);break;case"rollOutItem":c||this.unhighlightGraph();break;case"hideItem":this.hideGraph(a);break;case"showItem":this.showGraph(a)}}},highlightGraph:function(a){var b,c=this.graphs,d=.2;if(this.legend&&(d=this.legend.rollOverGraphAlpha),1!=d)for(b=0;b<c.length;b++){var e=c[b];e!=a&&e.changeOpacity(d)}},unhighlightGraph:function(){var a;if(this.legend&&(a=this.legend.rollOverGraphAlpha),1!=a){a=this.graphs;var b;for(b=0;b<a.length;b++)a[b].changeOpacity(1)}},showGraph:function(a){a.switchable&&(a.hidden=!1,this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),this.chartCreated&&this.initChart())},hideGraph:function(a){a.switchable&&(this.dataChanged=!0,"xy"!=this.type&&(this.marginsUpdated=!1),a.hidden=!0,this.chartCreated&&this.initChart())},hideGraphsBalloon:function(a){a.showBalloon=!1,this.updateLegend()},showGraphsBalloon:function(a){a.showBalloon=!0,this.updateLegend()},updateLegend:function(){this.legend&&this.legend.invalidateSize()},resetAnimation:function(){var a=this.graphs;if(a){var b;for(b=0;b<a.length;b++)a[b].animationPlayed=!1}},animateAgain:function(){this.resetAnimation(),this.validateNow()}}),AmCharts.AmSlicedChart=AmCharts.Class({inherits:AmCharts.AmChart,construct:function(a){this.createEvents("rollOverSlice","rollOutSlice","clickSlice","pullOutSlice","pullInSlice","rightClickSlice"),AmCharts.AmSlicedChart.base.construct.call(this,a),this.colors="#FF0F00 #FF6600 #FF9E01 #FCD202 #F8FF01 #B0DE09 #04D215 #0D8ECF #0D52D1 #2A0CD0 #8A0CCF #CD0D74 #754DEB #DDDDDD #999999 #333333 #000000 #57032A #CA9726 #990000 #4B0C25".split(" "),this.alpha=1,this.groupPercent=0,this.groupedTitle="Other",this.groupedPulled=!1,this.groupedAlpha=1,this.marginLeft=0,this.marginBottom=this.marginTop=10,this.marginRight=0,this.hoverAlpha=1,this.outlineColor="#FFFFFF",this.outlineAlpha=0,this.outlineThickness=1,this.startAlpha=0,this.startDuration=1,this.startEffect="bounce",this.sequencedAnimation=!0,this.pullOutDuration=1,this.pullOutEffect="bounce",this.pullOnHover=this.pullOutOnlyOne=!1,this.labelsEnabled=!0,this.labelTickColor="#000000",this.labelTickAlpha=.2,this.hideLabelsPercent=0,this.urlTarget="_self",this.autoMarginOffset=10,this.gradientRatio=[],this.maxLabelWidth=200,AmCharts.applyTheme(this,a,"AmSlicedChart")},initChart:function(){AmCharts.AmSlicedChart.base.initChart.call(this),this.dataChanged&&(this.parseData(),this.dispatchDataUpdated=!0,this.dataChanged=!1,this.setLegendData(this.chartData)),this.drawChart()},handleLegendEvent:function(a){var b=a.type,c=a.dataItem,d=this.legend;if(!d.data&&c){var e=c.hidden;switch(a=a.event,b){case"clickMarker":e||d.switchable||this.clickSlice(c,a);break;case"clickLabel":e||this.clickSlice(c,a,!1);break;case"rollOverItem":e||this.rollOverSlice(c,!1,a);break;case"rollOutItem":e||this.rollOutSlice(c,a);break;case"hideItem":this.hideSlice(c,a);break;case"showItem":this.showSlice(c,a)}}},invalidateVisibility:function(){this.recalculatePercents(),this.initChart();var a=this.legend;a&&a.invalidateSize()},addEventListeners:function(a,b){var c=this;a.mouseover(function(a){c.rollOverSlice(b,!0,a)}).mouseout(function(a){c.rollOutSlice(b,a)}).touchend(function(a){c.rollOverSlice(b,a),c.panEventsEnabled&&c.clickSlice(b,a)}).touchstart(function(a){c.rollOverSlice(b,a)}).click(function(a){c.clickSlice(b,a)}).contextmenu(function(a){c.handleRightClick(b,a)})},formatString:function(a,b,c){return a=AmCharts.formatValue(a,b,["value"],this.nf,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),a=AmCharts.formatValue(a,b,["percents"],this.pf),a=AmCharts.massReplace(a,{"[[title]]":b.title,"[[description]]":b.description}),-1!=a.indexOf("[[")&&(a=AmCharts.formatDataContextValue(a,b.dataContext)),a=c?AmCharts.fixNewLines(a):AmCharts.fixBrakes(a),a=AmCharts.cleanFromEmpty(a)},startSlices:function(){var a;for(a=0;a<this.chartData.length;a++)0<this.startDuration&&this.sequencedAnimation?this.setStartTO(a):this.startSlice(this.chartData[a])},setStartTO:function(a){var b=this;a=setTimeout(function(){b.startSequenced.call(b)},b.startDuration/b.chartData.length*500*a),b.timeOuts.push(a)},pullSlices:function(a){var b,c=this.chartData;for(b=0;b<c.length;b++){var d=c[b];d.pulled&&this.pullSlice(d,1,a)}},startSequenced:function(){var a,b=this.chartData;for(a=0;a<b.length;a++)if(!b[a].started){this.startSlice(this.chartData[a]);break}},startSlice:function(a){a.started=!0;var b=a.wedge,c=this.startDuration;b&&c>0&&(0<a.alpha&&b.show(),b.translate(a.startX,a.startY),b.animate({opacity:1,translate:"0,0"},c,this.startEffect))},showLabels:function(){var a,b=this.chartData;for(a=0;a<b.length;a++){var c=b[a];if(0<c.alpha){var d=c.label;d&&d.show(),(c=c.tick)&&c.show()}}},showSlice:function(a){isNaN(a)?a.hidden=!1:this.chartData[a].hidden=!1,this.invalidateVisibility()},hideSlice:function(a){isNaN(a)?a.hidden=!0:this.chartData[a].hidden=!0,this.hideBalloon(),this.invalidateVisibility()},rollOverSlice:function(a,b,c){if(isNaN(a)||(a=this.chartData[a]),clearTimeout(this.hoverInt),!a.hidden){this.pullOnHover&&this.pullSlice(a,1),1>this.hoverAlpha&&a.wedge&&a.wedge.attr({opacity:this.hoverAlpha});var d=a.balloonX,e=a.balloonY;a.pulled&&(d+=a.pullX,e+=a.pullY);var f=this.formatString(this.balloonText,a,!0),g=this.balloonFunction;g&&(f=g(a,f)),g=AmCharts.adjustLuminosity(a.color,-.15),this.showBalloon(f,g,b,d,e),a={type:"rollOverSlice",dataItem:a,chart:this,event:c},this.fire(a.type,a)}},rollOutSlice:function(a,b){isNaN(a)||(a=this.chartData[a]),a.wedge&&a.wedge.attr({opacity:1}),this.hideBalloon();var c={type:"rollOutSlice",dataItem:a,chart:this,event:b};this.fire(c.type,c)},clickSlice:function(a,b,c){isNaN(a)||(a=this.chartData[a]),a.pulled?this.pullSlice(a,0):this.pullSlice(a,1),AmCharts.getURL(a.url,this.urlTarget),c||(a={type:"clickSlice",dataItem:a,chart:this,event:b},this.fire(a.type,a))},handleRightClick:function(a,b){isNaN(a)||(a=this.chartData[a]);var c={type:"rightClickSlice",dataItem:a,chart:this,event:b};this.fire(c.type,c)},drawTicks:function(){var a,b=this.chartData;for(a=0;a<b.length;a++){var c=b[a];if(c.label){var d=c.ty,d=AmCharts.line(this.container,[c.tx0,c.tx,c.tx2],[c.ty0,d,d],this.labelTickColor,this.labelTickAlpha);c.tick=d,c.wedge.push(d)}}},initialStart:function(){var a=this,b=a.startDuration,c=setTimeout(function(){a.showLabels.call(a)},1e3*b);a.timeOuts.push(c),a.chartCreated?a.pullSlices(!0):(a.startSlices(),b>0?(b=setTimeout(function(){a.pullSlices.call(a)},1200*b),a.timeOuts.push(b)):a.pullSlices(!0))},pullSlice:function(a,b,c){var d=this.pullOutDuration;!0===c&&(d=0),(c=a.wedge)&&(d>0?c.animate({translate:b*a.pullX+","+b*a.pullY},d,this.pullOutEffect):c.translate(b*a.pullX,b*a.pullY)),1==b?(a.pulled=!0,this.pullOutOnlyOne&&this.pullInAll(a.index),a={type:"pullOutSlice",dataItem:a,chart:this}):(a.pulled=!1,a={type:"pullInSlice",dataItem:a,chart:this}),this.fire(a.type,a)},pullInAll:function(a){var b,c=this.chartData;for(b=0;b<this.chartData.length;b++)b!=a&&c[b].pulled&&this.pullSlice(c[b],0)},pullOutAll:function(a){a=this.chartData;var b;for(b=0;b<a.length;b++)a[b].pulled||this.pullSlice(a[b],1)},parseData:function(){var a=[];this.chartData=a;var b=this.dataProvider;if(isNaN(this.pieAlpha)||(this.alpha=this.pieAlpha),void 0!==b){var c,d,e,f=b.length,g=0;for(c=0;f>c;c++){d={};var h=b[c];d.dataContext=h,d.value=Number(h[this.valueField]),(e=h[this.titleField])||(e=""),d.title=e,d.pulled=AmCharts.toBoolean(h[this.pulledField],!1),(e=h[this.descriptionField])||(e=""),d.description=e,d.labelRadius=Number(h[this.labelRadiusField]),d.switchable=!0,d.url=h[this.urlField],e=h[this.patternField],!e&&this.patterns&&(e=this.patterns[c]),d.pattern=e,d.visibleInLegend=AmCharts.toBoolean(h[this.visibleInLegendField],!0),e=h[this.alphaField],d.alpha=void 0!==e?Number(e):this.alpha,e=h[this.colorField],void 0!==e&&(d.color=AmCharts.toColor(e)),d.labelColor=AmCharts.toColor(h[this.labelColorField]),g+=d.value,d.hidden=!1,a[c]=d}for(c=b=0;f>c;c++)d=a[c],d.percents=d.value/g*100,d.percents<this.groupPercent&&b++;for(b>1&&(this.groupValue=0,this.removeSmallSlices(),a.push({title:this.groupedTitle,value:this.groupValue,percents:this.groupValue/g*100,pulled:this.groupedPulled,color:this.groupedColor,url:this.groupedUrl,description:this.groupedDescription,alpha:this.groupedAlpha,pattern:this.groupedPattern,dataContext:{}})),f=this.baseColor,f||(f=this.pieBaseColor),g=this.brightnessStep,g||(g=this.pieBrightnessStep),c=0;c<a.length;c++)f?e=AmCharts.adjustLuminosity(f,c*g/100):(e=this.colors[c],void 0===e&&(e=AmCharts.randomColor())),void 0===a[c].color&&(a[c].color=e);this.recalculatePercents()}},recalculatePercents:function(){var a,b,c=this.chartData,d=0;for(a=0;a<c.length;a++)b=c[a],!b.hidden&&0<b.value&&(d+=b.value);for(a=0;a<c.length;a++)b=this.chartData[a],b.percents=!b.hidden&&0<b.value?100*b.value/d:0},removeSmallSlices:function(){var a,b=this.chartData;for(a=b.length-1;a>=0;a--)b[a].percents<this.groupPercent&&(this.groupValue+=b[a].value,b.splice(a,1))},animateAgain:function(){var a=this;a.startSlices();for(var b=0;b<a.chartData.length;b++){var c=a.chartData[b];c.started=!1;var d=c.wedge;d&&d.translate(c.startX,c.startY)}b=a.startDuration,b>0?(b=setTimeout(function(){a.pullSlices.call(a)},1200*b),a.timeOuts.push(b)):a.pullSlices()},measureMaxLabel:function(){var a,b=this.chartData,c=0;for(a=0;a<b.length;a++){var d=b[a],e=this.formatString(this.labelText,d),f=this.labelFunction;f&&(e=f(d,e)),d=AmCharts.text(this.container,e,this.color,this.fontFamily,this.fontSize),e=d.getBBox().width,e>c&&(c=e),d.remove()}return c}}),AmCharts.AmRectangularChart=AmCharts.Class({inherits:AmCharts.AmCoordinateChart,construct:function(a){AmCharts.AmRectangularChart.base.construct.call(this,a),this.theme=a,this.createEvents("zoomed"),this.marginRight=this.marginBottom=this.marginTop=this.marginLeft=20,this.verticalPosition=this.horizontalPosition=this.depth3D=this.angle=0,this.heightMultiplier=this.widthMultiplier=1,this.plotAreaFillColors="#FFFFFF",this.plotAreaFillAlphas=0,this.plotAreaBorderColor="#000000",this.plotAreaBorderAlpha=0,this.zoomOutButtonImageSize=17,this.zoomOutButtonImage="lens.png",this.zoomOutText="Show all",this.zoomOutButtonColor="#e5e5e5",this.zoomOutButtonAlpha=0,this.zoomOutButtonRollOverAlpha=1,this.zoomOutButtonPadding=8,this.trendLines=[],this.autoMargins=!0,this.marginsUpdated=!1,this.autoMarginOffset=10,AmCharts.applyTheme(this,a,"AmRectangularChart")},initChart:function(){AmCharts.AmRectangularChart.base.initChart.call(this),this.updateDxy();var a=!0;!this.marginsUpdated&&this.autoMargins&&(this.resetMargins(),a=!1),this.processScrollbars(),this.updateMargins(),this.updatePlotArea(),this.updateScrollbars(),this.updateTrendLines(),this.updateChartCursor(),this.updateValueAxes(),a&&(this.scrollbarOnly||this.updateGraphs())},drawChart:function(){if(AmCharts.AmRectangularChart.base.drawChart.call(this),this.drawPlotArea(),AmCharts.ifArray(this.chartData)){var a=this.chartCursor;a&&a.draw(),a=this.zoomOutText,""!==a&&a&&this.drawZoomOutButton()}},resetMargins:function(){var a,b={};if("serial"==this.type){var c=this.valueAxes;for(a=0;a<c.length;a++){var d=c[a];d.ignoreAxisWidth||(d.setOrientation(this.rotate),d.fixAxisPosition(),b[d.position]=!0)}(a=this.categoryAxis)&&!a.ignoreAxisWidth&&(a.setOrientation(!this.rotate),a.fixAxisPosition(),a.fixAxisPosition(),b[a.position]=!0)}else{for(d=this.xAxes,c=this.yAxes,a=0;a<d.length;a++){var e=d[a];e.ignoreAxisWidth||(e.setOrientation(!0),e.fixAxisPosition(),b[e.position]=!0)}for(a=0;a<c.length;a++)d=c[a],d.ignoreAxisWidth||(d.setOrientation(!1),d.fixAxisPosition(),b[d.position]=!0)}b.left&&(this.marginLeft=0),b.right&&(this.marginRight=0),b.top&&(this.marginTop=0),b.bottom&&(this.marginBottom=0),this.fixMargins=b},measureMargins:function(){var a,b=this.valueAxes,c=this.autoMarginOffset,d=this.fixMargins,e=this.realWidth,f=this.realHeight,g=c,h=c,i=e;a=f;var j;for(j=0;j<b.length;j++)a=this.getAxisBounds(b[j],g,i,h,a),g=Math.round(a.l),i=Math.round(a.r),h=Math.round(a.t),a=Math.round(a.b);(b=this.categoryAxis)&&(a=this.getAxisBounds(b,g,i,h,a),g=Math.round(a.l),i=Math.round(a.r),h=Math.round(a.t),a=Math.round(a.b)),d.left&&c>g&&(this.marginLeft=Math.round(-g+c)),d.right&&i>=e-c&&(this.marginRight=Math.round(i-e+c)),d.top&&h<c+this.titleHeight&&(this.marginTop=Math.round(this.marginTop-h+c+this.titleHeight)),d.bottom&&a>f-c&&(this.marginBottom=Math.round(this.marginBottom+a-f+c)),this.initChart()},getAxisBounds:function(a,b,c,d,e){if(!a.ignoreAxisWidth){var f=a.labelsSet,g=a.tickLength;if(a.inside&&(g=0),f)switch(f=a.getBBox(),a.position){case"top":a=f.y,d>a&&(d=a);break;case"bottom":a=f.y+f.height,a>e&&(e=a);break;case"right":a=f.x+f.width+g+3,a>c&&(c=a);break;case"left":a=f.x-g,b>a&&(b=a)}}return{l:b,t:d,r:c,b:e}},drawZoomOutButton:function(){var a=this,b=a.container.set();a.zoomButtonSet.push(b);var c=a.color,d=a.fontSize,e=a.zoomOutButtonImageSize,f=a.zoomOutButtonImage,g=AmCharts.lang.zoomOutText||a.zoomOutText,h=a.zoomOutButtonColor,i=a.zoomOutButtonAlpha,j=a.zoomOutButtonFontSize,k=a.zoomOutButtonPadding;isNaN(j)||(d=j),(j=a.zoomOutButtonFontColor)&&(c=j);var l,j=a.zoomOutButton;j&&(j.fontSize&&(d=j.fontSize),j.color&&(c=j.color),j.backgroundColor&&(h=j.backgroundColor),isNaN(j.backgroundAlpha)||(a.zoomOutButtonRollOverAlpha=j.backgroundAlpha));var m=j=0;for(void 0!==a.pathToImages&&f&&(l=a.container.image(a.pathToImages+f,0,0,e,e),b.push(l),l=l.getBBox(),j=l.width+5),void 0!==g&&(c=AmCharts.text(a.container,g,c,a.fontFamily,d,"start"),d=c.getBBox(),m=l?l.height/2-3:d.height/2,c.translate(j,m),b.push(c)),l=b.getBBox(),c=1,AmCharts.isModern||(c=0),h=AmCharts.rect(a.container,l.width+2*k+5,l.height+2*k-2,h,1,1,h,c),h.setAttr("opacity",i),h.translate(-k,-k),b.push(h),h.toBack(),a.zbBG=h,l=h.getBBox(),b.translate(a.marginLeftReal+a.plotAreaWidth-l.width+k,a.marginTopReal+k),b.hide(),b.mouseover(function(){a.rollOverZB()}).mouseout(function(){a.rollOutZB()}).click(function(){a.clickZB()}).touchstart(function(){a.rollOverZB()}).touchend(function(){a.rollOutZB(),a.clickZB()}),i=0;i<b.length;i++)b[i].attr({cursor:"pointer"});a.zbSet=b},rollOverZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonRollOverAlpha)},rollOutZB:function(){this.zbBG.setAttr("opacity",this.zoomOutButtonAlpha)},clickZB:function(){this.zoomOut()},zoomOut:function(){this.updateScrollbar=!0,this.zoom()},drawPlotArea:function(){var a=this.dx,b=this.dy,c=this.marginLeftReal,d=this.marginTopReal,e=this.plotAreaWidth-1,f=this.plotAreaHeight-1,g=this.plotAreaFillColors,h=this.plotAreaFillAlphas,i=this.plotAreaBorderColor,j=this.plotAreaBorderAlpha;this.trendLinesSet.clipRect(c,d,e,f),"object"==typeof h&&(h=h[0]),g=AmCharts.polygon(this.container,[0,e,e,0,0],[0,0,f,f,0],g,h,1,i,j,this.plotAreaGradientAngle),g.translate(c+a,d+b),this.set.push(g),0!==a&&0!==b&&(g=this.plotAreaFillColors,"object"==typeof g&&(g=g[0]),g=AmCharts.adjustLuminosity(g,-.15),e=AmCharts.polygon(this.container,[0,a,e+a,e,0],[0,b,b,0,0],g,h,1,i,j),e.translate(c,d+f),this.set.push(e),a=AmCharts.polygon(this.container,[0,0,a,a,0],[0,f,f+b,b,0],g,h,1,i,j),a.translate(c,d),this.set.push(a)),(c=this.bbset)&&this.scrollbarOnly&&c.remove()},updatePlotArea:function(){var a=this.updateWidth(),b=this.updateHeight(),c=this.container;this.realWidth=a,this.realWidth=b,c&&this.container.setSize(a,b),a=a-this.marginLeftReal-this.marginRightReal-this.dx,b=b-this.marginTopReal-this.marginBottomReal,1>a&&(a=1),1>b&&(b=1),this.plotAreaWidth=Math.round(a),this.plotAreaHeight=Math.round(b)},updateDxy:function(){this.dx=Math.round(this.depth3D*Math.cos(this.angle*Math.PI/180)),this.dy=Math.round(-this.depth3D*Math.sin(this.angle*Math.PI/180)),this.d3x=Math.round(this.columnSpacing3D*Math.cos(this.angle*Math.PI/180)),this.d3y=Math.round(-this.columnSpacing3D*Math.sin(this.angle*Math.PI/180))},updateMargins:function(){var a=this.getTitleHeight();this.titleHeight=a,this.marginTopReal=this.marginTop-this.dy+a,this.marginBottomReal=this.marginBottom,this.marginLeftReal=this.marginLeft,this.marginRightReal=this.marginRight},updateValueAxes:function(){var a,b=this.valueAxes,c=this.marginLeftReal,d=this.marginTopReal,e=this.plotAreaHeight,f=this.plotAreaWidth;for(a=0;a<b.length;a++){var g=b[a];g.axisRenderer=AmCharts.RecAxis,g.guideFillRenderer=AmCharts.RecFill,g.axisItemRenderer=AmCharts.RecItem,g.dx=this.dx,g.dy=this.dy,g.viW=f-1,g.viH=e-1,g.marginsChanged=!0,g.viX=c,g.viY=d,this.updateObjectSize(g)}},updateObjectSize:function(a){a.width=(this.plotAreaWidth-1)*this.widthMultiplier,a.height=(this.plotAreaHeight-1)*this.heightMultiplier,a.x=this.marginLeftReal+this.horizontalPosition,a.y=this.marginTopReal+this.verticalPosition},updateGraphs:function(){var a,b=this.graphs;for(a=0;a<b.length;a++){var c=b[a];c.x=this.marginLeftReal+this.horizontalPosition,c.y=this.marginTopReal+this.verticalPosition,c.width=this.plotAreaWidth*this.widthMultiplier,c.height=this.plotAreaHeight*this.heightMultiplier,c.index=a,c.dx=this.dx,c.dy=this.dy,c.rotate=this.rotate}},updateChartCursor:function(){var a=this.chartCursor;a&&(a=AmCharts.processObject(a,AmCharts.ChartCursor,this.theme),this.addChartCursor(a),a.x=this.marginLeftReal,a.y=this.marginTopReal,a.width=this.plotAreaWidth-1,a.height=this.plotAreaHeight-1,a.chart=this)},processScrollbars:function(){var a=this.chartScrollbar;a&&(a=AmCharts.processObject(a,AmCharts.ChartScrollbar,this.theme),this.addChartScrollbar(a))},updateScrollbars:function(){},addChartCursor:function(a){AmCharts.callMethod("destroy",[this.chartCursor]),a&&(this.listenTo(a,"changed",this.handleCursorChange),this.listenTo(a,"zoomed",this.handleCursorZoom)),this.chartCursor=a},removeChartCursor:function(){AmCharts.callMethod("destroy",[this.chartCursor]),this.chartCursor=null},zoomTrendLines:function(){var a,b=this.trendLines;for(a=0;a<b.length;a++){var c=b[a];c.valueAxis.recalculateToPercents?c.set&&c.set.hide():(c.x=this.marginLeftReal+this.horizontalPosition,c.y=this.marginTopReal+this.verticalPosition,c.draw())}},addTrendLine:function(a){this.trendLines.push(a)},removeTrendLine:function(a){var b,c=this.trendLines;for(b=c.length-1;b>=0;b--)c[b]==a&&c.splice(b,1)},adjustMargins:function(a,b){var c=a.scrollbarHeight+a.offset;"top"==a.position?b?this.marginLeftReal+=c:this.marginTopReal+=c:b?this.marginRightReal+=c:this.marginBottomReal+=c},getScrollbarPosition:function(a,b,c){a.position=b?"bottom"==c||"left"==c?"bottom":"top":"top"==c||"right"==c?"bottom":"top"},updateChartScrollbar:function(a,b){if(a){a.rotate=b;var c=this.marginTopReal,d=this.marginLeftReal,e=a.scrollbarHeight,f=this.dx,g=this.dy,h=a.offset;"top"==a.position?b?(a.y=c,a.x=d-e-h):(a.y=c-e+g-1-h,a.x=d+f):b?(a.y=c+g,a.x=d+this.plotAreaWidth+f+h):(a.y=c+this.plotAreaHeight+h,a.x=this.marginLeftReal)}},showZB:function(a){var b=this.zbSet;b&&(a?b.show():b.hide(),this.rollOutZB())},handleReleaseOutside:function(a){AmCharts.AmRectangularChart.base.handleReleaseOutside.call(this,a),(a=this.chartCursor)&&a.handleReleaseOutside()},handleMouseDown:function(a){AmCharts.AmRectangularChart.base.handleMouseDown.call(this,a);var b=this.chartCursor;b&&b.handleMouseDown(a)},handleCursorChange:function(){}}),AmCharts.TrendLine=AmCharts.Class({construct:function(a){this.cname="TrendLine",this.createEvents("click"),this.isProtected=!1,this.dashLength=0,this.lineColor="#00CC00",this.lineThickness=this.lineAlpha=1,AmCharts.applyTheme(this,a,this.cname)},draw:function(){var a=this;a.destroy();var b,c,d,e,f=a.chart,g=f.container,h=a.categoryAxis,i=a.initialDate,j=a.initialCategory,k=a.finalDate,l=a.finalCategory,m=a.valueAxis,n=a.valueAxisX,o=a.initialXValue,p=a.finalXValue,q=a.initialValue,r=a.finalValue,s=m.recalculateToPercents,t=f.dataDateFormat;h&&(i&&(i instanceof Date||(i=t?AmCharts.stringToDate(i,t):new Date(i)),a.initialDate=i,b=h.dateToCoordinate(i)),j&&(b=h.categoryToCoordinate(j)),k&&(k instanceof Date||(k=t?AmCharts.stringToDate(k,t):new Date(k)),a.finalDate=k,c=h.dateToCoordinate(k)),l&&(c=h.categoryToCoordinate(l))),n&&!s&&(isNaN(o)||(b=n.getCoordinate(o)),isNaN(p)||(c=n.getCoordinate(p))),m&&!s&&(isNaN(q)||(d=m.getCoordinate(q)),isNaN(r)||(e=m.getCoordinate(r))),isNaN(b)||isNaN(c)||isNaN(d)||isNaN(d)||(f.rotate?(h=[d,e],c=[b,c]):(h=[b,c],c=[d,e]),d=a.lineColor,b=AmCharts.line(g,h,c,d,a.lineAlpha,a.lineThickness,a.dashLength),e=h,i=c,l=h[1]-h[0],m=c[1]-c[0],0===l&&(l=.01),0===m&&(m=.01),j=l/Math.abs(l),k=m/Math.abs(m),m=l*m/Math.abs(l*m)*Math.sqrt(Math.pow(l,2)+Math.pow(m,2)),l=Math.asin(l/m),m=90*Math.PI/180-l,l=Math.abs(5*Math.cos(m)),m=Math.abs(5*Math.sin(m)),e.push(h[1]-j*m,h[0]-j*m),i.push(c[1]+k*l,c[0]+k*l),h=AmCharts.polygon(g,e,i,d,.005,0),g=g.set([h,b]),g.translate(f.marginLeftReal,f.marginTopReal),f.trendLinesSet.push(g),a.line=b,a.set=g,h.mouseup(function(){a.handleLineClick()}).mouseover(function(){a.handleLineOver()}).mouseout(function(){a.handleLineOut()}),h.touchend&&h.touchend(function(){a.handleLineClick()}))},handleLineClick:function(){var a={type:"click",trendLine:this,chart:this.chart};this.fire(a.type,a)},handleLineOver:function(){var a=this.rollOverColor;void 0!==a&&this.line.attr({stroke:a})},handleLineOut:function(){this.line.attr({stroke:this.lineColor})},destroy:function(){AmCharts.remove(this.set)}}),AmCharts.circle=function(a,b,c,d,e,f,g,h,i){return(void 0==e||0===e)&&(e=.01),void 0===f&&(f="#000000"),void 0===g&&(g=0),d={fill:c,stroke:f,"fill-opacity":d,"stroke-width":e,"stroke-opacity":g},a=isNaN(i)?a.circle(0,0,b).attr(d):a.ellipse(0,0,b,i).attr(d),h&&a.gradient("radialGradient",[c,AmCharts.adjustLuminosity(c,-.6)]),a},AmCharts.text=function(a,b,c,d,e,f,g,h){return f||(f="middle"),"right"==f&&(f="end"),isNaN(h)&&(h=1),void 0!==b&&(b=String(b),AmCharts.isIE&&!AmCharts.isModern&&(b=b.replace("&amp;","&"),b=b.replace("&","&amp;"))),c={fill:c,"font-family":d,"font-size":e,opacity:h},!0===g&&(c["font-weight"]="bold"),c["text-anchor"]=f,a.text(b,c)},AmCharts.polygon=function(a,b,c,d,e,f,g,h,i,j,k){isNaN(f)&&(f=.01),isNaN(h)&&(h=e);var l=d,m=!1;for("object"==typeof l&&1<l.length&&(m=!0,l=l[0]),void 0===g&&(g=l),e={fill:l,stroke:g,"fill-opacity":e,"stroke-width":f,"stroke-opacity":h},void 0!==k&&k>0&&(e["stroke-dasharray"]=k),k=AmCharts.dx,f=AmCharts.dy,a.handDrawn&&(c=AmCharts.makeHD(b,c,a.handDrawScatter),b=c[0],c=c[1]),g=Math.round,j&&(g=AmCharts.doNothing),j="M"+(g(b[0])+k)+","+(g(c[0])+f),h=1;h<b.length;h++)j+=" L"+(g(b[h])+k)+","+(g(c[h])+f);return a=a.path(j+" Z").attr(e),m&&a.gradient("linearGradient",d,i),a},AmCharts.rect=function(a,b,c,d,e,f,g,h,i,j,k){isNaN(f)&&(f=0),void 0===i&&(i=0),void 0===j&&(j=270),isNaN(e)&&(e=0);var l=d,m=!1;"object"==typeof l&&(l=l[0],m=!0),void 0===g&&(g=l),void 0===h&&(h=e),b=Math.round(b),c=Math.round(c);var n=0,o=0;return 0>b&&(b=Math.abs(b),n=-b),0>c&&(c=Math.abs(c),o=-c),n+=AmCharts.dx,o+=AmCharts.dy,e={fill:l,stroke:g,"fill-opacity":e,"stroke-opacity":h},void 0!==k&&k>0&&(e["stroke-dasharray"]=k),a=a.rect(n,o,b,c,i,f).attr(e),m&&a.gradient("linearGradient",d,j),a},AmCharts.bullet=function(a,b,c,d,e,f,g,h,i,j,k){var l;switch("circle"==b&&(b="round"),b){case"round":l=AmCharts.circle(a,c/2,d,e,f,g,h);break;case"square":l=AmCharts.polygon(a,[-c/2,c/2,c/2,-c/2],[c/2,c/2,-c/2,-c/2],d,e,f,g,h,j-180);break;case"rectangle":l=AmCharts.polygon(a,[-c,c,c,-c],[c/2,c/2,-c/2,-c/2],d,e,f,g,h,j-180);break;case"diamond":l=AmCharts.polygon(a,[-c/2,0,c/2,0],[0,-c/2,0,c/2],d,e,f,g,h);break;case"triangleUp":l=AmCharts.triangle(a,c,0,d,e,f,g,h);break;case"triangleDown":l=AmCharts.triangle(a,c,180,d,e,f,g,h);break;case"triangleLeft":l=AmCharts.triangle(a,c,270,d,e,f,g,h);break;case"triangleRight":l=AmCharts.triangle(a,c,90,d,e,f,g,h);break;case"bubble":l=AmCharts.circle(a,c/2,d,e,f,g,h,!0);break;case"line":l=AmCharts.line(a,[-c/2,c/2],[0,0],d,e,f,g,h);break;case"yError":l=a.set(),l.push(AmCharts.line(a,[0,0],[-c/2,c/2],d,e,f)),l.push(AmCharts.line(a,[-i,i],[-c/2,-c/2],d,e,f)),l.push(AmCharts.line(a,[-i,i],[c/2,c/2],d,e,f));break;case"xError":l=a.set(),l.push(AmCharts.line(a,[-c/2,c/2],[0,0],d,e,f)),l.push(AmCharts.line(a,[-c/2,-c/2],[-i,i],d,e,f)),l.push(AmCharts.line(a,[c/2,c/2],[-i,i],d,e,f))}return l&&l.pattern(k),l},AmCharts.triangle=function(a,b,c,d,e,f,g,h){(void 0===f||0===f)&&(f=1),void 0===g&&(g="#000"),void 0===h&&(h=0),d={fill:d,stroke:g,"fill-opacity":e,"stroke-width":f,"stroke-opacity":h},b/=2;var i;return 0===c&&(i=" M"+-b+","+b+" L0,"+-b+" L"+b+","+b+" Z"),180==c&&(i=" M"+-b+","+-b+" L0,"+b+" L"+b+","+-b+" Z"),90==c&&(i=" M"+-b+","+-b+" L"+b+",0 L"+-b+","+b+" Z"),270==c&&(i=" M"+-b+",0 L"+b+","+b+" L"+b+","+-b+" Z"),a.path(i).attr(d)},AmCharts.line=function(a,b,c,d,e,f,g,h,i,j,k){if(a.handDrawn&&!k)return AmCharts.handDrawnLine(a,b,c,d,e,f,g,h,i,j,k);for(f={fill:"none","stroke-width":f},void 0!==g&&g>0&&(f["stroke-dasharray"]=g),isNaN(e)||(f["stroke-opacity"]=e),d&&(f.stroke=d),d=Math.round,j&&(d=AmCharts.doNothing),j=AmCharts.dx,e=AmCharts.dy,g="M"+(d(b[0])+j)+","+(d(c[0])+e),h=1;h<b.length;h++)g+=" L"+(d(b[h])+j)+","+(d(c[h])+e);return AmCharts.VML?a.path(g,void 0,!0).attr(f):(i&&(g+=" M0,0 L0,0"),a.path(g).attr(f))},AmCharts.makeHD=function(a,b,c){for(var d=[],e=[],f=1;f<a.length;f++)for(var g=Number(a[f-1]),h=Number(b[f-1]),i=Number(a[f]),j=Number(b[f]),k=Math.sqrt(Math.pow(i-g,2)+Math.pow(j-h,2)),k=Math.round(k/50)+1,i=(i-g)/k,j=(j-h)/k,l=0;k>=l;l++){var m=g+l*i+Math.random()*c,n=h+l*j+Math.random()*c;d.push(m),e.push(n)}return[d,e]},AmCharts.handDrawnLine=function(a,b,c,d,e,f,g,h,i,j,k){var l=a.set();for(k=1;k<b.length;k++)for(var m=[b[k-1],b[k]],n=[c[k-1],c[k]],n=AmCharts.makeHD(m,n,a.handDrawScatter),m=n[0],n=n[1],o=1;o<m.length;o++)l.push(AmCharts.line(a,[m[o-1],m[o]],[n[o-1],n[o]],d,e,f+Math.random()*a.handDrawThickness-a.handDrawThickness/2,g,h,i,j,!0));return l},AmCharts.doNothing=function(a){return a},AmCharts.wedge=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=Math.round;f=m(f),g=m(g),h=m(h);var n=m(g/f*h),o=AmCharts.VML,p=359.5+f/100;p>359.94&&(p=359.94),e>=p&&(e=p);var q=1/180*Math.PI,p=b+Math.sin(d*q)*h,r=c-Math.cos(d*q)*n,s=b+Math.sin(d*q)*f,t=c-Math.cos(d*q)*g,u=b+Math.sin((d+e)*q)*f,v=c-Math.cos((d+e)*q)*g,w=b+Math.sin((d+e)*q)*h,q=c-Math.cos((d+e)*q)*n,x={fill:AmCharts.adjustLuminosity(j.fill,-.2),"stroke-opacity":0,"fill-opacity":j["fill-opacity"]},y=0;180<Math.abs(e)&&(y=1),d=a.set();var z;o&&(p=m(10*p),s=m(10*s),u=m(10*u),w=m(10*w),r=m(10*r),t=m(10*t),v=m(10*v),q=m(10*q),b=m(10*b),i=m(10*i),c=m(10*c),f*=10,g*=10,h*=10,n*=10,1>Math.abs(e)&&1>=Math.abs(u-s)&&1>=Math.abs(v-t)&&(z=!0)),e="";var A;if(l&&(x["fill-opacity"]=0,x["stroke-opacity"]=j["stroke-opacity"]/2,x.stroke=j.stroke),i>0&&(A=" M"+p+","+(r+i)+" L"+s+","+(t+i),o?(z||(A+=" A"+(b-f)+","+(i+c-g)+","+(b+f)+","+(i+c+g)+","+s+","+(t+i)+","+u+","+(v+i)),A+=" L"+w+","+(q+i),h>0&&(z||(A+=" B"+(b-h)+","+(i+c-n)+","+(b+h)+","+(i+c+n)+","+w+","+(i+q)+","+p+","+(i+r)))):(A+=" A"+f+","+g+",0,"+y+",1,"+u+","+(v+i)+" L"+w+","+(q+i),h>0&&(A+=" A"+h+","+n+",0,"+y+",0,"+p+","+(r+i))),A=a.path(A+" Z",void 0,void 0,"1000,1000").attr(x),d.push(A),A=a.path(" M"+p+","+r+" L"+p+","+(r+i)+" L"+s+","+(t+i)+" L"+s+","+t+" L"+p+","+r+" Z",void 0,void 0,"1000,1000").attr(x),i=a.path(" M"+u+","+v+" L"+u+","+(v+i)+" L"+w+","+(q+i)+" L"+w+","+q+" L"+u+","+v+" Z",void 0,void 0,"1000,1000").attr(x),d.push(A),d.push(i)),o?(z||(e=" A"+m(b-f)+","+m(c-g)+","+m(b+f)+","+m(c+g)+","+m(s)+","+m(t)+","+m(u)+","+m(v)),f=" M"+m(p)+","+m(r)+" L"+m(s)+","+m(t)+e+" L"+m(w)+","+m(q)):f=" M"+p+","+r+" L"+s+","+t+(" A"+f+","+g+",0,"+y+",1,"+u+","+v)+" L"+w+","+q,h>0&&(o?z||(f+=" B"+(b-h)+","+(c-n)+","+(b+h)+","+(c+n)+","+w+","+q+","+p+","+r):f+=" A"+h+","+n+",0,"+y+",0,"+p+","+r),a.handDrawn&&(b=AmCharts.line(a,[p,s],[r,t],j.stroke,j.thickness*Math.random()*a.handDrawThickness,j["stroke-opacity"]),d.push(b)),a=a.path(f+" Z",void 0,void 0,"1000,1000").attr(j),k){for(b=[],c=0;c<k.length;c++)b.push(AmCharts.adjustLuminosity(j.fill,k[c]));0<b.length&&a.gradient("linearGradient",b)}return a.pattern(l),d.push(a),d},AmCharts.adjustLuminosity=function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),6>a.length&&(a=String(a[0])+String(a[0])+String(a[1])+String(a[1])+String(a[2])+String(a[2])),b=b||0;var c,d,e="#";for(d=0;3>d;d++)c=parseInt(a.substr(2*d,2),16),c=Math.round(Math.min(Math.max(0,c+c*b),255)).toString(16),e+=("00"+c).substr(c.length);return e},AmCharts.Bezier=AmCharts.Class({construct:function(a,b,c,d,e,f,g,h,i,j){for("object"==typeof g&&(g=g[0]),"object"==typeof h&&(h=h[0]),f={fill:g,"fill-opacity":h,"stroke-width":f},void 0!==i&&i>0&&(f["stroke-dasharray"]=i),isNaN(e)||(f["stroke-opacity"]=e),d&&(f.stroke=d),d="M"+Math.round(b[0])+","+Math.round(c[0]),e=[],i=0;i<b.length;i++)e.push({x:Number(b[i]),y:Number(c[i])});1<e.length&&(b=this.interpolate(e),d+=this.drawBeziers(b)),j?d+=j:AmCharts.VML||(d+="M0,0 L0,0"),this.path=a.path(d).attr(f)},interpolate:function(a){var b=[];b.push({x:a[0].x,y:a[0].y});var c=a[1].x-a[0].x,d=a[1].y-a[0].y,e=AmCharts.bezierX,f=AmCharts.bezierY;b.push({x:a[0].x+c/e,y:a[0].y+d/f});var g;for(g=1;g<a.length-1;g++){var h=a[g-1],i=a[g],d=a[g+1];isNaN(d.x)&&(d=i),isNaN(i.x)&&(i=h),isNaN(h.x)&&(h=i),c=d.x-i.x,d=d.y-h.y,h=i.x-h.x,h>c&&(h=c),b.push({x:i.x-h/e,y:i.y-d/f}),b.push({x:i.x,y:i.y}),b.push({x:i.x+h/e,y:i.y+d/f})}return d=a[a.length-1].y-a[a.length-2].y,c=a[a.length-1].x-a[a.length-2].x,b.push({x:a[a.length-1].x-c/e,y:a[a.length-1].y-d/f}),b.push({x:a[a.length-1].x,y:a[a.length-1].y}),b},drawBeziers:function(a){var b,c="";for(b=0;b<(a.length-1)/3;b++)c+=this.drawBezierMidpoint(a[3*b],a[3*b+1],a[3*b+2],a[3*b+3]);return c},drawBezierMidpoint:function(a,b,c,d){var e=Math.round,f=this.getPointOnSegment(a,b,.75),g=this.getPointOnSegment(d,c,.75),h=(d.x-a.x)/16,i=(d.y-a.y)/16,j=this.getPointOnSegment(a,b,.375);
return a=this.getPointOnSegment(f,g,.375),a.x-=h,a.y-=i,b=this.getPointOnSegment(g,f,.375),b.x+=h,b.y+=i,c=this.getPointOnSegment(d,c,.375),h=this.getMiddle(j,a),f=this.getMiddle(f,g),g=this.getMiddle(b,c),j=" Q"+e(j.x)+","+e(j.y)+","+e(h.x)+","+e(h.y),j+=" Q"+e(a.x)+","+e(a.y)+","+e(f.x)+","+e(f.y),j+=" Q"+e(b.x)+","+e(b.y)+","+e(g.x)+","+e(g.y),j+=" Q"+e(c.x)+","+e(c.y)+","+e(d.x)+","+e(d.y)},getMiddle:function(a,b){return{x:(a.x+b.x)/2,y:(a.y+b.y)/2}},getPointOnSegment:function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}}}),AmCharts.AmDraw=AmCharts.Class({construct:function(a,b,c,d){if(AmCharts.SVG_NS="http://www.w3.org/2000/svg",AmCharts.SVG_XLINK="http://www.w3.org/1999/xlink",AmCharts.hasSVG=!!document.createElementNS&&!!document.createElementNS(AmCharts.SVG_NS,"svg").createSVGRect,1>b&&(b=10),1>c&&(c=10),this.div=a,this.width=b,this.height=c,this.rBin=document.createElement("div"),AmCharts.hasSVG){AmCharts.SVG=!0;var e=this.createSvgElement("svg");e.style.position="absolute",e.style.width=b+"px",e.style.height=c+"px",b=this.createSvgElement("desc"),b.appendChild(document.createTextNode("JavaScript chart by amCharts "+d.version)),e.appendChild(b),AmCharts.rtl&&(e.setAttribute("direction","rtl"),e.style.left="auto",e.style.right="0px"),e.setAttribute("version","1.1"),a.appendChild(e),this.container=e,this.R=new AmCharts.SVGRenderer(this)}else AmCharts.isIE&&AmCharts.VMLRenderer&&(AmCharts.VML=!0,AmCharts.vmlStyleSheet||(document.namespaces.add("amvml","urn:schemas-microsoft-com:vml"),31>document.styleSheets.length?(e=document.createStyleSheet(),e.addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true"),AmCharts.vmlStyleSheet=e):document.styleSheets[0].addRule(".amvml","behavior:url(#default#VML); display:inline-block; antialias:true")),this.container=a,this.R=new AmCharts.VMLRenderer(this,d),this.R.disableSelection(a))},createSvgElement:function(a){return document.createElementNS(AmCharts.SVG_NS,a)},circle:function(a,b,c,d){var e=new AmCharts.AmDObject("circle",this);return e.attr({r:c,cx:a,cy:b}),this.addToContainer(e.node,d),e},ellipse:function(a,b,c,d,e){var f=new AmCharts.AmDObject("ellipse",this);return f.attr({rx:c,ry:d,cx:a,cy:b}),this.addToContainer(f.node,e),f},setSize:function(a,b){a>0&&b>0&&(this.container.style.width=a+"px",this.container.style.height=b+"px")},rect:function(a,b,c,d,e,f,g){var h=new AmCharts.AmDObject("rect",this);return AmCharts.VML&&(e=Math.round(100*e/Math.min(c,d)),c+=2*f,d+=2*f,h.bw=f,h.node.style.marginLeft=-f,h.node.style.marginTop=-f),1>c&&(c=1),1>d&&(d=1),h.attr({x:a,y:b,width:c,height:d,rx:e,ry:e,"stroke-width":f}),this.addToContainer(h.node,g),h},image:function(a,b,c,d,e,f){var g=new AmCharts.AmDObject("image",this);return g.attr({x:b,y:c,width:d,height:e}),this.R.path(g,a),this.addToContainer(g.node,f),g},addToContainer:function(a,b){b||(b=this.container),b.appendChild(a)},text:function(a,b,c){return this.R.text(a,b,c)},path:function(a,b,c,d){var e=new AmCharts.AmDObject("path",this);return d||(d="100,100"),e.attr({cs:d}),e.attr(c?{dd:a}:{d:a}),this.addToContainer(e.node,b),e},set:function(a){return this.R.set(a)},remove:function(a){if(a){var b=this.rBin;b.appendChild(a),b.innerHTML=""}},renderFix:function(){var a,b=this.container,c=b.style;try{a=b.getScreenCTM()||b.createSVGMatrix()}catch(d){a=b.createSVGMatrix()}b=1-a.e%1,a=1-a.f%1,b>.5&&--b,a>.5&&--a,b&&(c.left=b+"px"),a&&(c.top=a+"px")},update:function(){this.R.update()}}),AmCharts.AmDObject=AmCharts.Class({construct:function(a,b){this.D=b,this.R=b.R,this.node=this.R.create(this,a),this.y=this.x=0,this.scale=1},attr:function(a){return this.R.attr(this,a),this},getAttr:function(a){return this.node.getAttribute(a)},setAttr:function(a,b){return this.R.setAttr(this,a,b),this},clipRect:function(a,b,c,d){this.R.clipRect(this,a,b,c,d)},translate:function(a,b,c,d){d||(a=Math.round(a),b=Math.round(b)),this.R.move(this,a,b,c),this.x=a,this.y=b,this.scale=c,this.angle&&this.rotate(this.angle)},rotate:function(a,b){this.R.rotate(this,a,b),this.angle=a},animate:function(a,b,c){for(var d in a)if(a.hasOwnProperty(d)){var e=d,f=a[d];c=AmCharts.getEffect(c),this.R.animate(this,e,f,b,c)}},push:function(a){if(a){var b=this.node;b.appendChild(a.node);var c=a.clipPath;c&&b.appendChild(c),(a=a.grad)&&b.appendChild(a)}},text:function(a){this.R.setText(this,a)},remove:function(){this.R.remove(this)},clear:function(){var a=this.node;if(a.hasChildNodes())for(;1<=a.childNodes.length;)a.removeChild(a.firstChild)},hide:function(){this.setAttr("visibility","hidden")},show:function(){this.setAttr("visibility","visible")},getBBox:function(){return this.R.getBBox(this)},toFront:function(){var a=this.node;if(a){this.prevNextNode=a.nextSibling;var b=a.parentNode;b&&b.appendChild(a)}},toPrevious:function(){var a=this.node;a&&this.prevNextNode&&(a=a.parentNode)&&a.insertBefore(this.prevNextNode,null)},toBack:function(){var a=this.node;if(a){this.prevNextNode=a.nextSibling;var b=a.parentNode;if(b){var c=b.firstChild;c&&b.insertBefore(a,c)}}},mouseover:function(a){return this.R.addListener(this,"mouseover",a),this},mouseout:function(a){return this.R.addListener(this,"mouseout",a),this},click:function(a){return this.R.addListener(this,"click",a),this},dblclick:function(a){return this.R.addListener(this,"dblclick",a),this},mousedown:function(a){return this.R.addListener(this,"mousedown",a),this},mouseup:function(a){return this.R.addListener(this,"mouseup",a),this},touchstart:function(a){return this.R.addListener(this,"touchstart",a),this},touchend:function(a){return this.R.addListener(this,"touchend",a),this},contextmenu:function(a){return this.node.addEventListener?this.node.addEventListener("contextmenu",a,!0):this.R.addListener(this,"contextmenu",a),this},stop:function(){AmCharts.removeFromArray(this.R.animations,this.an_x),AmCharts.removeFromArray(this.R.animations,this.an_y)},length:function(){return this.node.childNodes.length},gradient:function(a,b,c){this.R.gradient(this,a,b,c)},pattern:function(a,b){a&&this.R.pattern(this,a,b)}}),AmCharts.VMLRenderer=AmCharts.Class({construct:function(a,b){this.chart=b,this.D=a,this.cNames={circle:"oval",ellipse:"oval",rect:"roundrect",path:"shape"},this.styleMap={x:"left",y:"top",width:"width",height:"height","font-family":"fontFamily","font-size":"fontSize",visibility:"visibility"}},create:function(a,b){var c;if("group"==b)c=document.createElement("div"),a.type="div";else if("text"==b)c=document.createElement("div"),a.type="text";else if("image"==b)c=document.createElement("img"),a.type="image";else{a.type="shape",a.shapeType=this.cNames[b],c=document.createElement("amvml:"+this.cNames[b]);var d=document.createElement("amvml:stroke");c.appendChild(d),a.stroke=d;var e=document.createElement("amvml:fill");c.appendChild(e),a.fill=e,e.className="amvml",d.className="amvml",c.className="amvml"}return c.style.position="absolute",c.style.top=0,c.style.left=0,c},path:function(a,b){a.node.setAttribute("src",b)},setAttr:function(a,b,c){if(void 0!==c){var d;8===document.documentMode&&(d=!0);var e=a.node,f=a.type,g=e.style;"r"==b&&(g.width=2*c,g.height=2*c),"oval"==a.shapeType&&("rx"==b&&(g.width=2*c),"ry"==b&&(g.height=2*c)),"roundrect"==a.shapeType&&("width"!=b&&"height"!=b||--c),"cursor"==b&&(g.cursor=c),"cx"==b&&(g.left=c-AmCharts.removePx(g.width)/2),"cy"==b&&(g.top=c-AmCharts.removePx(g.height)/2);var h=this.styleMap[b];if(void 0!==h&&(g[h]=c),"text"==f&&("text-anchor"==b&&(a.anchor=c,h=e.clientWidth,"end"==c&&(g.marginLeft=-h+"px"),"middle"==c&&(g.marginLeft=-(h/2)+"px",g.textAlign="center"),"start"==c&&(g.marginLeft="0px")),"fill"==b&&(g.color=c),"font-weight"==b&&(g.fontWeight=c)),g=a.children)for(h=0;h<g.length;h++)g[h].setAttr(b,c);"shape"==f&&("cs"==b&&(e.style.width="100px",e.style.height="100px",e.setAttribute("coordsize",c)),"d"==b&&e.setAttribute("path",this.svgPathToVml(c)),"dd"==b&&e.setAttribute("path",c),f=a.stroke,a=a.fill,"stroke"==b&&(d?f.color=c:f.setAttribute("color",c)),"stroke-width"==b&&(d?f.weight=c:f.setAttribute("weight",c)),"stroke-opacity"==b&&(d?f.opacity=c:f.setAttribute("opacity",c)),"stroke-dasharray"==b&&(g="solid",c>0&&3>c&&(g="dot"),c>=3&&6>=c&&(g="dash"),c>6&&(g="longdash"),d?f.dashstyle=g:f.setAttribute("dashstyle",g)),("fill-opacity"==b||"opacity"==b)&&(0===c?d?a.on=!1:a.setAttribute("on",!1):d?a.opacity=c:a.setAttribute("opacity",c)),"fill"==b&&(d?a.color=c:a.setAttribute("color",c)),"rx"==b&&(d?e.arcSize=c+"%":e.setAttribute("arcsize",c+"%")))}},attr:function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setAttr(a,c,b[c])},text:function(a,b,c){var d=new AmCharts.AmDObject("text",this.D),e=d.node;return e.style.whiteSpace="pre",e.innerHTML=a,this.D.addToContainer(e,c),this.attr(d,b),d},getBBox:function(a){return this.getBox(a.node)},getBox:function(a){var b,c=a.offsetLeft,d=a.offsetTop,e=a.offsetWidth,f=a.offsetHeight;if(a.hasChildNodes()){var g,h,i;for(i=0;i<a.childNodes.length;i++){b=this.getBox(a.childNodes[i]);var j=b.x;isNaN(j)||(isNaN(g)?g=j:g>j&&(g=j));var k=b.y;isNaN(k)||(isNaN(h)?h=k:h>k&&(h=k)),j=b.width+j,isNaN(j)||(e=Math.max(e,j)),b=b.height+k,isNaN(b)||(f=Math.max(f,b))}0>g&&(c+=g),0>h&&(d+=h)}return{x:c,y:d,width:e,height:f}},setText:function(a,b){var c=a.node;c&&(c.innerHTML=b),this.setAttr(a,"text-anchor",a.anchor)},addListener:function(a,b,c){a.node["on"+b]=c},move:function(a,b,c){var d=a.node,e=d.style;"text"==a.type&&(c-=AmCharts.removePx(e.fontSize)/2-1),"oval"==a.shapeType&&(b-=AmCharts.removePx(e.width)/2,c-=AmCharts.removePx(e.height)/2),a=a.bw,isNaN(a)||(b-=a,c-=a),isNaN(b)||isNaN(c)||(d.style.left=b+"px",d.style.top=c+"px")},svgPathToVml:function(a){var b=a.split(" ");a="";var c,d,e=Math.round;for(d=0;d<b.length;d++){var f=b[d],g=f.substring(0,1),f=f.substring(1),h=f.split(","),i=e(h[0])+","+e(h[1]);if("M"==g&&(a+=" m "+i),"L"==g&&(a+=" l "+i),"Z"==g&&(a+=" x e"),"Q"==g){var j=c.length,k=c[j-1],l=h[0],m=h[1],i=h[2],n=h[3];c=e(c[j-2]/3+2/3*l),k=e(k/3+2/3*m),l=e(2/3*l+i/3),m=e(2/3*m+n/3),a+=" c "+c+","+k+","+l+","+m+","+i+","+n}"A"==g&&(a+=" wa "+f),"B"==g&&(a+=" at "+f),c=h}return a},animate:function(a,b,c,d,e){var f=a.node,g=this.chart;if("translate"==b){b=c.split(","),c=b[1];var h=f.offsetTop;g.animate(a,"left",f.offsetLeft,b[0],d,e,"px"),g.animate(a,"top",h,c,d,e,"px")}},clipRect:function(a,b,c,d,e){a=a.node,0===b&&0===c?(a.style.width=d+"px",a.style.height=e+"px",a.style.overflow="hidden"):a.style.clip="rect("+c+"px "+(b+d)+"px "+(c+e)+"px "+b+"px)"},rotate:function(a,b,c){if(0!==Number(b)){var d=a.node;a=d.style,c||(c=this.getBGColor(d.parentNode)),a.backgroundColor=c,a.paddingLeft=1,c=b*Math.PI/180;var e=Math.cos(c),f=Math.sin(c),g=AmCharts.removePx(a.left),h=AmCharts.removePx(a.top),i=d.offsetWidth,d=d.offsetHeight;b/=Math.abs(b),a.left=g+i/2-i/2*Math.cos(c)-b*d/2*Math.sin(c)+3,a.top=h-b*i/2*Math.sin(c)+b*d/2*Math.sin(c),a.cssText=a.cssText+"; filter:progid:DXImageTransform.Microsoft.Matrix(M11='"+e+"', M12='"+-f+"', M21='"+f+"', M22='"+e+"', sizingmethod='auto expand');"}},getBGColor:function(a){var b="#FFFFFF";if(a.style){var c=a.style.backgroundColor;""!==c?b=c:a.parentNode&&(b=this.getBGColor(a.parentNode))}return b},set:function(a){var b=new AmCharts.AmDObject("group",this.D);if(this.D.container.appendChild(b.node),a){var c;for(c=0;c<a.length;c++)b.push(a[c])}return b},gradient:function(a,b,c,d){var e="";"radialGradient"==b&&(b="gradientradial",c.reverse()),"linearGradient"==b&&(b="gradient");var f;for(f=0;f<c.length;f++){var g=Math.round(100*f/(c.length-1)),e=e+(g+"% "+c[f]);f<c.length-1&&(e+=",")}a=a.fill,90==d?d=0:270==d?d=180:180==d?d=90:0===d&&(d=270),8===document.documentMode?(a.type=b,a.angle=d):(a.setAttribute("type",b),a.setAttribute("angle",d)),e&&(a.colors.value=e)},remove:function(a){a.clipPath&&this.D.remove(a.clipPath),this.D.remove(a.node)},disableSelection:function(a){void 0!==typeof a.onselectstart&&(a.onselectstart=function(){return!1}),a.style.cursor="default"},pattern:function(a,b){var c=a.node,d=a.fill,e="none";b.color&&(e=b.color),c.fillColor=e,8===document.documentMode?(d.type="tile",d.src=b.url):(d.setAttribute("type","tile"),d.setAttribute("src",b.url))},update:function(){}}),AmCharts.SVGRenderer=AmCharts.Class({construct:function(a){this.D=a,this.animations=[]},create:function(a,b){return document.createElementNS(AmCharts.SVG_NS,b)},attr:function(a,b){for(var c in b)b.hasOwnProperty(c)&&this.setAttr(a,c,b[c])},setAttr:function(a,b,c){void 0!==c&&a.node.setAttribute(b,c)},animate:function(a,b,c,d,e){var f=a.node;a["an_"+b]&&AmCharts.removeFromArray(this.animations,a["an_"+b]),"translate"==b?(f=(f=f.getAttribute("transform"))?String(f).substring(10,f.length-1):"0,0",f=f.split(", ").join(" "),f=f.split(" ").join(","),0===f&&(f="0,0")):f=Number(f.getAttribute(b)),c={obj:a,frame:0,attribute:b,from:f,to:c,time:d,effect:e},this.animations.push(c),a["an_"+b]=c},update:function(){var a,b=this.animations;for(a=b.length-1;a>=0;a--){var c,d,e,f=b[a],g=1e3*f.time/AmCharts.updateRate,h=f.frame+1,i=f.obj,j=f.attribute;g>=h?(f.frame++,"translate"==j?(c=f.from.split(","),j=Number(c[0]),c=Number(c[1]),isNaN(c)&&(c=0),d=f.to.split(","),e=Number(d[0]),d=Number(d[1]),e=0===e-j?e:Math.round(AmCharts[f.effect](0,h,j,e-j,g)),f=0===d-c?d:Math.round(AmCharts[f.effect](0,h,c,d-c,g)),j="transform",f="translate("+e+","+f+")"):(d=Number(f.from),c=Number(f.to),e=c-d,f=AmCharts[f.effect](0,h,d,e,g),isNaN(f)&&(f=c),0===e&&this.animations.splice(a,1)),this.setAttr(i,j,f)):("translate"==j?(d=f.to.split(","),e=Number(d[0]),d=Number(d[1]),i.translate(e,d)):(c=Number(f.to),this.setAttr(i,j,c)),this.animations.splice(a,1))}},getBBox:function(a){if(a=a.node)try{return a.getBBox()}catch(b){}return{width:0,height:0,x:0,y:0}},path:function(a,b){a.node.setAttributeNS(AmCharts.SVG_XLINK,"xlink:href",b)},clipRect:function(a,b,c,d,e){var f=a.node,g=a.clipPath;g&&this.D.remove(g);var h=f.parentNode;h&&(f=document.createElementNS(AmCharts.SVG_NS,"clipPath"),g=AmCharts.getUniqueId(),f.setAttribute("id",g),this.D.rect(b,c,d,e,0,0,f),h.appendChild(f),b="#",AmCharts.baseHref&&!AmCharts.isIE&&(b=this.removeTarget(window.location.href)+b),this.setAttr(a,"clip-path","url("+b+g+")"),this.clipPathC++,a.clipPath=f)},text:function(a,b,c){var d=new AmCharts.AmDObject("text",this.D);a=String(a).split("\n");var e,f=b["font-size"];for(e=0;e<a.length;e++){var g=this.create(null,"tspan");g.appendChild(document.createTextNode(a[e])),g.setAttribute("y",(f+2)*e+Math.round(f/2)),g.setAttribute("x",0),g.style.fontSize=f+"px",d.node.appendChild(g)}return d.node.setAttribute("y",Math.round(f/2)),this.attr(d,b),this.D.addToContainer(d.node,c),d},setText:function(a,b){var c=a.node;c&&(c.removeChild(c.firstChild),c.appendChild(document.createTextNode(b)))},move:function(a,b,c,d){isNaN(b)&&(b=0),isNaN(c)&&(c=0),b="translate("+b+","+c+")",d&&(b=b+" scale("+d+")"),this.setAttr(a,"transform",b)},rotate:function(a,b){var c=a.node.getAttribute("transform"),d="rotate("+b+")";c&&(d=c+" "+d),this.setAttr(a,"transform",d)},set:function(a){var b=new AmCharts.AmDObject("g",this.D);if(this.D.container.appendChild(b.node),a){var c;for(c=0;c<a.length;c++)b.push(a[c])}return b},addListener:function(a,b,c){a.node["on"+b]=c},gradient:function(a,b,c,d){var e=a.node,f=a.grad;if(f&&this.D.remove(f),b=document.createElementNS(AmCharts.SVG_NS,b),f=AmCharts.getUniqueId(),b.setAttribute("id",f),!isNaN(d)){var g=0,h=0,i=0,j=0;90==d?i=100:270==d?j=100:180==d?g=100:0===d&&(h=100),b.setAttribute("x1",g+"%"),b.setAttribute("x2",h+"%"),b.setAttribute("y1",i+"%"),b.setAttribute("y2",j+"%")}for(d=0;d<c.length;d++)g=document.createElementNS(AmCharts.SVG_NS,"stop"),h=100*d/(c.length-1),0===d&&(h=0),g.setAttribute("offset",h+"%"),g.setAttribute("stop-color",c[d]),b.appendChild(g);e.parentNode.appendChild(b),c="#",AmCharts.baseHref&&!AmCharts.isIE&&(c=this.removeTarget(window.location.href)+c),e.setAttribute("fill","url("+c+f+")"),a.grad=b},removeTarget:function(a){return urlArr=a.split("#"),urlArr[0]},pattern:function(a,b,c){var d=a.node;isNaN(c)&&(c=1);var e=a.patternNode;e&&this.D.remove(e);var e=document.createElementNS(AmCharts.SVG_NS,"pattern"),f=AmCharts.getUniqueId(),g=b;b.url&&(g=b.url);var h=Number(b.width);isNaN(h)&&(h=4);var i=Number(b.height);isNaN(i)&&(i=4),h/=c,i/=c,c=b.x,isNaN(c)&&(c=0);var j=-Math.random()*Number(b.randomX);isNaN(j)||(c=j),j=b.y,isNaN(j)&&(j=0);var k=-Math.random()*Number(b.randomY);isNaN(k)||(j=k),e.setAttribute("id",f),e.setAttribute("width",h),e.setAttribute("height",i),e.setAttribute("patternUnits","userSpaceOnUse"),e.setAttribute("xlink:href",g),b.color&&(k=document.createElementNS(AmCharts.SVG_NS,"rect"),k.setAttributeNS(null,"height",h),k.setAttributeNS(null,"width",i),k.setAttributeNS(null,"fill",b.color),e.appendChild(k)),this.D.image(g,0,0,h,i,e).translate(c,j),g="#",AmCharts.baseHref&&!AmCharts.isIE&&(g=this.removeTarget(window.location.href)+g),d.setAttribute("fill","url("+g+f+")"),a.patternNode=e,d.parentNode.appendChild(e)},remove:function(a){a.clipPath&&this.D.remove(a.clipPath),a.grad&&this.D.remove(a.grad),a.patternNode&&this.D.remove(a.patternNode),this.D.remove(a.node)}}),AmCharts.AmDSet=AmCharts.Class({construct:function(){this.create("g")},attr:function(a){this.R.attr(this.node,a)},move:function(a,b){this.R.move(this.node,a,b)}}),AmCharts.AmLegend=AmCharts.Class({construct:function(a){this.cname="AmLegend",this.createEvents("rollOverMarker","rollOverItem","rollOutMarker","rollOutItem","showItem","hideItem","clickMarker","rollOverItem","rollOutItem","clickLabel"),this.position="bottom",this.borderColor=this.color="#000000",this.borderAlpha=0,this.markerLabelGap=5,this.verticalGap=10,this.align="left",this.horizontalGap=0,this.spacing=10,this.markerDisabledColor="#AAB3B3",this.markerType="square",this.markerSize=16,this.markerBorderThickness=this.markerBorderAlpha=1,this.marginBottom=this.marginTop=0,this.marginLeft=this.marginRight=20,this.autoMargins=!0,this.valueWidth=50,this.switchable=!0,this.switchType="x",this.switchColor="#FFFFFF",this.rollOverColor="#CC0000",this.reversedOrder=!1,this.labelText="[[title]]",this.valueText="[[value]]",this.useMarkerColorForLabels=!1,this.rollOverGraphAlpha=1,this.textClickEnabled=!1,this.equalWidths=!0,this.dateFormat="DD-MM-YYYY",this.backgroundColor="#FFFFFF",this.backgroundAlpha=0,this.useGraphSettings=!1,this.showEntries=!0,AmCharts.applyTheme(this,a,this.cname)},setData:function(a){this.legendData=a,this.invalidateSize()},invalidateSize:function(){this.destroy(),this.entries=[],this.valueLabels=[],(AmCharts.ifArray(this.legendData)||AmCharts.ifArray(this.data))&&this.drawLegend()},drawLegend:function(){var a=this.chart,b=this.position,c=this.width,d=a.divRealWidth,e=a.divRealHeight,f=this.div,g=this.legendData;if(this.data&&(g=this.data),isNaN(this.fontSize)&&(this.fontSize=a.fontSize),"right"==b||"left"==b)this.maxColumns=1,this.autoMargins&&(this.marginLeft=this.marginRight=10);else if(this.autoMargins){this.marginRight=a.marginRight,this.marginLeft=a.marginLeft;var h=a.autoMarginOffset;"bottom"==b?(this.marginBottom=h,this.marginTop=0):(this.marginTop=h,this.marginBottom=0)}var i;if(void 0!==c?i=AmCharts.toCoordinate(c,d):"right"!=b&&"left"!=b&&(i=a.realWidth),"outside"==b?(i=f.offsetWidth,e=f.offsetHeight,f.clientHeight&&(i=f.clientWidth,e=f.clientHeight)):(isNaN(i)||(f.style.width=i+"px"),f.className="amChartsLegend"),this.divWidth=i,(b=this.container)?(b.container.innerHTML="",f.appendChild(b.container),b.setSize(i,e)):b=new AmCharts.AmDraw(f,i,e,a),this.container=b,this.lx=0,this.ly=8,e=this.markerSize,e>this.fontSize&&(this.ly=e/2-1),e>0&&(this.lx+=e+this.markerLabelGap),this.titleWidth=0,(e=this.title)&&(a=AmCharts.text(this.container,e,this.color,a.fontFamily,this.fontSize,"start",!0),a.translate(this.marginLeft,this.marginTop+this.verticalGap+this.ly+1),a=a.getBBox(),this.titleWidth=a.width+15,this.titleHeight=a.height+6),this.index=this.maxLabelWidth=0,this.showEntries){for(a=0;a<g.length;a++)this.createEntry(g[a]);for(a=this.index=0;a<g.length;a++)this.createValue(g[a])}this.arrangeEntries(),this.updateValues()},arrangeEntries:function(){var a=this.position,b=this.marginLeft+this.titleWidth,c=this.marginRight,d=this.marginTop,e=this.marginBottom,f=this.horizontalGap,g=this.div,h=this.divWidth,i=this.maxColumns,j=this.verticalGap,k=this.spacing,l=h-c-b,m=0,n=0,o=this.container;this.set&&this.set.remove();var p=o.set();this.set=p;var q=o.set();p.push(q);var r,s,t=this.entries;for(s=0;s<t.length;s++){r=t[s].getBBox();var u=r.width;u>m&&(m=u),r=r.height,r>n&&(n=r)}var u=n=0,v=f,w=0,x=0;for(s=0;s<t.length;s++){var y=t[s];this.reversedOrder&&(y=t[t.length-s-1]),r=y.getBBox();var z;this.equalWidths?z=f+u*(m+k+this.markerLabelGap):(z=v,v=v+r.width+f+k),r.height>x&&(x=r.height),z+r.width>l&&s>0&&0!==u&&(n++,u=0,z=f,v=z+r.width+f+k,w=w+x+j,x=0),y.translate(z,w),u++,!isNaN(i)&&u>=i&&(u=0,n++,w=w+x+j,x=0),q.push(y)}r=q.getBBox(),i=r.height+2*j-1,"left"==a||"right"==a?(h=r.width+2*f,g.style.width=h+b+c+"px"):h=h-b-c-1,c=AmCharts.polygon(this.container,[0,h,h,0],[0,0,i,i],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha),p.push(c),p.translate(b,d),c.toBack(),b=f,("top"==a||"bottom"==a||"absolute"==a||"outside"==a)&&("center"==this.align?b=f+(h-r.width)/2:"right"==this.align&&(b=f+h-r.width)),q.translate(b,j+1),this.titleHeight>i&&(i=this.titleHeight),a=i+d+e+1,0>a&&(a=0),g.style.height=Math.round(a)+"px",o.setSize(this.divWidth,a)},createEntry:function(a){if(!1!==a.visibleInLegend){var b=this.chart,c=a.markerType;a.legendEntryWidth=this.markerSize,c||(c=this.markerType);var d=a.color,e=a.alpha;a.legendKeyColor&&(d=a.legendKeyColor()),a.legendKeyAlpha&&(e=a.legendKeyAlpha());var f;!0===a.hidden&&(f=d=this.markerDisabledColor);var g=a.pattern,h=a.customMarker;h||(h=this.customMarker);var i=this.container,j=this.markerSize,k=0,l=0,m=j/2;if(this.useGraphSettings)if(k=a.type,this.switchType=void 0,"line"==k||"step"==k||"smoothedLine"==k||"ohlc"==k)g=i.set(),a.hidden||(d=a.lineColorR,f=a.bulletBorderColorR),l=AmCharts.line(i,[0,2*j],[j/2,j/2],d,a.lineAlpha,a.lineThickness,a.dashLength),g.push(l),a.bullet&&(a.hidden||(d=a.bulletColorR),l=AmCharts.bullet(i,a.bullet,a.bulletSize,d,a.bulletAlpha,a.bulletBorderThickness,f,a.bulletBorderAlpha))&&(l.translate(j+1,j/2),g.push(l)),m=0,k=j,l=j/3;else{var n;a.getGradRotation&&(n=a.getGradRotation()),k=a.fillColorsR,!0===a.hidden&&(k=d),(g=this.createMarker("rectangle",k,a.fillAlphas,a.lineThickness,d,a.lineAlpha,n,g))&&(m=j,g.translate(m,j/2)),k=j}else h?(b.path&&(h=b.path+h),g=i.image(h,0,0,j,j)):(g=this.createMarker(c,d,e,void 0,void 0,void 0,void 0,g))&&g.translate(j/2,j/2);this.addListeners(g,a),i=i.set([g]),this.switchable&&a.switchable&&i.setAttr("cursor","pointer"),(f=this.switchType)&&"none"!=f&&("x"==f?(n=this.createX(),n.translate(j/2,j/2)):n=this.createV(),n.dItem=a,!0!==a.hidden?"x"==f?n.hide():n.show():"x"!=f&&n.hide(),this.switchable||n.hide(),this.addListeners(n,a),a.legendSwitch=n,i.push(n)),f=this.color,a.showBalloon&&this.textClickEnabled&&void 0!==this.selectedColor&&(f=this.selectedColor),this.useMarkerColorForLabels&&(f=d),!0===a.hidden&&(f=this.markerDisabledColor),d=AmCharts.massReplace(this.labelText,{"[[title]]":a.title}),n=this.fontSize,g&&(n>=j&&g.translate(m,j/2+this.ly-n/2+(n+2-j)/2-l),a.legendEntryWidth=g.getBBox().width);var o;d&&(d=AmCharts.fixBrakes(d),a.legendTextReal=d,o=this.labelWidth,o=isNaN(o)?AmCharts.text(this.container,d,f,b.fontFamily,n,"start"):AmCharts.wrappedText(this.container,d,f,b.fontFamily,n,"start",!1,o,0),o.translate(this.lx+k,this.ly),i.push(o),b=o.getBBox().width,this.maxLabelWidth<b&&(this.maxLabelWidth=b)),this.entries[this.index]=i,a.legendEntry=this.entries[this.index],a.legendLabel=o,this.index++}},addListeners:function(a,b){var c=this;a&&a.mouseover(function(a){c.rollOverMarker(b,a)}).mouseout(function(a){c.rollOutMarker(b,a)}).click(function(a){c.clickMarker(b,a)})},rollOverMarker:function(a,b){this.switchable&&this.dispatch("rollOverMarker",a,b),this.dispatch("rollOverItem",a,b)},rollOutMarker:function(a,b){this.switchable&&this.dispatch("rollOutMarker",a,b),this.dispatch("rollOutItem",a,b)},clickMarker:function(a,b){this.switchable&&(!0===a.hidden?this.dispatch("showItem",a,b):this.dispatch("hideItem",a,b)),this.dispatch("clickMarker",a,b)},rollOverLabel:function(a,b){a.hidden||(this.textClickEnabled&&a.legendLabel&&a.legendLabel.attr({fill:this.rollOverColor}),this.dispatch("rollOverItem",a,b))},rollOutLabel:function(a,b){if(!a.hidden){if(this.textClickEnabled&&a.legendLabel){var c=this.color;void 0!==this.selectedColor&&a.showBalloon&&(c=this.selectedColor),this.useMarkerColorForLabels&&(c=a.lineColor,void 0===c&&(c=a.color)),a.legendLabel.attr({fill:c})}this.dispatch("rollOutItem",a,b)}},clickLabel:function(a,b){this.textClickEnabled?a.hidden||this.dispatch("clickLabel",a,b):this.switchable&&(!0===a.hidden?this.dispatch("showItem",a,b):this.dispatch("hideItem",a,b))},dispatch:function(a,b,c){this.fire(a,{type:a,dataItem:b,target:this,event:c,chart:this.chart})},createValue:function(a){var b=this,c=b.fontSize;if(!1!==a.visibleInLegend){var d=b.maxLabelWidth;b.equalWidths||(b.valueAlign="left"),"left"==b.valueAlign&&(d=a.legendEntry.getBBox().width);var e=d;if(b.valueText&&0<b.valueWidth){var f=b.color;b.useMarkerColorForValues&&(f=a.color,a.legendKeyColor&&(f=a.legendKeyColor())),!0===a.hidden&&(f=b.markerDisabledColor);var g=b.valueText,d=d+b.lx+b.markerLabelGap+b.valueWidth,h="end";"left"==b.valueAlign&&(d-=b.valueWidth,h="start"),f=AmCharts.text(b.container,g,f,b.chart.fontFamily,c,h),f.translate(d,b.ly),b.entries[b.index].push(f),e+=b.valueWidth+2*b.markerLabelGap,f.dItem=a,b.valueLabels.push(f)}b.index++,f=b.markerSize,c+7>f&&(f=c+7,AmCharts.VML&&(f+=3)),c=b.container.rect(a.legendEntryWidth,0,e,f,0,0).attr({stroke:"none",fill:"#fff","fill-opacity":.005}),c.dItem=a,b.entries[b.index-1].push(c),c.mouseover(function(c){b.rollOverLabel(a,c)}).mouseout(function(c){b.rollOutLabel(a,c)}).click(function(c){b.clickLabel(a,c)})}},createV:function(){var a=this.markerSize;return AmCharts.polygon(this.container,[a/5,a/2,a-a/5,a/2],[a/3,a-a/5,a/5,a/1.7],this.switchColor)},createX:function(){var a=(this.markerSize-4)/2,b={stroke:this.switchColor,"stroke-width":3},c=this.container,d=AmCharts.line(c,[-a,a],[-a,a]).attr(b),a=AmCharts.line(c,[-a,a],[a,-a]).attr(b);return this.container.set([d,a])},createMarker:function(a,b,c,d,e,f,g,h){var i=this.markerSize,j=this.container;return e||(e=this.markerBorderColor),e||(e=b),isNaN(d)&&(d=this.markerBorderThickness),isNaN(f)&&(f=this.markerBorderAlpha),AmCharts.bullet(j,a,i,b,c,d,e,f,i,g,h)},validateNow:function(){this.invalidateSize()},updateValues:function(){var a,b=this.valueLabels,c=this.chart,d=this.data;for(a=0;a<b.length;a++){var e=b[a],f=e.dItem,g=" ";if(d)e.text(f.value?f.value:"");else{if(void 0!==f.type){var h=f.currentDataItem,i=this.periodValueText;f.legendPeriodValueText&&(i=f.legendPeriodValueText),h?(g=this.valueText,f.legendValueText&&(g=f.legendValueText),g=c.formatString(g,h)):i&&(g=c.formatPeriodString(i,f))}else g=c.formatString(this.valueText,f);(i=this.valueFunction)&&(h&&(f=h),g=i(f,g)),e.text(g)}}},renderFix:function(){if(!AmCharts.VML){var a=this.container;a&&a.renderFix()}},destroy:function(){this.div.innerHTML="",AmCharts.remove(this.set)}}),AmCharts.formatMilliseconds=function(a,b){if(-1!=a.indexOf("fff")){var c=b.getMilliseconds(),d=String(c);10>c&&(d="00"+c),c>=10&&100>c&&(d="0"+c),a=a.replace(/fff/g,d)}return a},AmCharts.extractPeriod=function(a){var b=AmCharts.stripNumbers(a),c=1;return b!=a&&(c=Number(a.slice(0,a.indexOf(b)))),{period:b,count:c}},AmCharts.newDate=function(a,b){return date="fff"==b?AmCharts.useUTC?new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()):new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()):new Date(a)},AmCharts.resetDateToMin=function(a,b,c,d){void 0===d&&(d=1);var e,f,g,h,i,j,k;switch(AmCharts.useUTC?(e=a.getUTCFullYear(),f=a.getUTCMonth(),g=a.getUTCDate(),h=a.getUTCHours(),i=a.getUTCMinutes(),j=a.getUTCSeconds(),k=a.getUTCMilliseconds(),a=a.getUTCDay()):(e=a.getFullYear(),f=a.getMonth(),g=a.getDate(),h=a.getHours(),i=a.getMinutes(),j=a.getSeconds(),k=a.getMilliseconds(),a=a.getDay()),b){case"YYYY":e=Math.floor(e/c)*c,f=0,g=1,k=j=i=h=0;break;case"MM":f=Math.floor(f/c)*c,g=1,k=j=i=h=0;break;case"WW":0===a&&d>0&&(a=7),g=g-a+d,k=j=i=h=0;break;case"DD":k=j=i=h=0;break;case"hh":h=Math.floor(h/c)*c,k=j=i=0;break;case"mm":i=Math.floor(i/c)*c,k=j=0;break;case"ss":j=Math.floor(j/c)*c,k=0;break;case"fff":k=Math.floor(k/c)*c}return AmCharts.useUTC?(a=new Date,a.setUTCFullYear(e,f,g),a.setUTCHours(h,i,j,k)):a=new Date(e,f,g,h,i,j,k),a},AmCharts.getPeriodDuration=function(a,b){void 0===b&&(b=1);var c;switch(a){case"YYYY":c=316224e5;break;case"MM":c=26784e5;break;case"WW":c=6048e5;break;case"DD":c=864e5;break;case"hh":c=36e5;break;case"mm":c=6e4;break;case"ss":c=1e3;break;case"fff":c=1}return c*b},AmCharts.intervals={s:{nextInterval:"ss",contains:1e3},ss:{nextInterval:"mm",contains:60,count:0},mm:{nextInterval:"hh",contains:60,count:1},hh:{nextInterval:"DD",contains:24,count:2},DD:{nextInterval:"",contains:1/0,count:3}},AmCharts.getMaxInterval=function(a,b){var c=AmCharts.intervals;return a>=c[b].contains?(a=Math.round(a/c[b].contains),b=c[b].nextInterval,AmCharts.getMaxInterval(a,b)):"ss"==b?c[b].nextInterval:b},AmCharts.dayNames="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),AmCharts.shortDayNames="Sun Mon Tue Wed Thu Fri Sat".split(" "),AmCharts.monthNames="January February March April May June July August September October November December".split(" "),AmCharts.shortMonthNames="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),AmCharts.getWeekNumber=function(a){a=new Date(a),a.setHours(0,0,0),a.setDate(a.getDate()+4-(a.getDay()||7));var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+1)/7)},AmCharts.stringToDate=function(a,b){var c={},d=[{pattern:"YYYY",period:"year"},{pattern:"YY",period:"year"},{pattern:"MM",period:"month"},{pattern:"M",period:"month"},{pattern:"DD",period:"date"},{pattern:"D",period:"date"},{pattern:"JJ",period:"hours"},{pattern:"J",period:"hours"},{pattern:"HH",period:"hours"},{pattern:"H",period:"hours"},{pattern:"KK",period:"hours"},{pattern:"K",period:"hours"},{pattern:"LL",period:"hours"},{pattern:"L",period:"hours"},{pattern:"NN",period:"minutes"},{pattern:"N",period:"minutes"},{pattern:"SS",period:"seconds"},{pattern:"S",period:"seconds"},{pattern:"QQQ",period:"milliseconds"},{pattern:"QQ",period:"milliseconds"},{pattern:"Q",period:"milliseconds"}],e=!0,f=b.indexOf("AA");-1!=f&&(a.substr(f,2),"pm"==a.toLowerCase&&(e=!1));var g,h,i,f=b;for(i=0;i<d.length;i++)h=d[i].period,c[h]=0,"date"==h&&(c[h]=1);for(i=0;i<d.length;i++)if(g=d[i].pattern,h=d[i].period,-1!=b.indexOf(g)){var j=AmCharts.getFromDateString(g,a,f);b=b.replace(g,""),("KK"==g||"K"==g||"LL"==g||"L"==g)&&(e||(j+=12)),c[h]=j}return AmCharts.useUTC?(d=new Date,d.setUTCFullYear(c.year,c.month,c.date),d.setUTCHours(c.hours,c.minutes,c.seconds,c.milliseconds)):d=new Date(c.year,c.month,c.date,c.hours,c.minutes,c.seconds,c.milliseconds),d},AmCharts.getFromDateString=function(a,b,c){return void 0!==b?(c=c.indexOf(a),b=b.substr(c,a.length),"0"==b.charAt(0)&&(b=b.substr(1,b.length-1)),b=Number(b),isNaN(b)&&(b=0),-1!=a.indexOf("M")&&b--,b):void 0},AmCharts.formatDate=function(a,b,c){c||(c=AmCharts);var d,e,f,g,h,i,j,k=AmCharts.getWeekNumber(a);AmCharts.useUTC?(d=a.getUTCFullYear(),e=a.getUTCMonth(),f=a.getUTCDate(),g=a.getUTCDay(),h=a.getUTCHours(),i=a.getUTCMinutes(),j=a.getUTCSeconds(),a=a.getUTCMilliseconds()):(d=a.getFullYear(),e=a.getMonth(),f=a.getDate(),g=a.getDay(),h=a.getHours(),i=a.getMinutes(),j=a.getSeconds(),a=a.getMilliseconds());var l=String(d).substr(2,2),m=e+1;9>e&&(m="0"+m);var n="0"+g;b=b.replace(/W/g,k),k=h,24==k&&(k=0);var o=k;10>o&&(o="0"+o),b=b.replace(/JJ/g,o),b=b.replace(/J/g,k),o=h,0===o&&(o=24,-1!=b.indexOf("H")&&f--),k=f,10>f&&(k="0"+f);
var p=o;return 10>p&&(p="0"+p),b=b.replace(/HH/g,p),b=b.replace(/H/g,o),o=h,o>11&&(o-=12),p=o,10>p&&(p="0"+p),b=b.replace(/KK/g,p),b=b.replace(/K/g,o),o=h,0===o&&(o=12),o>12&&(o-=12),p=o,10>p&&(p="0"+p),b=b.replace(/LL/g,p),b=b.replace(/L/g,o),o=i,10>o&&(o="0"+o),b=b.replace(/NN/g,o),b=b.replace(/N/g,i),i=j,10>i&&(i="0"+i),b=b.replace(/SS/g,i),b=b.replace(/S/g,j),j=a,10>j&&(j="00"+j),100>j&&(j="0"+j),i=a,10>i&&(i="00"+i),b=b.replace(/QQQ/g,j),b=b.replace(/QQ/g,i),b=b.replace(/Q/g,a),b=12>h?b.replace(/A/g,"am"):b.replace(/A/g,"pm"),b=b.replace(/YYYY/g,"@IIII@"),b=b.replace(/YY/g,"@II@"),b=b.replace(/MMMM/g,"@XXXX@"),b=b.replace(/MMM/g,"@XXX@"),b=b.replace(/MM/g,"@XX@"),b=b.replace(/M/g,"@X@"),b=b.replace(/DD/g,"@RR@"),b=b.replace(/D/g,"@R@"),b=b.replace(/EEEE/g,"@PPPP@"),b=b.replace(/EEE/g,"@PPP@"),b=b.replace(/EE/g,"@PP@"),b=b.replace(/E/g,"@P@"),b=b.replace(/@IIII@/g,d),b=b.replace(/@II@/g,l),b=b.replace(/@XXXX@/g,c.monthNames[e]),b=b.replace(/@XXX@/g,c.shortMonthNames[e]),b=b.replace(/@XX@/g,m),b=b.replace(/@X@/g,e+1),b=b.replace(/@RR@/g,k),b=b.replace(/@R@/g,f),b=b.replace(/@PPPP@/g,c.dayNames[g]),b=b.replace(/@PPP@/g,c.shortDayNames[g]),b=b.replace(/@PP@/g,n),b=b.replace(/@P@/g,g)},AmCharts.changeDate=function(a,b,c,d,e){if(AmCharts.useUTC)return AmCharts.changeUTCDate(a,b,c,d,e);var f=-1;switch(void 0===d&&(d=!0),void 0===e&&(e=!1),!0===d&&(f=1),b){case"YYYY":a.setFullYear(a.getFullYear()+c*f),d||e||a.setDate(a.getDate()+1);break;case"MM":b=a.getMonth(),a.setMonth(a.getMonth()+c*f),a.getMonth()>b+c*f&&a.setDate(a.getDate()-1),d||e||a.setDate(a.getDate()+1);break;case"DD":a.setDate(a.getDate()+c*f);break;case"WW":a.setDate(a.getDate()+c*f*7);break;case"hh":a.setHours(a.getHours()+c*f);break;case"mm":a.setMinutes(a.getMinutes()+c*f);break;case"ss":a.setSeconds(a.getSeconds()+c*f);break;case"fff":a.setMilliseconds(a.getMilliseconds()+c*f)}return a},AmCharts.changeUTCDate=function(a,b,c,d,e){var f=-1;switch(void 0===d&&(d=!0),void 0===e&&(e=!1),!0===d&&(f=1),b){case"YYYY":a.setUTCFullYear(a.getUTCFullYear()+c*f),d||e||a.setUTCDate(a.getUTCDate()+1);break;case"MM":b=a.getUTCMonth(),a.setUTCMonth(a.getUTCMonth()+c*f),a.getUTCMonth()>b+c*f&&a.setUTCDate(a.getUTCDate()-1),d||e||a.setUTCDate(a.getUTCDate()+1);break;case"DD":a.setUTCDate(a.getUTCDate()+c*f);break;case"WW":a.setUTCDate(a.getUTCDate()+c*f*7);break;case"hh":a.setUTCHours(a.getUTCHours()+c*f);break;case"mm":a.setUTCMinutes(a.getUTCMinutes()+c*f);break;case"ss":a.setUTCSeconds(a.getUTCSeconds()+c*f);break;case"fff":a.setUTCMilliseconds(a.getUTCMilliseconds()+c*f)}return a},AmCharts.AmSerialChart=AmCharts.Class({inherits:AmCharts.AmRectangularChart,construct:function(a){this.type="serial",AmCharts.AmSerialChart.base.construct.call(this,a),this.cname="AmSerialChart",this.theme=a,this.createEvents("changed"),this.columnSpacing=5,this.columnSpacing3D=0,this.columnWidth=.8,this.updateScrollbar=!0;var b=new AmCharts.CategoryAxis(a);b.chart=this,this.categoryAxis=b,this.zoomOutOnDataUpdate=!0,this.mouseWheelZoomEnabled=this.mouseWheelScrollEnabled=this.rotate=this.skipZoom=!1,this.minSelectedTime=0,AmCharts.applyTheme(this,a,this.cname)},initChart:function(){AmCharts.AmSerialChart.base.initChart.call(this),this.updateCategoryAxis(this.categoryAxis,this.rotate,"categoryAxis"),this.dataChanged&&(this.updateData(),this.dataChanged=!1,this.dispatchDataUpdated=!0);var a=this.chartCursor;a&&(a.updateData(),a.fullWidth&&(a.fullRectSet=this.cursorLineSet));var b,a=this.countColumns(),c=this.graphs;for(b=0;b<c.length;b++)c[b].columnCount=a;this.updateScrollbar=!0,this.drawChart(),this.autoMargins&&!this.marginsUpdated&&(this.marginsUpdated=!0,this.measureMargins())},handleWheelReal:function(a,b){if(!this.wheelBusy){var c=this.categoryAxis,d=c.parseDates,e=c.minDuration(),f=c=1;this.mouseWheelZoomEnabled?b||(c=-1):b&&(c=-1);var g=this.chartData.length,h=this.lastTime,i=this.firstTime;0>a?d?(g=this.endTime-this.startTime,d=this.startTime+c*e,e=this.endTime+f*e,f>0&&c>0&&e>=h&&(e=h,d=h-g),this.zoomToDates(new Date(d),new Date(e))):(f>0&&c>0&&this.end>=g-1&&(c=f=0),d=this.start+c,e=this.end+f,this.zoomToIndexes(d,e)):d?(g=this.endTime-this.startTime,d=this.startTime-c*e,e=this.endTime-f*e,f>0&&c>0&&i>=d&&(d=i,e=i+g),this.zoomToDates(new Date(d),new Date(e))):(f>0&&c>0&&1>this.start&&(c=f=0),d=this.start-c,e=this.end-f,this.zoomToIndexes(d,e))}},validateData:function(a){this.marginsUpdated=!1,this.zoomOutOnDataUpdate&&!a&&(this.endTime=this.end=this.startTime=this.start=0/0),AmCharts.AmSerialChart.base.validateData.call(this)},drawChart:function(){AmCharts.AmSerialChart.base.drawChart.call(this);var a=this.chartData;if(AmCharts.ifArray(a)){var b=this.chartScrollbar;if(b&&b.draw(),0<this.realWidth&&0<this.realHeight){var c,a=a.length-1,b=this.categoryAxis;b.parseDates&&!b.equalSpacing?(b=this.startTime,c=this.endTime,(isNaN(b)||isNaN(c))&&(b=this.firstTime,c=this.lastTime)):(b=this.start,c=this.end,(isNaN(b)||isNaN(c))&&(b=0,c=a)),this.endTime=this.startTime=this.end=this.start=void 0,this.zoom(b,c)}}else this.cleanChart();this.dispDUpd(),this.chartCreated=!0},cleanChart:function(){AmCharts.callMethod("destroy",[this.valueAxes,this.graphs,this.categoryAxis,this.chartScrollbar,this.chartCursor])},updateCategoryAxis:function(a,b,c){a.chart=this,a.id=c,a.rotate=b,a.axisRenderer=AmCharts.RecAxis,a.guideFillRenderer=AmCharts.RecFill,a.axisItemRenderer=AmCharts.RecItem,a.setOrientation(!this.rotate),a.x=this.marginLeftReal,a.y=this.marginTopReal,a.dx=this.dx,a.dy=this.dy,a.width=this.plotAreaWidth-1,a.height=this.plotAreaHeight-1,a.viW=this.plotAreaWidth-1,a.viH=this.plotAreaHeight-1,a.viX=this.marginLeftReal,a.viY=this.marginTopReal,a.marginsChanged=!0},updateValueAxes:function(){AmCharts.AmSerialChart.base.updateValueAxes.call(this);var a,b=this.valueAxes;for(a=0;a<b.length;a++){var c=b[a],d=this.rotate;c.rotate=d,c.setOrientation(d),d=this.categoryAxis,(!d.startOnAxis||d.parseDates)&&(c.expandMinMax=!0)}},updateData:function(){this.parseData();var a,b=this.graphs,c=this.chartData;for(a=0;a<b.length;a++)b[a].data=c;0<c.length&&(this.firstTime=this.getStartTime(c[0].time),this.lastTime=this.getEndTime(c[c.length-1].time))},getStartTime:function(a){var b=this.categoryAxis;return AmCharts.resetDateToMin(new Date(a),b.minPeriod,1,b.firstDayOfWeek).getTime()},getEndTime:function(a){var b=AmCharts.extractPeriod(this.categoryAxis.minPeriod);return AmCharts.changeDate(new Date(a),b.period,b.count,!0).getTime()-1},updateMargins:function(){AmCharts.AmSerialChart.base.updateMargins.call(this);var a=this.chartScrollbar;a&&(this.getScrollbarPosition(a,this.rotate,this.categoryAxis.position),this.adjustMargins(a,this.rotate))},updateScrollbars:function(){AmCharts.AmSerialChart.base.updateScrollbars.call(this),this.updateChartScrollbar(this.chartScrollbar,this.rotate)},zoom:function(a,b){var c=this.categoryAxis;c.parseDates&&!c.equalSpacing?this.timeZoom(a,b):this.indexZoom(a,b),this.updateLegendValues()},timeZoom:function(a,b){var c=this.maxSelectedTime;isNaN(c)||(b!=this.endTime&&b-a>c&&(a=b-c,this.updateScrollbar=!0),a!=this.startTime&&b-a>c&&(b=a+c,this.updateScrollbar=!0));var d=this.minSelectedTime;if(d>0&&d>b-a){var e=Math.round(a+(b-a)/2),d=Math.round(d/2);a=e-d,b=e+d}var f=this.chartData,e=this.categoryAxis;if(AmCharts.ifArray(f)&&(a!=this.startTime||b!=this.endTime)){var g=e.minDuration(),d=this.firstTime,h=this.lastTime;a||(a=d,isNaN(c)||(a=h-c)),b||(b=h),a>h&&(a=h),d>b&&(b=d),d>a&&(a=d),b>h&&(b=h),a>b&&(b=a+g),g/5>b-a&&(h>b?b=a+g/5:a=b-g/5),this.startTime=a,this.endTime=b,c=f.length-1,g=this.getClosestIndex(f,"time",a,!0,0,c),f=this.getClosestIndex(f,"time",b,!1,g,c),e.timeZoom(a,b),e.zoom(g,f),this.start=AmCharts.fitToBounds(g,0,c),this.end=AmCharts.fitToBounds(f,0,c),this.zoomAxesAndGraphs(),this.zoomScrollbar(),this.showZB(a!=d||b!=h?!0:!1),this.updateColumnsDepth(),this.dispatchTimeZoomEvent()}},indexZoom:function(a,b){var c=this.maxSelectedSeries;if(isNaN(c)||(b!=this.end&&b-a>c&&(a=b-c,this.updateScrollbar=!0),a!=this.start&&b-a>c&&(b=a+c,this.updateScrollbar=!0)),a!=this.start||b!=this.end){var d=this.chartData.length-1;isNaN(a)&&(a=0,isNaN(c)||(a=d-c)),isNaN(b)&&(b=d),a>b&&(b=a),b>d&&(b=d),a>d&&(a=d-1),0>a&&(a=0),this.start=a,this.end=b,this.categoryAxis.zoom(a,b),this.zoomAxesAndGraphs(),this.zoomScrollbar(),this.showZB(0!==a||b!=this.chartData.length-1?!0:!1),this.updateColumnsDepth(),this.dispatchIndexZoomEvent()}},updateGraphs:function(){AmCharts.AmSerialChart.base.updateGraphs.call(this);var a,b=this.graphs;for(a=0;a<b.length;a++){var c=b[a];c.columnWidthReal=this.columnWidth,c.categoryAxis=this.categoryAxis,AmCharts.isString(c.fillToGraph)&&(c.fillToGraph=this.getGraphById(c.fillToGraph))}},updateColumnsDepth:function(){var a,b,c=this.graphs;for(AmCharts.remove(this.columnsSet),this.columnsArray=[],a=0;a<c.length;a++){b=c[a];var d=b.columnsArray;if(d){var e;for(e=0;e<d.length;e++)this.columnsArray.push(d[e])}}if(this.columnsArray.sort(this.compareDepth),0<this.columnsArray.length){for(c=this.container.set(),this.columnSet.push(c),a=0;a<this.columnsArray.length;a++)c.push(this.columnsArray[a].column.set);b&&c.translate(b.x,b.y),this.columnsSet=c}},compareDepth:function(a,b){return a.depth>b.depth?1:-1},zoomScrollbar:function(){var a=this.chartScrollbar,b=this.categoryAxis;a&&this.updateScrollbar&&(a.dragger.stop(),b.parseDates&&!b.equalSpacing?a.timeZoom(this.startTime,this.endTime):a.zoom(this.start,this.end),this.updateScrollbar=!0)},updateTrendLines:function(){var a,b=this.trendLines;for(a=0;a<b.length;a++){var c=b[a],c=AmCharts.processObject(c,AmCharts.TrendLine,this.theme);b[a]=c,c.chart=this,AmCharts.isString(c.valueAxis)&&(c.valueAxis=this.getValueAxisById(c.valueAxis)),c.valueAxis||(c.valueAxis=this.valueAxes[0]),c.categoryAxis=this.categoryAxis}},zoomAxesAndGraphs:function(){if(!this.scrollbarOnly){var a,b=this.valueAxes;for(a=0;a<b.length;a++)b[a].zoom(this.start,this.end);for(b=this.graphs,a=0;a<b.length;a++)b[a].zoom(this.start,this.end);this.zoomTrendLines(),(a=this.chartCursor)&&a.zoom(this.start,this.end,this.startTime,this.endTime)}},countColumns:function(){var a,b,c,d,e=0,f=this.valueAxes.length,g=this.graphs.length,h=!1;for(d=0;f>d;d++){b=this.valueAxes[d];var i=b.stackType;if("100%"==i||"regular"==i)for(h=!1,c=0;g>c;c++)a=this.graphs[c],a.tcc=1,a.valueAxis==b&&"column"==a.type&&(!h&&a.stackable&&(e++,h=!0),(!a.stackable&&a.clustered||a.newStack)&&e++,a.columnIndex=e-1,a.clustered||(a.columnIndex=0));if("none"==i||"3d"==i){for(h=!1,c=0;g>c;c++)a=this.graphs[c],a.valueAxis==b&&"column"==a.type&&(a.clustered?(a.tcc=1,a.newStack&&(e=0),a.hidden||(a.columnIndex=e,e++)):a.hidden||(h=!0,a.tcc=1,a.columnIndex=0));h&&0==e&&(e=1)}if("3d"==i){for(b=1,d=0;g>d;d++)a=this.graphs[d],a.newStack&&b++,a.depthCount=b,a.tcc=e;e=b}}return e},parseData:function(){AmCharts.AmSerialChart.base.parseData.call(this),this.parseSerialData()},getCategoryIndexByValue:function(a){var b,c,d=this.chartData;for(c=0;c<d.length;c++)d[c].category==a&&(b=c);return b},handleCursorChange:function(a){this.updateLegendValues(a.index)},handleCursorZoom:function(a){this.updateScrollbar=!0,this.zoom(a.start,a.end)},handleScrollbarZoom:function(a){this.updateScrollbar=!1,this.zoom(a.start,a.end)},dispatchTimeZoomEvent:function(){if(this.prevStartTime!=this.startTime||this.prevEndTime!=this.endTime){var a={type:"zoomed"};a.startDate=new Date(this.startTime),a.endDate=new Date(this.endTime),a.startIndex=this.start,a.endIndex=this.end,this.startIndex=this.start,this.endIndex=this.end,this.startDate=a.startDate,this.endDate=a.endDate,this.prevStartTime=this.startTime,this.prevEndTime=this.endTime;var b=this.categoryAxis,c=AmCharts.extractPeriod(b.minPeriod).period,b=b.dateFormatsObject[c];a.startValue=AmCharts.formatDate(a.startDate,b,this),a.endValue=AmCharts.formatDate(a.endDate,b,this),a.chart=this,a.target=this,this.fire(a.type,a)}},dispatchIndexZoomEvent:function(){if(this.prevStartIndex!=this.start||this.prevEndIndex!=this.end){this.startIndex=this.start,this.endIndex=this.end;var a=this.chartData;if(AmCharts.ifArray(a)&&!isNaN(this.start)&&!isNaN(this.end)){var b={chart:this,target:this,type:"zoomed"};b.startIndex=this.start,b.endIndex=this.end,b.startValue=a[this.start].category,b.endValue=a[this.end].category,this.categoryAxis.parseDates&&(this.startTime=a[this.start].time,this.endTime=a[this.end].time,b.startDate=new Date(this.startTime),b.endDate=new Date(this.endTime)),this.prevStartIndex=this.start,this.prevEndIndex=this.end,this.fire(b.type,b)}}},updateLegendValues:function(a){var b,c=this.graphs;for(b=0;b<c.length;b++){var d=c[b];d.currentDataItem=isNaN(a)?void 0:this.chartData[a].axes[d.valueAxis.id].graphs[d.id]}this.legend&&this.legend.updateValues()},getClosestIndex:function(a,b,c,d,e,f){0>e&&(e=0),f>a.length-1&&(f=a.length-1);var g=e+Math.round((f-e)/2),h=a[g][b];return 1>=f-e?d?e:(d=a[f][b],Math.abs(a[e][b]-c)<Math.abs(d-c)?e:f):c==h?g:h>c?this.getClosestIndex(a,b,c,d,e,g):this.getClosestIndex(a,b,c,d,g,f)},zoomToIndexes:function(a,b){this.updateScrollbar=!0;var c=this.chartData;if(c){var d=c.length;d>0&&(0>a&&(a=0),b>d-1&&(b=d-1),d=this.categoryAxis,d.parseDates&&!d.equalSpacing?this.zoom(c[a].time,this.getEndTime(c[b].time)):this.zoom(a,b))}},zoomToDates:function(a,b){this.updateScrollbar=!0;var c=this.chartData;if(this.categoryAxis.equalSpacing){var d=this.getClosestIndex(c,"time",a.getTime(),!0,0,c.length);b=AmCharts.resetDateToMin(b,this.categoryAxis.minPeriod,1),c=this.getClosestIndex(c,"time",b.getTime(),!1,0,c.length),this.zoom(d,c)}else this.zoom(a.getTime(),b.getTime())},zoomToCategoryValues:function(a,b){this.updateScrollbar=!0,this.zoom(this.getCategoryIndexByValue(a),this.getCategoryIndexByValue(b))},formatPeriodString:function(a,b){if(b){var c=["value","open","low","high","close"],d="value open low high close average sum count".split(" "),e=b.valueAxis,f=this.chartData,g=b.numberFormatter;g||(g=this.nf);for(var h=0;h<c.length;h++){for(var i,j,k,l,m,n,o,p,q,r,s=c[h],t=0,u=0,v=0,w=0,x=this.start;x<=this.end;x++){var y=f[x];if(y&&(y=y.axes[e.id].graphs[b.id])){if(y.values){var z=y.values[s];if(this.rotate?(0>y.x||y.x>y.graph.height)&&(z=0/0):(0>y.x||y.x>y.graph.width)&&(z=0/0),!isNaN(z)){isNaN(i)&&(i=z),j=z,(isNaN(k)||k>z)&&(k=z),(isNaN(l)||z>l)&&(l=z),m=AmCharts.getDecimals(t);var A=AmCharts.getDecimals(z),t=t+z,t=AmCharts.roundTo(t,Math.max(m,A));u++,m=t/u}}y.percents&&(y=y.percents[s],!isNaN(y))&&(isNaN(n)&&(n=y),o=y,(isNaN(p)||p>y)&&(p=y),(isNaN(q)||y>q)&&(q=y),r=AmCharts.getDecimals(v),z=AmCharts.getDecimals(y),v+=y,v=AmCharts.roundTo(v,Math.max(r,z)),w++,r=v/w)}}v={open:n,close:o,high:q,low:p,average:r,sum:v,count:w},a=AmCharts.formatValue(a,{open:i,close:j,high:l,low:k,average:m,sum:t,count:u},d,g,s+"\\.",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),a=AmCharts.formatValue(a,v,d,this.pf,"percents\\."+s+"\\.")}}return a=AmCharts.cleanFromEmpty(a)},formatString:function(a,b,c){var d=b.graph;if(-1!=a.indexOf("[[category]]")){var e=b.serialDataItem.category;if(this.categoryAxis.parseDates){var f=this.balloonDateFormat,g=this.chartCursor;g&&(f=g.categoryBalloonDateFormat),-1!=a.indexOf("[[category]]")&&(f=AmCharts.formatDate(e,f,this),-1!=f.indexOf("fff")&&(f=AmCharts.formatMilliseconds(f,e)),e=f)}a=a.replace(/\[\[category\]\]/g,String(e))}return d=d.numberFormatter,d||(d=this.nf),e=b.graph.valueAxis,(f=e.duration)&&!isNaN(b.values.value)&&(e=AmCharts.formatDuration(b.values.value,f,"",e.durationUnits,e.maxInterval,d),a=a.replace(RegExp("\\[\\[value\\]\\]","g"),e)),e="value open low high close total".split(" "),f=this.pf,a=AmCharts.formatValue(a,b.percents,e,f,"percents\\."),a=AmCharts.formatValue(a,b.values,e,d,"",this.usePrefixes,this.prefixesOfSmallNumbers,this.prefixesOfBigNumbers),a=AmCharts.formatValue(a,b.values,["percents"],f),-1!=a.indexOf("[[")&&(a=AmCharts.formatDataContextValue(a,b.dataContext)),a=AmCharts.AmSerialChart.base.formatString.call(this,a,b,c)},addChartScrollbar:function(a){AmCharts.callMethod("destroy",[this.chartScrollbar]),a&&(a.chart=this,this.listenTo(a,"zoomed",this.handleScrollbarZoom)),this.rotate?void 0===a.width&&(a.width=a.scrollbarHeight):void 0===a.height&&(a.height=a.scrollbarHeight),this.chartScrollbar=a},removeChartScrollbar:function(){AmCharts.callMethod("destroy",[this.chartScrollbar]),this.chartScrollbar=null},handleReleaseOutside:function(a){AmCharts.AmSerialChart.base.handleReleaseOutside.call(this,a),AmCharts.callMethod("handleReleaseOutside",[this.chartScrollbar])}}),AmCharts.Cuboid=AmCharts.Class({construct:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.set=a.set(),this.container=a,this.h=Math.round(c),this.w=Math.round(b),this.dx=d,this.dy=e,this.colors=f,this.alpha=g,this.bwidth=h,this.bcolor=i,this.balpha=j,this.dashLength=n,this.topRadius=p,this.pattern=o,(this.rotate=m)?0>b&&0===k&&(k=180):0>c&&270==k&&(k=90),this.gradientRotation=k,0===d&&0===e&&(this.cornerRadius=l),this.draw()},draw:function(){var a=this.set;a.clear();var b=this.container,c=this.w,d=this.h,e=this.dx,f=this.dy,g=this.colors,h=this.alpha,i=this.bwidth,j=this.bcolor,k=this.balpha,l=this.gradientRotation,m=this.cornerRadius,n=this.dashLength,o=this.pattern,p=this.topRadius,q=g,r=g;"object"==typeof g&&(q=g[0],r=g[g.length-1]);var s,t,u,v,w,x,y,z,A,B=h;o&&(h=0);var C,D,E,F,G=this.rotate;if(0<Math.abs(e)||0<Math.abs(f))if(isNaN(p))y=r,r=AmCharts.adjustLuminosity(q,-.2),r=AmCharts.adjustLuminosity(q,-.2),s=AmCharts.polygon(b,[0,e,c+e,c,0],[0,f,f,0,0],r,h,1,j,0,l),k>0&&(A=AmCharts.line(b,[0,e,c+e],[0,f,f],j,k,i,n)),t=AmCharts.polygon(b,[0,0,c,c,0],[0,d,d,0,0],r,h,1,j,0,l),t.translate(e,f),k>0&&(u=AmCharts.line(b,[e,e],[f,f+d],j,k,i,n)),v=AmCharts.polygon(b,[0,0,e,e,0],[0,d,d+f,f,0],r,h,1,j,0,l),w=AmCharts.polygon(b,[c,c,c+e,c+e,c],[0,d,d+f,f,0],r,h,1,j,0,l),k>0&&(x=AmCharts.line(b,[c,c+e,c+e,c],[0,f,d+f,d],j,k,i,n)),r=AmCharts.adjustLuminosity(y,.2),y=AmCharts.polygon(b,[0,e,c+e,c,0],[d,d+f,d+f,d,d],r,h,1,j,0,l),k>0&&(z=AmCharts.line(b,[0,e,c+e],[d,d+f,d+f],j,k,i,n));else{var H,I,J;G?(H=d/2,r=e/2,J=d/2,I=c+e/2,D=Math.abs(d/2),C=Math.abs(e/2)):(r=c/2,H=f/2,I=c/2,J=d+f/2+1,C=Math.abs(c/2),D=Math.abs(f/2)),E=C*p,F=D*p,C>.1&&C>.1&&(s=AmCharts.circle(b,C,q,h,i,j,k,!1,D),s.translate(r,H)),E>.1&&E>.1&&(y=AmCharts.circle(b,E,AmCharts.adjustLuminosity(q,.5),h,i,j,k,!1,F),y.translate(I,J))}for(h=B,1>Math.abs(d)&&(d=0),1>Math.abs(c)&&(c=0),!isNaN(p)&&(0<Math.abs(e)||0<Math.abs(f))?(g=[q],g={fill:g,stroke:j,"stroke-width":i,"stroke-opacity":k,"fill-opacity":h},G?(h="M0,0 L"+c+","+(d/2-d/2*p),i=" B",c>0&&(i=" A"),AmCharts.VML?(h+=i+Math.round(c-E)+","+Math.round(d/2-F)+","+Math.round(c+E)+","+Math.round(d/2+F)+","+c+",0,"+c+","+d,h=h+(" L0,"+d)+(i+Math.round(-C)+","+Math.round(d/2-D)+","+Math.round(C)+","+Math.round(d/2+D)+",0,"+d+",0,0")):(h+="A"+E+","+F+",0,0,0,"+c+","+(d-d/2*(1-p))+"L0,"+d,h+="A"+C+","+D+",0,0,1,0,0"),C=90):(i=c/2-c/2*p,h="M0,0 L"+i+","+d,AmCharts.VML?(h="M0,0 L"+i+","+d,i=" B",0>d&&(i=" A"),h+=i+Math.round(c/2-E)+","+Math.round(d-F)+","+Math.round(c/2+E)+","+Math.round(d+F)+",0,"+d+","+c+","+d,h+=" L"+c+",0",h+=i+Math.round(c/2+C)+","+Math.round(D)+","+Math.round(c/2-C)+","+Math.round(-D)+","+c+",0,0,0"):(h+="A"+E+","+F+",0,0,0,"+(c-c/2*(1-p))+","+d+"L"+c+",0",h+="A"+C+","+D+",0,0,1,0,0"),C=180),b=b.path(h).attr(g),b.gradient("linearGradient",[q,AmCharts.adjustLuminosity(q,-.3),AmCharts.adjustLuminosity(q,-.3),q],C),G?b.translate(e/2,0):b.translate(0,f/2)):b=0===d?AmCharts.line(b,[0,c],[0,0],j,k,i,n):0===c?AmCharts.line(b,[0,0],[0,d],j,k,i,n):m>0?AmCharts.rect(b,c,d,g,h,i,j,k,m,l,n):AmCharts.polygon(b,[0,0,c,c,0],[0,d,d,0,0],g,h,i,j,k,l,!1,n),c=isNaN(p)?0>d?[s,A,t,u,v,w,x,y,z,b]:[y,z,t,u,v,w,s,A,x,b]:G?c>0?[s,b,y]:[y,b,s]:0>d?[s,b,y]:[y,b,s],d=0;d<c.length;d++)(e=c[d])&&a.push(e);o&&b.pattern(o)},width:function(a){this.w=Math.round(a),this.draw()},height:function(a){this.h=Math.round(a),this.draw()},animateHeight:function(a,b){var c=this;c.easing=b,c.totalFrames=Math.round(1e3*a/AmCharts.updateRate),c.rh=c.h,c.frame=0,c.height(1),setTimeout(function(){c.updateHeight.call(c)},AmCharts.updateRate)},updateHeight:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b&&(b=a.easing(0,a.frame,1,a.rh-1,b),a.height(b),setTimeout(function(){a.updateHeight.call(a)},AmCharts.updateRate))},animateWidth:function(a,b){var c=this;c.easing=b,c.totalFrames=Math.round(1e3*a/AmCharts.updateRate),c.rw=c.w,c.frame=0,c.width(1),setTimeout(function(){c.updateWidth.call(c)},AmCharts.updateRate)},updateWidth:function(){var a=this;a.frame++;var b=a.totalFrames;a.frame<=b&&(b=a.easing(0,a.frame,1,a.rw-1,b),a.width(b),setTimeout(function(){a.updateWidth.call(a)},AmCharts.updateRate))}}),AmCharts.CategoryAxis=AmCharts.Class({inherits:AmCharts.AxisBase,construct:function(a){this.cname="CategoryAxis",AmCharts.CategoryAxis.base.construct.call(this,a),this.minPeriod="DD",this.equalSpacing=this.parseDates=!1,this.position="bottom",this.startOnAxis=!1,this.firstDayOfWeek=1,this.gridPosition="middle",this.markPeriodChange=this.boldPeriodBeginning=!0,this.safeDistance=30,this.centerLabelOnFullPeriod=!0,this.periods=[{period:"ss",count:1},{period:"ss",count:5},{period:"ss",count:10},{period:"ss",count:30},{period:"mm",count:1},{period:"mm",count:5},{period:"mm",count:10},{period:"mm",count:30},{period:"hh",count:1},{period:"hh",count:3},{period:"hh",count:6},{period:"hh",count:12},{period:"DD",count:1},{period:"DD",count:2},{period:"DD",count:3},{period:"DD",count:4},{period:"DD",count:5},{period:"WW",count:1},{period:"MM",count:1},{period:"MM",count:2},{period:"MM",count:3},{period:"MM",count:6},{period:"YYYY",count:1},{period:"YYYY",count:2},{period:"YYYY",count:5},{period:"YYYY",count:10},{period:"YYYY",count:50},{period:"YYYY",count:100}],this.dateFormats=[{period:"fff",format:"JJ:NN:SS"},{period:"ss",format:"JJ:NN:SS"},{period:"mm",format:"JJ:NN"},{period:"hh",format:"JJ:NN"},{period:"DD",format:"MMM DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}],this.nextPeriod={},this.nextPeriod.fff="ss",this.nextPeriod.ss="mm",this.nextPeriod.mm="hh",this.nextPeriod.hh="DD",this.nextPeriod.DD="MM",this.nextPeriod.MM="YYYY",AmCharts.applyTheme(this,a,this.cname)},draw:function(){AmCharts.CategoryAxis.base.draw.call(this),this.generateDFObject();var a=this.chart.chartData;if(this.data=a,AmCharts.ifArray(a)){var b,c=this.chart,d=this.start,e=this.labelFrequency,f=0;b=this.end-d+1;var g,h=this.gridCountR,i=this.showFirstLabel,j=this.showLastLabel,k="",l=AmCharts.extractPeriod(this.minPeriod);g=AmCharts.getPeriodDuration(l.period,l.count);var m,n,o,p,q,r;m=this.rotate;var s,t=this.firstDayOfWeek,u=this.boldPeriodBeginning,a=AmCharts.resetDateToMin(new Date(a[a.length-1].time+1.05*g),this.minPeriod,1,t).getTime();this.endTime>a&&(this.endTime=a),r=this.minorGridEnabled;var v,w,a=this.gridAlpha;if(this.parseDates&&!this.equalSpacing){this.timeDifference=this.endTime-this.startTime,d=this.choosePeriod(0),e=d.period,m=d.count,n=AmCharts.getPeriodDuration(e,m),g>n&&(e=l.period,m=l.count,n=g),o=e,"WW"==o&&(o="DD"),this.stepWidth=this.getStepWidth(this.timeDifference);var h=Math.ceil(this.timeDifference/n)+5,x=k=AmCharts.resetDateToMin(new Date(this.startTime-n),e,m,t).getTime();o==e&&1==m&&this.centerLabelOnFullPeriod&&(q=n*this.stepWidth),this.cellWidth=g*this.stepWidth,b=Math.round(k/n),d=-1,b/2==Math.round(b/2)&&(d=-2,k-=n);var y=c.firstTime,z=0;if(r&&m>1&&(v=this.chooseMinorFrequency(m),w=AmCharts.getPeriodDuration(e,v)),0<this.gridCountR)for(b=d;h>=b;b++){if(l=y+n*(b+Math.floor((x-y)/n))-z,"DD"==e&&(l+=36e5),l=AmCharts.resetDateToMin(new Date(l),e,m,t).getTime(),"MM"==e&&(r=(l-k)/n,(l-k)/n>=1.5&&(l=l-(r-1)*n+AmCharts.getPeriodDuration("DD",3),l=AmCharts.resetDateToMin(new Date(l),e,1).getTime(),z+=n)),g=(l-this.startTime)*this.stepWidth,r=!1,this.nextPeriod[o]&&(r=this.checkPeriodChange(this.nextPeriod[o],1,l,k,o)),s=!1,r&&this.markPeriodChange?(r=this.dateFormatsObject[this.nextPeriod[o]],this.twoLineMode&&(r=this.dateFormatsObject[o]+"\n"+r,r=AmCharts.fixBrakes(r)),s=!0):r=this.dateFormatsObject[o],u||(s=!1),k=AmCharts.formatDate(new Date(l),r,c),(b==d&&!i||b==h&&!j)&&(k=" "),this.labelFunction&&(k=this.labelFunction(k,new Date(l),this,e,m,p).toString()),this.boldLabels&&(s=!0),p=new this.axisItemRenderer(this,g,k,!1,q,0,!1,s),this.pushAxisItem(p),p=k=l,!isNaN(v))for(g=1;m>g;g+=v)this.gridAlpha=this.minorGridAlpha,r=l+w*g,r=AmCharts.resetDateToMin(new Date(r),e,v,t).getTime(),r=new this.axisItemRenderer(this,(r-this.startTime)*this.stepWidth),this.pushAxisItem(r);this.gridAlpha=a}}else if(this.parseDates){if(this.parseDates&&this.equalSpacing){if(f=this.start,this.startTime=this.data[this.start].time,this.endTime=this.data[this.end].time,this.timeDifference=this.endTime-this.startTime,d=this.choosePeriod(0),e=d.period,m=d.count,n=AmCharts.getPeriodDuration(e,m),g>n&&(e=l.period,m=l.count,n=g),o=e,"WW"==o&&(o="DD"),this.stepWidth=this.getStepWidth(b),h=Math.ceil(this.timeDifference/n)+1,k=AmCharts.resetDateToMin(new Date(this.startTime-n),e,m,t).getTime(),this.cellWidth=this.getStepWidth(b),b=Math.round(k/n),d=-1,b/2==Math.round(b/2)&&(d=-2,k-=n),g=this.start,g/2==Math.round(g/2)&&g--,0>g&&(g=0),q=this.end+2,q>=this.data.length&&(q=this.data.length),w=!1,w=!i,this.previousPos=-1e3,20<this.labelRotation&&(this.safeDistance=5),n=g,this.data[g].time!=AmCharts.resetDateToMin(new Date(this.data[g].time),e,m,t).getTime())for(t=0,s=k,b=g;q>b;b++)l=this.data[b].time,this.checkPeriodChange(e,m,l,s)&&(t++,t>=2&&(n=b,b=q),s=l);if(r&&m>1&&(v=this.chooseMinorFrequency(m),AmCharts.getPeriodDuration(e,v)),0<this.gridCountR)for(b=g;q>b;b++)l=this.data[b].time,this.checkPeriodChange(e,m,l,k)&&b>=n?(g=this.getCoordinate(b-this.start),r=!1,this.nextPeriod[o]&&(r=this.checkPeriodChange(this.nextPeriod[o],1,l,k,o)),s=!1,r&&this.markPeriodChange?(r=this.dateFormatsObject[this.nextPeriod[o]],s=!0):r=this.dateFormatsObject[o],k=AmCharts.formatDate(new Date(l),r,c),(b==d&&!i||b==h&&!j)&&(k=" "),w?w=!1:(u||(s=!1),g-this.previousPos>this.safeDistance*Math.cos(this.labelRotation*Math.PI/180)&&(this.labelFunction&&(k=this.labelFunction(k,new Date(l),this,e,m,p)),this.boldLabels&&(s=!0),p=new this.axisItemRenderer(this,g,k,void 0,void 0,void 0,void 0,s),t=p.graphics(),this.pushAxisItem(p),p=t.getBBox().width,AmCharts.isModern||(p-=g),this.previousPos=g+p)),p=k=l):isNaN(v)||(this.checkPeriodChange(e,v,l,x)&&(this.gridAlpha=this.minorGridAlpha,g=this.getCoordinate(b-this.start),r=new this.axisItemRenderer(this,g),this.pushAxisItem(r),x=l),this.gridAlpha=a)}}else if(this.cellWidth=this.getStepWidth(b),h>b&&(h=b),f+=this.start,this.stepWidth=this.getStepWidth(b),h>0)for(u=Math.floor(b/h),v=this.chooseMinorFrequency(u),g=f,g/2==Math.round(g/2)&&g--,0>g&&(g=0),h=0,this.end-g+1>=this.autoRotateCount&&(this.labelRotation=this.autoRotateAngle),b=g;b<=this.end+2;b++){if(p=!1,b>=0&&b<this.data.length?(o=this.data[b],k=o.category,p=o.forceShow):k="",r&&!isNaN(v)){if(b/v!=Math.round(b/v)&&!p)continue;b/u==Math.round(b/u)||p||(this.gridAlpha=this.minorGridAlpha,k=void 0)}else if(b/u!=Math.round(b/u)&&!p)continue;g=this.getCoordinate(b-f),p=0,"start"==this.gridPosition&&(g-=this.cellWidth/2,p=this.cellWidth/2),t=!0,tickShift=p,"start"==this.tickPosition&&(tickShift=0,t=!1,p=0),(b==d&&!i||b==this.end&&!j)&&(k=void 0),Math.round(h/e)!=h/e&&(k=void 0),h++,x=this.cellWidth,m&&(x=0/0),this.labelFunction&&o&&(k=this.labelFunction(k,o,this)),k=AmCharts.fixBrakes(k),s=!1,this.boldLabels&&(s=!0),b>this.end&&"start"==this.tickPosition&&(k=" "),p=new this.axisItemRenderer(this,g,k,t,x,p,void 0,s,tickShift,!1,o.labelColor),p.serialDataItem=o,this.pushAxisItem(p),this.gridAlpha=a}for(b=0;b<this.data.length;b++)(i=this.data[b])&&(j=this.parseDates&&!this.equalSpacing?Math.round((i.time-this.startTime)*this.stepWidth+this.cellWidth/2):this.getCoordinate(b-f),i.x[this.id]=j);for(i=this.guides.length,b=0;i>b;b++)j=this.guides[b],u=u=u=a=d=0/0,v=j.above,j.toCategory&&(u=c.getCategoryIndexByValue(j.toCategory),isNaN(u)||(d=this.getCoordinate(u-f),j.expand&&(d+=this.cellWidth/2),p=new this.axisItemRenderer(this,d,"",!0,0/0,0/0,j),this.pushAxisItem(p,v))),j.category&&(u=c.getCategoryIndexByValue(j.category),isNaN(u)||(a=this.getCoordinate(u-f),j.expand&&(a-=this.cellWidth/2),u=(d-a)/2,p=new this.axisItemRenderer(this,a,j.label,!0,0/0,u,j),this.pushAxisItem(p,v))),j.toDate&&(j.toDate instanceof Date||(j.toDate=AmCharts.stringToDate(j.toDate,c.dataDateFormat)),this.equalSpacing?(u=c.getClosestIndex(this.data,"time",j.toDate.getTime(),!1,0,this.data.length-1),isNaN(u)||(d=this.getCoordinate(u-f))):d=(j.toDate.getTime()-this.startTime)*this.stepWidth,p=new this.axisItemRenderer(this,d,"",!0,0/0,0/0,j),this.pushAxisItem(p,v)),j.date&&(j.date instanceof Date||(j.date=AmCharts.stringToDate(j.date,c.dataDateFormat)),this.equalSpacing?(u=c.getClosestIndex(this.data,"time",j.date.getTime(),!1,0,this.data.length-1),isNaN(u)||(a=this.getCoordinate(u-f))):a=(j.date.getTime()-this.startTime)*this.stepWidth,u=(d-a)/2,p="H"==this.orientation?new this.axisItemRenderer(this,a,j.label,!1,2*u,0/0,j):new this.axisItemRenderer(this,a,j.label,!1,0/0,u,j),this.pushAxisItem(p,v)),(d>0||a>0)&&(d<this.width||a<this.width)&&(d=new this.guideFillRenderer(this,a,d,j),a=d.graphics(),this.pushAxisItem(d,v),j.graphics=a,a.index=b,j.balloonText&&this.addEventListeners(a,j))}this.axisCreated=!0,c=this.x,f=this.y,this.set.translate(c,f),this.labelsSet.translate(c,f),this.positionTitle(),(c=this.axisLine.set)&&c.toFront(),c=this.getBBox().height,2<c-this.previousHeight&&this.autoWrap&&!this.parseDates&&(this.axisCreated=this.chart.marginsUpdated=!1),this.previousHeight=c},chooseMinorFrequency:function(a){for(var b=10;b>0;b--)if(a/b==Math.round(a/b))return a/b},choosePeriod:function(a){var b=AmCharts.getPeriodDuration(this.periods[a].period,this.periods[a].count),c=Math.ceil(this.timeDifference/b),d=this.periods;return this.timeDifference<b&&a>0?d[a-1]:c<=this.gridCountR?d[a]:a+1<d.length?this.choosePeriod(a+1):d[a]},getStepWidth:function(a){var b;return this.startOnAxis?(b=this.axisWidth/(a-1),1==a&&(b=this.axisWidth)):b=this.axisWidth/a,b},getCoordinate:function(a){return a*=this.stepWidth,this.startOnAxis||(a+=this.stepWidth/2),Math.round(a)},timeZoom:function(a,b){this.startTime=a,this.endTime=b},minDuration:function(){var a=AmCharts.extractPeriod(this.minPeriod);return AmCharts.getPeriodDuration(a.period,a.count)},checkPeriodChange:function(a,b,c,d,e){c=new Date(c);var f=new Date(d),g=this.firstDayOfWeek;return d=b,"DD"==a&&(b=1),c=AmCharts.resetDateToMin(c,a,b,g).getTime(),b=AmCharts.resetDateToMin(f,a,b,g).getTime(),"DD"==a&&"hh"!=e&&c-b<=AmCharts.getPeriodDuration(a,d)?!1:c!=b?!0:!1},generateDFObject:function(){this.dateFormatsObject={};var a;for(a=0;a<this.dateFormats.length;a++){var b=this.dateFormats[a];this.dateFormatsObject[b.period]=b.format}},xToIndex:function(a){var b=this.data,c=this.chart,d=c.rotate,e=this.stepWidth;this.parseDates&&!this.equalSpacing?(a=this.startTime+Math.round(a/e)-this.minDuration()/2,c=c.getClosestIndex(b,"time",a,!1,this.start,this.end+1)):(this.startOnAxis||(a-=e/2),c=this.start+Math.round(a/e));var f,c=AmCharts.fitToBounds(c,0,b.length-1);return b[c]&&(f=b[c].x[this.id]),d?f>this.height+1&&c--:f>this.width+1&&c--,0>f&&c++,c=AmCharts.fitToBounds(c,0,b.length-1)},dateToCoordinate:function(a){return this.parseDates&&!this.equalSpacing?(a.getTime()-this.startTime)*this.stepWidth:this.parseDates&&this.equalSpacing?(a=this.chart.getClosestIndex(this.data,"time",a.getTime(),!1,0,this.data.length-1),this.getCoordinate(a-this.start)):0/0},categoryToCoordinate:function(a){return this.chart?(a=this.chart.getCategoryIndexByValue(a),this.getCoordinate(a-this.start)):0/0},coordinateToDate:function(a){return this.equalSpacing?(a=this.xToIndex(a),new Date(this.data[a].time)):new Date(this.startTime+a/this.stepWidth)}}),AmCharts.AmStockChart=AmCharts.Class({construct:function(a){this.type="stock",this.cname="AmStockChart",this.version="3.11.3",this.theme=a,this.createEvents("zoomed","rollOverStockEvent","rollOutStockEvent","clickStockEvent","panelRemoved","dataUpdated","init","rendered","drawn"),this.colors="#FF6600 #FCD202 #B0DE09 #0D8ECF #2A0CD0 #CD0D74 #CC0000 #00CC00 #0000CC #DDDDDD #999999 #333333 #990000".split(" "),this.firstDayOfWeek=1,this.glueToTheEnd=!1,this.dataSetCounter=-1,this.zoomOutOnDataSetChange=!1,this.panels=[],this.dataSets=[],this.chartCursors=[],this.comparedDataSets=[],this.categoryAxesSettings=new AmCharts.CategoryAxesSettings(a),this.valueAxesSettings=new AmCharts.ValueAxesSettings(a),this.panelsSettings=new AmCharts.PanelsSettings(a),this.chartScrollbarSettings=new AmCharts.ChartScrollbarSettings(a),this.chartCursorSettings=new AmCharts.ChartCursorSettings(a),this.stockEventsSettings=new AmCharts.StockEventsSettings(a),this.legendSettings=new AmCharts.LegendSettings(a),this.balloon=new AmCharts.AmBalloon(a),this.previousEndDate=new Date(0),this.previousStartDate=new Date(0),this.dataSetCount=this.graphCount=0,this.chartCreated=!1,this.extendToFullPeriod=!0,AmCharts.applyTheme(this,a,this.cname)
},write:function(a){var b=this.theme;this.initHC||(AmCharts.callInitHandler(this),this.initHC=!0),AmCharts.applyLang(this.language,this);var c=this.exportConfig;c&&AmCharts.AmExport&&!this.AmExport&&(this.AmExport=new AmCharts.AmExport(this,c)),this.amExport&&AmCharts.AmExport&&(this.AmExport=AmCharts.extend(this.amExport,new AmCharts.AmExport(this),!0)),this.AmExport&&this.AmExport.init(),this.chartRendered=!1,a="object"!=typeof a?document.getElementById(a):a,this.zoomOutOnDataSetChange&&(this.endDate=this.startDate=void 0),this.categoryAxesSettings=AmCharts.processObject(this.categoryAxesSettings,AmCharts.CategoryAxesSettings,b),this.valueAxesSettings=AmCharts.processObject(this.valueAxesSettings,AmCharts.ValueAxesSettings,b),this.chartCursorSettings=AmCharts.processObject(this.chartCursorSettings,AmCharts.ChartCursorSettings,b),this.chartScrollbarSettings=AmCharts.processObject(this.chartScrollbarSettings,AmCharts.ChartScrollbarSettings,b),this.legendSettings=AmCharts.processObject(this.legendSettings,AmCharts.LegendSettings,b),this.panelsSettings=AmCharts.processObject(this.panelsSettings,AmCharts.PanelsSettings,b),this.stockEventsSettings=AmCharts.processObject(this.stockEventsSettings,AmCharts.StockEventsSettings,b),this.dataSetSelector&&(this.dataSetSelector=AmCharts.processObject(this.dataSetSelector,AmCharts.DataSetSelector,b)),this.periodSelector&&(this.periodSelector=AmCharts.processObject(this.periodSelector,AmCharts.PeriodSelector,b)),a.innerHTML="",this.div=a,this.measure(),this.createLayout(),this.updateDataSets(),this.addDataSetSelector(),this.addPeriodSelector(),this.addPanels(),this.updatePanels(),this.addChartScrollbar(),this.updateData(),this.skipDefault||this.setDefaultPeriod()},setDefaultPeriod:function(a){var b=this.periodSelector;b&&(this.animationPlayed=!1,b.setDefaultPeriod(a))},validateSize:function(){var a,b=this.panels;for(this.measurePanels(),a=0;a<b.length;a++)panel=b[a],panel.invalidateSize()},updateDataSets:function(){var a,b=this.mainDataSet,c=this.dataSets;for(a=0;a<c.length;a++){var d=c[a],d=AmCharts.processObject(d,AmCharts.DataSet);c[a]=d,d.id||(this.dataSetCount++,d.id="ds"+this.dataSetCount),void 0===d.color&&(d.color=this.colors.length-1>a?this.colors[a]:AmCharts.randomColor())}!b&&AmCharts.ifArray(c)&&(this.mainDataSet=this.dataSets[0])},updateEvents:function(a){AmCharts.ifArray(a.stockEvents)&&AmCharts.parseEvents(a,this.panels,this.stockEventsSettings,this.firstDayOfWeek,this,this.dataDateFormat)},getLastDate:function(a){var b=this.dataDateFormat;return a=a instanceof Date?new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()):b?AmCharts.stringToDate(a,b):new Date(a),new Date(AmCharts.changeDate(a,this.categoryAxesSettings.minPeriod,1,!0).getTime()-1)},getFirstDate:function(a){var b=this.dataDateFormat;return a=a instanceof Date?new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()):b?AmCharts.stringToDate(a,b):new Date(a),new Date(AmCharts.resetDateToMin(a,this.categoryAxesSettings.minPeriod,1,this.firstDayOfWeek))},updateData:function(){var a=this.mainDataSet;if(a){var b=this.categoryAxesSettings;-1==AmCharts.getItemIndex(b.minPeriod,b.groupToPeriods)&&b.groupToPeriods.unshift(b.minPeriod);var c=a.dataProvider;if(AmCharts.ifArray(c)){var d=a.categoryField;this.firstDate=this.getFirstDate(c[0][d]),this.lastDate=this.getLastDate(c[c.length-1][d]),this.periodSelector&&this.periodSelector.setRanges(this.firstDate,this.lastDate),a.dataParsed||(AmCharts.parseStockData(a,b.minPeriod,b.groupToPeriods,this.firstDayOfWeek,this.dataDateFormat),a.dataParsed=!0),this.updateComparingData(),this.updateEvents(a)}else this.lastDate=this.firstDate=void 0;this.glueToTheEnd&&this.startDate&&this.endDate&&this.lastDate&&(AmCharts.getPeriodDuration(b.minPeriod),this.startDate=new Date(this.startDate.getTime()+(this.lastDate.getTime()-this.endDate.getTime())),this.endDate=this.lastDate,this.updateScrollbar=!0),this.updatePanelsWithNewData()}a={type:"dataUpdated",chart:this},this.fire(a.type,a)},updateComparingData:function(){var a,b=this.comparedDataSets,c=this.categoryAxesSettings;for(a=0;a<b.length;a++){var d=b[a];d.dataParsed||(AmCharts.parseStockData(d,c.minPeriod,c.groupToPeriods,this.firstDayOfWeek,this.dataDateFormat),d.dataParsed=!0),this.updateEvents(d)}},createLayout:function(){var a,b,c=this.div,d=document.createElement("div");d.style.position="relative",this.containerDiv=d,c.appendChild(d),(c=this.periodSelector)&&(a=c.position),(c=this.dataSetSelector)&&(b=c.position),("left"==a||"left"==b)&&(c=document.createElement("div"),c.style.cssFloat="left",c.style.styleFloat="left",c.style.width="0px",c.style.position="absolute",d.appendChild(c),this.leftContainer=c),("right"==a||"right"==b)&&(a=document.createElement("div"),a.style.cssFloat="right",a.style.styleFloat="right",a.style.width="0px",d.appendChild(a),this.rightContainer=a),a=document.createElement("div"),d.appendChild(a),this.centerContainer=a,d=document.createElement("div"),a.appendChild(d),this.panelsContainer=d},addPanels:function(){this.measurePanels();for(var a=this.panels,b=0;b<a.length;b++){var c=a[b],c=AmCharts.processObject(c,AmCharts.StockPanel,this.theme);a[b]=c,this.addStockPanel(c,b)}this.panelsAdded=!0},measurePanels:function(){this.measure();var a=this.chartScrollbarSettings,b=this.divRealHeight,c=this.panelsSettings.panelSpacing;a.enabled&&(b-=a.height),(a=this.periodSelector)&&!a.vertical&&(a=a.offsetHeight,b-=a+c),(a=this.dataSetSelector)&&!a.vertical&&(a=a.offsetHeight,b-=a+c),a=this.panels,this.panelsContainer.style.height=b+"px",this.chartCursors=[];var d,e,f=0;for(d=0;d<a.length;d++){e=a[d];var g=e.percentHeight;isNaN(g)&&(g=100/a.length,e.percentHeight=g),f+=g}for(this.panelsHeight=Math.max(b-c*(a.length-1),0),d=0;d<a.length;d++)e=a[d],e.percentHeight=e.percentHeight/f*100,e.panelBox&&(e.panelBox.style.height=Math.round(e.percentHeight*this.panelsHeight/100)+"px")},addStockPanel:function(a,b){var c=this.panelsSettings,d=document.createElement("div");d.className="amChartsPanel",b>0&&!this.panels[b-1].showCategoryAxis&&(d.style.marginTop=c.panelSpacing+"px"),a.panelBox=d,a.stockChart=this,a.id||(a.id="stockPanel"+b),a.pathToImages=this.pathToImages,d.style.height=Math.round(a.percentHeight*this.panelsHeight/100)+"px",d.style.width="100%",this.panelsContainer.appendChild(d),0<c.backgroundAlpha&&(d.style.backgroundColor=c.backgroundColor),(d=a.stockLegend)&&(d.container=void 0,d.title=a.title,d.marginLeft=c.marginLeft,d.marginRight=c.marginRight,d.verticalGap=3,d.position="top",AmCharts.copyProperties(this.legendSettings,d),a.addLegend(d,d.divId)),a.zoomOutText="",this.addCursor(a)},enableCursors:function(a){var b,c=this.chartCursors;for(b=0;b<c.length;b++)c[b].enabled=a},updatePanels:function(){var a,b=this.panels;for(a=0;a<b.length;a++)this.updatePanel(b[a]);this.mainDataSet&&this.updateGraphs(),this.currentPeriod=void 0},updatePanel:function(a){a.seriesIdField="amCategoryIdField",a.dataProvider=[],a.chartData=[],a.graphs=[];var b=a.categoryAxis,c=this.categoryAxesSettings;AmCharts.copyProperties(this.panelsSettings,a),AmCharts.copyProperties(c,b),b.parseDates=!0,a.zoomOutOnDataUpdate=!1,a.mouseWheelScrollEnabled=this.mouseWheelScrollEnabled,a.dataDateFormat=this.dataDateFormat,a.language=this.language,a.showCategoryAxis?"top"==b.position?a.marginTop=c.axisHeight:a.marginBottom=c.axisHeight:(a.categoryAxis.labelsEnabled=!1,a.chartCursor&&(a.chartCursor.categoryBalloonEnabled=!1));var d,c=a.valueAxes,e=c.length;for(0===e&&(d=new AmCharts.ValueAxis(this.theme),a.addValueAxis(d)),b=new AmCharts.AmBalloon(this.theme),AmCharts.copyProperties(this.balloon,b),a.balloon=b,c=a.valueAxes,e=c.length,b=0;e>b;b++)d=c[b],AmCharts.copyProperties(this.valueAxesSettings,d);a.listenersAdded=!1,a.write(a.panelBox)},zoom:function(a,b){this.zoomChart(a,b)},zoomOut:function(){this.zoomChart(this.firstDate,this.lastDate)},updatePanelsWithNewData:function(){var a=this.mainDataSet,b=this.scrollbarChart;if(a){var c=this.panels;this.currentPeriod=void 0;var d;for(d=0;d<c.length;d++){var e=c[d];e.categoryField=a.categoryField,0===a.dataProvider.length&&(e.dataProvider=[]),e.scrollbarChart=b}b&&(c=this.categoryAxesSettings,d=c.minPeriod,b.categoryField=a.categoryField,0<a.dataProvider.length?(e=this.chartScrollbarSettings.usePeriod,b.dataProvider=e?a.agregatedDataProviders[e]:a.agregatedDataProviders[d]):b.dataProvider=[],e=b.categoryAxis,e.minPeriod=d,e.firstDayOfWeek=this.firstDayOfWeek,e.equalSpacing=c.equalSpacing,e.axisAlpha=0,e.markPeriodChange=c.markPeriodChange,b.bbsetr=!0,b.validateData(),c=this.panelsSettings,b.maxSelectedTime=c.maxSelectedTime,b.minSelectedTime=c.minSelectedTime),0<a.dataProvider.length&&this.zoomChart(this.startDate,this.endDate)}this.panelDataInvalidated=!1},addChartScrollbar:function(){var a=this.chartScrollbarSettings,b=this.scrollbarChart;if(b&&(b.clear(),b.destroy()),a.enabled){var c=this.panelsSettings,d=this.categoryAxesSettings,b=new AmCharts.AmSerialChart(this.theme);b.language=this.language,b.pathToImages=this.pathToImages,b.autoMargins=!1,this.scrollbarChart=b,b.id="scrollbarChart",b.scrollbarOnly=!0,b.zoomOutText="",b.marginLeft=c.marginLeft,b.marginRight=c.marginRight,b.marginTop=0,b.marginBottom=0;var c=d.dateFormats,e=b.categoryAxis;if(e.boldPeriodBeginning=d.boldPeriodBeginning,c&&(e.dateFormats=d.dateFormats),e.labelsEnabled=!1,e.parseDates=!0,d=a.graph,AmCharts.isString(d)){for(c=this.panels,e=0;e<c.length;e++){var f=AmCharts.getObjById(c[e].stockGraphs,a.graph);f&&(d=f)}a.graph=d}var g;d&&(g=new AmCharts.AmGraph(this.theme),g.valueField=d.valueField,g.periodValue=d.periodValue,g.type=d.type,g.connect=d.connect,g.minDistance=a.minDistance,b.addGraph(g)),d=new AmCharts.ChartScrollbar(this.theme),b.addChartScrollbar(d),AmCharts.copyProperties(a,d),d.scrollbarHeight=a.height,d.graph=g,this.listenTo(d,"zoomed",this.handleScrollbarZoom),g=document.createElement("div"),g.style.height=a.height+"px",d=this.periodSelectorContainer,c=this.periodSelector,e=this.centerContainer,"bottom"==a.position?c&&"bottom"==c.position?e.insertBefore(g,d):e.appendChild(g):c&&"top"==c.position?e.insertBefore(g,d.nextSibling):e.insertBefore(g,e.firstChild),b.write(g)}},handleScrollbarZoom:function(a){if(this.skipScrollbarEvent)this.skipScrollbarEvent=!1;else{var b=a.endDate,c={};c.startDate=a.startDate,c.endDate=b,this.updateScrollbar=!1,this.handleZoom(c)}},addPeriodSelector:function(){var a=this.periodSelector;if(a){var b=this.categoryAxesSettings.minPeriod;a.minDuration=AmCharts.getPeriodDuration(b),a.minPeriod=b,a.chart=this;var c,d=this.dataSetSelector,b=this.dssContainer;d&&(c=d.position);var d=this.panelsSettings.panelSpacing,e=document.createElement("div");this.periodSelectorContainer=e;var f=this.leftContainer,g=this.rightContainer,h=this.centerContainer,i=this.panelsContainer,j=a.width+2*d+"px";switch(a.position){case"left":f.style.width=a.width+"px",f.appendChild(e),h.style.paddingLeft=j;break;case"right":h.style.marginRight=j,g.appendChild(e),g.style.width=a.width+"px";break;case"top":i.style.clear="both",h.insertBefore(e,i),e.style.paddingBottom=d+"px",e.style.overflow="hidden";break;case"bottom":e.style.marginTop=d+"px","bottom"==c?h.insertBefore(e,b):h.appendChild(e)}this.listenTo(a,"changed",this.handlePeriodSelectorZoom),a.write(e)}},addDataSetSelector:function(){var a=this.dataSetSelector;if(a){a.chart=this,a.dataProvider=this.dataSets;var b=a.position,c=this.panelsSettings.panelSpacing,d=document.createElement("div");this.dssContainer=d;var e=this.leftContainer,f=this.rightContainer,g=this.centerContainer,h=this.panelsContainer,c=a.width+2*c+"px";switch(b){case"left":e.style.width=a.width+"px",e.appendChild(d),g.style.paddingLeft=c;break;case"right":g.style.marginRight=c,f.appendChild(d),f.style.width=a.width+"px";break;case"top":h.style.clear="both",g.insertBefore(d,h),d.style.overflow="hidden";break;case"bottom":g.appendChild(d)}a.write(d)}},handlePeriodSelectorZoom:function(a){var b=this.scrollbarChart;b&&(b.updateScrollbar=!0),a.predefinedPeriod?(this.predefinedStart=a.startDate,this.predefinedEnd=a.endDate):this.predefinedEnd=this.predefinedStart=null,this.zoomChart(a.startDate,a.endDate)},addCursor:function(a){var b=this.chartCursorSettings;if(b.enabled){var c=new AmCharts.ChartCursor(this.theme);AmCharts.copyProperties(b,c),a.chartCursor&&AmCharts.copyProperties(a.chartCursor,c),a.removeChartCursor(),a.addChartCursor(c),this.listenTo(c,"changed",this.handleCursorChange),this.listenTo(c,"onHideCursor",this.hideChartCursor),this.listenTo(c,"zoomed",this.handleCursorZoom),this.chartCursors.push(c)}},hideChartCursor:function(){var a,b=this.chartCursors;for(a=0;a<b.length;a++){var c=b[a];c.hideCursor(!1),(c=c.chart)&&c.updateLegendValues()}},handleCursorZoom:function(a){var b=this.scrollbarChart;b&&(b.updateScrollbar=!0);var c,b={};if(this.categoryAxesSettings.equalSpacing){var d=this.mainDataSet.categoryField,e=this.mainDataSet.agregatedDataProviders[this.currentPeriod];c=new Date(e[a.start][d]),a=new Date(e[a.end][d])}else c=new Date(a.start),a=new Date(a.end);b.startDate=c,b.endDate=a,this.handleZoom(b)},handleZoom:function(a){this.zoomChart(a.startDate,a.endDate)},zoomChart:function(a,b){var c=new Date(a),d=this,e=d.firstDate,f=d.lastDate,g=d.currentPeriod,h=d.categoryAxesSettings,i=h.minPeriod,j=d.panelsSettings,k=d.periodSelector,l=d.panels,m=d.comparedGraphs,n=d.scrollbarChart,o=d.firstDayOfWeek;if(e&&f){if(a||(a=e),b||(b=f),g){var p=AmCharts.extractPeriod(g);a.getTime()==b.getTime()&&p!=i&&(b=AmCharts.changeDate(b,p.period,p.count),b.setTime(b.getTime()-1))}a.getTime()<e.getTime()&&(a=e),a.getTime()>f.getTime()&&(a=f),b.getTime()<e.getTime()&&(b=e),b.getTime()>f.getTime()&&(b=f),p=AmCharts.getItemIndex(i,h.groupToPeriods),h=g,g=d.choosePeriod(p,a,b),d.currentPeriod=g;var p=AmCharts.extractPeriod(g),q=AmCharts.getPeriodDuration(p.period,p.count);for(AmCharts.getPeriodDuration(i),1>b.getTime()-a.getTime()&&(a=new Date(b.getTime()-1)),i=AmCharts.newDate(a),d.extendToFullPeriod&&(i.getTime()-e.getTime()<.1*q&&(i=AmCharts.resetDateToMin(a,p.period,p.count,o)),f.getTime()-b.getTime()<.1*q&&(b=AmCharts.resetDateToMin(f,p.period,p.count,o),b=AmCharts.changeDate(b,p.period,p.count,!0))),e=0;e<l.length;e++)f=l[e],f.chartCursor&&f.chartCursor.panning&&(i=c);for(e=0;e<l.length;e++){if(f=l[e],g!=h){for(c=0;c<m.length;c++)q=m[c].graph,q.dataProvider=q.dataSet.agregatedDataProviders[g];c=f.categoryAxis,c.firstDayOfWeek=o,c.minPeriod=g,f.dataProvider=d.mainDataSet.agregatedDataProviders[g],(c=f.chartCursor)&&(c.categoryBalloonDateFormat=d.chartCursorSettings.categoryBalloonDateFormat(p.period),f.showCategoryAxis||(c.categoryBalloonEnabled=!1)),f.startTime=i.getTime(),f.endTime=b.getTime(),f.validateData(!0)}c=!1,f.chartCursor&&f.chartCursor.panning&&(c=!0),c||(f.startTime=void 0,f.endTime=void 0,f.zoomToDates(i,b)),0<j.startDuration&&d.animationPlayed&&!c?(f.startDuration=0,f.animateAgain()):0<j.startDuration&&!c&&f.animateAgain()}d.animationPlayed=!0,AmCharts.extractPeriod(g),j=new Date(b),n&&d.updateScrollbar&&(n.zoomToDates(a,j),d.skipScrollbarEvent=!0,setTimeout(function(){d.resetSkip.call(d)},100)),d.updateScrollbar=!0,d.startDate=a,d.endDate=b,k&&k.zoom(a,b),(a.getTime()!=d.previousStartDate.getTime()||b.getTime()!=d.previousEndDate.getTime())&&(k={type:"zoomed"},k.startDate=a,k.endDate=b,k.chart=d,k.period=g,d.fire(k.type,k),d.previousStartDate=new Date(a),d.previousEndDate=new Date(b))}d.eventsHidden&&d.showHideEvents(!1),d.chartCreated||(g="init",d.fire(g,{type:g,chart:d})),d.chartRendered||(g="rendered",d.fire(g,{type:g,chart:d}),d.chartRendered=!0),g="drawn",d.fire(g,{type:g,chart:d}),d.chartCreated=!0,d.animationPlayed=!0},resetSkip:function(){this.skipScrollbarEvent=!1},updateGraphs:function(){if(this.getSelections(),0<this.dataSets.length){var a=this.panels;this.comparedGraphs=[];var b;for(b=0;b<a.length;b++){var c,d=a[b],e=d.valueAxes;for(c=0;c<e.length;c++){var f=e[c];f.prevLog&&(f.logarithmic=f.prevLog),f.recalculateToPercents="always"==d.recalculateToPercents?!0:!1}e=this.mainDataSet,c=this.comparedDataSets,f=d.stockGraphs,d.graphs=[];var g;for(g=0;g<f.length;g++){var h=f[g],h=AmCharts.processObject(h,AmCharts.StockGraph,this.theme);f[g]=h,(!h.title||h.resetTitleOnDataSetChange)&&(h.title=e.title,h.resetTitleOnDataSetChange=!0),h.useDataSetColors&&(h.lineColor=e.color,h.fillColors=void 0,h.bulletColor=void 0);var i,j=!1,k=e.fieldMappings;for(i=0;i<k.length;i++){var l=k[i],m=h.valueField;m&&l.toField==m&&(j=!0),(m=h.openField)&&l.toField==m&&(j=!0),(m=h.closeField)&&l.toField==m&&(j=!0),(m=h.lowField)&&l.toField==m&&(j=!0)}d.addGraph(h),j||(h.visibleInLegend=!1),m=!1,"always"==d.recalculateToPercents&&(m=!0);var n,o,p,q,r=d.stockLegend;if(r&&(r=AmCharts.processObject(r,AmCharts.StockLegend,this.theme),d.stockLegend=r,n=r.valueTextComparing,o=r.valueTextRegular,p=r.periodValueTextComparing,q=r.periodValueTextRegular),h.comparable){var s=c.length;if(h.valueAxis){s>0&&h.valueAxis.logarithmic&&"never"!=d.recalculateToPercents&&(h.valueAxis.logarithmic=!1,h.valueAxis.prevLog=!0),s>0&&"whenComparing"==d.recalculateToPercents&&(h.valueAxis.recalculateToPercents=!0),r&&h.valueAxis&&!0===h.valueAxis.recalculateToPercents&&(m=!0);var t;for(t=0;s>t;t++){var u=c[t],v=h.comparedGraphs[u.id];v||(v=new AmCharts.AmGraph(this.theme),v.id="comparedGraph"+t+"_"+g+u.id),v.periodValue=h.periodValue,v.dataSet=u,v.behindColumns=h.behindColumns,h.comparedGraphs[u.id]=v,v.seriesIdField="amCategoryIdField",v.connect=h.connect;var w=h.compareField;for(w||(w=h.valueField),j=!1,k=u.fieldMappings,i=0;i<k.length;i++)l=k[i],l.toField==w&&(j=!0);j&&(v.valueField=w,v.title=u.title,v.lineColor=u.color,h.compareGraphType&&(v.type=h.compareGraphType),j=h.compareGraphLineThickness,isNaN(j)||(v.lineThickness=j),j=h.compareGraphDashLength,isNaN(j)||(v.dashLength=j),j=h.compareGraphLineAlpha,isNaN(j)||(v.lineAlpha=j),j=h.compareGraphCornerRadiusTop,isNaN(j)||(v.cornerRadiusTop=j),j=h.compareGraphCornerRadiusBottom,isNaN(j)||(v.cornerRadiusBottom=j),j=h.compareGraphBalloonColor,isNaN(j)||(v.balloonColor=j),j=h.compareGraphBulletColor,isNaN(j)||(v.bulletColor=j),(j=h.compareGraphFillColors)&&(v.fillColors=j),(j=h.compareGraphNegativeFillColors)&&(v.negativeFillColors=j),(j=h.compareGraphFillAlphas)&&(v.fillAlphas=j),(j=h.compareGraphNegativeFillAlphas)&&(v.negativeFillAlphas=j),(j=h.compareGraphBullet)&&(v.bullet=j),(j=h.compareGraphNumberFormatter)&&(v.numberFormatter=j),j=h.compareGraphPrecision,isNaN(j)||(v.precision=j),(j=h.compareGraphBalloonText)&&(v.balloonText=j),j=h.compareGraphBulletSize,isNaN(j)||(v.bulletSize=j),j=h.compareGraphBulletAlpha,isNaN(j)||(v.bulletAlpha=j),j=h.compareGraphBulletBorderAlpha,isNaN(j)||(v.bulletBorderAlpha=j),(j=h.compareGraphBulletBorderColor)&&(v.bulletBorderColor=j),j=h.compareGraphBulletBorderThickness,isNaN(j)||(v.bulletBorderThickness=j),v.visibleInLegend=h.compareGraphVisibleInLegend,v.balloonFunction=h.compareGraphBalloonFunction,v.hideBulletsCount=h.hideBulletsCount,v.valueAxis=h.valueAxis,r&&(m&&n?(v.legendValueText=n,v.legendPeriodValueText=p):(o&&(v.legendValueText=o),v.legendPeriodValueText=q)),d.showComparedOnTop?d.graphs.push(v):d.graphs.unshift(v),this.comparedGraphs.push({graph:v,dataSet:u}))}}}r&&(m&&n?(h.legendValueText=n,h.legendPeriodValueText=p):(o&&(h.legendValueText=o),h.legendPeriodValueText=q))}}}},choosePeriod:function(a,b,c){var d=this.categoryAxesSettings,e=d.groupToPeriods,f=e[a],e=e[a+1],g=AmCharts.extractPeriod(f),g=AmCharts.getPeriodDuration(g.period,g.count),h=b.getTime(),i=c.getTime(),d=d.maxSeries;return(i-h)/g>d&&d>0&&e?this.choosePeriod(a+1,b,c):f},handleCursorChange:function(a){var b=a.target,c=a.position,d=a.zooming;a=a.index;var e,f=this.chartCursors;for(e=0;e<f.length;e++){var g=f[e];g!=b&&c&&(g.isZooming(d),g.previousMousePosition=0/0,g.forceShow=!0,g.initialMouse=b.initialMouse,g.selectionPosX=b.selectionPosX,g.setPosition(c,!1,a))}},getSelections:function(){var a,b=[],c=this.dataSets;for(a=0;a<c.length;a++){var d=c[a];d.compared&&b.push(d)}for(this.comparedDataSets=b,c=this.panels,a=0;a<c.length;a++)d=c[a],"never"!=d.recalculateToPercents&&0<b.length?d.hideDrawingIcons(!0):d.drawingIconsEnabled&&d.hideDrawingIcons(!1)},addPanel:function(a){this.panels.push(a),AmCharts.removeChart(a),AmCharts.addChart(a)},addPanelAt:function(a,b){this.panels.splice(b,0,a),AmCharts.removeChart(a),AmCharts.addChart(a)},removePanel:function(a){var b,c=this.panels;for(b=c.length-1;b>=0;b--)if(c[b]==a){var d={type:"panelRemoved",panel:a,chart:this};this.fire(d.type,d),c.splice(b,1),a.destroy(),a.clear()}},validateData:function(){this.resetDataParsed(),this.updateDataSets(),this.mainDataSet.compared=!1,this.updateGraphs(),this.updateData();var a=this.dataSetSelector;a&&a.write(a.div)},resetDataParsed:function(){var a,b=this.dataSets;for(a=0;a<b.length;a++)b[a].dataParsed=!1},validateNow:function(){this.skipDefault=!0,this.chartRendered=!1,this.clear(!0),this.write(this.div)},hideStockEvents:function(){this.showHideEvents(!1),this.eventsHidden=!0},showStockEvents:function(){this.showHideEvents(!0),this.eventsHidden=!1},showHideEvents:function(a){var b,c=this.panels;for(b=0;b<c.length;b++){var d,e=c[b].graphs;for(d=0;d<e.length;d++){var f=e[d];!0===a?f.showBullets():f.hideBullets()}}},invalidateSize:function(){var a=this;clearTimeout(a.validateTO);var b=setTimeout(function(){a.validateNow()},5);a.validateTO=b},measure:function(){var a=this.div,b=a.offsetWidth,c=a.offsetHeight;a.clientHeight&&(b=a.clientWidth,c=a.clientHeight),this.divRealWidth=b,this.divRealHeight=c},clear:function(a){var b,c=this.panels;if(c)for(b=0;b<c.length;b++){var d=c[b];a||(d.cleanChart(),d.destroy()),d.clear(a)}(c=this.scrollbarChart)&&c.clear(),(c=this.div)&&(c.innerHTML=""),a||(this.div=null,AmCharts.deleteObject(this))}}),AmCharts.StockEvent=AmCharts.Class({construct:function(){}}),AmCharts.DataSet=AmCharts.Class({construct:function(){this.cname="DataSet",this.fieldMappings=[],this.dataProvider=[],this.agregatedDataProviders=[],this.stockEvents=[],this.compared=!1,this.showInCompare=this.showInSelect=!0}}),AmCharts.PeriodSelector=AmCharts.Class({construct:function(a){this.cname="PeriodSelector",this.theme=a,this.createEvents("changed"),this.inputFieldsEnabled=!0,this.position="bottom",this.width=180,this.fromText="From: ",this.toText="to: ",this.periodsText="Zoom: ",this.periods=[],this.inputFieldWidth=100,this.dateFormat="DD-MM-YYYY",this.hideOutOfScopePeriods=!0,AmCharts.applyTheme(this,a,this.cname)},zoom:function(a,b){var c=this.chart;this.inputFieldsEnabled&&(this.startDateField.value=AmCharts.formatDate(a,this.dateFormat,c),this.endDateField.value=AmCharts.formatDate(b,this.dateFormat,c)),this.markButtonAsSelected()},write:function(a){var b=this;a.className="amChartsPeriodSelector";var c=b.width,d=b.position;b.width=void 0,b.position=void 0,AmCharts.applyStyles(a.style,b),b.width=c,b.position=d,b.div=a,a.innerHTML="",c=b.theme,d=b.position,d="top"==d||"bottom"==d?!1:!0,b.vertical=d;var e=0,f=0;if(b.inputFieldsEnabled){var g=document.createElement("div");a.appendChild(g);var h=document.createTextNode(AmCharts.lang.fromText||b.fromText);g.appendChild(h),d?AmCharts.addBr(g):(g.style.styleFloat="left",g.style.display="inline");var i=document.createElement("input");if(i.className="amChartsInputField",c&&AmCharts.applyStyles(i.style,c.PeriodInputField),i.style.textAlign="center",i.onblur=function(a){b.handleCalChange(a)},AmCharts.isNN&&i.addEventListener("keypress",function(a){b.handleCalendarChange.call(b,a)},!0),AmCharts.isIE&&i.attachEvent("onkeypress",function(a){b.handleCalendarChange.call(b,a)}),g.appendChild(i),b.startDateField=i,d)h=b.width-6+"px",AmCharts.addBr(g);else{var h=b.inputFieldWidth+"px",j=document.createTextNode(" ");g.appendChild(j)}i.style.width=h,i=document.createTextNode(AmCharts.lang.toText||b.toText),g.appendChild(i),d&&AmCharts.addBr(g),i=document.createElement("input"),i.className="amChartsInputField",c&&AmCharts.applyStyles(i.style,c.PeriodInputField),i.style.textAlign="center",i.onblur=function(){b.handleCalChange()},AmCharts.isNN&&i.addEventListener("keypress",function(a){b.handleCalendarChange.call(b,a)},!0),AmCharts.isIE&&i.attachEvent("onkeypress",function(a){b.handleCalendarChange.call(b,a)}),g.appendChild(i),b.endDateField=i,d?AmCharts.addBr(g):e=i.offsetHeight+2,h&&(i.style.width=h)}if(g=b.periods,AmCharts.ifArray(g)){h=document.createElement("div"),d||(h.style.cssFloat="right",h.style.styleFloat="right",h.style.display="inline"),a.appendChild(h),d&&AmCharts.addBr(h),a=document.createTextNode(AmCharts.lang.periodsText||b.periodsText),h.appendChild(a),b.periodContainer=h;var k;for(a=0;a<g.length;a++)i=g[a],k=document.createElement("input"),k.type="button",k.value=i.label,k.period=i.period,k.count=i.count,k.periodObj=i,k.className="amChartsButton",c&&AmCharts.applyStyles(k.style,c.PeriodButton),d&&(k.style.width=b.width-1+"px"),k.style.boxSizing="border-box",h.appendChild(k),b.addEventListeners(k),i.button=k;!d&&k&&(f=k.offsetHeight),b.offsetHeight=Math.max(e,f)}},addEventListeners:function(a){var b=this;AmCharts.isNN&&a.addEventListener("click",function(a){b.handlePeriodChange.call(b,a)},!0),AmCharts.isIE&&a.attachEvent("onclick",function(a){b.handlePeriodChange.call(b,a)})},getPeriodDates:function(){var a,b=this.periods;for(a=0;a<b.length;a++)this.selectPeriodButton(b[a],!0)},handleCalendarChange:function(a){13==a.keyCode&&this.handleCalChange(a)},handleCalChange:function(a){var b=this.dateFormat,c=AmCharts.stringToDate(this.startDateField.value,b),b=this.chart.getLastDate(AmCharts.stringToDate(this.endDateField.value,b));try{this.startDateField.blur(),this.endDateField.blur()}catch(d){}if(c&&b){var e={type:"changed"};e.startDate=c,e.endDate=b,e.chart=this.chart,e.event=a,this.fire(e.type,e)}},handlePeriodChange:function(a){this.selectPeriodButton((a.srcElement?a.srcElement:a.target).periodObj,!1,a)},setRanges:function(a,b){this.firstDate=a,this.lastDate=b,this.getPeriodDates()},selectPeriodButton:function(a,b,c){var d,e,f,g=a.button,h=g.count,i=g.period,j=this.firstDate,k=this.lastDate,l=this.theme;j&&k&&("MAX"==i?(d=j,e=k):"YTD"==i?(d=new Date,d.setMonth(0,1),d.setHours(0,0,0,0),0===h&&d.setDate(d.getDate()-1),e=this.lastDate):"YYYY"==i||"MM"==i?this.selectFromStart?(d=j,e=new Date(j),e.setMonth(e.getMonth()+h)):(d=new Date(k),AmCharts.changeDate(d,i,h,!1),d.setDate(d.getDate()-1),e=k):(f=AmCharts.getPeriodDuration(i,h),this.selectFromStart?(d=j,e=new Date(j.getTime()+f-1)):(d=new Date(k.getTime()-f+1),e=k)),a.startTime=d.getTime(),this.hideOutOfScopePeriods&&(g.style.display=b&&a.startTime<j.getTime()?"none":"inline"),d.getTime()>k.getTime()&&(f=AmCharts.getPeriodDuration("DD",1),d=new Date(k.getTime()-f)),d.getTime()<j.getTime()&&(d=j),"YTD"==i&&(a.startTime=d.getTime()),a.endTime=e.getTime(),b||(this.skipMark=!0,this.unselectButtons(),g.className="amChartsButtonSelected",l&&AmCharts.applyStyles(g.style,l.PeriodButtonSelected),a={type:"changed"},a.startDate=d,a.endDate=e,a.predefinedPeriod=i,a.chart=this.chart,a.count=h,a.event=c,this.fire(a.type,a)))},markButtonAsSelected:function(){if(!this.skipMark){var a=this.chart,b=this.periods,c=a.startDate.getTime(),a=a.endDate.getTime(),d=this.lastDate.getTime();a>d&&(a=d),d=this.theme,this.unselectButtons();var e;for(e=b.length-1;e>=0;e--){var f=b[e],g=f.button;f.startTime&&f.endTime&&c==f.startTime&&a==f.endTime&&(this.unselectButtons(),g.className="amChartsButtonSelected",d&&AmCharts.applyStyles(g.style,d.PeriodButtonSelected))}}this.skipMark=!1},unselectButtons:function(){var a,b=this.periods,c=this.theme;for(a=b.length-1;a>=0;a--){var d=b[a].button;d.className="amChartsButton",c&&AmCharts.applyStyles(d.style,c.PeriodButton)}},setDefaultPeriod:function(){var a,b=this.periods;for(a=0;a<b.length;a++){var c=b[a];c.selected&&this.selectPeriodButton(c)}}}),AmCharts.StockGraph=AmCharts.Class({inherits:AmCharts.AmGraph,construct:function(a){AmCharts.StockGraph.base.construct.call(this,a),this.cname="StockGraph",this.useDataSetColors=!0,this.periodValue="Close",this.compareGraphType="line",this.compareGraphVisibleInLegend=!0,this.comparable=this.resetTitleOnDataSetChange=!1,this.comparedGraphs={},this.showEventsOnComparedGraphs=!1,AmCharts.applyTheme(this,a,this.cname)}}),AmCharts.StockPanel=AmCharts.Class({inherits:AmCharts.AmSerialChart,construct:function(a){AmCharts.StockPanel.base.construct.call(this,a),this.cname="StockPanel",this.theme=a,this.showCategoryAxis=this.showComparedOnTop=!0,this.recalculateToPercents="whenComparing",this.panelHeaderPaddingBottom=this.panelHeaderPaddingLeft=this.panelHeaderPaddingRight=this.panelHeaderPaddingTop=0,this.trendLineAlpha=1,this.trendLineColor="#00CC00",this.trendLineColorHover="#CC0000",this.trendLineThickness=2,this.trendLineDashLength=0,this.stockGraphs=[],this.drawingIconsEnabled=!1,this.iconSize=18,this.autoMargins=this.allowTurningOff=this.eraseAll=this.erasingEnabled=this.drawingEnabled=!1,AmCharts.applyTheme(this,a,this.cname)},initChart:function(a){AmCharts.StockPanel.base.initChart.call(this,a),this.drawingIconsEnabled&&this.createDrawIcons(),(a=this.chartCursor)&&this.listenTo(a,"draw",this.handleDraw)},addStockGraph:function(a){return this.stockGraphs.push(a),a},handleCursorZoom:function(a){this.chartCursor&&this.chartCursor.pan&&AmCharts.StockPanel.base.handleCursorZoom.call(this,a)},removeStockGraph:function(a){var b,c=this.stockGraphs;for(b=c.length-1;b>=0;b--)c[b]==a&&c.splice(b,1)},createDrawIcons:function(){var a=this,b=a.iconSize,c=a.container,d=a.pathToImages,e=a.realWidth-2*b-1-a.marginRight,f=AmCharts.rect(c,b,b,"#000",.005),g=AmCharts.rect(c,b,b,"#000",.005);g.translate(b+1,0);var h=c.image(d+"pencilIcon.gif",0,0,b,b);a.pencilButton=h,g.setAttr("cursor","pointer"),f.setAttr("cursor","pointer"),f.mouseup(function(){a.handlePencilClick()});var i=c.image(d+"pencilIconH.gif",0,0,b,b);a.pencilButtonPushed=i,a.drawingEnabled||i.hide();var j=c.image(d+"eraserIcon.gif",b+1,0,b,b);a.eraserButton=j,g.mouseup(function(){a.handleEraserClick()}),f.touchend&&(f.touchend(function(){a.handlePencilClick()}),g.touchend(function(){a.handleEraserClick()})),b=c.image(d+"eraserIconH.gif",b+1,0,b,b),a.eraserButtonPushed=b,a.erasingEnabled||b.hide(),c=c.set([h,i,j,b,f,g]),c.translate(e,1),this.hideIcons&&c.hide()},handlePencilClick:function(){var a=!this.drawingEnabled;this.disableDrawing(!a),this.erasingEnabled=!1;var b=this.eraserButtonPushed;b&&b.hide(),b=this.pencilButtonPushed,a?b&&b.show():(b&&b.hide(),this.setMouseCursor("auto"))},disableDrawing:function(a){this.drawingEnabled=!a;var b=this.chartCursor;this.stockChart.enableCursors(a),b&&b.enableDrawing(!a)},handleEraserClick:function(){this.disableDrawing(!0);var a=this.pencilButtonPushed;if(a&&a.hide(),a=this.eraserButtonPushed,this.eraseAll){var b,a=this.trendLines;for(b=a.length-1;b>=0;b--){var c=a[b];c.isProtected||this.removeTrendLine(c)}this.validateNow()}else(this.erasingEnabled=b=!this.erasingEnabled)?(a&&a.show(),this.setTrendColorHover(this.trendLineColorHover),this.setMouseCursor("auto")):(a&&a.hide(),this.setTrendColorHover())},setTrendColorHover:function(a){var b,c=this.trendLines;for(b=c.length-1;b>=0;b--){var d=c[b];d.isProtected||(d.rollOverColor=a)}},handleDraw:function(a){var b=this.drawOnAxis;AmCharts.isString(b)&&(b=this.getValueAxisById(b)),b||(b=this.valueAxes[0]),this.drawOnAxis=b;var c=this.categoryAxis,d=a.initialX,e=a.finalX,f=a.initialY;a=a.finalY;var g=new AmCharts.TrendLine(this.theme);g.initialDate=c.coordinateToDate(d),g.finalDate=c.coordinateToDate(e),g.initialValue=b.coordinateToValue(f),g.finalValue=b.coordinateToValue(a),g.lineAlpha=this.trendLineAlpha,g.lineColor=this.trendLineColor,g.lineThickness=this.trendLineThickness,g.dashLength=this.trendLineDashLength,g.valueAxis=b,g.categoryAxis=c,this.addTrendLine(g),this.listenTo(g,"click",this.handleTrendClick),this.validateNow()},hideDrawingIcons:function(a){(this.hideIcons=a)&&this.disableDrawing(a)
},handleTrendClick:function(a){this.erasingEnabled&&(a=a.trendLine,this.eraseAll||a.isProtected||this.removeTrendLine(a),this.validateNow())},handleWheelReal:function(a,b){var c=this.scrollbarChart;if(!this.wheelBusy&&c){var d=1;b&&(d=-1);var c=c.chartScrollbar,e=this.categoryAxis.minDuration();0>a?(d=this.startTime+d*e,e=this.endTime+1*e):(d=this.startTime-d*e,e=this.endTime-1*e),d<this.firstTime&&(d=this.firstTime),e>this.lastTime&&(e=this.lastTime),e>d&&c.timeZoom(d,e,!0)}}}),AmCharts.CategoryAxesSettings=AmCharts.Class({construct:function(a){this.cname="CategoryAxesSettings",this.minPeriod="DD",this.equalSpacing=!1,this.axisHeight=28,this.tickLength=this.axisAlpha=0,this.gridCount=10,this.maxSeries=150,this.groupToPeriods="ss 10ss 30ss mm 10mm 30mm hh DD WW MM YYYY".split(" "),this.markPeriodChange=this.autoGridCount=!0,AmCharts.applyTheme(this,a,this.cname)}}),AmCharts.ChartCursorSettings=AmCharts.Class({construct:function(a){this.cname="ChartCursorSettings",this.enabled=!0,this.bulletsEnabled=this.valueBalloonsEnabled=!1,this.categoryBalloonDateFormats=[{period:"YYYY",format:"YYYY"},{period:"MM",format:"MMM, YYYY"},{period:"WW",format:"MMM DD, YYYY"},{period:"DD",format:"MMM DD, YYYY"},{period:"hh",format:"JJ:NN"},{period:"mm",format:"JJ:NN"},{period:"ss",format:"JJ:NN:SS"},{period:"fff",format:"JJ:NN:SS"}],AmCharts.applyTheme(this,a,this.cname)},categoryBalloonDateFormat:function(a){var b,c,d=this.categoryBalloonDateFormats;for(c=0;c<d.length;c++)d[c].period==a&&(b=d[c].format);return b}}),AmCharts.ChartScrollbarSettings=AmCharts.Class({construct:function(a){this.cname="ChartScrollbarSettings",this.height=40,this.enabled=!0,this.color="#FFFFFF",this.updateOnReleaseOnly=this.autoGridCount=!0,this.hideResizeGrips=!1,this.position="bottom",this.minDistance=1,AmCharts.applyTheme(this,a,this.cname)}}),AmCharts.LegendSettings=AmCharts.Class({construct:function(a){this.cname="LegendSettings",this.marginBottom=this.marginTop=0,this.usePositiveNegativeOnPercentsOnly=!0,this.positiveValueColor="#00CC00",this.negativeValueColor="#CC0000",this.autoMargins=this.equalWidths=this.textClickEnabled=!1,AmCharts.applyTheme(this,a,this.cname)}}),AmCharts.PanelsSettings=AmCharts.Class({construct:function(a){this.cname="PanelsSettings",this.marginBottom=this.marginTop=this.marginRight=this.marginLeft=0,this.backgroundColor="#FFFFFF",this.backgroundAlpha=0,this.panelSpacing=8,this.panEventsEnabled=!0,this.creditsPosition="top-right",AmCharts.applyTheme(this,a,this.cname)}}),AmCharts.StockEventsSettings=AmCharts.Class({construct:function(a){this.cname="StockEventsSettings",this.type="sign",this.backgroundAlpha=1,this.backgroundColor="#DADADA",this.borderAlpha=1,this.borderColor="#888888",this.balloonColor=this.rollOverColor="#CC0000",AmCharts.applyTheme(this,a,this.cname)}}),AmCharts.ValueAxesSettings=AmCharts.Class({construct:function(a){this.cname="ValueAxesSettings",this.tickLength=0,this.showFirstLabel=this.autoGridCount=this.inside=!0,this.showLastLabel=!1,this.axisAlpha=0,AmCharts.applyTheme(this,a,this.cname)}}),AmCharts.getItemIndex=function(a,b){var c,d=-1;for(c=0;c<b.length;c++)a==b[c]&&(d=c);return d},AmCharts.addBr=function(a){a.appendChild(document.createElement("br"))},AmCharts.applyStyles=function(a,b){if(b&&a)for(var c in a){var d=c,e=b[d];if(void 0!==e)try{a[d]=e}catch(f){}}},AmCharts.parseStockData=function(a,b,c,d,e){(new Date).getTime();var f={},g=a.dataProvider,h=a.categoryField;if(h){var i,j,k=AmCharts.getItemIndex(b,c),l=c.length,m=g.length,n={};for(i=k;l>i;i++)j=c[i],f[j]=[];var o={},p=a.fieldMappings,q=p.length;for(i=0;m>i;i++){var r=g[i],s=r[h],s=s instanceof Date?AmCharts.newDate(s,b):e?AmCharts.stringToDate(s,e):new Date(s),t=s.getTime(),u={};for(j=0;q>j;j++)u[p[j].toField]=r[p[j].fromField];var v;for(v=k;l>v;v++){j=c[v];var w,x,y=AmCharts.extractPeriod(j),z=y.period,A=y.count;if(v==k||t>=n[j]||!n[j]){o[j]={},o[j].amCategoryIdField=String(AmCharts.resetDateToMin(s,z,A,d).getTime());var B;for(B=0;q>B;B++)y=p[B].toField,w=o[j],x=Number(u[y]),w[y+"Count"]=0,w[y+"Sum"]=0,isNaN(x)||(w[y+"Open"]=x,w[y+"Sum"]=x,w[y+"High"]=x,w[y+"Low"]=x,w[y+"Close"]=x,w[y+"Count"]=1,w[y+"Average"]=x);if(w.dataContext=r,f[j].push(o[j]),v>k&&(y=AmCharts.newDate(s,b),y=AmCharts.changeDate(y,z,A,!0),y=AmCharts.resetDateToMin(y,z,A,d),n[j]=y.getTime()),v==k)for(var C in r)r.hasOwnProperty(C)&&(o[j][C]=r[C]);o[j][h]=AmCharts.newDate(s,b)}else for(z=0;q>z;z++)y=p[z].toField,w=o[j],i==m-1&&(w[h]=AmCharts.newDate(s,b)),x=Number(u[y]),isNaN(x)||(isNaN(w[y+"Low"])&&(w[y+"Low"]=x),x<w[y+"Low"]&&(w[y+"Low"]=x),isNaN(w[y+"High"])&&(w[y+"High"]=x),x>w[y+"High"]&&(w[y+"High"]=x),w[y+"Close"]=x,A=AmCharts.getDecimals(w[y+"Sum"]),B=AmCharts.getDecimals(x),w[y+"Sum"]+=x,w[y+"Sum"]=AmCharts.roundTo(w[y+"Sum"],Math.max(A,B)),w[y+"Count"]++,w[y+"Average"]=w[y+"Sum"]/w[y+"Count"])}}}a.agregatedDataProviders=f},AmCharts.parseEvents=function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o=a.stockEvents,p=a.agregatedDataProviders,q=b.length;for(g=0;q>g;g++){l=b[g],k=l.graphs,i=k.length;var r;for(h=0;i>h;h++)j=k[h],j.customBulletField="amCustomBullet"+j.id+"_"+l.id,j.bulletConfigField="amCustomBulletConfig"+j.id+"_"+l.id;for(var s=0;s<o.length;s++)m=o[s],r=m.graph,AmCharts.isString(r)&&(r=AmCharts.getObjById(k,r))&&(m.graph=r)}for(var t in p)if(p.hasOwnProperty(t)){r=p[t];var u,v=AmCharts.extractPeriod(t),w=r.length;for(u=0;w>u;u++){var x=r[u];g=x[a.categoryField],n=g instanceof Date,f&&!n&&(g=AmCharts.stringToDate(g,f));var y=g.getTime();k=v.period;var z,s=v.count;for(z="fff"==k?g.getTime()+1:AmCharts.resetDateToMin(AmCharts.changeDate(new Date(g),v.period,v.count),k,s,d).getTime(),g=0;q>g;g++)for(l=b[g],k=l.graphs,i=k.length,h=0;i>h;h++){j=k[h];var A={};for(A.eventDispatcher=e,A.eventObjects=[],A.letters=[],A.descriptions=[],A.shapes=[],A.backgroundColors=[],A.backgroundAlphas=[],A.borderColors=[],A.borderAlphas=[],A.colors=[],A.rollOverColors=[],A.showOnAxis=[],A.values=[],A.showAts=[],s=0;s<o.length;s++){m=o[s],n=m.date instanceof Date,f&&!n&&(m.date=AmCharts.stringToDate(m.date,f)),n=m.date.getTime();var B=!1;m.graph&&(m.graph.showEventsOnComparedGraphs&&m.graph.comparedGraphs[a.id]&&(B=!0),(j==m.graph||B)&&n>=y&&z>n&&(A.eventObjects.push(m),A.letters.push(m.text),A.descriptions.push(m.description),A.shapes.push(m.type?m.type:c.type),A.backgroundColors.push(void 0!==m.backgroundColor?m.backgroundColor:c.backgroundColor),A.backgroundAlphas.push(isNaN(m.backgroundAlpha)?c.backgroundAlpha:m.backgroundAlpha),A.borderAlphas.push(isNaN(m.borderAlpha)?c.borderAlpha:m.borderAlpha),A.borderColors.push(void 0!==m.borderColor?m.borderColor:c.borderColor),A.rollOverColors.push(void 0!==m.rollOverColor?m.rollOverColor:c.rollOverColor),A.showAts.push(void 0!==m.showAt?m.showAt:c.showAt),A.colors.push(m.color),A.values.push(m.value),!m.panel&&m.graph&&(m.panel=m.graph.chart),A.showOnAxis.push(m.showOnAxis),A.date=new Date(m.date))),0<A.shapes.length&&(m="amCustomBullet"+j.id+"_"+l.id,n="amCustomBulletConfig"+j.id+"_"+l.id,x[m]=AmCharts.StackedBullet,x[n]=A)}}}}},AmCharts.StockLegend=AmCharts.Class({inherits:AmCharts.AmLegend,construct:function(a){AmCharts.StockLegend.base.construct.call(this,a),this.cname="StockLegend",this.valueTextComparing="[[percents.value]]%",this.valueTextRegular="[[value]]",AmCharts.applyTheme(this,a,this.cname)},drawLegend:function(){var a=this;AmCharts.StockLegend.base.drawLegend.call(a);var b=a.chart;if(b.allowTurningOff){var c=a.container,d=c.image(b.pathToImages+"xIcon.gif",b.realWidth-17,3,17,17),b=c.image(b.pathToImages+"xIconH.gif",b.realWidth-17,3,17,17);b.hide(),a.xButtonHover=b,d.mouseup(function(){a.handleXClick()}).mouseover(function(){a.handleXOver()}),b.mouseup(function(){a.handleXClick()}).mouseout(function(){a.handleXOut()})}},handleXOver:function(){this.xButtonHover.show()},handleXOut:function(){this.xButtonHover.hide()},handleXClick:function(){var a=this.chart,b=a.stockChart;b.removePanel(a),b.validateNow()}}),AmCharts.DataSetSelector=AmCharts.Class({construct:function(a){this.cname="DataSetSelector",this.theme=a,this.createEvents("dataSetSelected","dataSetCompared","dataSetUncompared"),this.position="left",this.selectText="Select:",this.comboBoxSelectText="Select...",this.compareText="Compare to:",this.width=180,this.dataProvider=[],this.listHeight=150,this.listCheckBoxSize=14,this.rollOverBackgroundColor="#b2e1ff",this.selectedBackgroundColor="#7fceff",AmCharts.applyTheme(this,a,this.cname)},write:function(a){var b,c=this,d=c.theme;a.className="amChartsDataSetSelector";var e=c.width;b=c.position,c.width=void 0,c.position=void 0,AmCharts.applyStyles(a.style,c),c.div=a,c.width=e,c.position=b,a.innerHTML="";var f,e=c.position;f="top"==e||"bottom"==e?!1:!0,c.vertical=f;var g;f&&(g=c.width+"px");var h,i,e=c.dataProvider;if(1<c.countDataSets("showInSelect")){b=document.createTextNode(AmCharts.lang.selectText||c.selectText),a.appendChild(b),f&&AmCharts.addBr(a);var j=document.createElement("select");for(g&&(j.style.width=g),c.selectCB=j,d&&AmCharts.applyStyles(j.style,d.DataSetSelect),a.appendChild(j),AmCharts.isNN&&j.addEventListener("change",function(a){c.handleDataSetChange.call(c,a)},!0),AmCharts.isIE&&j.attachEvent("onchange",function(a){c.handleDataSetChange.call(c,a)}),b=0;b<e.length;b++)if(h=e[b],!0===h.showInSelect){i=document.createElement("option"),i.text=h.title,i.value=b,h==c.chart.mainDataSet&&(i.selected=!0);try{j.add(i,null)}catch(k){j.add(i)}}c.offsetHeight=j.offsetHeight}if(0<c.countDataSets("showInCompare")&&1<e.length)if(f?(AmCharts.addBr(a),AmCharts.addBr(a)):(b=document.createTextNode(" "),a.appendChild(b)),b=document.createTextNode(AmCharts.lang.compareText||c.compareText),a.appendChild(b),i=c.listCheckBoxSize,f){for(AmCharts.addBr(a),g=document.createElement("div"),a.appendChild(g),g.className="amChartsCompareList",d&&AmCharts.applyStyles(g.style,d.DataSetCompareList),g.style.overflow="auto",g.style.overflowX="hidden",g.style.width=c.width-2+"px",g.style.maxHeight=c.listHeight+"px",b=0;b<e.length;b++)h=e[b],!0===h.showInCompare&&h!=c.chart.mainDataSet&&(d=document.createElement("div"),d.style.padding="4px",d.style.position="relative",d.name="amCBContainer",d.dataSet=h,d.style.height=i+"px",h.compared&&(d.style.backgroundColor=c.selectedBackgroundColor),g.appendChild(d),f=document.createElement("div"),f.style.width=i+"px",f.style.height=i+"px",f.style.position="absolute",f.style.backgroundColor=h.color,d.appendChild(f),f=document.createElement("div"),f.style.width="100%",f.style.position="absolute",f.style.left=i+10+"px",d.appendChild(f),h=document.createTextNode(h.title),f.style.whiteSpace="nowrap",f.style.cursor="default",f.appendChild(h),c.addEventListeners(d));AmCharts.addBr(a),AmCharts.addBr(a)}else{d=document.createElement("select"),c.compareCB=d,g&&(d.style.width=g),a.appendChild(d),AmCharts.isNN&&d.addEventListener("change",function(a){c.handleCBSelect.call(c,a)},!0),AmCharts.isIE&&d.attachEvent("onchange",function(a){c.handleCBSelect.call(c,a)}),i=document.createElement("option"),i.text=AmCharts.lang.comboBoxSelectText||c.comboBoxSelectText;try{d.add(i,null)}catch(l){d.add(i)}for(b=0;b<e.length;b++)if(h=e[b],!0===h.showInCompare&&h!=c.chart.mainDataSet){i=document.createElement("option"),i.text=h.title,i.value=b,h.compared&&(i.selected=!0);try{d.add(i,null)}catch(m){d.add(i)}}c.offsetHeight=d.offsetHeight}},addEventListeners:function(a){var b=this;AmCharts.isNN&&(a.addEventListener("mouseover",function(a){b.handleRollOver.call(b,a)},!0),a.addEventListener("mouseout",function(a){b.handleRollOut.call(b,a)},!0),a.addEventListener("click",function(a){b.handleClick.call(b,a)},!0)),AmCharts.isIE&&(a.attachEvent("onmouseout",function(a){b.handleRollOut.call(b,a)}),a.attachEvent("onmouseover",function(a){b.handleRollOver.call(b,a)}),a.attachEvent("onclick",function(a){b.handleClick.call(b,a)}))},handleDataSetChange:function(){var a=this.selectCB,a=this.dataProvider[a.options[a.selectedIndex].value],b=this.chart;b.mainDataSet=a,b.zoomOutOnDataSetChange&&(b.startDate=void 0,b.endDate=void 0),b.validateData(),a={type:"dataSetSelected",dataSet:a,chart:this.chart},this.fire(a.type,a)},handleRollOver:function(a){a=this.getRealDiv(a),a.dataSet.compared||(a.style.backgroundColor=this.rollOverBackgroundColor)},handleRollOut:function(a){a=this.getRealDiv(a),a.dataSet.compared||(a.style.removeProperty&&a.style.removeProperty("background-color"),a.style.removeAttribute&&a.style.removeAttribute("backgroundColor"))},handleCBSelect:function(a){var b,c,d=this.compareCB,e=this.dataProvider;for(b=0;b<e.length;b++)c=e[b],c.compared&&(a={type:"dataSetUncompared",dataSet:c}),c.compared=!1;e=d.selectedIndex,e>0&&(c=this.dataProvider[d.options[e].value],c.compared||(a={type:"dataSetCompared",dataSet:c}),c.compared=!0),d=this.chart,d.validateData(),a.chart=d,this.fire(a.type,a)},handleClick:function(a){a=this.getRealDiv(a).dataSet,!0===a.compared?(a.compared=!1,a={type:"dataSetUncompared",dataSet:a}):(a.compared=!0,a={type:"dataSetCompared",dataSet:a});var b=this.chart;b.validateData(),a.chart=b,this.fire(a.type,a)},getRealDiv:function(a){return a||(a=window.event),a=a.currentTarget?a.currentTarget:a.srcElement,"amCBContainer"==a.parentNode.name&&(a=a.parentNode),a},countDataSets:function(a){var b,c=this.dataProvider,d=0;for(b=0;b<c.length;b++)!0===c[b][a]&&d++;return d}}),AmCharts.StackedBullet=AmCharts.Class({construct:function(){this.fontSize=11,this.stackDown=!1,this.mastHeight=8,this.shapes=[],this.backgroundColors=[],this.backgroundAlphas=[],this.borderAlphas=[],this.borderColors=[],this.colors=[],this.rollOverColors=[],this.showOnAxiss=[],this.values=[],this.showAts=[],this.textColor="#000000",this.nextY=0,this.size=16},parseConfig:function(){var a=this.bulletConfig;this.eventObjects=a.eventObjects,this.letters=a.letters,this.shapes=a.shapes,this.backgroundColors=a.backgroundColors,this.backgroundAlphas=a.backgroundAlphas,this.borderColors=a.borderColors,this.borderAlphas=a.borderAlphas,this.colors=a.colors,this.rollOverColors=a.rollOverColors,this.date=a.date,this.showOnAxiss=a.showOnAxis,this.axisCoordinate=a.minCoord,this.showAts=a.showAts,this.values=a.values},write:function(a){if(this.parseConfig(),this.container=a,this.bullets=[],this.graph){var b=this.graph.fontSize;b&&(this.fontSize=b)}b=this.letters.length,(this.mastHeight+2*(this.fontSize/2+2))*b>this.availableSpace&&(this.stackDown=!0),this.set=a.set(),a=0;var c;for(c=0;b>c;c++)this.shape=this.shapes[c],this.backgroundColor=this.backgroundColors[c],this.backgroundAlpha=this.backgroundAlphas[c],this.borderAlpha=this.borderAlphas[c],this.borderColor=this.borderColors[c],this.rollOverColor=this.rollOverColors[c],this.showOnAxis=this.showOnAxiss[c],this.color=this.colors[c],this.value=this.values[c],this.showAt=this.showAts[c],this.addLetter(this.letters[c],a,c),this.showOnAxis||a++},addLetter:function(a,b,c){var d=this.container;b=d.set();var e=-1,f=this.stackDown,g=this.graph.valueAxis;this.showOnAxis&&(this.stackDown=g.reversed?!0:!1),this.stackDown&&(e=1);var h,i=0,j=0,k=0,l=this.fontSize,m=this.mastHeight,n=this.shape,o=this.textColor;void 0!==this.color&&(o=this.color),void 0===a&&(a=""),a=AmCharts.fixBrakes(a),a=AmCharts.text(d,a,o,this.chart.fontFamily,this.fontSize),a.node.style.pointerEvents="none",d=a.getBBox(),this.labelWidth=o=d.width,this.labelHeight=d.height;var p,d=0;switch(n){case"sign":p=this.drawSign(b),i=m+4+l/2,d=m+l+4,1==e&&(i-=4);break;case"flag":p=this.drawFlag(b),j=o/2+3,i=m+4+l/2,d=m+l+4,1==e&&(i-=4);break;case"pin":p=this.drawPin(b),i=6+l/2,d=l+8;break;case"triangleUp":p=this.drawTriangleUp(b),i=-l-1,d=l+4,e=-1;break;case"triangleDown":p=this.drawTriangleDown(b),i=l+1,d=l+4,e=-1;break;case"triangleLeft":p=this.drawTriangleLeft(b),j=l,d=l+4,e=-1;break;case"triangleRight":p=this.drawTriangleRight(b),j=-l,e=-1,d=l+4;break;case"arrowUp":p=this.drawArrowUp(b),a.hide();break;case"arrowDown":p=this.drawArrowDown(b),a.hide(),d=l+4;break;case"text":e=-1,p=this.drawTextBackground(b,a),i=this.labelHeight+3,d=l+10;break;case"round":p=this.drawCircle(b)}this.bullets[c]=p,this.showOnAxis?(h=isNaN(this.nextAxisY)?this.axisCoordinate:this.nextY,k=i*e,this.nextAxisY=h+e*d):this.value?(h=this.value,g.recalculateToPercents&&(h=h/g.recBaseValue*100-100),h=g.getCoordinate(h)-this.bulletY,k=i*e):this.showAt?(p=this.graphDataItem.values,g.recalculateToPercents&&(p=this.graphDataItem.percents),p&&(h=g.getCoordinate(p[this.showAt])-this.bulletY,k=i*e)):(h=this.nextY,k=i*e),a.translate(j,k),b.push(a),b.translate(0,h),this.addEventListeners(b,c),this.nextY=h+e*d,this.stackDown=f},addEventListeners:function(a,b){var c=this;a.click(function(){c.handleClick(b)}).mouseover(function(){c.handleMouseOver(b)}).touchend(function(){c.handleMouseOver(b,!0)}).mouseout(function(){c.handleMouseOut(b)})},drawPin:function(a){var b=-1;this.stackDown&&(b=1);var c=this.fontSize+4;return this.drawRealPolygon(a,[0,c/2,c/2,-c/2,-c/2,0],[0,b*c/4,b*(c+c/4),b*(c+c/4),b*c/4,0])},drawSign:function(a){var b=-1;this.stackDown&&(b=1);var c=this.mastHeight*b,d=this.fontSize/2+2,e=AmCharts.line(this.container,[0,0],[0,c],this.borderColor,this.borderAlpha,1),f=AmCharts.circle(this.container,d,this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha);return f.translate(0,c+d*b),a.push(e),a.push(f),this.set.push(a),f},drawFlag:function(a){var b=-1;this.stackDown&&(b=1);var c=this.fontSize+4,d=this.labelWidth+6,e=this.mastHeight,b=1==b?b*e:b*e-c,e=AmCharts.line(this.container,[0,0],[0,b],this.borderColor,this.borderAlpha,1),c=AmCharts.polygon(this.container,[0,d,d,0],[0,0,c,c],this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha);return c.translate(0,b),a.push(e),a.push(c),this.set.push(a),c},drawTriangleUp:function(a){var b=this.fontSize+7;return this.drawRealPolygon(a,[0,b/2,-b/2,0],[0,b,b,0])},drawArrowUp:function(a){var b=this.size,c=b/2,d=b/4;return this.drawRealPolygon(a,[0,c,d,d,-d,-d,-c,0],[0,c,c,b,b,c,c,0])},drawArrowDown:function(a){var b=this.size,c=b/2,d=b/4;return this.drawRealPolygon(a,[0,c,d,d,-d,-d,-c,0],[0,-c,-c,-b,-b,-c,-c,0])},drawTriangleDown:function(a){var b=this.fontSize+7;return this.drawRealPolygon(a,[0,b/2,-b/2,0],[0,-b,-b,0])},drawTriangleLeft:function(a){var b=this.fontSize+7;return this.drawRealPolygon(a,[0,b,b,0],[0,-b/2,b/2])},drawTriangleRight:function(a){var b=this.fontSize+7;return this.drawRealPolygon(a,[0,-b,-b,0],[0,-b/2,b/2,0])},drawRealPolygon:function(a,b,c){return b=AmCharts.polygon(this.container,b,c,this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha),a.push(b),this.set.push(a),b},drawCircle:function(a){return shape=AmCharts.circle(this.container,this.fontSize/2,this.backgroundColor,this.backgroundAlpha,1,this.borderColor,this.borderAlpha),a.push(shape),this.set.push(a),shape},drawTextBackground:function(a,b){var c=b.getBBox(),d=-c.width/2-5,e=c.width/2+5,c=-c.height-12;return this.drawRealPolygon(a,[d,-5,0,5,e,e,d,d],[-5,-5,0,-5,-5,c,c,-5])},handleMouseOver:function(a,b){b||this.bullets[a].attr({fill:this.rollOverColors[a]});var c=this.eventObjects[a],d={type:"rollOverStockEvent",eventObject:c,graph:this.graph,date:this.date},e=this.bulletConfig.eventDispatcher;d.chart=e,e.fire(d.type,d),c.url&&this.bullets[a].setAttr("cursor","pointer"),this.chart.showBalloon(AmCharts.fixNewLines(c.description),e.stockEventsSettings.balloonColor,!0)},handleClick:function(a){a=this.eventObjects[a];var b={type:"clickStockEvent",eventObject:a,graph:this.graph,date:this.date},c=this.bulletConfig.eventDispatcher;b.chart=c,c.fire(b.type,b),b=a.urlTarget,b||(b=c.stockEventsSettings.urlTarget),AmCharts.getURL(a.url,b)},handleMouseOut:function(a){this.bullets[a].attr({fill:this.backgroundColors[a]}),a={type:"rollOutStockEvent",eventObject:this.eventObjects[a],graph:this.graph,date:this.date};var b=this.bulletConfig.eventDispatcher;a.chart=b,b.fire(a.type,a)}}),function(){"use strict";var a=angular.module("fim.base");a.filter("money",function(){return function(a,b){var c=parseInt(b||0);return parseFloat(a).toFixed(c).replace(/(\.0+)$/,"")}}),a.directive("money",["$timeout",function(a){function b(a,b){var c=" "+b+" ",d=/[\t\r\n]/g;return 1===a.nodeType&&(" "+a.className+" ").replace(d," ").indexOf(c)>=0?!0:!1}function c(a,c){for(;a;){if(b(a,c))return a;a=a.parentNode}return null}return{restrict:"A",require:"ngModel",link:function(b,d,e,f){function g(a){var b=parseInt(e.precision||0);return a?parseFloat(a).toFixed(b).replace(/(\.0+)$/,""):""}function h(b){var g=parseInt(e.precision||0),h=new RegExp(0==g?"^\\d+$":"^\\d+(\\.)?(\\d{1,"+g+"})?$"),i=f.$modelValue,j=f.$isEmpty(b)||void 0==b;if(b=j?"0":b,h.test(b))return b;if(0==g&&new RegExp("\\.$").test(b));else{new RegExp("^\\d+\\.\\d{9,}$").test(b)?"Only "+g+" decimals allowed":"Allowed format is 12.345"}return angular.element(c(d[0],"form-group")).addClass("has-error"),a(function(){angular.element(c(d[0],"form-group")).removeClass("has-error")},2e3),f.$setViewValue(i),f.$render(),i}f.$parsers.push(h),f.$formatters.push(function(a){return g(a)}),d.bind("blur",function(){var a=f.$modelValue;a&&(f.$viewValue=g(a),f.$render())})}}}])}();var module=angular.module("fim.base");module.directive("ddTextCollapse",["$compile",function(a){return{restrict:"A",scope:!0,link:function(b,c,d){b.collapsed=!1,b.toggle=function(){b.collapsed=!b.collapsed},d.$observe("ddTextCollapseText",function(e){var f=b.$eval(d.ddTextCollapseMaxLength);if(e.length>f){var g=String(e).substring(0,f),h=String(e).substring(f,e.length),i=a("<span>"+g+"</span>")(b),j=a('<span ng-if="collapsed">'+h+"</span>")(b),k=a('<span ng-if="!collapsed">... </span>')(b),l=a('<br ng-if="collapsed">')(b),m=a('<a href class="collapse-text-toggle" ng-click="toggle()">{{collapsed ? "less" : "more"}}</a>')(b);c.empty(),c.append(i),c.append(j),c.append(k),c.append(l),c.append(m)}else c.empty(),c.append(e)})}}}]),function(){"use strict";var a=angular.module("fim.base");a.directive("routeActive",["$location","$rootScope",function(a,b){return{link:function(c,d,e){function f(a){return"#"===a[0]&&(a=a.substring(1)),"/"===a[0]&&(a=a.substring(1)),a}function g(){for(var b=f(a.path()||""),c=j||[h],e=0;e<c.length;e++)if(c[e]&&0==b.indexOf(c[e]))return void d.addClass(i);d.removeClass(i)}var h=e.routeActive,i=e.routeActiveClass||"active",j=c.$eval(e.routeActiveList);b.$on("$locationChangeSuccess",function(){g()}),e.$observe("routeActive",function(a){h=a,g()}),g()}}}])}(),function(){"use strict";var a=angular.module("fim.base");a.directive("selectOnClick",function(){return{restrict:"A",link:function(a,b){b.on("click",function(){this.select()})}}})}(),function(){"use strict";var a=angular.module("fim.base");a.directive("fileSelect",function(){return{restrict:"A",link:function(a,b){b.on("change",function(){{var a,c=b;c.files?c.files.length:1,c.val().replace(/\\/g,"/").replace(/.*\//,"")}document.createEvent?(a=document.createEvent("HTMLEvents"),a.initEvent("fileselect",!0,!0)):(a=document.createEventObject(),a.eventType="fileselect"),a.eventName="fileselect",document.createEvent?b[0].dispatchEvent(a):b[0].fireEvent("on"+a.eventType,a)})}}})}(),function(){"use strict";var a=angular.module("fim.base");a.directive("priceChart",["$timeout",function(a){function b(a,b,c,d,e){function f(){m.translate(l.translate()),m.scale(l.scale()),D.select("g.x.axis").call(w),D.select("g.y.axis").call(x),D.select("g.volume.axis").call(z),D.select("g.percent.axis").call(y),D.select("g.candlestick").call(r.refresh),D.select("g.volume").call(v.refresh),D.select("g.sma.ma-0").call(s.refresh),D.select("g.sma.ma-1").call(t.refresh),D.select("g.ema.ma-2").call(u.refresh),D.select("g.crosshair").call(C.refresh)}var g={top:2,right:2,bottom:2,left:2},h=d-g.left-g.right,i=e-g.top-g.bottom,j=.45*e,k=d3.time.format("%d-%b-%y").parse,l=d3.behavior.zoom().on("zoom",f),m=d3.behavior.zoom(),n=techan.scale.financetime().range([0,h]),o=d3.scale.linear().range([i,0]),p=o.copy(),q=d3.scale.linear().range([i,i-j]),r=techan.plot.candlestick().xScale(n).yScale(o),s=techan.plot.sma().xScale(n).yScale(o),t=techan.plot.sma().xScale(n).yScale(o),u=techan.plot.ema().xScale(n).yScale(o),v=techan.plot.volume().accessor(r.accessor()).xScale(n).yScale(q),w=d3.svg.axis().scale(n).ticks(4).orient("top"),x=d3.svg.axis().scale(o).ticks(4).orient("left"),y=d3.svg.axis().scale(p).orient("right").ticks(4).tickFormat(d3.format("+.1%")),z=d3.svg.axis().scale(q).orient("right").ticks(2).tickFormat(d3.format(",.3s")),A=techan.plot.axisannotation().axis(x),B=techan.plot.axisannotation().axis(w).format(d3.time.format("%Y-%m-%d")).width(45).translate([0,i]),C=techan.plot.crosshair().xScale(n).yScale(o).xAnnotation(B).yAnnotation(A),D=d3.select(a).html("").append("svg").attr("width",h+g.left+g.right).attr("height",i+g.top+g.bottom).append("g").attr("transform","translate("+g.left+","+g.top+")");D.append("clipPath").attr("id","clip").append("rect").attr("x",0).attr("y",o(1)).attr("width",h).attr("height",o(0)-o(1)),D.append("g").attr("class","volume").attr("clip-path","url(#clip)"),D.append("g").attr("class","candlestick").attr("clip-path","url(#clip)"),D.append("g").attr("class","indicator sma ma-0").attr("clip-path","url(#clip)"),D.append("g").attr("class","indicator sma ma-1").attr("clip-path","url(#clip)"),D.append("g").attr("class","indicator ema ma-2").attr("clip-path","url(#clip)"),D.append("g").attr("class","x axis").attr("transform","translate(0,"+i+")"),D.append("g").attr("class","y axis").attr("transform","translate("+h+",0)"),D.append("g").attr("class","percent axis"),D.append("g").attr("class","volume axis"),D.append("rect").attr("class","pane").attr("width",h).attr("height",i).call(l),D.append("g").attr("class","crosshair"),d3.csv("data.csv",function(a,b){var c=r.accessor(),d=33;b=b.map(function(a){return{date:k(a.Date),open:+a.Open,high:+a.High,low:+a.Low,close:+a.Close,volume:+a.Volume}}).sort(function(a,b){return d3.ascending(c.d(a),c.d(b))}),n.domain(techan.scale.plot.time(b,c).domain()),o.domain(techan.scale.plot.ohlc(b.slice(d),c).domain()),p.domain(techan.scale.plot.percent(o,c(b[d])).domain()),q.domain(techan.scale.plot.volume(b,c.v).domain()),D.select("g.candlestick").datum(b).call(r),D.select("g.volume").datum(b).call(v),D.select("g.sma.ma-0").datum(techan.indicator.sma().period(10)(b)).call(s),D.select("g.sma.ma-1").datum(techan.indicator.sma().period(20)(b)).call(t),D.select("g.ema.ma-2").datum(techan.indicator.ema().period(50)(b)).call(u),D.select("g.crosshair").call(C).call(l);var e=n.zoomable();e.domain([d,b.length]),f(),l.x(e).y(o),m.y(p)})}return{restrict:"E",scope:{chart:"="},replace:!1,link:function(c,d){function e(){c.chart&&b(f,"Apple, Inc.","AAPL",f.parentElement.offsetWidth,f.parentElement.offsetHeight,c)}var f=d[0];d3.select(window).on("resize",e),a(e),c.$watchCollection("chart.data",e)}}}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AccountForgerProvider",["nxt","$q","$timeout","$interval","serverService","$rootScope",function(a,b,c,d,e,f){function g(a){function b(a){return a>1?"s":""}var c=Math.floor(a/1e3),d=Math.floor(c/31536e3);if(d)return d+" year"+b(d);var e=Math.floor((c%=31536e3)/86400);if(e)return e+" day"+b(e);var f=Math.floor((c%=86400)/3600);if(f)return f+" hour"+b(f);var g=Math.floor((c%=3600)/60);if(g)return g+" minute"+b(g);var h=c%60;return h?h+" second"+b(h):"less than a second"}function h(a,b,c){var f=this;this.api=a,this.$scope=b,this.account=c,this.isLoading=!1,this.isForging=!1,this.deadline=0,this.hitTime=0,this.remaining=0,this.interval=null,b.$on("$destroy",function(){d.cancel(f.interval),f.interval=null}),e.addListener(a.engine.type,"exit",angular.bind(this,this.onServerExit)),e.addListener(a.engine.type,"ready",angular.bind(this,this.reload)),this.socket().subscribe("blockPoppedNew",angular.bind(this,this.reload),b),this.socket().subscribe("blockPushedNew",angular.bind(this,this.reload),b)}return h.prototype={socket:function(){return f.forceLocalHost?this.api.engine.socket():this.api.engine.localSocket()},reload:function(){var a=this;this.$scope.$evalAsync(function(){a.isLoading=!0,c(function(){a.getNetworkData()},1,!1)})},getNetworkData:function(){var a=this,b={account:this.account,includeForging:"true"};this.socket().getAccount(b).then(function(b){a.$scope.$evalAsync(function(){a.isLoading=!1,a.isForging=b.isForging,a.deadline=b.deadline,a.hitTime=b.hitTime,a.now=Date.now();var c=a.createIntervalHandler(a);a.remaining=c(),d.cancel(a.interval),d(c,1e3)})},function(){a.$scope.$evalAsync(function(){a.isLoading=!1})})},onServerExit:function(){var a=this;this.$scope.$evalAsync(function(){a.isForging=!1,a.deadline=Number.MAX_VALUE,a.hitTime=Number.MAX_VALUE})},createIntervalHandler:function(a){return function(){var b=Date.now()-a.now;a.remaining=g(1e3*Math.round(a.deadline-b/1e3))}}},h}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AccountLessorsProvider",["nxt","$q","$timeout",function(a,b,c){function d(a,b,c){this.api=a,this.$scope=b,this.account=c,this.isLoading=!1,this.entities=[]}return d.prototype={reload:function(){var a=this;this.$scope.$evalAsync(function(){a.isLoading=!0,c(function(){a.getNetworkData()},1,!1)})},getNetworkData:function(){var b=this,c={account:this.account};this.api.engine.socket().getAccountLessors(c).then(function(c){b.isLoading=!1,b.entities.length=0,b.$scope.$evalAsync(function(){for(var d=0;d<c.lessors.length;d++){var e=c.lessors[d];e.guaranteedBalanceNXT=a.util.convertToNXT(e.guaranteedBalanceNQT),b.entities.push(e)}})},function(){b.$scope.$evalAsync(function(){b.isLoading=!1})})}},d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AccountProvider",["nxt","$q","$timeout","db",function(a,b,c,d){function e(b,c,d){this.api=b,this.$scope=c,this.account=d,this.isLoading=!0,this.name="",this.description="",this.balanceNXT="0",this.unconfirmedBalanceNXT="0",this.effectiveBalanceNXT="0",this.forgedBalanceNXT="0",this.guaranteedBalanceNXT="0",this.leasingHeightFrom=Number.MAX_VALUE,this.leasingHeightTo=Number.MAX_VALUE,this.lesseeIdRS="",this.leaseRemaining=0;var e=a.util.convertRSAddress(this.account),f=angular.bind(this,this.delayedReload),g=b.engine.socket();g.subscribe("removedUnConfirmedTransactions-"+e,f,c),g.subscribe("addedUnConfirmedTransactions-"+e,angular.bind(this,this.addedUnConfirmedTransactions),c),g.subscribe("addedConfirmedTransactions-"+e,f,c),g.subscribe("blockPoppedNew",angular.bind(this,this.blockPopped),c),g.subscribe("blockPushedNew",angular.bind(this,this.blockPushed),c)}return e.prototype={reload:function(){var a=this;this.$scope.$evalAsync(function(){a.isLoading=!0,c(function(){a.getNetworkData()},1,!1)})},getNetworkData:function(){var b=this,c={account:this.account};this.api.engine.socket().getAccount(c).then(function(c){b.$scope.$evalAsync(function(){b.isLoading=!1,b.name=c.accountName,b.description=c.description,b.balanceNXT=a.util.convertToNXT(c.balanceNQT),b.unconfirmedBalanceNXT=a.util.convertToNXT(c.unconfirmedBalanceNQT),b.effectiveBalanceNXT=a.util.commaFormat(String(c.effectiveBalanceNXT)),b.forgedBalanceNXT=a.util.convertToNXT(c.forgedBalanceNQT),b.guaranteedBalanceNXT=a.util.convertToNXT(c.guaranteedBalanceNQT),b.leasingHeightFrom=c.leasingHeightFrom||Number.MAX_VALUE,b.leasingHeightTo=c.leasingHeightTo||Number.MAX_VALUE,b.lesseeIdRS=c.lesseeIdRS||"",b.leaseRemaining=c.lesseeIdRS?Math.max(c.leasingHeightTo-c.height,0):0,d.accounts.put({id_rs:b.account,engine:b.api.engine.type,name:b.name||b.account})})},function(){b.$scope.$evalAsync(function(){b.isLoading=!1})})},addedUnConfirmedTransactions:function(a){for(var b,c=0;c<a.length;c++)b=a[c],b.senderRS==this.account},blockPushed:function(a){a.generator==this.account&&this.delayedReload()},blockPopped:function(a){a.generator==this.account&&this.delayedReload()},delayedReload:function(){this.timeout&&clearTimeout(this.timeout);var a=this;this.timeout=setTimeout(function(){a.timeout=null,a.reload()},1e3)}},e}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AccountPostProvider",["nxt","$q","IndexedEntityProvider","CommentProvider",function(a,b,c,d){function e(b,c,d,e){this.init(b,c,d,e);
var f=a.util.convertRSAddress(e);this.subscribe("removedUnConfirmedTransactions-"+f,this.removedUnConfirmedTransactions),this.subscribe("addedUnConfirmedTransactions-"+f,this.addedUnConfirmedTransactions),this.subscribe("addedConfirmedTransactions-"+f,this.addedConfirmedTransactions),this.subscribe("blockPoppedNew",this.blockPopped),this.subscribe("blockPushedNew",this.blockPushed)}return angular.extend(e.prototype,c.prototype,{uniqueKey:function(a){return a.transaction},sortFunction:function(a,b){return b.confirmations<a.confirmations?1:b.confirmations>a.confirmations?-1:a.timestamp<b.timestamp?1:a.timestamp>b.timestamp?-1:a.transaction<b.transaction?1:a.transaction>b.transaction?-1:0},getData:function(a){var c=b.defer(),d={account:this.account,firstIndex:a,lastIndex:a+this.pageSize};return this.api.engine.socket().getAccountPosts(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){var c=b||[];this.hasMore=c.length>0;for(var e=0;e<c.length;e++){var f=c[e];f.date=a.util.formatTimestamp(f.timestamp),f.text=f.message,f.commentProvider=new d(this.api,this.$scope,10,f.transaction)}return new Iterator(c)},transactionIterator:function(b){b=b||[];for(var c,d=[],e=0;e<b.length;e++)c=b[e],1==c.type&&0==c.subtype&&c.senderRS==c.recipientRS&&c.senderRS==this.account&&0==c.attachment.message.indexOf("post1:")&&(c.date=a.util.formatTimestamp(c.timestamp),c.text=c.attachment.message.replace(/^(post1\:)/g,""),d.push(c));return new Iterator(d)}}),e}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AccountPulseProvider",["nxt","$q","EntityProvider","$rootScope",function(a,b,d){function e(b,c,d,e){this.init(b,c,d),this.account=e,this.subscribe("blockPoppedNew",this.blockPopped),this.subscribe("blockPushedNew",this.blockPushed);var f=a.util.convertRSAddress(this.account);this.subscribe("removedUnConfirmedTransactions-"+f,this.removedUnConfirmedTransactions),this.subscribe("addedUnConfirmedTransactions-"+f,this.addedUnConfirmedTransactions),this.subscribe("addedConfirmedTransactions-"+f,this.addedConfirmedTransactions)}return angular.extend(e.prototype,d.prototype,{sortFunction:d.prototype.transactionSort,uniqueKey:function(a){return a.transaction},getData:function(a){var c=b.defer(),d={account:this.account,timestamp:a};return this.api.engine.socket().getAccountPosts(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){var d=b.posts||[];this.hasMore=d.length>0;for(var e=0;e<d.length;e++){var f=d[e];f.date=a.util.formatTimestamp(c.timestamp),f.text=c.attachment.message.replace(/^post\:/g,"")}return new Iterator(d)},transactionIterator:function(b){return b=b.filter(function(b){if(1==b.type&&0==b.subtype){var c=b.attachment.message;if("string"==typeof c&&0==c.indexOf("post1:"))return b.date=a.util.formatTimestamp(b.timestamp),b.text=b.attachment.message.replace(/^post\:/g,""),!0}return!1}),new Iterator(b)}}),e}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("ActivityProvider",["nxt","$q","EntityProvider","$rootScope",function(a,b,c,d){function e(b,c,e,f,g){this.init(b,c,e),this.account=f,this.filter=g,this.subscribe("blockPoppedNew",this.blockPopped),this.subscribe("blockPushedNew",this.blockPushed);var h=this.account?a.util.convertRSAddress(this.account):null;this.subscribe(this.account?"removedUnConfirmedTransactions-"+h:"removedUnConfirmedTransactionsNew",this.removedUnConfirmedTransactions),this.subscribe(this.account?"addedUnConfirmedTransactions-"+h:"addedUnConfirmedTransactionsNew",this.addedUnConfirmedTransactions),this.subscribe(this.account?"addedConfirmedTransactions-"+h:"addedConfirmedTransactionsNew",this.addedConfirmedTransactions);var i=this,j=d.$on("$translateChangeSuccess",function(){c.$evalAsync(function(){angular.forEach(i.entities,function(a){a.renderedHTML=b.renderer.getHTML(a)})})});c.$on("$destroy",j)}return angular.extend(e.prototype,c.prototype,{sortFunction:c.prototype.transactionSort,uniqueKey:function(a){return a.transaction||a.id},transactionIterator:function(b){for(var c,d=0;d<b.length;d++)c=b[d],c.renderedHTML=this.api.renderer.getHTML(c,null,this.account),c.date=a.util.formatTimestamp(c.timestamp);return new Iterator(b)},getData:function(a){var c=b.defer(),d=this.createTransactionFilter();return d.timestamp=a,d.includeAssetInfo="true",d.includeBlocks="false",d.includeTrades="false",this.account&&(d.account=this.account),this.filter.all||this.filter.trades||(d.includeTrades="false"),this.api.engine.socket().getActivity(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c,d=(b.transactions||[]).concat(b.trades||[]),e=0;e<d.length;e++)c=d[e],c.renderedHTML=this.api.renderer.getHTML(c,null,this.account),c.date=a.util.formatTimestamp(c.timestamp);return new Iterator(d)},createTransactionFilter:function(){var a=[];return this.filter.all||(this.filter.payments||(a=a.concat("0:0")),this.filter.messages||(a=a.concat("1:0")),this.filter.aliases||(a=a.concat("1:1","1:6","1:7")),this.filter.namespacedAliases||(a=a.concat("40:0")),this.filter.polls||(a=a.concat("1:2","1:3")),this.filter.accountInfo||(a=a.concat("1:5")),this.filter.announceHub||(a=a.concat("1:4")),this.filter.goodsStore||(a=a.concat("3:0","3:1","3:2","3:3","3:4","3:5","3:6","3:7")),this.filter.balanceLeasing||(a=a.concat("4:0")),this.filter.assetIssued||(a=a.concat("2:0")),this.filter.assetTransfer||(a=a.concat("2:1")),this.filter.assetOrder||(a=a.concat("2:2","2:3","2:4","2:5"))),a.length?{transactionFilter:a.join(",")}:{}}}),e}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AliasProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d){this.init(a,b,c,d)}return angular.extend(d.prototype,c.prototype,{uniqueKey:function(a){return a.aliasName},sortFunction:function(a,b){return a.index-b.index},getData:function(a){var c=b.defer(),d={account:this.account,firstIndex:a,lastIndex:a+this.pageSize,requestType:"getAliases"};return this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=b.aliases||[],d=this.entities.length>0?this.entities[this.entities.length-1].index:0,e=0;e<c.length;e++){var f=c[e];f.index=d++,f.date=a.util.formatTimestamp(f.timestamp),f.priceNQT&&(f.priceNXT=a.util.convertToNXT(f.priceNQT))}return new Iterator(c)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AllAssetsProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c){this.init(a,b,c)}return angular.extend(d.prototype,c.prototype,{uniqueKey:function(a){return a.asset},sortFunction:function(a,b){return a.index-b.index},getData:function(a){var c=b.defer(),d={firstIndex:a,lastIndex:a+this.pageSize,includeCounts:!0,requestType:"getAllAssets"};return this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=b.assets,d=this.entities.length>0?this.entities[this.entities.length-1].index:0,e=0;e<c.length;e++){var f=c[e];f.quantity=a.util.convertToQNTf(f.quantityQNT,f.decimals),f.index=d++,f.isPrivate=1==f.type}return new Iterator(c)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AssetPostProvider",["nxt","$q","IndexedEntityProvider","CommentProvider",function(a,b,c,d){function e(a,b,c,d){this.init(a,b,c),this.asset=d,this.subscribe("removedUnConfirmedTransactionsNew",this.removedUnConfirmedTransactions),this.subscribe("addedUnConfirmedTransactionsNew",this.addedUnConfirmedTransactions),this.subscribe("addedConfirmedTransactionsNew",this.addedConfirmedTransactions),this.subscribe("blockPoppedNew",this.blockPopped),this.subscribe("blockPushedNew",this.blockPushed)}return angular.extend(e.prototype,c.prototype,{uniqueKey:function(a){return a.transaction},sortFunction:function(a,b){return b.confirmations<a.confirmations?1:b.confirmations>a.confirmations?-1:a.timestamp<b.timestamp?1:a.timestamp>b.timestamp?-1:a.transaction<b.transaction?1:a.transaction>b.transaction?-1:0},getData:function(a){var c=b.defer(),d={asset:this.asset,firstIndex:a,lastIndex:a+this.pageSize};return this.api.engine.socket().getAssetPosts(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){var c=b||[];this.hasMore=c.length>0;for(var e=0;e<c.length;e++){var f=c[e];f.date=a.util.formatTimestamp(f.timestamp),f.text=f.message,f.commentProvider=new d(this.api,this.$scope,10,f.transaction)}return new Iterator(c)},transactionIterator:function(b){b=b||[];for(var c,d=[],e=0;e<b.length;e++)c=b[e],1==c.type&&0==c.subtype&&c.senderRS==c.recipientRS&&0==c.attachment.message.indexOf("post2:"+this.asset+":")&&(c.date=a.util.formatTimestamp(c.timestamp),c.text=c.attachment.message.replace(/^(post2\:[^\:]+\:)/g,""),d.push(c));return new Iterator(d)}}),e}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AssetsProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d){this.init(a,b,c,d)}return angular.extend(d.prototype,c.prototype,{uniqueKey:function(a){return a.asset},sortFunction:function(a,b){return a.index-b.index},getData:function(a){var c=b.defer(),d={account:this.account,firstIndex:a,lastIndex:a+this.pageSize};return this.api.engine.socket().getAccountAssets(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=this.entities.length>0?this.entities[this.entities.length-1].index:0,d=0;d<b.length;d++){var e=b[d];e.quantity=a.util.commaFormat(a.util.convertToQNTf(e.quantityQNT,e.decimals)),e.totalQuantity=a.util.commaFormat(a.util.convertToQNTf(e.totalQuantityQNT,e.decimals)),e.index=c++}return new Iterator(b)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("BalanceProvider",["nxt","$q","$timeout",function(a,b,c){function d(a,b,c){this.api=a,this.$scope=b,this.accounts=c,this.isLoading=!0,this.balances=[]}return d.prototype={reload:function(){var a=this;this.$scope.$evalAsync(function(){a.balances.length=[],a.isLoading=!0,c(function(){a.getNetworkData()},1,!1)})},getNetworkData:function(){var c=(b.defer(),this),d={accounts:this.accounts};this.api.engine.socket().getAccounts(d).then(function(b){c.$scope.$evalAsync(function(){c.isLoading=!1;var d=b.accounts||[];angular.forEach(d,function(b){b.balanceNXT=a.util.convertToNXT(b.balanceNQT),b.unconfirmedBalanceNXT=a.util.convertToNXT(b.unconfirmedBalanceNQT),b.effectiveBalanceNXT=a.util.commaFormat(String(b.effectiveBalanceNXT)),b.guaranteedBalanceNXT=a.util.convertToNXT(b.guaranteedBalanceNQT),"0"!=b.forgedBalanceNQT&&(b.forging=!0,b.forgedBalanceNXT=a.util.convertToNXT(b.forgedBalanceNQT),b.forgedBalanceTodayNXT=a.util.convertToNXT(b.forgedBalanceTodayNQT),b.forgedBalanceWeekNXT=a.util.convertToNXT(b.forgedBalanceWeekNQT),b.forgedBalanceMonthNXT=a.util.convertToNXT(b.forgedBalanceMonthNQT),b.date=a.util.formatTimestamp(b.lastBlockTimestamp,!0)||"never"),c.balances.push(b)}),c.balances.sort(function(a,b){return a=parseFloat(a.forgedBalanceNQT),b=parseFloat(b.forgedBalanceNQT),a-b})})},function(){c.$scope.$evalAsync(function(){c.isLoading=!1})})}},d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("BlockStateProvider",["nxt","requests","$timeout","$interval",function(a,b,c,d){function e(a,b){var c=this;this.api=a,this.$scope=b,this.isLoading=!0,this.height=null,this.seconds_ago=0,this.interval=null,a.engine.socket().subscribe("blockPopped",angular.bind(this,this.blockPopped),b),a.engine.socket().subscribe("blockPushed",angular.bind(this,this.blockPushed),b),b.$on("$destroy",function(){c.interval&&d.cancel(c.interval)})}return e.prototype={load:function(){var a=this;this.$scope.$evalAsync(function(){a.isLoading=!0,c(function(){a.getNetworkData()},1,!1)})},getNetworkData:function(){var a=this;this.api.engine.socket().getBlockchainState().then(function(b){a.isLoading=!1,a.blockPushed(b)},function(){a.$scope.$evalAsync(function(){a.isLoading=!1})})},createDateUpdateInterval:function(){var a=this;return function(){a.seconds_ago=Math.round((Date.now()-a.as_date.getTime())/1e3)}},blockPopped:function(a){var b=this;this.$scope.$evalAsync(function(){b.height=a.height-1,b.seconds_ago=0})},blockPushed:function(b){var c=this;this.$scope.$evalAsync(function(){c.as_date=a.util.timestampToDate(b.timestamp),c.seconds_ago=0,c.height=a.util.commaFormat(String(b.height)),c.isLoading=!1,d.cancel(c.interval),c.interval=d(c.createDateUpdateInterval(),3e3)})}},e}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("BlockchainDownloadProvider",["nxt","$timeout","serverService",function(a,b,c){function d(a,b){var d=this;this.api=a,this.$scope=b,this.blockheight=0,this.downloading=!1,this.progress=!1,this.server_running=c.isRunning(a.engine.type),this.port=a.engine.port,this.net_name=a.test?"test-net":"main-net",this.test_net=a.test,this.version=0,this.application="",this.destroyed=!1,this.genesis="TYPE_NXT"==a.type?f:g,this.remoteheight=0;var e=angular.bind(this,this.onServerExit),h=angular.bind(this,this.onServerStart),i=angular.bind(this,this.onServerReady);c.addListener(a.engine.type,"exit",e),c.addListener(a.engine.type,"start",h),c.addListener(a.engine.type,"ready",i),b.$on("$destroy",function(){d.destroyed=!0,c.removeListener(a.engine.type,"exit",e),c.removeListener(a.engine.type,"start",h),c.removeListener(a.engine.type,"ready",i)}),this.onSetCurrentBlockLocal=angular.bind(this,this.setCurrentBlockLocal),c.isReady(this.api.engine.type)&&(a.engine.localSocket().subscribe("blockPopped",this.onSetCurrentBlockLocal,b),a.engine.localSocket().subscribe("blockPushed",this.onSetCurrentBlockLocal,b)),a.engine.socket().subscribe("blockPopped",angular.bind(this,this.setCurrentBlock),b),a.engine.socket().subscribe("blockPushed",angular.bind(this,this.setCurrentBlock),b)}var e=36e5,f=new Date(Date.UTC(2014,1,7,12,23,29,5)).getTime(),g=new Date(Date.UTC(2013,10,24,12,0,0,0)).getTime();return d.prototype={load:function(){var a=this;this.$scope.$evalAsync(function(){b(function(){a.getNetworkData()},1,!1)})},getNetworkData:function(){var a=this;if(this.api.engine.socket().getBlockchainState().then(function(b){a.$scope.$evalAsync(function(){a.remoteheight=b.height})}),c.isReady(this.api.engine.type)){var b=this.api.engine.localSocket();b.getBlockchainState().then(function(c){a.setCurrentBlockLocal(c),b.callAPIFunction({requestType:"getBlockchainStatus"}).then(function(b){a.$scope.$evalAsync(function(){a.version=b.version,a.application=b.application})})})}},setCurrentBlock:function(a){var b=this;this.$scope.$evalAsync(function(){b.remoteheight=a.height})},setCurrentBlockLocal:function(b){var c=this;this.$scope.$evalAsync(function(){var d=Date.now(),f=d-c.genesis,g=a.util.timestampToDate(b.timestamp);c.blockheight=b.height;var h=g.getTime()-c.genesis;c.progress=100*h/f,c.downloading=d-g.getTime()>e})},onServerStart:function(){console.log("BlockchainDownloadProvider.onServerStart");var a=this;this.$scope.$evalAsync(function(){a.server_running=!0})},onServerReady:function(){console.log("BlockchainDownloadProvider.onServerReady");var a=this;b(function(){var b={onopen:function(){a.api.engine.localSocket().removeObserver(this),a.load()}};a.api.engine.localSocket().addObserver(b),a.api.engine.localSocket().subscribe("blockPopped",a.onSetCurrentBlockLocal,a.$scope),a.api.engine.localSocket().subscribe("blockPushed",a.onSetCurrentBlockLocal,a.$scope),a.api.engine.localSocket().refresh()},1e3,!1)},onServerExit:function(){console.log("BlockchainDownloadProvider.onServerExit");var a=this;this.$scope.$evalAsync(function(){a.server_running=!1,a.downloading=!1,a.api.engine.localSocket().unsubscribe("blockPopped",a.onSetCurrentBlockLocal),a.api.engine.localSocket().unsubscribe("blockPushed",a.onSetCurrentBlockLocal),a.api.engine.localSocket().stop()})}},d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("BlocksProvider",["nxt","$q","EntityProvider",function(a,b,c){function d(a,b,c,d){this.init(a,b,c),this.account=d,this.account?(this.subscribe("blockPopped-"+this.account,angular.bind(this,this.blockPopped)),this.subscribe("blockPushed-"+this.account,angular.bind(this,this.blockPushed))):(this.subscribe("blockPoppedNew",angular.bind(this,this.blockPopped)),this.subscribe("blockPushedNew",angular.bind(this,this.blockPushed)))}return angular.extend(d.prototype,c.prototype,{sortFunction:function(a,b){return b.height-a.height},uniqueKey:function(a){return a.block},transactionIterator:function(a){return new Iterator(a)},getData:function(a){var c=b.defer(),d={timestamp:a,includeAssetInfo:"false",includeBlocks:"true",includeTransactions:"false"};return this.account&&(d.account=this.account),this.api.engine.socket().getActivity(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=b.blocks||[],d=0;d<c.length;d++){var e=c[d];e.date=a.util.formatTimestamp(e.timestamp),e.totalAmountNXT=a.util.convertToNXT(e.totalAmountNQT),e.totalFeeNXT=a.util.convertToNXT(e.totalFeeNQT),e.totalPOSRewardNXT=e.totalPOSRewardNQT?a.util.convertToNXT(e.totalPOSRewardNQT)+" "+this.api.engine.symbol:"none"}return new Iterator(c)},blockPushed:function(b){var c=this;this.$scope.$evalAsync(function(){b.date=a.util.formatTimestamp(b.timestamp),b.totalAmountNXT=a.util.convertToNXT(b.totalAmountNQT),b.totalFeeNXT=a.util.convertToNXT(b.totalFeeNQT),b.totalPOSRewardNXT=b.totalPOSRewardNQT?a.util.convertToNXT(b.totalPOSRewardNQT)+" "+c.api.engine.symbol:"none";var d=c.uniqueKey(b);if(c.duplicates[d])angular.extend(c.duplicates[d],b);else if(c.duplicates[d]=b,c.entities.unshift(b),c.entities.length>20){var e=c.entities.pop();e&&delete c.duplicates[c.uniqueKey(e)]}c.entities.sort(c.sortFunction)})},blockPopped:function(a){var b=this,c=this.entities.length;this.entities=this.entities.filter(function(c){return b.uniqueKey(a)==b.uniqueKey(c)?(delete b.duplicates[b.uniqueKey(c)],!1):!0}),this.entities.length!=c&&this.$scope.$evalAsync(function(){b.entities.sort(b.sortFunction)})}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("BuyOrderProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d){this.init(a,b,c,d)}return angular.extend(d.prototype,c.prototype,{uniqueKey:function(a){return a.order},sortFunction:function(a,b){return a.index-b.index},getData:function(a){var c=b.defer(),d={account:this.account,firstIndex:a,lastIndex:a+this.pageSize,requestType:"getAccountCurrentBidOrders"};return this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=this.entities.length>0?this.entities[this.entities.length-1].index:0,d=b.bidOrders,e=0;e<d.length;e++){var f=d[e];f.price=a.util.calculateOrderPricePerWholeQNT(f.priceNQT,f.decimals),f.quantity=a.util.commaFormat(a.util.convertToQNTf(f.quantityQNT,f.decimals)),f.index=c}return new Iterator(d)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("CommentProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d){this.init(a,b,c),this.post=d,this.isLoading=!1,this.subscribe("removedUnConfirmedTransactionsNew",this.removedUnConfirmedTransactions),this.subscribe("addedUnConfirmedTransactionsNew",this.addedUnConfirmedTransactions),this.subscribe("addedConfirmedTransactionsNew",this.addedConfirmedTransactions),this.subscribe("blockPoppedNew",this.blockPopped),this.subscribe("blockPushedNew",this.blockPushed)}return angular.extend(d.prototype,c.prototype,{uniqueKey:function(a){return a.transaction},sortFunction:function(a,b){return a.confirmations<b.confirmations?1:a.confirmations>b.confirmations?-1:b.timestamp<a.timestamp?1:b.timestamp>a.timestamp?-1:b.transaction<a.transaction?1:b.transaction>a.transaction?-1:0},getData:function(a){var c=b.defer(),d={post:this.post,firstIndex:a,lastIndex:a+this.pageSize};return this.api.engine.socket().getComments(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=b||[],d=0;d<c.length;d++){var e=c[d];e.date=a.util.formatTimestamp(e.timestamp),e.text=e.attachment.message.replace(/^(comm[^\:]+\:)/g,"")}return new Iterator(c)},transactionIterator:function(b){b=b||[];for(var c,d=[],e=0;e<b.length;e++)c=b[e],1==c.type&&0==c.subtype&&0==c.attachment.message.indexOf("comm"+this.post+":")&&(c.date=a.util.formatTimestamp(c.timestamp),c.text=c.attachment.message.replace(/^(comm[^\:]+\:)/g,""),d.push(c));return new Iterator(d)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("CurrencyProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d){this.init(a,b,c,d)}return angular.extend(d.prototype,c.prototype,{uniqueKey:function(a){return a.currency},sortFunction:function(a,b){return a.index-b.index},getData:function(a){var c=b.defer(),d={account:this.account,firstIndex:a,lastIndex:a+this.pageSize};return this.api.engine.socket().getAccountCurrencies(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=this.entities.length>0?this.entities[this.entities.length-1].index:0,d=0;d<b.length;d++){var e=b[d];e.units=a.util.convertToQNTf(e.units,e.decimals),e.totalUnits=a.util.convertToQNTf(e.currentSupply,e.decimals),e.index=c++}return new Iterator(b)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("ForgersProvider",["nxt","requests","$timeout","$q",function(a){function b(b,c){if(this.api=b,this.$scope=c,this.isLoading=!1,this.forgers=[],this.setPeriod(a.util.convertToEpochTimestamp(Date.now())),c){c.$on("$destroy",function(){})}}return b.prototype={reload:function(){var a=this;this.$scope.$evalAsync(function(){a.getNetworkData()})},setPeriod:function(a){this.timestamp=a,this.reload()},getNetworkData:function(){var b=this,c={timestamp:this.timestamp};this.api.engine.socket().getForgingStats(c).then(function(c){b.$scope.$evalAsync(function(){b.isLoading=!1,b.forgers=c.forgers,angular.forEach(c.forgers,function(b){b.totalFeeNXT=a.util.convertToNXT(b.feeNQT)}),b.forgers.sort(function(a,b){return b.count-a.count})})},function(){b.$scope.$evalAsync(function(){b.isLoading=!1})})}},b}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("MessagesProvider",["nxt","$q","EntityProvider",function(a,b,c){function d(b,c,d,e){this.init(b,c,d),this.account=e,this.subscribe("blockPoppedNew",this.blockPopped),this.subscribe("blockPushedNew",this.blockPushed);var f=a.util.convertRSAddress(this.account);this.subscribe("removedUnConfirmedTransactions-"+f,this.removedUnConfirmedTransactions),this.subscribe("addedUnConfirmedTransactions-"+f,this.addedUnConfirmedTransactions),this.subscribe("addedConfirmedTransactions-"+f,this.addedConfirmedTransactions)}return angular.extend(d.prototype,c.prototype,{sortFunction:c.prototype.transactionSort,uniqueKey:function(a){return a.transaction},getData:function(a){var c=b.defer(),d={timestamp:a,includeAssetInfo:"false",includeBlocks:"false",includeTrades:"false",inclusiveTransactionFilter:"1:0",account:this.account};return this.api.engine.socket().getActivity(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=b.transactions||[],d=0;d<c.length;d++){var e=c[d];e.renderedHTML=this.api.renderer.getHTML(e,null,this.account),e.date=a.util.formatTimestamp(e.timestamp)}return new Iterator(c)},transactionIterator:function(b){var c=this;b=b.filter(function(a){return 1==a.type&&0==a.subtype?c.account&&a.senderRS!=c.account&&a.recipientRS!=c.account?!1:!0:!1});for(var d=0;d<b.length;d++){var e=b[d];e.renderedHTML=this.api.renderer.getHTML(e,null,this.account),e.date=a.util.formatTimestamp(e.timestamp)}return new Iterator(b)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("NamespacedAliasProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d,e){this.init(a,b,c,d),this.filter=e||null}return angular.extend(d.prototype,c.prototype,{uniqueKey:function(a){return a.aliasName},sortFunction:function(a,b){return a.index-b.index},getData:function(a){var c=b.defer(),d={account:this.account,firstIndex:a,lastIndex:a+this.pageSize,requestType:"getNamespacedAliases"};return this.filter&&(d.filter=this.filter),this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=b.aliases||[],d=this.entities.length>0?this.entities[this.entities.length-1].index:0,e=0;e<c.length;e++){var f=c[e];f.index=d++,f.date=a.util.formatTimestamp(f.timestamp)}return new Iterator(c)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("PaymentsProvider",["nxt","$q","modals","plugins","$rootScope",function(a,b,c,d,e){function f(b,c,d){this.api=b,this.$scope=c,this.id_rs=d,this.text_input=window.localStorage.getItem("PAYMENTS-"+d+"-TEXT")||"",this.payments=[],this.transactions={},this.totalNXT="",this.locked=!1,this.PREPARE=!0,this.STAGE=!1,this.socket().subscribe("blockPoppedNew",angular.bind(this,this.blockPopped),c),this.socket().subscribe("blockPushedNew",angular.bind(this,this.blockPushed),c);var e=a.util.convertRSAddress(d);this.socket().subscribe("removedUnConfirmedTransactions-"+e,angular.bind(this,this.removedUnConfirmedTransactions),c),this.socket().subscribe("addedUnConfirmedTransactions-"+e,angular.bind(this,this.addedTransactions),c),this.socket().subscribe("addedConfirmedTransactions-"+e,angular.bind(this,this.addedTransactions),c);try{var f=JSON.parse(window.localStorage.getItem("PAYMENTS-"+d));if(Array.isArray(f)){this.payments=f;for(var g="0",h=this,i=0;i<f.length;i++)g=new BigInteger(g).add(new BigInteger(f[i].amountNQT)).toString(),f[i].setStatus=function(a){var b=this;h.$scope.$evalAsync(function(){b.status=a})};this.totalNXT=a.util.convertToNXT(g.toString()),this.socket().getBlockchainState().then(function(a){h.blockPushed(a)}),console.log("payments",f)}}catch(j){console.log(j)}}function g(a,b){return b.createAddress().set(a)}function h(a,d){var e=b.defer();return c.open("secretPhrase",{resolve:{items:function(){return{sender:a}}},close:function(a){a.publicKey=d.crypto.secretPhraseToPublicKey(a.secretPhrase),e.resolve(a)},cancel:function(a){e.reject(a)}}),e.promise}function i(a,c){var d=b.defer();return c.engine.socket().getAccount({account:a}).then(function(a){a.publicKey?d.resolve(a.publicKey):d.reject()},d.reject),d.promise}function j(){var a=b.defer();return a.resolve("IMPLEMENT THIS DIALOG PLEASE. MUST RETURN A PUBLIC KEY"),a.promise}function k(a,b,c){if(a.encrypt_message&&a.message){var d={};a.recipient?d.account=a.recipient:a.encryptedMessageRecipient&&(d.account=a.encryptedMessageRecipient,delete a.encryptedMessageRecipient),a.recipientPublicKey&&(d.publicKey=a.recipientPublicKey);var e=c.crypto.encryptNote(a.message,d,b);a.encryptedMessageData=e.message,a.encryptedMessageNonce=e.nonce,a.messageToEncryptIsText="true",delete a.encrypt_message,delete a.message}else if(a.note_to_self&&a.message){var e=c.crypto.encryptNote(a.message,{publicKey:converters.hexStringToByteArray(c.crypto.secretPhraseToPublicKey(b))},b);a.encryptToSelfMessageData=e.message,a.encryptToSelfMessageNonce=e.nonce,a.messageToEncryptToSelfIsText="true",delete a.note_to_self,delete a.message}else a.public_message&&a.message&&(a.messageIsText="true",delete a.public_message)}return f.prototype={snapshot:function(){window.localStorage.setItem("PAYMENTS-"+this.id_rs,JSON.stringify(this.payments))},socket:function(){return this.api.engine.socket()},load:function(){var b=this,c=this.text_input.match(/[^\r\n]+/g);this.payments.length=0;var d="0";angular.forEach(c,function(c){var e=c.split(","),f=e[0],h=e[1],i=a.util.convertToNQT(e[1]),j=e[2]?"true"==e[2]:!1,k=e[3]?e.slice(3).join(","):null,l="waiting",m=!1;g(f,b.api)||(l="invalid address",m=!0);var n={recipientRS:f,amountNXT:h,amountNQT:i,ispublic:j,message:k,status:l,error:m,setStatus:function(a){var c=this;b.$scope.$evalAsync(function(){c.status=a})}};b.payments.push(n),m===!1&&(d=new BigInteger(d).add(new BigInteger(i)).toString())}),this.PREPARE=!1,this.STAGE=!0,this.totalNXT=a.util.convertToNXT(d.toString()),window.localStorage.setItem("PAYMENTS-"+this.id_rs,JSON.stringify(this.payments)),window.localStorage.setItem("PAYMENTS-"+this.id_rs+"-TEXT",this.text_input)},execute:function(){if(!this.locked){this.locked=!0;var a=this;this.iterator=new Iterator(this.payments),h(this.id_rs,this.api).then(function(b){a.senderPublicKey=b.publicKey,a.secretPhrase=b.secretPhrase,a.next()},function(){a.$scope.$evalAsync(function(){a.locked=!1})})}},next:function(){if(this.iterator.hasMore()){var b=this.iterator.next(),c={feeNQT:a.util.convertToNQT(String(this.api.engine.feeCost)),deadline:"1440",sender:this.id_rs,recipient:a.util.convertRSAddress(b.recipientRS),amountNQT:b.amountNQT};b.message&&(c.message=b.message,c.messageIsText="true",b.ispublic?c.public_message=!0:c.encrypt_message=!0),this.prepareTransaction(c,b)}},prepareTransaction:function(a,b){var c=this;a.encrypt_message?i(a.recipient,this.api).then(function(d){a.recipientPublicKey=d,c.sendTransaction(a,b)},function(){j(a.recipient).then(function(d){a.recipientPublicKey=d,c.sendTransaction(a,b)},function(){b.setStatus("failed"),c.next()})}):c.sendTransaction(a,b)},sendTransaction:function(a,b){var c=this;a.publicKey=this.senderPublicKey,a.requestType="sendMoney",k(a,this.secretPhrase,this.api),delete a.recipientPublicKey,d.get("alerts").progress({title:"Please wait"}).then(function(d){var e=c.socket();b.setStatus("Creating Transaction"),e.callAPIFunction(a).then(function(f){if(f.error||f.errorDescription)return d.setErrorMessage(f.error||f.errorDescription),void d.close().then(function(){b.error=!0,b.setStatus(f.error||f.errorDescription),c.snapshot(),c.next()});d.setMessage("Signing Transaction");var g=c.api.crypto.signBytes(f.unsignedTransactionBytes,converters.stringToHexString(c.secretPhrase));if(!c.api.crypto.verifyBytes(g,f.unsignedTransactionBytes,c.senderPublicKey)){var h=i18n.format("error_signature_verification_client");return d.setErrorMessage(h),void d.close().then(function(){b.error=!0,b.setStatus(h),c.snapshot(),c.next()})}var i=c.api.verifyAndSignTransactionBytes(f.unsignedTransactionBytes,g,a.requestType,a,c.api.type,c.api.engine.constants());if(!i){var h=i18n.format("error_signature_verification_server");return d.setErrorMessage(h),void d.close().then(function(){b.error=!0,b.setStatus(h),c.snapshot(),c.next()})}var j=c.api.crypto.calculateFullHash(f.unsignedTransactionBytes,g),k=c.api.crypto.calculateTransactionId(j);b.transaction=k,b.setStatus("success"),c.transactions[k]=b,c.snapshot(),d.setMessage("Broadcasting Transaction"),e.callAPIFunction({requestType:"broadcastTransaction",transactionBytes:i}).then(function(){d.animateProgress().then(function(){new Audio("images/beep.wav").play(),d.setMessage("Transaction sent successfully"),d.close().then(function(){c.next()})})},function(a){var e=JSON.stringify(a);console.log(e),d.setErrorMessage(e),d.close().then(function(){b.error=!0,b.setStatus(e),c.snapshot(),c.next()})})},function(a){var e=JSON.stringify(a);console.log(e),d.setErrorMessage(e),d.close().then(function(){b.error=!0,b.setStatus(e),c.snapshot(),c.next()})})})},blockPopped:function(a){var b=this;e.$evalAsync(function(){for(var c,d=0;d<b.payments.length;d++)c=b.payments[d],c.height&&c.height<=a.height&&(c.confirmations=a.height-c.height);b.snapshot()})},blockPushed:function(a){console.log("blockPushed",a);var b=this;e.$evalAsync(function(){for(var c=0;c<b.payments.length;c++)b.payments[c].height&&(b.payments[c].confirmations=a.height-b.payments[c].height);b.snapshot()})},removedUnConfirmedTransactions:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=this.transactions[c.transaction];d&&(delete d.height,delete d.confirmations)}this.snapshot()},addedTransactions:function(a){for(var b=0;b<a.length;b++){var c=a[b],d=this.transactions[c.transaction];d&&(d.height=c.height,d.confirmations=c.confirmations)}this.snapshot()}},f}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("PeerProvider",["nxt","requests","$timeout","$q","$rootScope",function(a,b,c,d,e){function f(a,b){this.api=a,this.$scope=b,this.isLoading=!1,this.peers=[];var c=this.socket(),d=angular.bind(this,this.onUpdate);
c.subscribe("PEER_BLACKLIST",d,b),c.subscribe("PEER_UNBLACKLIST",d,b),c.subscribe("PEER_DEACTIVATE",d,b),c.subscribe("PEER_REMOVE",angular.bind(this,this.onRemove),b),c.subscribe("PEER_DOWNLOADED_VOLUME",d,b),c.subscribe("PEER_UPLOADED_VOLUME",d,b),c.subscribe("PEER_WEIGHT",d,b),c.subscribe("PEER_ADDED_ACTIVE_PEER",d,b),c.subscribe("PEER_CHANGED_ACTIVE_PEER",d,b),c.subscribe("PEER_NEW_PEER",angular.bind(this,this.onNewPeer),b)}function g(a){var b,c=[],d="";do c[c.length]=a%10,a=Math.floor(a/10);while(a>0);for(b=0;b<c.length;b++)b>0&&b%3==0&&(d="'"+d),d=c[b]+d;return d}var h=0,i=1,j=2;return f.prototype={socket:function(){return e.forceLocalHost?this.api.engine.socket():this.api.engine.localSocket()},reload:function(){var a=this;this.$scope.$evalAsync(function(){a.getNetworkData()})},getNetworkData:function(){var a=this,b={requestType:"getPeers",includePeerInfo:!0};this.socket().callAPIFunction(b).then(function(b){a.$scope.$evalAsync(function(){a.isLoading=!1,a.peers=b.peers,angular.forEach(a.peers,function(b){a.format(b)}),a.sort()})},function(){a.$scope.$evalAsync(function(){a.isLoading=!1})})},format:function(b){switch(b.state){case h:b.stateStr="Non connected",b.stateClass="";break;case i:b.stateStr="Connected",b.stateClass="success";break;case j:b.stateStr="Disconnected",b.stateClass="danger"}b.downloadedVolume=b.downloadedVolume||0,b.lastUpdatedStr=a.util.formatTimestamp(b.lastUpdated,!0),b.downloadedVolumeBytes=a.util.commaFormat(""+b.downloadedVolume),b.uploadedVolumeBytes=a.util.commaFormat(""+b.uploadedVolume),b.weightStr=g(b.weight)},sort:function(){this.peers.sort(function(a,b){return b.downloadedVolume-a.downloadedVolume})},onUpdate:function(a){a.lastActivity=Date.now();for(var b=0;b<this.peers.length;b++)if(this.peers[b].announcedAddress==a.announcedAddress){var c=this,d=this.peers[b];this.$scope.$evalAsync(function(){angular.extend(d,a),c.format(d),c.sort()});break}},onRemove:function(a){var b=this;this.$scope.$evalAsync(function(){b.peers=b.peers.filter(function(b){return b.announcedAddress!=a.announcedAddress})})},onNewPeer:function(a){var b=this;this.$scope.$evalAsync(function(){b.peers.push(a),b.format(a),b.sort()})}},f}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("RecentTransactionsProvider",["nxt","$q","EntityProvider",function(a,b,c){function d(b,c,d,e,f){this.init(b,c,d),this.accounts=e,this.filter=f,this.subscribe("blockPoppedNew",this.blockPopped),this.subscribe("blockPushedNew",this.blockPushed);for(var g=0;g<this.accounts.length;g++){var h=a.util.convertRSAddress(this.accounts[g]);this.subscribe("removedUnConfirmedTransactions-"+h,this.removedUnConfirmedTransactions),this.subscribe("addedUnConfirmedTransactions-"+h,this.addedUnConfirmedTransactions),this.subscribe("addedConfirmedTransactions-"+h,this.addedConfirmedTransactions)}}return angular.extend(d.prototype,c.prototype,{sortFunction:c.prototype.transactionSort,uniqueKey:function(a){return a.transaction},getData:function(a){var c=b.defer(),d=this.createTransactionFilter();return d.timestamp=a,d.accounts=this.accounts,d.accounts&&d.accounts.length?this.api.engine.socket().getRecentTransactions(d).then(c.resolve,c.reject):c.resolve({}),c.promise},dataIterator:function(b){for(var c=b.transactions||[],d=0;d<c.length;d++){var e=c[d];e.renderedHTML=this.api.renderer.getHTML(e),e.date=a.util.formatTimestamp(e.timestamp)}return new Iterator(c)},transactionIterator:function(a){return new Iterator(a)},createTransactionFilter:function(){var a=[];return this.filter.all||(this.filter.payments||(a=a.concat("0:0")),this.filter.messages||(a=a.concat("1:0")),this.filter.aliases||(a=a.concat("1:1","1:6","1:7")),this.filter.namespacedAliases||(a=a.concat("40:0")),this.filter.polls||(a=a.concat("1:2","1:3")),this.filter.accountInfo||(a=a.concat("1:5")),this.filter.announceHub||(a=a.concat("1:4")),this.filter.goodsStore||(a=a.concat("3:0","3:1","3:2","3:3","3:4","3:5","3:6","3:7")),this.filter.balanceLeasing||(a=a.concat("4:0")),this.filter.assetIssued||(a=a.concat("2:0")),this.filter.assetTransfer||(a=a.concat("2:1")),this.filter.assetOrder||(a=a.concat("2:2","2:3","2:4","2:5"))),a.length?{transactionFilter:a.join(",")}:{}}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("SearchProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d,f){if(this.init(a,b,c),this.category=d,this.query=f,this.impl=e[this.category],!this.impl)throw new Error("Unsupported category "+this.category)}var e={accounts:{uniqueKey:function(a){return a.accountRS},process:function(b,c){b.balanceNXT=a.util.convertToNXT(b.balanceNQT),b.effectiveBalanceNXT=a.util.commaFormat(b.effectiveBalanceNXT),b.index=c}},assets:{uniqueKey:function(a){return a.asset},process:function(a,b){a.index=b}},currencies:{uniqueKey:function(a){return a.code},process:function(b,c){b.units=a.util.convertToQNTf(b.units,b.decimals),b.totalUnits=a.util.convertToQNTf(b.currentSupply,b.decimals),b.index=c}},market:{uniqueKey:function(a){return a.goods},process:function(a,b){a.index=b}},aliases:{uniqueKey:function(a){return a.aliasName},process:function(a,b){a.index=b}}};return angular.extend(d.prototype,c.prototype,{uniqueKey:function(a){return this.impl.uniqueKey(a)},sortFunction:function(a,b){return a.index-b.index},getData:function(a){var c=b.defer(),d=this.query.trim();if(d.length>0){var e={category:this.category,query:d,firstIndex:a,lastIndex:a+this.pageSize};"*"!=e.query.substring(e.query.length-1)&&(e.query+="*"),"aliases"==e.category&&(e.query=e.query.replace("*","%")),this.api.engine.socket().search(e).then(c.resolve,c.reject)}else c.resolve({results:[]});return c.promise},dataIterator:function(a){var b=this.entities.length>0?this.entities[this.entities.length-1].index:0,c=a.results||[];if(this.impl.process)for(var d=0;d<c.length;d++)b++,this.impl.process(c[d],b);return new Iterator(c)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("SellOrderProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d){this.init(a,b,c,d)}return angular.extend(d.prototype,c.prototype,{uniqueKey:function(a){return a.order},sortFunction:function(a,b){return a.index-b.index},getData:function(a){var c=b.defer(),d={account:this.account,firstIndex:a,lastIndex:a+this.pageSize,requestType:"getAccountCurrentAskOrders"};return this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},dataIterator:function(b){for(var c=this.entities.length>0?this.entities[this.entities.length-1].index:0,d=b.askOrders,e=0;e<d.length;e++){var f=d[e];f.price=a.util.calculateOrderPricePerWholeQNT(f.priceNQT,f.decimals),f.quantity=a.util.commaFormat(a.util.convertToQNTf(f.quantityQNT,f.decimals)),f.index=c}return new Iterator(d)}}),d}])}(),function(){"use strict";var a={"PEER NETWORKING":{"nxt.shareMyAddress":"Announce my IP address/hostname to peers and allow them to share it with other peers. If disabled, peer networking servlet will not be started at all.","nxt.peerServerPort":"Port for incoming peer to peer networking requests, if enabled.","nxt.peerServerHost":"Host interface on which to listen for peer networking requests, default all. Use 0.0.0.0 to listen on all IPv4 interfaces or :: to listen on all IPv4 and IPv6 interfaces","nxt.myAddress":"My externally visible IP address or host name, to be announced to peers. It can optionally include a port number, which will also be announced to peers, and may be different from nxt.peerServerPort (useful if you do port forwarding behind a router).","nxt.myPlatform":"My platform, to be announced to peers.","nxt.myHallmark":"My hallmark, if available.","nxt.wellKnownPeers":"A list of well known peer addresses / host names, separated by '; '.","nxt.knownBlacklistedPeers":"Known bad peers to be blacklisted","nxt.knownWhitelistedPeers":"Known peers to be whitelisted (FIMKrypto only)","nxt.testnetPeers":"Peers used for testnet only.","nxt.maxNumberOfConnectedPublicPeers":"Maintain active connections with at least that many peers.","nxt.connectTimeout":"Peer networking connect timeout for outgoing connections.","nxt.readTimeout":"Peer networking read timeout for outgoing connections.","nxt.peerServerIdleTimeout":"Peer networking server idle timeout, milliseconds.","nxt.enableHallmarkProtection":"Use the peer hallmark to only connect with peers above the defined push/pull hallmark thresholds. Disabling hallmark protection also disables weighting of peers by hallmark weight, so connecting to any of your peers becomes equally likely.","nxt.pushThreshold":"Hallmark threshold to use when sending data to peers.","nxt.pullThreshold":"Hallmark threshold to use when requesting data from peers.","nxt.blacklistingPeriod":"Blacklist peers for 600000 milliseconds (i.e. 10 minutes by default).","nxt.sendToPeersLimit":"Consider a new transaction or block sent after 10 peers have received it.","nxt.enablePeerServerDoSFilter":"Enable the Jetty Denial of Service Filter for the peer networking server.","nxt.enablePeerServerGZIPFilter":"Compress Http responses for the peer networking server.","nxt.isTestnet":"Use testnet, leave set to false unless you are really testing. Never unlock your real accounts on testnet! Use separate accounts for testing only. When using testnet, all custom port settings will be ignored, and hardcoded ports of 6884 (peer networking), 6885 (UI) and 6886 (API) will be used.","nxt.savePeers":"Save known peers in the database","nxt.usePeersDb":"Set to false to disable use of the peers database. This will not delete saved peers.","nxt.getMorePeers":"Set to false to disable getting more peers from the currently connected peers. Only useful when debugging and want to limit the peers to those in peersDb or wellKnownPeers.","nxt.isOffline":"Set to true to run offline - do not connect to peers and do not listen for incoming peer connections. This is equivalent to setting nxt.shareMyAddress=false, nxt.wellKnownPeers=, nxt.testnetPeers= and nxt.usePeersDb=false, and if set to true overrides those properties.","nxt.enableTransactionRebroadcasting":"Enable re-broadcasting of new transactions until they are received back from at least one peer, or found in the blockchain. This feature can optionally be disabled, to avoid the risk of revealing that this node is the submitter of such re-broadcasted new transactions.","nxt.numberOfForkConfirmations":"Verify batches of blocks downloaded from a single peer with that many other peers.","nxt.testnetNumberOfForkConfirmations":"Verify batches of blocks downloaded from a single peer with that many other peers."},"API SERVER":{"nxt.enableAPIServer":"Accept http/json API requests.","nxt.allowedBotHosts":"Hosts from which to allow http/json API requests, if enabled. Set to * to allow all. Can also specify networks in CIDR notation, e.g. 192.168.1.0/24.","nxt.apiServerPort":"Port for http/json API requests.","nxt.apiServerHost":"Host interface on which to listen for http/json API request, default localhost only. Set to 0.0.0.0 to allow the API server to accept requests from all network interfaces.","nxt.apiServerIdleTimeout":"Idle timeout for http/json API request connections, milliseconds.","nxt.apiResourceBase":"Directory with html and javascript files for the new client UI, and admin tools utilizing the http/json API.","nxt.apiWelcomeFile":"Default page for the API server.","nxt.javadocResourceBase":"Java API documentation directory, optional.","nxt.apiServerCORS":"Enable Cross Origin Filter for the API server.","nxt.apiSSL":"Enable SSL for the API server (also need to set nxt.keyStorePath and nxt.keyStorePassword).","nxt.apiServerEnforcePOST":"Enforce requests that require POST to only be accepted when submitted as POST.","nxt.enableAPIServerGZIPFilter":"Compress Http responses for the API server."},"WEBSOCKET SERVER":{"nxt.enableWebsockets":"Accept websocket/json API requests.","nxt.websocketServerPort":"Port for websocket/json API requests.","nxt.websocketServerHost":"Host interface on which to listen for websocket/json API request, default localhost only. Set to 0.0.0.0 to allow the API server to accept requests from all network interfaces.","nxt.websocketSSL":"Enable SSL for the WEBSOCKET server (also need to set nxt.keyStorePath and nxt.keyStorePassword)."},"OLD NRS USER INTERFACE":{"nxt.enableUIServer":"Enable the deprecated NRS user interface.","nxt.allowedUserHosts":"Hosts from which to allow NRS user interface requests, if enabled. Set to * to allow all.","nxt.uiServerPort":"Port for NRS user interface server.","nxt.uiServerHost":"Host interface for NRS user interface server, default localhost only. Set to 0.0.0.0 to allow the UI to be accessed on all network interfaces.","nxt.uiServerIdleTimeout":"Idle timeout for NRS user interface server, milliseconds.","nxt.uiResourceBase":"Directory with html and javascript files for the NRS client user interface.","nxt.uiServerCORS":"Enable Cross Origin Filter for NRS user interface server.","nxt.uiSSL":"Enable SSL for the NRS user interface (also need to set nxt.keyStorePath and nxt.keyStorePassword).","nxt.uiServerEnforcePOST":"Enforce requests that require POST to only be accepted when submitted as POST."},DEBUGGING:{"nxt.enableLogTraceback":"Include caller traceback in log messages.","nxt.enableStackTraces":"Enable logging of exception stack traces.","nxt.communicationLoggingMask":"Used for debugging peer to peer communications. 1=exceptions, 2=non 200 response, 4=200 response","nxt.debugTraceAccounts":"Track balances of the following accounts and related events for debugging purposes.","nxt.debugTraceLog":"File name for logging tracked account balances.","nxt.debugTraceSeparator":"Separator character for trace log.","nxt.debugTraceQuote":"Quote character for trace log.","nxt.debugLogUnconfirmed":"Log changes to unconfirmed balances."},DATABASE:{"nxt.dbUrl":"Database connection JDBC url, see the H2 documentation for possible customizations. Append ;AUTO_SERVER=TRUE to enable automatic mixed mode access. The nxt_db folder is expected to be in the current working directory, will be created if missing.","nxt.testDbUrl":"Database connection JDBC url to use with the test network, if isTestnet=true","nxt.dbLoginTimeout":"Database connection timeout in seconds.","nxt.dbDefaultLockTimeout":"Database default lock timeout in seconds.","nxt.maxDbConnections":"Maximum simultaneous database connections.","nxt.dbCacheKB":"The memory allocated to database cache, in kB. If set to 0, the cache size varies from a minimum of 16MB for heap sizes 160MB or less, to a maximum of 256MB for heap sizes 640MB or higher.","nxt.trimDerivedTables":"Enable trimming of derived objects tables.","nxt.maxRollback":"If trimming enabled, maintain enough previous height records to allow rollback of at least that many blocks. Must be at least 1440 to allow normal fork resolution. After increasing this value, a full re-scan needs to be done in order for previously trimmed records to be re-created and preserved."},MINT:{"nxt.mint.serverAddress":"Address of the NXT server to which the mint worker submits its transactions (default: localhost)","nxt.mint.currencyCode":"Specify a mintable currency code","nxt.mint.secretPhrase":"Secret phrase for the minting account, this secret phrase is sent to the host specified by nxt.mint.serverAddress therefore do not specify secret phrase of an account with lots of funds","nxt.mint.unitsPerMint":"Number of units to mint per transaction The minting difficulty grows linearly with the number of units per mint","nxt.mint.initialNonce":"The initial nonce used for minting. Set to 0 to start with a random nonce","nxt.mint.threadPoolSize":"Number of concurrency threads used for minting. Set to 0 allocate one thread per processor core","nxt.mint.isSubmitted":"When set to false mint transactions are not submitted when a hash is solved. Set this value to true to perform actual minting"},"FIM Specific":{"nxt.allowedToForge":"For public nodes, only allow these accounts to forge. Values can be a ; delimited list of accounts, an empty value (for no forging allowed) or a * to allow all accounts to forge. "},JETTY:{"nxt.peerServerDoSFilter.maxRequestsPerSec":"Settings for the Jetty Denial Of Service Filter, used for the peer networking server only.","nxt.peerServerDoSFilter.delayMs":"Settings for the Jetty Denial Of Service Filter, used for the peer networking server only.","nxt.peerServerDoSFilter.maxRequestMs":"Settings for the Jetty Denial Of Service Filter, used for the peer networking server only.","nxt.keyStorePath":"keystore file, required if uiSSL or apiSSL are enabled.","nxt.keyStorePassword":"password, required if uiSSL or apiSSL are enabled."},"Developers only":{"nxt.forceValidate":"Force re-validation of blocks and transaction at start.","nxt.forceScan":"Force re-build of derived objects tables at start.","nxt.dumpPeersVersion":"Print a list of peers having this version on exit.","nxt.enableDebugAPI":"Enable API requests used for blockchain and database manipulation.","nxt.timeMultiplier":"Scale epoch time for faster forging. Only works when offline."}},b=angular.module("fim.base");b.factory("ServerConfigProvider",["serverService","plugins",function(b,c){function d(a,c){this.api=a,this.$scope=c,this.defaultConfigPath=b.getConfFilePath(a.engine.type,"nxt-default.properties"),this.userConfigPath=b.getConfFilePath(a.engine.type,"nxt.properties"),this.defaultConfig={},this.userConfig={},this.config={},this.rows=[]}if(isNodeJS)var e=require("fs"),f=require("java-properties"),g=require("os");return d.prototype={load:function(){this.defaultConfig=this.readConfig(this.defaultConfigPath),this.userConfig=this.readConfig(this.userConfigPath),this.config=angular.copy(this.defaultConfig),angular.extend(this.defaultConfig,this.userConfig);for(var b in a){this.rows.push({type:0,name:b});for(var c in a[b])this.rows.push({type:1,name:c,value:this.config[c],description:a[b][c]})}},readConfig:function(a){try{var b=f.of(a);return b.objs}catch(c){return console.log("Could not read config file",c),{}}},serialize:function(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return b.join(g.EOL)},onchange:function(a,b){this.config[a]=b},onsave:function(a){this.userConfig[a]=this.config[a];for(var b in this.userConfig)this.userConfig[b]==this.defaultConfig[b]&&delete this.userConfig[b];e.writeFile(this.userConfigPath,this.serialize(this.userConfig),function(a){a?c.get("alerts").danger({title:"Save failed",message:"Failure, setting not saved"}):c.get("alerts").success({title:"Save sucess",message:"Setting saved"})})},onrestore:function(a,b){var d=b.parent().parent().find("input");d.val(this.config[a]=this.userConfig[a]=this.defaultConfig[a]);for(var f in this.userConfig)this.userConfig[f]==this.defaultConfig[f]&&delete this.userConfig[f];e.writeFile(this.userConfigPath,this.serialize(this.userConfig),function(a){a?c.get("alerts").danger({title:"Restore failed",message:"Failure, setting not restored"}):c.get("alerts").success({title:"Restore sucess",message:"Setting restored"})})}},d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("StatisticsProvider",["nxt","requests","$timeout",function(a,b,c){function d(a,b){this.api=a,this.$scope=b,this.isLoading=!0,this.lastBlockDate=null,this.lastBlockHeight=null,this.lastBlockID=null,this.average=null,this.transactionCountToday=null,this.transactionCountWeek=null,this.transactionCountMonth=null,this.rewardsToday=null,this.rewardsWeek=null,this.rewardsMonth=null}return d.prototype={load:function(){var a=this;this.$scope.$evalAsync(function(){a.isLoading=!0,c(function(){a.getNetworkData()},1,!1)})},getNetworkData:function(){var a=this;this.api.engine.socket().getActivityStatistics().then(function(b){a.$scope.$evalAsync(function(){a.processMofoGetActivityStatistics(b),a.isLoading=!1})},function(){a.$scope.$evalAsync(function(){a.isLoading=!1})})},processMofoGetActivityStatistics:function(b){this.lastBlockDate=a.util.formatTimestamp(b.lastBlock.timestamp),this.lastBlockHeight=b.lastBlock.height,this.lastBlockID=b.lastBlock.block,this.average=b.averageBlockTime24H,this.transactionCountToday=b.transactionCountToday,this.transactionCountWeek=b.transactionCountWeek,this.transactionCountMonth=b.transactionCountMonth,this.rewardsToday=a.util.convertToNXT(b.rewardsToday),this.rewardsWeek=a.util.convertToNXT(b.rewardsWeek),this.rewardsMonth=a.util.convertToNXT(b.rewardsMonth)}},d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AskOrderProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d,e){this.init(a,b,c),this.asset=d,this.decimals=e,a.engine.socket().subscribe("blockPopped",angular.bind(this,this.blockPopped),b),a.engine.socket().subscribe("blockPushed",angular.bind(this,this.blockPushed),b),a.engine.socket().subscribe("ASK_ORDER_ADD*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("ASK_ORDER_UPDATE*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("ASK_ORDER_REMOVE*"+d,angular.bind(this,this.orderRemove),b)}return angular.extend(d.prototype,c.prototype,{sortFunction:function(a,b){return a.priceNum<b.priceNum?-1:a.priceNum>b.priceNum?1:a.height<b.height?-1:a.height>b.height?1:a.order<b.order?-1:a.order>b.order?1:0},uniqueKey:function(a){return a.order},getData:function(a){var c=b.defer(),d={asset:this.asset,firstIndex:a,lastIndex:a+this.pageSize,requestType:"getVirtualAskOrders"};return this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},translate:function(b){b.quantityQNT&&(b.quantity=a.util.convertToQNTf(b.quantityQNT,this.decimals)),b.priceNQT&&(b.price=a.util.calculateOrderPricePerWholeQNT(b.priceNQT,this.decimals),b.total=a.util.convertToNXT(a.util.calculateOrderTotalNQT(b.priceNQT,b.quantityQNT)),b.priceNum=parseFloat(b.price.replace(",","")))},dataIterator:function(a){for(var b=a.askOrders||[],c=0;c<b.length;c++)this.translate(b[c]);return new Iterator(b)},orderAddUpdate:function(a){var b=this;this.$scope.$evalAsync(function(){b.translate(a),b.add(a)})},orderRemove:function(a){var b=this;this.$scope.$evalAsync(function(){b.remove(b.uniqueKey(a))})},blockPushed:function(a){var b=this;this.$scope.$evalAsync(function(){b.forEach(function(b){b.confirmations=a.height-b.height})})},blockPopped:function(){this.delayedReload&&clearTimeout(this.delayedReload);var a=this;this.delayedReload=setTimeout(function(){a.reload()},1e3)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AssetInfoProvider",["nxt","$q","$timeout",function(a,b){var c={};return{getInfo:function(a,d){var e=c[a.engine.type]||(c[a.engine.type]={}),f=b.defer();return e[d]?f.resolve(e[d]):a.engine.socket().getAsset({asset:d,includeDetails:"true",includeVolumes:"true"}).then(function(a){f.resolve(e[d]=a)}),f.promise}}}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("BidOrderProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d,e){this.init(a,b,c),this.asset=d,this.decimals=e,a.engine.socket().subscribe("blockPopped",angular.bind(this,this.blockPopped),b),a.engine.socket().subscribe("blockPushed",angular.bind(this,this.blockPushed),b),a.engine.socket().subscribe("BID_ORDER_ADD*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("BID_ORDER_UPDATE*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("BID_ORDER_REMOVE*"+d,angular.bind(this,this.orderRemove),b)}return angular.extend(d.prototype,c.prototype,{sortFunction:function(a,b){return a.priceNum>b.priceNum?-1:a.priceNum<b.priceNum?1:a.height<b.height?-1:a.height>b.height?1:a.order<b.order?-1:a.order>b.order?1:0},uniqueKey:function(a){return a.order},getData:function(a){var c=b.defer(),d={asset:this.asset,firstIndex:a,lastIndex:a+this.pageSize,requestType:"getVirtualBidOrders"};return this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},translate:function(b){b.quantityQNT&&(b.quantity=a.util.convertToQNTf(b.quantityQNT,this.decimals)),b.priceNQT&&(b.price=a.util.calculateOrderPricePerWholeQNT(b.priceNQT,this.decimals),b.total=a.util.convertToNXT(a.util.calculateOrderTotalNQT(b.priceNQT,b.quantityQNT)),b.priceNum=parseFloat(b.price.replace(",","")))},dataIterator:function(a){for(var b=a.bidOrders||[],c=0;c<b.length;c++)this.translate(b[c]);return new Iterator(b)},orderAddUpdate:function(a){var b=this;this.$scope.$evalAsync(function(){b.translate(a),b.add(a)})},orderRemove:function(a){var b=this;this.$scope.$evalAsync(function(){b.remove(b.uniqueKey(a))})},blockPushed:function(a){var b=this;this.$scope.$evalAsync(function(){b.forEach(function(b){b.confirmations=a.height-b.height})})},blockPopped:function(){this.delayedReload&&clearTimeout(this.delayedReload);var a=this;this.delayedReload=setTimeout(function(){a.reload()},1e3)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("ChartDataProvider",["nxt","$q","$timeout",function(a,b,c){function d(a,b,c,d){this.api=a,this.asset=c,this.decimals=d,this.$scope=b,this.isLoading=!0,this.data=[]}var e=1;return d.prototype={reload:function(){var a=this;this.$scope.$evalAsync(function(){a.data=[],a.isLoading=!0,a.chart=null,c(function(){a.getNetworkData()},1,!1)})},translate:function(b){b.date=a.util.timestampToDate(b.timestamp),b.open=parseFloat(a.util.calculateOrderPricePerWholeQNT(b.open,this.decimals)),b.close=parseFloat(a.util.calculateOrderPricePerWholeQNT(b.close,this.decimals)),b.high=parseFloat(a.util.calculateOrderPricePerWholeQNT(b.high,this.decimals)),b.low=parseFloat(a.util.calculateOrderPricePerWholeQNT(b.low,this.decimals)),b.volume=parseFloat(a.util.convertToQNTf(b.vol,this.decimals)),b.value=b.open},getNetworkData:function(){var a=this;this.api.engine.socket().getAssetChartData({asset:this.asset,window:e}).then(function(b){a.$scope.$evalAsync(function(){if(a.isLoading=!1,b.asset){for(var c,c,d=0;d<b.data.length;d++)c=b.data[d],a.translate(c),a.data.push(c);a.data.sort(function(a,b){return a.timestamp-b.timestamp})}})},function(){a.$scope.$evalAsync(function(){a.isLoading=!1})})}},d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("ChartsProvider",["nxt","$q","$timeout",function(a,b,c){function d(a,b){var c=document.createElement("span");c.setAttribute("class",a),c.setAttribute("style","display:none"),document.body.appendChild(c);var d=window.getComputedStyle(c).getPropertyValue(b);return c.parentNode.removeChild(c),d}function e(){return g||(g={color:d("","color"),backgroundColor:d("","background-color"),lineColor:d("btn btn-primary","background-color")}),g}function f(a,b,c,d){this.api=a,this.asset=c,this.decimals=d,this.$scope=b,this.isLoading=!0,this.chartdata=[],this.chart=null,a.engine.socket().subscribe("blockPopped",angular.bind(this,this.blockPopped),b),a.engine.socket().subscribe("VIRTUAL_TRADE*"+c,angular.bind(this,this.virtualTrade),b)}var g=null,h=1;return f.prototype={reload:function(){var a=this;this.$scope.$evalAsync(function(){a.chartdata.length=0,a.isLoading=!0,a.chart=null,c(function(){a.getNetworkData()},1,!1)})},translate:function(b){b.date=a.util.timestampToDate(b.timestamp),b.open=parseFloat(a.util.calculateOrderPricePerWholeQNT(b.open,this.decimals)),b.close=parseFloat(a.util.calculateOrderPricePerWholeQNT(b.close,this.decimals)),b.high=parseFloat(a.util.calculateOrderPricePerWholeQNT(b.high,this.decimals)),b.low=parseFloat(a.util.calculateOrderPricePerWholeQNT(b.low,this.decimals)),b.volume=parseFloat(a.util.convertToQNTf(b.vol,this.decimals)),b.value=b.open},getNetworkData:function(){var a=this;this.api.engine.socket().getAssetChartData({asset:this.asset,window:h}).then(function(b){a.$scope.$evalAsync(function(){if(a.isLoading=!1,b.asset){for(var c,c,d=0;d<b.data.length;d++)c=b.data[d],a.translate(c),a.chartdata.push(c);a.chartdata.sort(function(a,b){return a.timestamp-b.timestamp}),null==a.chart?a.buildChart().then(function(b){a.chart=b,a.layout()}):(a.chart.dataSets[0].dataProvider=a.chartdata,a.chart.validateData(),a.layout())}})},function(){a.$scope.$evalAsync(function(){a.isLoading=!1})})},blockPopped:function(){this.delayedReload&&clearTimeout(this.delayedReload);var a=this;this.delayedReload=setTimeout(function(){a.reload()},1e3)},virtualTrade:function(){this.blockPopped()},layout:function(){var a=this;c(function(){a.chart.invalidateSize(),a.chart.periodSelector.setDefaultPeriod()},50,!1)},buildChart:function(){var a=b.defer(),d=this;return c(function(){var b=e();c(function(){a.resolve(d._buildChart(b))},200)},1,!1),a.promise},_buildChart:function(a){var b=AmCharts.makeChart("chartdiv",{type:"stock",theme:"none",pathToImages:"/images/",categoryAxesSettings:{minPeriod:"15ss",equalSpacing:!0,maxSeries:1e3},extendToFullPeriod:!1,dataSets:[{lineColor:a.lineColor,gridColor:a.color,fieldMappings:[{fromField:"value",toField:"value"},{fromField:"volume",toField:"volume"},{fromField:"open",toField:"open"},{fromField:"low",toField:"low"},{fromField:"close",toField:"close"},{fromField:"high",toField:"high"}],dataProvider:this.chartdata,categoryField:"date"}],panels:[{showCategoryAxis:!1,title:"Value",percentHeight:60,lineColor:a.lineColor,color:a.color,stockGraphs:[{id:"g1",valueField:"value",type:"line",lineThickness:2,bullet:"round",lineColor:a.lineColor,color:a.color}],stockLegend:{valueTextRegular:" ",markerType:"none",lineColor:a.lineColor,color:a.color}},{title:"Volume",percentHeight:40,lineColor:a.lineColor,color:a.color,stockGraphs:[{valueField:"volume",type:"column",cornerRadiusTop:2,fillAlphas:1,lineColor:a.lineColor,color:a.color}],stockLegend:{valueTextRegular:" ",markerType:"none",lineColor:a.lineColor,color:a.color}}],chartScrollbarSettings:{graph:"g1",usePeriod:"10mm",position:"bottom"},chartCursorSettings:{valueBalloonsEnabled:!0},periodSelector:{position:"bottom",dateFormat:"YYYY-MM-DD",inputFieldWidth:50,inputFieldsEnabled:!1,periods:[{period:"hh",label:"1 hour",count:1,selected:!0},{period:"DD",label:"1 day",count:1,selected:!1},{period:"DD",label:"1 week",count:7,selected:!1},{period:"MM",count:1,label:"1 month",selected:!1},{period:"MAX",label:"MAX"}]},panelsSettings:{usePrefixes:!0}});return b}},f}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("MyOrdersProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d,e,f){this.init(a,b,c),this.asset=d,this.decimals=e,this.accounts=f,a.engine.socket().subscribe("blockPopped",angular.bind(this,this.blockPopped),b),a.engine.socket().subscribe("blockPushed",angular.bind(this,this.blockPushed),b),a.engine.socket().subscribe("ASK_ORDER_ADD*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("ASK_ORDER_UPDATE*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("ASK_ORDER_REMOVE*"+d,angular.bind(this,this.orderRemove),b),a.engine.socket().subscribe("BID_ORDER_ADD*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("BID_ORDER_UPDATE*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("BID_ORDER_REMOVE*"+d,angular.bind(this,this.orderRemove),b)}return angular.extend(d.prototype,c.prototype,{sortFunction:function(a,b){return b.confirmations<a.confirmations?1:b.confirmations>a.confirmations?-1:a.order<b.order?1:a.order>b.order?-1:0},uniqueKey:function(a){return a.order},getData:function(a){var c=b.defer(),d={asset:this.asset,accounts:this.accounts,firstIndex:a,lastIndex:a+this.pageSize};return this.accounts&&this.accounts.length?this.api.engine.socket().getMyOpenOrders(d).then(c.resolve,c.reject):c.resolve({}),c.promise},translate:function(b){b.quantity=a.util.convertToQNTf(b.quantityQNT,this.decimals),b.price=a.util.calculateOrderPricePerWholeQNT(b.priceNQT,this.decimals),b.total=a.util.convertToNXT(a.util.calculateOrderTotalNQT(b.priceNQT,b.quantityQNT))},dataIterator:function(a){for(var b=(a.decimals,a.orders||[]),c=0;c<b.length;c++)this.translate(b[c]);return new Iterator(b)},getTypeColor:function(a){return"buy"==a?"green":"red"},blockPopped:function(){this.delayedReload&&clearTimeout(this.delayedReload);
var a=this;this.delayedReload=setTimeout(function(){a.reload()},1e3)},blockPushed:function(a){var b=this;this.$scope.$evalAsync(function(){b.forEach(function(b){b.confirmations=a.height-b.height})})},orderAddUpdate:function(a){var b=this;this.$scope.$evalAsync(function(){b.translate(a),b.add(a)})},orderRemove:function(a){var b=this;this.$scope.$evalAsync(function(){b.remove(b.uniqueKey(a))})}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("PrivateAccountsProvider",["nxt","$q","IndexedEntityProvider","AssetInfoProvider",function(a,b,c){function d(b,c,d,e){this.init(b,c,d),this.asset=e,this.showWhat="all",this.orderFee="0",this.tradeFee="0",this.subscribe("blockPoppedNew",this.blockPopped),this.subscribe("blockPushedNew",this.blockPushed);var f=this;b.engine.socket().getAsset({asset:e,includeDetails:"true"}).then(function(b){var c=a.util.convertRSAddress(b.issuerRS);f.subscribe("removedUnConfirmedTransactions-"+c,f.removedUnConfirmedTransactions),f.subscribe("addedUnConfirmedTransactions-"+c,f.addedUnConfirmedTransactions),f.subscribe("addedConfirmedTransactions-"+c,f.addedConfirmedTransactions),f.$scope.$evalAsync(function(){f.orderFee=a.util.convertToQNTf(String(b.orderFeePercentage),6)||"0",f.tradeFee=a.util.convertToQNTf(String(b.tradeFeePercentage),6)||"0"})})}return angular.extend(d.prototype,c.prototype,{sortFunction:function(a,b){return a.confirmations-b.confirmations},uniqueKey:function(a){return a.id_rs?a.id_rs:a.recipientRS},getData:function(a){var c=b.defer(),d={asset:this.asset,firstIndex:a,lastIndex:a+this.pageSize};switch(this.showWhat){case"allowed":d.allowed=!0;break;case"prohibited":d.allowed=!1}return this.api.engine.socket().getAssetPrivateAccounts(d).then(c.resolve,c.reject),c.promise},dataIterator:function(a){for(var b=a.accounts||[],c=0;c<b.length;c++){b[c]}return new Iterator(b)},transactionIterator:function(b){console.log("transactionIterator",b);for(var c,c,d=[],e=0;e<b.length;e++)c=b[e],40!=c.type||3!=c.subtype?40!=c.type||1!=c.subtype&&2!=c.subtype||c.attachment&&c.attachment.asset==this.asset&&d.push({id_rs:c.recipientRS,name:c.recipientName,allowed:1==c.subtype,confirmations:0}):(this.orderFee=a.util.convertToQNTf(String(c.attachment.orderFeePercentage),6)||"0",this.tradeFee=a.util.convertToQNTf(String(c.attachment.tradeFeePercentage),6)||"0");return new Iterator(d)},blockPopped:function(){var a=this;this.$scope.$evalAsync(function(){a.forEach(function(a){try{a.confirmations--}catch(b){}})})},blockPushed:function(){var a=this;this.$scope.$evalAsync(function(){a.forEach(function(a){try{a.confirmations++}catch(b){}})})}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("TradesProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d,e){this.init(a,b,c),this.asset=d,this.decimals=e,a.engine.socket().subscribe("blockPopped",angular.bind(this,this.blockPopped),b),a.engine.socket().subscribe("blockPushed",angular.bind(this,this.blockPushed),b),a.engine.socket().subscribe("TRADE_ADDED*"+d,angular.bind(this,this.tradeAddUpdate),b),a.engine.socket().subscribe("TRADE_UPDATED*"+d,angular.bind(this,this.tradeAddUpdate),b),a.engine.socket().subscribe("TRADE_REMOVED*"+d,angular.bind(this,this.tradeRemove),b)}return angular.extend(d.prototype,c.prototype,{sortFunction:c.prototype.transactionSort,uniqueKey:function(a){return a.bidOrder+a.askOrder},getData:function(a){var c=b.defer(),d={asset:this.asset,firstIndex:a,lastIndex:a+this.pageSize,requestType:"getVirtualTrades"};return this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},translate:function(b){b.quantityQNT&&(b.quantity=a.util.convertToQNTf(b.quantityQNT,this.decimals)),b.priceNQT&&(b.price=a.util.calculateOrderPricePerWholeQNT(b.priceNQT,this.decimals),b.total=a.util.convertToNXT(a.util.calculateOrderTotalNQT(b.priceNQT,b.quantityQNT))),b.timestamp&&(b.date=a.util.formatTimestamp(b.timestamp,!0))},dataIterator:function(a){for(var b=0;b<a.trades.length;b++)this.translate(a.trades[b]);return new Iterator(a.trades)},getTypeColor:function(a){return"buy"==a?"green":"red"},tradeAddUpdate:function(a){var b=this;this.$scope.$evalAsync(function(){b.translate(a),b.add(a)})},tradeRemove:function(a){var b=this;this.$scope.$evalAsync(function(){b.remove(b.uniqueKey(a))})},blockPushed:function(a){var b=this;this.$scope.$evalAsync(function(){b.forEach(function(b){b.confirmations=a.height-b.height})})},blockPopped:function(){this.delayedReload&&clearTimeout(this.delayedReload);var a=this;this.delayedReload=setTimeout(function(){a.reload()},1e3)}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("MyBidOrderProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d,e,f){this.init(a,b,c),this.asset=d,this.decimals=e,this.account=f,a.engine.socket().subscribe("blockPopped",angular.bind(this,this.blockPopped),b),a.engine.socket().subscribe("blockPushed",angular.bind(this,this.blockPushed),b),a.engine.socket().subscribe("BID_ORDER_ADD*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("BID_ORDER_UPDATE*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("BID_ORDER_REMOVE*"+d,angular.bind(this,this.orderRemove),b)}return angular.extend(d.prototype,c.prototype,{sortFunction:function(a,b){return a.priceNum>b.priceNum?-1:a.priceNum<b.priceNum?1:a.height<b.height?-1:a.height>b.height?1:a.order<b.order?-1:a.order>b.order?1:0},uniqueKey:function(a){return a.order},getData:function(a){var c=b.defer(),d={asset:this.asset,account:this.account,firstIndex:a,lastIndex:a+this.pageSize,requestType:"getVirtualBidOrders"};return this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},translate:function(b){b.quantityQNT&&(b.quantity=a.util.convertToQNTf(b.quantityQNT,this.decimals)),b.priceNQT&&(b.price=a.util.calculateOrderPricePerWholeQNT(b.priceNQT,this.decimals),b.total=a.util.convertToNXT(a.util.calculateOrderTotalNQT(b.priceNQT,b.quantityQNT)),b.priceNum=parseFloat(b.price.replace(",","")))},dataIterator:function(a){for(var b=(a.decimals,a.bidOrders||[]),c=0;c<b.length;c++)this.translate(b[c]);return new Iterator(b)},getTypeColor:function(a){return"buy"==a?"green":"red"},blockPopped:function(){this.delayedReload&&clearTimeout(this.delayedReload);var a=this;this.delayedReload=setTimeout(function(){a.reload()},1e3)},blockPushed:function(a){var b=this;this.$scope.$evalAsync(function(){b.forEach(function(b){b.confirmations=a.height-b.height})})},orderAddUpdate:function(a){if(!a.accountRS||a.accountRS==this.account){var b=this;this.$scope.$evalAsync(function(){b.translate(a),b.add(a)})}},orderRemove:function(a){var b=this;this.$scope.$evalAsync(function(){b.remove(b.uniqueKey(a))})}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("MyAskOrderProvider",["nxt","$q","IndexedEntityProvider",function(a,b,c){function d(a,b,c,d,e,f){this.init(a,b,c),this.asset=d,this.decimals=e,this.account=f,a.engine.socket().subscribe("blockPopped",angular.bind(this,this.blockPopped),b),a.engine.socket().subscribe("blockPushed",angular.bind(this,this.blockPushed),b),a.engine.socket().subscribe("ASK_ORDER_ADD*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("ASK_ORDER_UPDATE*"+d,angular.bind(this,this.orderAddUpdate),b),a.engine.socket().subscribe("ASK_ORDER_REMOVE*"+d,angular.bind(this,this.orderRemove),b)}return angular.extend(d.prototype,c.prototype,{sortFunction:function(a,b){return a.priceNum<b.priceNum?-1:a.priceNum>b.priceNum?1:a.height<b.height?-1:a.height>b.height?1:a.order<b.order?-1:a.order>b.order?1:0},uniqueKey:function(a){return a.order},getData:function(a){var c=b.defer(),d={asset:this.asset,account:this.account,firstIndex:a,lastIndex:a+this.pageSize,requestType:"getVirtualAskOrders"};return this.api.engine.socket().callAPIFunction(d).then(c.resolve,c.reject),c.promise},translate:function(b){b.quantityQNT&&(b.quantity=a.util.convertToQNTf(b.quantityQNT,this.decimals)),b.priceNQT&&(b.price=a.util.calculateOrderPricePerWholeQNT(b.priceNQT,this.decimals),b.total=a.util.convertToNXT(a.util.calculateOrderTotalNQT(b.priceNQT,b.quantityQNT)),b.priceNum=parseFloat(b.price.replace(",","")))},dataIterator:function(a){for(var b=(a.decimals,a.askOrders||[]),c=0;c<b.length;c++)this.translate(b[c]);return new Iterator(b)},getTypeColor:function(a){return"buy"==a?"green":"red"},blockPopped:function(){this.delayedReload&&clearTimeout(this.delayedReload);var a=this;this.delayedReload=setTimeout(function(){a.reload()},1e3)},blockPushed:function(a){var b=this;this.$scope.$evalAsync(function(){b.forEach(function(b){b.confirmations=a.height-b.height})})},orderAddUpdate:function(a){if(!a.accountRS||a.accountRS==this.account){var b=this;this.$scope.$evalAsync(function(){b.translate(a),b.add(a)})}},orderRemove:function(a){var b=this;this.$scope.$evalAsync(function(){b.remove(b.uniqueKey(a))})}}),d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("AssetDetailProvider",["nxt","$q","IndexedEntityProvider","$timeout",function(a,b,c,d){function e(a,b,c,d,e){this.api=a,this.$scope=b,this.asset=c,this.decimals=d,this.account=e,this.data={}}return e.prototype={reload:function(){var a=this,c=b.defer();return this.$scope.$evalAsync(function(){a.isLoading=!0,d(function(){a.getNetworkData(c)},1,!1)}),c.promise},processData:function(b){var c=this.data;c.name=b.name,c.description=b.description,c.issuerRS=b.issuerRS,c.issuerName=b.issuerName,c.quantityQNT=b.quantityQNT,c.numberOfTrades=b.numberOfTrades,c.numberOfTransfers=b.numberOfTransfers,c.numberOfAccounts=b.numberOfAccounts,c.volumeTodayQNT=b.volumeTodayQNT,c.numberOfTradesToday=b.numberOfTradesToday,c.volumeTotalQNT=b.volumeTotalQNT,c.orderFeePercentage=b.orderFeePercentage,c.tradeFeePercentage=b.tradeFeePercentage,c.type="",c.lastPriceNQT=b.lastPriceNQT,c.lastPriceNXT=a.util.calculateOrderPricePerWholeQNT(c.lastPriceNQT,this.decimals),c.quantity=a.util.convertToQNTf(b.quantityQNT,this.decimals),c.volumeToday=a.util.convertToQNTf(b.volumeTodayQNT,this.decimals),c.volumeTotal=a.util.convertToQNTf(b.volumeTotalQNT,this.decimals),c.orderFee=a.util.convertToQNTf(String(b.orderFeePercentage),6)||"0",c.tradeFee=a.util.convertToQNTf(String(b.tradeFeePercentage),6)||"0",c.isPrivate=b.type&&1==b.type;var d=new BigInteger(String(b.quantityQNT)),e=new BigInteger(String(b.lastPriceNQT)),f=d.multiply(e).toString();c.marketcapNXT=a.util.convertToNXT(f)},getNetworkData:function(a){var c=b.defer(),d=this;return this.api.engine.socket().getAsset({asset:this.asset,includeDetails:"true",includeVolumes:"true"}).then(function(b){d.$scope.$evalAsync(function(){d.isLoading=!1,d.processData(b),c.resolve(),a&&a.resolve()})},function(){d.$scope.$evalAsync(function(){d.isLoading=!1,c.resolve(),a&&a.resolve()})}),c.promise}},e}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("OrderEntryProvider",["nxt","$q","IndexedEntityProvider","$timeout",function(a){function b(a,b,c,d,e,f){this.api=a,this.$scope=b,this.asset=c,this.decimals=d,this.account=e,this.privateAsset=f,this.quantity="",this.priceNXT="",this.orderFeeNXT="0",this.totalPriceNXT="0",this.transactionFeeNXT=this.api.engine.feeCost}return b.prototype={reCalculate:function(){var b=this;this.$scope.$evalAsync(function(){var c=new BigInteger(a.util.convertToQNT(b.quantity,b.decimals)),d=new BigInteger(a.util.calculatePricePerWholeQNT(a.util.convertToNQT(b.priceNXT),b.decimals)),e="";if("0"==d.toString()||"0"==c.toString()?(b.totalPriceNXT="0",b.orderFeeNXT="0.1"):(e=c.multiply(d),b.totalPriceNXT=a.util.convertToNXT(e),b.orderFeeNXT="0.1"),b.privateAsset&&e){var f=e.multiply(new BigInteger(String(b.privateAsset.orderFeePercentage))).divide(new BigInteger("100000000")).toString();b.orderFeeNXT=a.util.convertToNXT(f),b.orderFeeNQT=f;var g=e.add(new BigInteger(f));b.totalPriceNXT=a.util.convertToNXT(g.toString());var h=c.multiply(new BigInteger(String(b.privateAsset.orderFeePercentage))).divide(new BigInteger("100000000")).toString();b.orderFeeQNT=h.toString()}})}},b}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("timeagoService",["$translate","$rootScope",function(a,b){function c(a){return f(d(a))}function d(a){return(new Date).getTime()-a.getTime()}function e(){i={refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:a.instant("time.suffixAgo"),suffixFromNow:a.instant("time.suffixFromNow"),inPast:a.instant("time.inPast"),seconds:a.instant("time.seconds"),minute:a.instant("time.minute"),minutes:function(b){return a.instant("time.minutes",{val:b})},hour:a.instant("time.hour"),hours:function(b){return a.instant("time.hours",{val:b})},day:a.instant("time.day"),days:function(b){return a.instant("time.days",{val:b})},month:a.instant("time.month"),months:function(b){return a.instant("time.months",{val:b})},year:a.instant("time.year"),years:function(b){return a.instant("time.years",{val:b})},wordSeparator:" "}}}function f(a){function b(a,b){return angular.isFunction(a)?a(b):a}if(!i.allowPast&&!i.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var c=i.strings,d=c.prefixAgo,e=c.suffixAgo;if(i.allowFuture&&0>a&&(d=c.prefixFromNow,e=c.suffixFromNow),!i.allowPast&&a>=0)return i.strings.inPast;var f=Math.abs(a)/1e3,g=f/60,h=g/60,j=h/24,k=j/365,l=45>f&&b(c.seconds,Math.round(f))||90>f&&b(c.minute,1)||45>g&&b(c.minutes,Math.round(g))||90>g&&b(c.hour,1)||24>h&&b(c.hours,Math.round(h))||42>h&&b(c.day,1)||30>j&&b(c.days,Math.round(j))||45>j&&b(c.month,1)||365>j&&b(c.months,Math.round(j/30))||1.5>k&&b(c.year,1)||b(c.years,Math.round(k)),m=c.wordSeparator||"";return void 0===c.wordSeparator&&(m=" "),[d,l,e].join(m).trim()}function g(a){var b=a.trim();return b=b.replace(/\.\d+/,""),b=b.replace(/-/,"/").replace(/-/,"/"),b=b.replace(/T/," ").replace(/Z/," UTC"),b=b.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),b=b.replace(/([\+\-]\d\d)$/," $100"),new Date(b)}var h={format:function(a){return c(a instanceof Date?a:"string"==typeof a?g(a):"number"==typeof a?new Date(a):datetime(a))}},i={};return e(),b.$on("$translateChangeSuccess",function(){e()}),h}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("EntityProvider",["nxt","$timeout","$q",function(a,b,c){function d(){}return d.prototype={getData:function(){console.log("EntityProvider.getData not implemented for "+Object.prototype.toString.call(this));var a=c.defer();return a.resolve({msg:"Implement me please"}),a.promise},dataIterator:function(){return console.log("EntityProvider.dataIterator not implemented for "+Object.prototype.toString.call(this)),new Iterator([])},transactionIterator:function(){return console.log("EntityProvider.transactionIterator not implemented for "+Object.prototype.toString.call(this)),new Iterator([])},tradeIterator:function(){return console.log("EntityProvider.tradeIterator not implemented for "+Object.prototype.toString.call(this)),new Iterator([])},uniqueKey:function(a){return console.log("EntityProvider.uniqueKey not implemented for "+Object.prototype.toString.call(this)),a.transaction},sortFunction:function(){return console.log("EntityProvider.sortFunction not implemented for "+Object.prototype.toString.call(this)),0},init:function(a,b,c){this.api=a,this.$scope=b,this.entities=[],this.duplicates={},this.isLoading=!0,this.hasMore=!0,this.timestamp=c},subscribe:function(a,b){this.api.engine.socket().subscribe(a,angular.bind(this,b),this.$scope)},reload:function(){var a=this;this.$scope.$evalAsync(function(){a.entities.length=0,a.duplicates={},a.isLoading=!0,a.hasMore=!0,b(function(){a.getNetworkData(a.timestamp)},1,!1)})},clear:function(){var a=this;this.$scope.$evalAsync(function(){a.entities.length=0,a.keys={}})},loadMore:function(){if(this.loadMoreBusy)this.scheduledLoadMore=!0;else{var a=this;this.loadMoreBusy=c.defer(),this.loadMoreBusy.promise.then(function(){a.loadMoreBusy=null,a.scheduledLoadMore&&(a.scheduledLoadMore=!1,a.loadMore())});var b=this.entities.length?this.entities[this.entities.length-1]:null,d=b?b.timestamp:this.timestamp;this.$scope.$evalAsync(function(){a.isLoading=!0,a.getNetworkData(d).then(a.loadMoreBusy.resolve)})}},getNetworkData:function(a){var b=c.defer(),d=this;return this.getData(a).then(function(a){d.$scope.$evalAsync(function(){d.isLoading=!1;var c=d.dataIterator(a);d.processGetData(c,!1),b.resolve()})},function(){d.$scope.$evalAsync(function(){d.isLoading=!1,b.resolve()})}),b.promise},processGetData:function(a,b){for(this.hasMore=!1;a.hasMore();){var c=a.next(),d=this.uniqueKey(c);if(this.duplicates[d])angular.extend(this.duplicates[d],c);else if(this.hasMore=!0,this.duplicates[d]=c,b){if(this.entities.unshift(c),this.entities.length>40){var e=this.entities.pop();e&&delete this.duplicates[this.uniqueKey(e)]}}else this.entities.push(c)}this.entities.sort(this.sortFunction)},applyFilter:function(a){this.filter=angular.copy(a),this.reload()},removedUnConfirmedTransactions:function(a){var b=this,c=this.entities.length;this.entities=this.entities.filter(function(c){for(var d=0;d<a.length;d++)if(b.uniqueKey(a[d])==b.uniqueKey(c))return delete b.duplicates[b.uniqueKey(c)],!1;return!0}),this.entities.length!=c&&this.$scope.$evalAsync(function(){b.entities.sort(b.sortFunction)})},addedUnConfirmedTransactions:function(a){var b=this,c=this.transactionIterator(a);this.$scope.$evalAsync(function(){b.processGetData(c,!0)})},addedConfirmedTransactions:function(a){var b=this,c=this.transactionIterator(a);this.$scope.$evalAsync(function(){b.processGetData(c,!0)})},addedTrades:function(a){var b=this,c=this.tradeIterator(a);this.$scope.$evalAsync(function(){b.processGetData(c,!0)})},blockPopped:function(a){var b=this;this.$scope.$evalAsync(function(){for(var c,d=[],e=!1,f=0;f<b.entities.length;f++)c=b.entities[f],c.height<=a.height&&(c.confirmations=a.height-c.height,d.push(c),e=!0);b.entities=d,e&&b.entities.sort(b.sortFunction)})},blockPushed:function(a){var b=this;this.$scope.$evalAsync(function(){for(var c=0;c<b.entities.length;c++)b.entities[c].confirmations=a.height-b.entities[c].height})},transactionSort:function(a,b){return b.confirmations<a.confirmations?1:b.confirmations>a.confirmations?-1:a.timestamp<b.timestamp?1:a.timestamp>b.timestamp?-1:0}},d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("IndexedEntityProvider",["nxt","$timeout","$q",function(a,b,c){function d(){}return d.prototype={getData:function(){console.log("IndexedEntityProvider.getData not implemented");var a=c.defer();return a.resolve({msg:"Implement me please"}),a.promise},dataIterator:function(){return console.log("IndexedEntityProvider.dataIterator not implemented"),new Iterator([])},transactionIterator:function(){return console.log("EntityProvider.transactionIterator not implemented for "+Object.prototype.toString.call(this)),new Iterator([])},uniqueKey:function(a){return console.log("IndexedEntityProvider.uniqueKey not implemented"),console.trace(),a},sortFunction:function(){return console.log("IndexedEntityProvider.sortFunction not implemented"),0},init:function(a,b,c,d){this.api=a,this.$scope=b,this.entities=[],this.keys={},this.isLoading=!0,this.hasMore=!0,this.pageSize=c,this.account=d},reload:function(){var a=this,d=c.defer();return this.$scope.$evalAsync(function(){a.entities.length=0,a.keys={},a.isLoading=!0,a.hasMore=!0,b(function(){a.getNetworkData(0,d)},1,!1)}),d.promise},clear:function(){var a=this;this.$scope.$evalAsync(function(){a.entities.length=0,a.keys={}})},loadMore:function(){if(this.loadMoreBusy)this.scheduledLoadMore=!0;else{var a=this;this.loadMoreBusy=c.defer(),this.loadMoreBusy.promise.then(function(){a.loadMoreBusy=null,a.scheduledLoadMore&&(a.scheduledLoadMore=!1,a.loadMore())}),this.$scope.$evalAsync(function(){a.isLoading=!0,a.getNetworkData(a.entities.length).then(a.loadMoreBusy.resolve)})}},getNetworkData:function(a,b){var d=c.defer(),e=this;return this.getData(a).then(function(a){e.$scope.$evalAsync(function(){e.isLoading=!1;var c=e.dataIterator(a);e.processGetData(c,!1),d.resolve(),b&&b.resolve()})},function(){e.$scope.$evalAsync(function(){e.isLoading=!1,d.resolve(),b&&b.resolve()})}),d.promise},processGetData:function(a,b){this.hasMore=a.hasMore();for(var c,d;a.hasMore();)c=a.next(),d=this.uniqueKey(c),this.keys[d]?angular.extend(this.keys[d],c):(this.keys[d]=c,c.uniqueKey=d,b?this.entities.unshift(c):this.entities.push(c));this.sort()},remove:function(a){this.keys[a]&&(delete this.keys[a],this.filter(function(b){return b.uniqueKey!==a}))},add:function(a){var b=this.uniqueKey(a);this.keys[b]?angular.extend(this.keys[b],a):(this.keys[b]=a,a.uniqueKey=b,this.entities.unshift(a)),this.sort()},filter:function(a){this.entities=this.entities.filter(a)},sort:function(){this.entities.sort(angular.bind(this,this.sortFunction))},forEach:function(a){this.entities.forEach(a)},subscribe:function(a,b){this.api.engine.socket().subscribe(a,angular.bind(this,b),this.$scope)},transactionSort:function(a,b){return b.confirmations<a.confirmations?1:b.confirmations>a.confirmations?-1:a.timestamp<b.timestamp?1:a.timestamp>b.timestamp?-1:0},removedUnConfirmedTransactions:function(a){var b=this,c=this.entities.length;this.entities=this.entities.filter(function(c){for(var d=0;d<a.length;d++)if(b.uniqueKey(a[d])==b.uniqueKey(c))return delete b.keys[b.uniqueKey(c)],!1;return!0}),this.entities.length!=c&&this.$scope.$evalAsync(function(){b.sort()})},addedUnConfirmedTransactions:function(a){var b=this,c=this.transactionIterator(a);this.$scope.$evalAsync(function(){b.processGetData(c,!0)})},addedConfirmedTransactions:function(a){var b=this,c=this.transactionIterator(a);this.$scope.$evalAsync(function(){b.processGetData(c,!0)})},blockPopped:function(a){var b=this;this.$scope.$evalAsync(function(){for(var c,d=[],e=!1,f=0;f<b.entities.length;f++)c=b.entities[f],c.height<=a.height?(c.confirmations=a.height-c.height,d.push(c),e=!0):delete b.keys[b.uniqueKey(c)];b.entities=d,e&&b.sort()})},blockPushed:function(a){var b=this;this.$scope.$evalAsync(function(){for(var c=0;c<b.entities.length;c++)b.entities[c].confirmations=a.height-b.entities[c].height})}},d}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("accountsService",["$q","db","plugins",function(a,b,c){function d(d){var e=a.defer(),f=d?b.accounts.filter(d).sortBy("id_rs"):b.accounts.toCollection().sortBy("id_rs");return f.then(function(a){a=a||[];var b=c.get("wallet").getWallet();if(angular.isObject(b)){for(var f,g=Object.getOwnPropertyNames(b),h=0;h<g.length;h++)f=g[h],d?d({id_rs:f})&&a.push({id_rs:f,name:b[f].name}):a.push({id_rs:f,name:b[f].name});var i={};a=a.filter(function(a){return i[a.id_rs]?!1:(i[a.id_rs]=a,!0)})}e.resolve(a)},e.reject),e.promise}var e={};return e.FIM_FILTER=function(a){return 0==a.id_rs.indexOf("FIM-")},e.NXT_FILTER=function(a){return 0==a.id_rs.indexOf("NXT-")},e.getAll=function(a){return d(a)},e.getFirst=function(b){var c=a.defer();return d(function(a){return a.id_rs==b}).then(function(a){c.resolve(a[0])},c.reject),c.promise},e.update=function(a){getFirst(a.id_rs).then(function(a){})},e.onChange=function(a,c){b.accounts.addObserver(a,{"finally":function(){c()}})},e}])}(),function(){"use strict";function a(){if(-1!=navigator.appVersion.indexOf("Win"))return"WIN";if(-1!=navigator.appVersion.indexOf("Mac"))return"MAC";if(-1!=navigator.appVersion.indexOf("X11"))return"LINUX";if(-1!=navigator.appVersion.indexOf("Linux"))return"LINUX";throw new Error("Could not detect OS")}var b={TYPE_NXT:{commands:{WIN:{start:{command:"java",args:["-cp","nxt.jar;lib\\*;conf","nxt.Nxt"]}},LINUX:{start:{command:"java",args:["-cp","nxt.jar:lib/*:conf","nxt.Nxt"]}},MAC:{start:{command:"java",args:["-cp","nxt.jar:lib/*:conf","nxt.Nxt"],extra:"../../../../Resources/"}}},listeners:{stdout:[],stderr:[],exit:[],start:[],ready:[]},messages:[],server:null},TYPE_FIM:{commands:{WIN:{start:{command:"java",args:["-cp","fim.jar;lib\\*;conf","nxt.Nxt"]}},LINUX:{start:{command:"java",args:["-cp","fim.jar:lib/*:conf","nxt.Nxt"]}},MAC:{start:{command:"java",args:["-cp","fim.jar:lib/*:conf","nxt.Nxt"],extra:"../../../../Resources/"}}},listeners:{stdout:[],stderr:[],exit:[],start:[],ready:[]},messages:[],server:null}};isNodeJS&&(process.once("SIGTERM",function(){process.exit(0)}),process.once("SIGINT",function(){process.exit(0)}),process.once("exit",function(){try{b.TYPE_NXT.server&&b.TYPE_NXT.server.shutdown()}catch(a){console.log("NodeJS exit - shutdown nxt",a)}try{b.TYPE_FIM.server&&b.TYPE_FIM.server.shutdown()}catch(a){console.log("NodeJS exit - shutdown fim",a)}}),process.once("uncaughtException",function(a){if(0===process.listeners("uncaughtException").length)throw console.log("uncaughtException",a),child.shutdown(),a}));var c=angular.module("fim.base");c.factory("serverService",["$timeout",function(c){function d(a,b){for(var c=0;c<a.length;c++)a[c].call(null,b)}function e(a,c){b[a].isReady||-1==c.indexOf(" started successfully.")||(d(b[a].listeners.ready,"Server is ready"),b[a].isReady=!0)}var f=/\S/;return{getDir:function(c){try{var d,e="TYPE_NXT"==c?"nxt":"fim",f=require("path");return d=b[c].commands[a()].start.extra?f.join(f.dirname(process.execPath),b[c].commands[a()].start.extra,e):f.join(f.dirname(process.execPath),e),console.log("serverService-getDir",d),d}catch(g){return console.log("server-service.js getCWD",g),""}},getConfFilePath:function(a,b){if(isNodeJS){var c=require("path");return c.join(this.getDir(a),"conf",b)}return""},getStartCommand:function(c){return b[c].commands[a()].start},isNodeJS:function(){return isNodeJS},startServer:function(c){if(this.isRunning(c))throw new Error("Server "+c+" already running");var g=b[c].messages,h=b[c].listeners,i=(require("path"),{cwd:this.getDir(c)}),j=b[c].commands;b[c].isReady=!1;var k=a();d(h.stdout,"Detected Operating System "+k),d(h.stdout,"Starting mofowallet in "+i.cwd);var l=require("child_process").spawn,m=b[c].server=l(j[k].start.command,j[k].start.args,i);m.shutdown=function(){try{this.kill("SIGTERM")}finally{b[c].server=null,b[c].isReady=!1}},m.onstdout=function(a){for(var b=a.toString(),i=b.split(/(\r?\n)/g),j=0;j<i.length;j++)if(i[j].match(f)){for(g.push(i[j]);g.length>2e3;)g.shift();d(h.stdout,i[j]),e(c,i[j])}},m.onstderr=function(a){for(var b=a.toString(),i=b.split(/(\r?\n)/g),j=0;j<i.length;j++)if(i[j].match(f)){for(g.push(i[j]);g.length>2e3;)g.shift();d(h.stderr,i[j]),e(c,i[j])}},m.onexit=function(a){g.push("Exit event. code="+a),d(h.exit,a),console.log("Child process terminated with code: "+a),b[c].isReady=!1,b[c].server=null},m.stdout.on("data",m.onstdout),m.stderr.on("data",m.onstderr),m.on("exit",m.onexit),d(h.start,"Starting server")},stopServer:function(a){b[a].server&&(b[a].server.shutdown(),b[a].server=null,b[a].isReady=!1),c(function(){d(b[a].listeners.exit,"Stopping server")},1e3,!1)},isRunning:function(a){return!!b[a].server},isReady:function(a){return b[a].isReady},addListener:function(a,c,d){b[a].listeners[c].push(d)},removeListener:function(a,c,d){b[a].listeners[c]=b[a].listeners[c].filter(function(a){return a!=d})},getMessages:function(a){return b[a].messages}}}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("requests",["$timeout","$q","$http",function(a,b,c){function d(){this.theater=new e,this.concurrent=6,this.providers=[],this.mainStage=this.theater.createPodium("mainstage",null)}function e(){this.podiums={}}function f(a,b){this.name=a,this.theater=b,this.actors=[]}function g(a,b,c,d){this.builder=a,this.provider=b,this.options=c,this.podium=d,this.state=this.PENDING,this.created=Date.now(),this.retries=0,this.failed=[],this.options.timeout=this.options.timeout||i,this.options.retry_count=this.options.retry_count||j,this.options.giveup=this.options.giveup||k,this.options.priority=this.options.priority||l,this.observers=[]}function h(a,b,c){this.methodName=a,this.methodConfig=b,this.args=c}var i=18e4,j=10,k=36e4,l=0;d.prototype={createRequestBuilder:function(a,b,c){return new h(a,b,c)},registerNodeProvider:function(a){-1==this.providers.indexOf(a)&&this.providers.push(a)}},e.prototype={createPodium:function(a,b){a in this.podiums&&(this.podiums[a].destroy(),delete this.podiums[a]);var c=new f(a,this);if(b){var d=this;b.$on("$destroy",function(){console.log("PODIUM $scope.$on('$destroy')"),c.destroy(),c=null,delete d.podiums[a]})}return this.podiums[a]=c},destroy:function(){for(var a in this.podiums)this.podiums[a].destroy(),delete this.podiums[a]}},f.prototype={createActor:function(a,b,c){if(this.actors){for(var d=new g(a,b,c,this),e=this.actors.length,f=d.options.priority,h=0;h<this.actors.length;h++)if(this.actors[h].options.priority>f){e=h;break}return this.actors.splice(e,0,d),d}},destroy:function(){if(this.theater){for(var a=this.actors.slice(),b=0;b<a.length;b++)a[b].destroy("podium destroyed");delete this.theater.podiums[this.name],this.theater=null,this.actors=null}},removeActor:function(a){var b=this.actors.indexOf(a);this.actors.splice(b,1)}},g.prototype={PENDING:0,ACTIVE:1,DESTROYED:2,addObserver:function(a){this.observers.push(a)},notify:function(a,b){for(var c=0;c<this.observers.length;c++)this.observers[c][a].apply(this.observers[c],b)},perform:function(a){if(this.state!==this.DESTROYED){this.notify(0==this.retries?"start":"retry",[a]),this.http_args=this.builder.build(a),this.http_args.timeout||(this.canceller=b.defer(),this.http_args.timeout=this.canceller.promise),this.options.node_out=a;var d=this;this.state=this.ACTIVE,this.started=Date.now(),console.log("START "+this.builder.methodName+" "+this.options.priority,this.options.caller),c(this.http_args).success(function(b){d.state!==d.DESTROYED&&(d.canceller=null,console.log("SUCCESS "+d.builder.methodName+" "+d.options.priority,d.options.caller),d.duration=Date.now()-d.started,d.notify("success",[a,b,d.options.retry_count-d.retries-1]),d.destroy("done"))}).error(function(b){console.log("FAILED "),d.canceller=null,a.failed_timestamp=Date.now(),a.blacklisted=!0,d.state!==d.DESTROYED&&(d.options.node?(d.duration=Date.now()-d.started,d.notify("failed",[a,b,d.options.retry_count-d.retries-1]),d.destroy("forced node")):d.retry(a))})}},retry:function(a){function b(a){a.provider.getNode2({not:a.failed}).then(function(b){b?(a.retries+=1,a.perform(b)):(a.duration=Date.now()-a.started,a.notify("failed",[b,"",a.options.retry_count-a.retries-1]),a.destroy("no more nodes"))},function(){a.destroy("error could not get node")})}var c=this;return this.retries<this.options.retry_count?(this.failed.push(a),this.canceller?(this.canceller.promise.then(function(){c.canceller=null,b(c)},function(){c.canceller=null,b(c)}),this.canceller.resolve()):b(this),!0):(this.duration=Date.now()-this.started,this.notify("failed",[a,"",this.options.retry_count-this.retries-1]),this.destroy("no retries"),!1)},destroy:function(a){if(this.state!==this.DESTROYED){if(this.state=this.DESTROYED,this.podium&&this.podium.removeActor(this),this.canceller){var b=this;this.canceller.promise.then(function(){console.log("ACTOR DESTROY - SUCCESS"),b.canceller=null,b.notify("destroy",[a]),delete b.observers},function(){console.log("ACTOR DESTROY - FAILURE"),b.canceller=null,b.notify("destroy",[a]),delete b.observers}),this.canceller.resolve()}else this.notify("destroy",[a]),delete this.observers;delete this.options,delete this.podium,delete this.builder,delete this.failed}}},h.prototype={build:function(a){if(this.methodConfig.args.secretPhrase||this.methodConfig.requirePost){var b="";if(Array.isArray(this.args))angular.forEach(this.args,function(a){for(var c in a)b+=(""==b?"":"&")+c+"="+encodeURIComponent(a[c])});else for(var c in this.args)b+=(""==b?"":"&")+c+"="+encodeURIComponent(this.args[c]);return{method:"POST",url:this.create_url(a,this.methodName),data:b,headers:{"Content-Type":"application/x-www-form-urlencoded"}}}var d=this.create_url(a,this.methodName);if(Array.isArray(this.args))angular.forEach(this.args,function(a){for(var c in a)d+=(""==b?"":"&")+c+"="+encodeURIComponent(a[c])
});else for(var c in this.args)d+=(""==b?"":"&")+c+"="+encodeURIComponent(this.args[c]);return{method:"GET",dataType:"json",url:d}},create_url:function(a,b){return[a.url,":",a.port,"/nxt?requestType=",b,"&random=",Math.floor(99999*Math.random())+1].join("")}};var m=new d;return m}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("nxt",["$rootScope","$modal","$http","$q","modals","i18n","db","settings","$timeout","$sce","serverService","plugins","requests","$interval","$translate","MofoSocket",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a){if(a!=y&&a!=z)throw new Error("Unsupported engine type")}function r(b,c){if(q(b),this.type=b,this.test=c,this.port=b==y?c?6986:7986:c?6976:7976,this.net=c?"test":"main",this.blockTime=b==y?30:60,this.feeCost=b==y?.1:1,this.symbol=b==y?"FIM":"NXT",this.symbol_lower=this.symbol.toLowerCase(),a.TRADE_UI_ONLY&&(this.symbol="EUR"),this.localhost="http://localhost",b==y)this.urlPool=a.forceLocalHost?new s(this,[window.location.hostname||"localhost"],"https:"==window.location.protocol):c?new s(this,["188.166.0.145"],!1):new s(this,["cloud.mofowallet.org"],!0);else{if(b!=z)throw new Error("?");a.forceLocalHost?this.urlPool=new s(this,[window.location.hostname||"localhost"],"https:"==window.location.protocol):c?console.log("There are no nxt testnet servers"):this.urlPool=new s(this,["cloud.mofowallet.org"],!0)}}function s(a,b,c){this.engine=a,this.ips=[];for(var d=0;d<b.length;d++)this.ips.push((c?"wss":"ws")+"://"+b[d]+":"+this.engine.port+"/ws/");this.good=angular.copy(this.ips)}function t(a){this.api=a,this.keys=[],this.values=[],this.priv={},this.pub={}}function u(a){var b=this;this.api=a,this.TYPE={ALIAS_NAME:"ALIAS_NAME",ALIAS_URI:"ALIAS_URI",ASSET_NAME:"ASSET_NAME",ASSET_ID:"ASSET_ID",ACCOUNT:"ACCOUNT",ACCOUNT_NAME:"ACCOUNT_NAME",ASK_ORDER:"ASK_ORDER",BID_ORDER:"BID_ORDER",GOODS:"GOODS",GOODS_NAME:"GOODS_NAME",PURCHASE:"PURCHASE",NS_ALIAS_NAME:"NS_ALIAS_NAME",POLL_NAME:"POLL_NAME",POLL_ID:"POLL_ID",TEXT:"TEXT",DESCRIPTION:"DESCRIPTION",ATTACHMENT:"ATTACHMENT",TAGS:"TAGS",DELIVERY_DEADLINE:"DELIVERY_DEADLINE",JSON:"JSON"},this.CONSTANTS={0:{0:{label:"Payment",icon:"fa fa-money",clazz:"warning"}},1:{0:{label:"Message",icon:"fa fa-envelope-o",clazz:"info"},1:{label:"Alias",icon:"fa fa-cloud",clazz:"success"},2:{label:"Create",icon:"fa fa-question",clazz:"info"},3:{label:"Cast",icon:"fa fa-exclamation",clazz:"info"},4:{label:"Hub",icon:"fa fa-bullhorn",clazz:"info"},5:{label:"Account",icon:"fa fa-cogs",clazz:"danger"},6:{label:"Sell",icon:"fa fa-cloud-upload",clazz:"success"},7:{label:"Buy",icon:"fa fa-cloud-download",clazz:"success"}},2:{0:{label:"Issue",icon:"fa fa-area-chart",clazz:"success"},1:{label:"Transfer",icon:"fa fa-paper-plane-o",clazz:"success"},2:{label:"Ask",icon:"fa fa-thumbs-o-down",clazz:"primary"},3:{label:"Bid",icon:"fa fa-thumbs-o-up",clazz:"primary"},4:{label:"Cancel",icon:"fa fa-thumbs-down",clazz:"danger"},5:{label:"Cancel",icon:"fa fa-thumbs-up",clazz:"danger"}},3:{0:{label:"DGS List",icon:"fa fa-shopping-cart",clazz:"success"},1:{label:"DGS Delist",icon:"fa fa-shopping-cart",clazz:"danger"},2:{label:"DGS Change",icon:"fa fa-sliders",clazz:"info"},3:{label:"DGS Change",icon:"fa fa-sliders",clazz:"info"},4:{label:"Purchase",icon:"fa fa-shopping-cart",clazz:"primary"},5:{label:"Delivery",icon:"fa fa-truck",clazz:"success"},6:{label:"Feedback",icon:"fa fa-comment-o",clazz:"info"},7:{label:"Refund",icon:"fa fa-meh-o",clazz:"danger"}},4:{0:{label:"Lease Balance",icon:"fa fa-rocket"}},40:{0:{label:"Private Alias",icon:"fa fa-cubes"}}},this.templates={},angular.forEach(this.TYPE,function(a){b.templates[a]=['<a href__HREF__ data-engine="',b.api.type,'" data-type="',a,'" data-value="__VALUE__" class="txn txn-',a,"__CLICK__",'onmouseover="if (angular.element(this).scope().onTransactionIdentifierMouseOver) { angular.element(this).scope().onTransactionIdentifierMouseOver(this) }" ','onmouseleave="if (angular.element(this).scope().onTransactionIdentifierMouseLeave) { angular.element(this).scope().onTransactionIdentifierMouseLeave(this) }">__LABEL__</a>'].join("")})}function v(a,b){q(a),this.type=a,this.test=b,this.downloaders={},this.engine=new r(a,b),this.crypto=new x(a,this),this.renderer=new u(this),this.decoder=new t(this),m.registerNodeProvider(this.engine)}function w(a,b,c,d,e){q(e);var f={},g=converters.hexStringToByteArray(a);f.type=g[0],f.version=(240&g[1])>>4,f.subtype=15&g[1],f.timestamp=String(converters.byteArrayToSignedInt32(g,2)),f.deadline=String(converters.byteArrayToSignedShort(g,6)),e==y?(f.recipient=String(converters.byteArrayToBigInteger(g,8)),f.publicKey=converters.byteArrayToHexString(g.slice(16,48))):(f.publicKey=converters.byteArrayToHexString(g.slice(8,40)),f.recipient=String(converters.byteArrayToBigInteger(g,40))),f.amountNQT=String(converters.byteArrayToBigInteger(g,48)),f.feeNQT=String(converters.byteArrayToBigInteger(g,56));var h=g.slice(64,96);if(f.referencedTransactionFullHash=converters.byteArrayToHexString(h),"0000000000000000000000000000000000000000000000000000000000000000"==f.referencedTransactionFullHash&&(f.referencedTransactionFullHash=""),f.flags=0,f.version>0&&(f.flags=converters.byteArrayToSignedInt32(g,160),f.ecBlockHeight=String(converters.byteArrayToSignedInt32(g,164)),f.ecBlockId=String(converters.byteArrayToBigInteger(g,168))),"amountNQT"in d||(d.amountNQT="0"),"recipient"in d||(d.recipient="1739068987193023818",d.recipientRS=e==y?"FIM-MRCC-2YLS-8M54-3CMAJ":"NXT-MRCC-2YLS-8M54-3CMAJ"),f.publicKey!=d.publicKey)return console.log("verifyAndSignTransactionBytes.failed | transaction.publicKey != data.publicKey",f,d),!1;if(f.deadline!==d.deadline)return console.log("verifyAndSignTransactionBytes.failed | transaction.deadline !== data.deadline",f,d),!1;if(f.recipient!==d.recipient&&("1739068987193023818"!=d.recipient||"0"!=f.recipient))return console.log("verifyAndSignTransactionBytes.failed | transaction.recipient !== data.recipient",f,d),!1;if(f.amountNQT!==d.amountNQT||f.feeNQT!==d.feeNQT)return console.log("verifyAndSignTransactionBytes.failed | transaction.amountNQT !== data.amountNQT || transaction.feeNQT !== data.feeNQT",f,d),!1;if("referencedTransactionFullHash"in d){if(f.referencedTransactionFullHash!==d.referencedTransactionFullHash)return console.log("verifyAndSignTransactionBytes.failed | transaction.referencedTransactionFullHash !== data.referencedTransactionFullHash",f,d),!1}else if(""!==f.referencedTransactionFullHash)return console.log('verifyAndSignTransactionBytes.failed | transaction.referencedTransactionFullHash !== ""',f,d),!1;if(f.version>0)if("sendMoney"==c||"sendMessage"==c)var i=176;else var i=177;else var i=160;switch(c){case"sendMoney":if(0!==f.type||0!==f.subtype)return console.log("verifyAndSignTransactionBytes.failed | transaction.type !== 0 || transaction.subtype !== 0",f),!1;break;case"sendMessage":if(1!==f.type||0!==f.subtype)return!1;break;case"setAlias":if(1!==f.type||1!==f.subtype)return!1;var j=parseInt(g[i],10);i++,f.aliasName=converters.byteArrayToString(g,i,j),i+=j;var k=converters.byteArrayToSignedShort(g,i);if(i+=2,f.aliasURI=converters.byteArrayToString(g,i,k),i+=k,f.aliasName!==d.aliasName||f.aliasURI!==d.aliasURI)return!1;break;case"setNamespacedAlias":if(40!==f.type||0!==f.subtype)return!1;var j=parseInt(g[i],10);i++,f.aliasName=converters.byteArrayToString(g,i,j),i+=j;var k=converters.byteArrayToSignedShort(g,i);if(i+=2,f.aliasURI=converters.byteArrayToString(g,i,k),i+=k,f.aliasName!==d.aliasName||f.aliasURI!==d.aliasURI)return!1;break;case"createPoll":if(1!==f.type||2!==f.subtype)return!1;var l=converters.byteArrayToSignedShort(g,i);i+=2,f.name=converters.byteArrayToString(g,i,l),i+=l;var m=converters.byteArrayToSignedShort(g,i);i+=2,f.description=converters.byteArrayToString(g,i,m),i+=m;var n=g[i];i++;for(var o=0;n>o;o++){var p=converters.byteArrayToSignedShort(g,i);i+=2,f["option"+o]=converters.byteArrayToString(g,i,p),i+=p}if(f.minNumberOfOptions=String(g[i]),i++,f.maxNumberOfOptions=String(g[i]),i++,f.optionsAreBinary=String(g[i]),i++,f.name!==d.name||f.description!==d.description||f.minNumberOfOptions!==d.minNumberOfOptions||f.maxNumberOfOptions!==d.maxNumberOfOptions||f.optionsAreBinary!==d.optionsAreBinary)return!1;for(var o=0;n>o;o++)if(f["option"+o]!==d["option"+o])return!1;if("option"+o in d)return!1;break;case"castVote":if(1!==f.type||3!==f.subtype)return!1;f.poll=String(converters.byteArrayToBigInteger(g,i)),i+=8;var r=g[i];i++,f.votes=[];for(var o=0;r>o;o++)f.votes.push(g[i]),i++;return!1;case"hubAnnouncement":if(1!==f.type||4!=f.subtype)return!1;{String(converters.byteArrayToBigInteger(g,i))}i+=8;var s=parseInt(g[i],10);i++;for(var t=[],o=0;s>o;o++){var k=parseInt(g[i],10);i++,t[o]=converters.byteArrayToString(g,i,k),i+=k}return!1;case"setAccountInfo":if(1!==f.type||5!=f.subtype)return!1;var l=parseInt(g[i],10);i++,f.name=converters.byteArrayToString(g,i,l),i+=l;var m=converters.byteArrayToSignedShort(g,i);if(i+=2,f.description=converters.byteArrayToString(g,i,m),i+=m,f.name!==d.name||f.description!==d.description)return!1;break;case"sellAlias":if(1!==f.type||6!==f.subtype)return!1;var j=parseInt(g[i],10);if(i++,f.alias=converters.byteArrayToString(g,i,j),i+=j,f.priceNQT=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.alias!==d.aliasName||f.priceNQT!==d.priceNQT)return!1;break;case"buyAlias":if(1!==f.type&&7!==f.subtype)return!1;var j=parseInt(g[i],10);if(i++,f.alias=converters.byteArrayToString(g,i,j),i+=j,f.alias!==d.aliasName)return!1;break;case"issueAsset":if(2!==f.type||0!==f.subtype)return!1;var l=g[i];i++,f.name=converters.byteArrayToString(g,i,l),i+=l;var m=converters.byteArrayToSignedShort(g,i);if(i+=2,f.description=converters.byteArrayToString(g,i,m),i+=m,f.quantityQNT=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.decimals=g[i],i++,f.name!==d.name||f.description!==d.description||f.quantityQNT!==d.quantityQNT||f.decimals!==d.decimals)return!1;break;case"transferAsset":if(2!==f.type||1!==f.subtype)return!1;if(f.asset=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.quantityQNT=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.asset!==d.asset||f.quantityQNT!==d.quantityQNT)return!1;break;case"addPrivateAssetAccount":if(40!==f.type||1!==f.subtype)return!1;if(f.asset=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.asset!==d.asset)return!1;break;case"removePrivateAssetAccount":if(40!==f.type||2!==f.subtype)return!1;if(f.asset=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.asset!==d.asset)return!1;break;case"setPrivateAssetFee":if(40!==f.type||3!==f.subtype)return!1;if(f.asset=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.orderFeePercentage=String(converters.byteArrayToSignedInt32(g,i)),i+=4,f.tradeFeePercentage=String(converters.byteArrayToSignedInt32(g,i)),i+=4,f.asset!==d.asset||f.orderFeePercentage!==d.orderFeePercentage||f.tradeFeePercentage!==d.tradeFeePercentage)return!1;break;case"placeAskOrder":case"placeBidOrder":if(2!==f.type)return!1;if("placeAskOrder"==c&&2!==f.subtype)return!1;if("placeBidOrder"==c&&3!==f.subtype)return!1;if(f.asset=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.quantityQNT=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.priceNQT=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.asset!==d.asset||f.quantityQNT!==d.quantityQNT||f.priceNQT!==d.priceNQT)return!1;break;case"cancelAskOrder":case"cancelBidOrder":if(2!==f.type)return!1;if("cancelAskOrder"==c&&4!==f.subtype)return!1;if("cancelBidOrder"==c&&5!==f.subtype)return!1;if(f.order=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.order!==d.order)return!1;break;case"dgsListing":if(3!==f.type&&0!=f.subtype)return!1;var l=converters.byteArrayToSignedShort(g,i);i+=2,f.name=converters.byteArrayToString(g,i,l),i+=l;var m=converters.byteArrayToSignedShort(g,i);i+=2,f.description=converters.byteArrayToString(g,i,m),i+=m;var u=converters.byteArrayToSignedShort(g,i);if(i+=2,f.tags=converters.byteArrayToString(g,i,u),i+=u,f.quantity=String(converters.byteArrayToSignedInt32(g,i)),i+=4,f.priceNQT=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.name!==d.name||f.description!==d.description||f.tags!==d.tags||f.quantity!==d.quantity||f.priceNQT!==d.priceNQT)return!1;break;case"dgsDelisting":if(3!==f.type&&1!==f.subtype)return!1;if(f.goods=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.goods!==d.goods)return!1;break;case"dgsPriceChange":if(3!==f.type&&2!==f.subtype)return!1;if(f.goods=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.priceNQT=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.goods!==d.goods||f.priceNQT!==d.priceNQT)return!1;break;case"dgsQuantityChange":if(3!==f.type&&3!==f.subtype)return!1;if(f.goods=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.deltaQuantity=String(converters.byteArrayToSignedInt32(g,i)),i+=4,f.goods!==d.goods||f.deltaQuantity!==d.deltaQuantity)return!1;break;case"dgsPurchase":if(3!==f.type&&4!==f.subtype)return!1;if(f.goods=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.quantity=String(converters.byteArrayToSignedInt32(g,i)),i+=4,f.priceNQT=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.deliveryDeadlineTimestamp=String(converters.byteArrayToSignedInt32(g,i)),i+=4,f.goods!==d.goods||f.quantity!==d.quantity||f.priceNQT!==d.priceNQT||f.deliveryDeadlineTimestamp!==d.deliveryDeadlineTimestamp)return!1;break;case"dgsDelivery":if(3!==f.type&&5!==f.subtype)return!1;f.purchase=String(converters.byteArrayToBigInteger(g,i)),i+=8;var v=converters.byteArrayToSignedShort(g,i),w=converters.byteArrayToSignedInt32(g,i);f.goodsIsText=0>w,0>w&&(w&=2147483647),i+=4,f.goodsData=converters.byteArrayToHexString(g.slice(i,i+v)),i+=v,f.goodsNonce=converters.byteArrayToHexString(g.slice(i,i+32)),i+=32,f.discountNQT=String(converters.byteArrayToBigInteger(g,i)),i+=8;var x=f.goodsIsText?"true":"false";if(x!=d.goodsIsText)return!1;if(f.purchase!==d.purchase||f.goodsData!==d.goodsData||f.goodsNonce!==d.goodsNonce||f.discountNQT!==d.discountNQT)return!1;break;case"dgsFeedback":if(3!==f.type&&6!==f.subtype)return!1;if(f.purchase=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.purchase!==d.purchase)return!1;break;case"dgsRefund":if(3!==f.type&&7!==f.subtype)return!1;if(f.purchase=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.refundNQT=String(converters.byteArrayToBigInteger(g,i)),i+=8,f.purchase!==d.purchase||f.refundNQT!==d.refundNQT)return!1;break;case"leaseBalance":if(4!==f.type&&0!==f.subtype)return!1;if(f.period=String(converters.byteArrayToSignedShort(g,i)),i+=2,f.period!==d.period)return!1;break;default:return!1}var z=1;if(0!=(f.flags&z)||"sendMessage"==c&&d.message){{g[i]}i++;var A=converters.byteArrayToSignedInt32(g,i);if(f.messageIsText=0>A,0>A&&(A&=2147483647),i+=4,f.messageIsText)f.message=converters.byteArrayToString(g,i,A);else{var B=g.slice(i,i+A);f.message=converters.byteArrayToHexString(B)}i+=A;var C=f.messageIsText?"true":"false";if(C!=d.messageIsText)return!1;if(f.message!==d.message)return!1}else if(d.message)return!1;if(z<<=1,0!=(f.flags&z)){{g[i]}i++;var D=converters.byteArrayToSignedInt32(g,i);f.messageToEncryptIsText=0>D,0>D&&(D&=2147483647),i+=4,f.encryptedMessageData=converters.byteArrayToHexString(g.slice(i,i+D)),i+=D,f.encryptedMessageNonce=converters.byteArrayToHexString(g.slice(i,i+32)),i+=32;var E=f.messageToEncryptIsText?"true":"false";if(E!=d.messageToEncryptIsText)return!1;if(f.encryptedMessageData!==d.encryptedMessageData||f.encryptedMessageNonce!==d.encryptedMessageNonce)return!1}else if(d.encryptedMessageData)return!1;if(z<<=1,0!=(f.flags&z)){{g[i]}i++;var F=converters.byteArrayToHexString(g.slice(i,i+32));if(F!=d.recipientPublicKey)return!1;i+=32}else if(d.recipientPublicKey)return!1;if(z<<=1,0!=(f.flags&z)){{g[i]}i++;var G=converters.byteArrayToSignedInt32(g,i);f.messageToEncryptToSelfIsText=0>G,0>G&&(G&=2147483647),i+=4,f.encryptToSelfMessageData=converters.byteArrayToHexString(g.slice(i,i+G)),i+=G,f.encryptToSelfMessageNonce=converters.byteArrayToHexString(g.slice(i,i+32)),i+=32;var H=f.messageToEncryptToSelfIsText?"true":"false";if(H!=d.messageToEncryptToSelfIsText)return!1;if(f.encryptToSelfMessageData!==d.encryptToSelfMessageData||f.encryptToSelfMessageNonce!==d.encryptToSelfMessageNonce)return!1}else if(d.encryptToSelfMessageData)return!1;return a.substr(0,192)+b+a.substr(320)}function x(a,b){function c(a,b){return converters.shortArrayToByteArray(curve25519_(converters.byteArrayToShortArray(a),converters.byteArrayToShortArray(b),null))}function d(a){return l.init(),l.update(a),l.getBytes()}function e(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0}function f(a){return a[0]&=65528,a[15]&=32767,a[15]|=16384,a}function g(a){for(var b,c,d=new BigInteger("0",10),e=a.length-1;e>=0;e--)b=d.multiply(new BigInteger("256",10)),c=b.add(new BigInteger(a[e].toString(10),10)),d=c;return d}function h(a,b){if(!window.crypto&&!window.msCrypto)throw new Error("FIX ME !! Should use mouse initiated seed!!!");var d=converters.byteArrayToWordArray(a);if(b.sharedKey)var e=b.sharedKey.slice(0);else var e=c(b.privateKey,b.publicKey);for(var f=0;32>f;f++)e[f]^=b.nonce[f];var g=CryptoJS.SHA256(converters.byteArrayToWordArray(e)),h=new Uint8Array(16);window.crypto?window.crypto.getRandomValues(h):window.msCrypto.getRandomValues(h);var i=converters.byteArrayToWordArray(h),j=CryptoJS.AES.encrypt(d,g,{iv:i}),k=converters.wordArrayToByteArray(j.iv),l=converters.wordArrayToByteArray(j.ciphertext);return k.concat(l)}function i(a,b){if(a.length<16||a.length%16!=0)throw{name:"invalid ciphertext"};var d=converters.byteArrayToWordArray(a.slice(0,16)),e=converters.byteArrayToWordArray(a.slice(16));if(b.sharedKey)var f=b.sharedKey.slice(0);else var f=c(b.privateKey,b.publicKey);for(var g=0;32>g;g++)f[g]^=b.nonce[g];var h=CryptoJS.SHA256(converters.byteArrayToWordArray(f)),i=CryptoJS.lib.CipherParams.create({ciphertext:e,iv:d,key:h}),j=CryptoJS.AES.decrypt(i,h,{iv:d}),k=converters.wordArrayToByteArray(j);return k}function j(a,b){if(!window.crypto&&!window.msCrypto)throw{errorCode:-1,message:$.t("error_encryption_browser_support")};b.sharedKey||(b.sharedKey=c(b.privateKey,b.publicKey));var d=pako.gzip(new Uint8Array(a));b.nonce=new Uint8Array(32),window.crypto?window.crypto.getRandomValues(b.nonce):window.msCrypto.getRandomValues(b.nonce);var e=h(d,b);return{nonce:b.nonce,data:e}}function k(a,b){b.sharedKey||(b.sharedKey=c(b.privateKey,b.publicKey));var d=i(a,b),e=new Uint8Array(d),a=pako.inflate(e);return converters.byteArrayToString(a)}var l={init:SHA256_init,update:SHA256_write,getBytes:SHA256_finalize};this.calculateFullHash=function(a,b){var c=converters.hexStringToByteArray(a),e=converters.hexStringToByteArray(b),f=d(e);l.init(),l.update(c),l.update(f);var g=l.getBytes();return converters.byteArrayToHexString(g)},this.calculateTransactionId=function(a){var b=converters.hexStringToByteArray(a).slice(0,8),c=g(b).toString();return c},this.secretPhraseToPublicKey=function(a){var b=converters.stringToHexString(a),c=converters.hexStringToByteArray(b),e=d(c);return converters.byteArrayToHexString(curve25519.keygen(e).p)},this.getPrivateKey=function(a){return SHA256_init(),SHA256_write(converters.stringToByteArray(a)),converters.shortArrayToHexString(f(converters.byteArrayToShortArray(SHA256_finalize())))},this.getAccountId=function(a,b){var c=this.secretPhraseToPublicKey(a);return this.getAccountIdFromPublicKey(c,b)},this.getAccountIdFromPublicKey=function(a,c){l.init(),l.update(converters.hexStringToByteArray(a));var d=l.getBytes(),e=converters.hexStringToByteArray(converters.byteArrayToHexString(d)).slice(0,8),f=g(e).toString();if(c){var h=b.createAddress();return h.set(f)?h.toString():""}return f},this.getSharedKey=c,this.signBytes=function(a,b){var c=converters.hexStringToByteArray(a),e=converters.hexStringToByteArray(b),f=d(e),g=curve25519.keygen(f).s,h=d(c);l.init(),l.update(h),l.update(g);var i=l.getBytes(),j=curve25519.keygen(i).p;l.init(),l.update(h),l.update(j);var k=l.getBytes(),m=curve25519.sign(k,i,g);return converters.byteArrayToHexString(m.concat(k))},this.verifyBytes=function(a,b,c){var f=converters.hexStringToByteArray(a),g=converters.hexStringToByteArray(b),h=converters.hexStringToByteArray(c),i=f.slice(0,32),j=f.slice(32),k=curve25519.verify(i,j,h),m=d(g);l.init(),l.update(m),l.update(k);var n=l.getBytes();return e(j,n)},this.decryptData=k,this.encryptNote=function(a,b,c){if(!b.sharedKey){if(b.privateKey||(b.privateKey=converters.hexStringToByteArray(this.getPrivateKey(c))),!b.publicKey)throw new Error("Missing publicKey argument");"string"==typeof b.publicKey&&(b.publicKey=converters.hexStringToByteArray(b.publicKey))}var d=j(converters.stringToByteArray(a),b);return{message:converters.byteArrayToHexString(d.data),nonce:converters.byteArrayToHexString(d.nonce)}}}h.initialize([{id:"nxt.localhost",value:"http://127.0.0.1",type:String,label:"localhost",resolve:function(a){A.nxt().engine.localhost=a}},{id:"fim.localhost",value:"http://127.0.0.1",type:String,label:"localhost",resolve:function(a){A.fim().engine.localhost=a}}]);var y="TYPE_FIM",z="TYPE_NXT",A={TYPE_FIM:y,TYPE_NXT:z,api:{},nxt:function(){return this.api[z]||(this.api[z]=new v(z,a.isTestnet))},fim:function(){return this.api[y]||(this.api[y]=new v(y,a.isTestnet))},get:function(a){return a==z||0==a.indexOf("NXT-")?this.nxt():a==y||0==a.indexOf("FIM-")?this.fim():void console.log("Could not determine engine",a)},crypto:function(a){return a==z||0==a.indexOf("NXT-")?this.nxt().crypto:a==y||0==a.indexOf("FIM-")?this.fim().crypto:void console.log("Could not determine engine",a)}};return r.prototype={_constants:{TYPE_FIM:{test:{DIGITAL_GOODS_STORE_BLOCK:19530,PUBLIC_KEY_ANNOUNCEMENT_BLOCK:19530,NAMESPACED_ALIAS_BLOCK:19530},main:{DIGITAL_GOODS_STORE_BLOCK:2e5,PUBLIC_KEY_ANNOUNCEMENT_BLOCK:2e5,NAMESPACED_ALIAS_BLOCK:2e5}},TYPE_NXT:{test:{},main:{DIGITAL_GOODS_STORE_BLOCK:213e3,PUBLIC_KEY_ANNOUNCEMENT_BLOCK:215e3}}},getLocalHostNode:function(){var a=d.defer();return this.localhostNode||(this.localhostNode={port:this.port,url:this.localhost}),a.resolve(this.localhostNode),a.promise},serverIsRunning:function(){return k.isRunning(this.type)},constants:function(){return this._constants[this.type][this.net]},getSocketNodeURL:function(){var a=d.defer();return a.resolve(this.urlPool.getRandom()),a.promise},socket:function(){return this._socket||(this._socket=new p(this))},localSocket:function(){return this._localSocket||(this._localSocket=new p(this,!0))}},s.prototype={getRandom:function(){return this.good[Math.floor(Math.random()*this.good.length)]},badURL:function(a){this.good=this.good.filter(function(b){return b!=a}),0==this.good.length&&(this.good=angular.copy(this.ips))}},t.prototype={MAX_SIZE:1e3,SLIZE_SIZE:100,decode:function(a){if(!a.attachment)return null;var b=a.transaction,c=this.keys.indexOf(b);if(-1!=c)return this.values[c];if(a.attachment.encryptedMessage||a.attachment.encryptToSelfMessage)try{var d=this.tryToDecryptMessage(a);return this.persist(b,!0,d)}catch(e){return console.log(e),null}else if(a.attachment.message){if(a.attachment["version.Message"])return this.persist(b,!1,String(a.attachment.message));try{return this.persist(b,!1,converters.hexStringToString(a.attachment.message))}catch(f){return 0===a.attachment.message.indexOf("feff")?this.persist(b,!1,A.util.convertFromHex16(a.attachment.message)):this.persist(b,!1,A.util.convertFromHex8(a.attachment.message))}}return null},persist:function(a,b,c){var d={encrypted:b,text:c};return null!==c&&(this.keys.push(a),this.values.push(d),this.keys.length>this.MAX_SIZE&&(this.keys.splice(0,this.SLIZE_SIZE),this.values.splice(0,this.SLIZE_SIZE))),d},getPrivateKey:function(a){var b=this.priv[a];if(!b){var c=l.get("wallet");if(c&&c.hasKey(a)){var d=c.getSecretPhrase(a);d&&(b=converters.hexStringToByteArray(this.api.crypto.getPrivateKey(d)),this.priv[a]=b)}}return b},getPublicKey:function(a){var b=this.pub[a];if(!b){var c=l.get("wallet");if(c&&c.hasKey(a)){var d=c.getSecretPhrase(a);d&&(b=converters.hexStringToByteArray(this.api.crypto.secretPhraseToPublicKey(d)),this.pub[a]=b)}}return b},tryToDecryptMessage:function(a){var b,c,d,e,f;return a.attachment.encryptedMessage?(this.getPrivateKey(a.senderRS)?(b=this.getPrivateKey(a.senderRS),c=converters.hexStringToByteArray(a.attachment.recipientPublicKey)):this.getPrivateKey(a.recipientRS)&&(b=this.getPrivateKey(a.recipientRS),c=converters.hexStringToByteArray(a.attachment.senderPublicKey)),b&&c&&(f=a.attachment.encryptedMessage.isText,e=converters.hexStringToByteArray(a.attachment.encryptedMessage.nonce),d=converters.hexStringToByteArray(a.attachment.encryptedMessage.data))):a.attachment.encryptToSelfMessage&&(b=this.getPrivateKey(a.senderRS),b&&(c=this.getPublicKey(a.senderRS),f=a.attachment.encryptToSelfMessage.isText,e=converters.hexStringToByteArray(a.attachment.encryptToSelfMessage.nonce),d=converters.hexStringToByteArray(a.attachment.encryptToSelfMessage.data))),b&&c&&d&&e?this.api.crypto.decryptData(d,{privateKey:b,publicKey:c,nonce:e}):null}},u.prototype={clickHandler:'" onclick="event.preventDefault(); if (angular.element(this).scope().onTransactionIdentifierClick) { angular.element(this).scope().onTransactionIdentifierClick(this) }" ',getHTML:function(a,b,c){return j.trustAsHtml(this._renderTransaction(a,b,c))},_render:function(a,b,c,d){var e=this.templates[a],f=null,g=this.clickHandler;if(a==this.TYPE.ACCOUNT){if(b=b||c,c==d)return"<b>"+escapeHtml(b)+"</b>";f='="#/accounts/'+encodeURIComponent(c)+'/activity/latest"',g=null}else a==this.TYPE.ASSET_ID&&(b=b||c,f='="#/assets/'+this.api.engine.symbol_lower+"/"+encodeURIComponent(c)+'/trade"',g=null);var h=100;b=String(b),b.length>h&&(b=String(b).substr(0,h)+" ..");var i=e.replace(/__LABEL__/g,escapeHtml(b)).replace(/__VALUE__/g,escapeHtml(c||b));return i=i.replace(/__HREF__/g,f||""),i=i.replace(/__CLICK__/g,g||"")},_renderTransaction:function(a,b,c){function d(a,b,d){return i._render(a,b,d,c)}function e(a){var b=null;try{b=i.api.decoder.decode(a)}catch(c){console.log(c)}if(b){var d=["&nbsp;<span>"];if(d.push(a.attachment.encryptToSelfMessage?'<i class="fa fa-comment-o"></i>':a.attachment.encryptedMessage?'<i class="fa fa-comments-o"></i>':'<i class="fa fa-unlock"></i>'),b.text){var e=escapeHtml(b.text);d.push('&nbsp;<span data-text="',e,'" data-sender="',a.senderRS,'" data-recipient="',a.recipientRS,'" ',">",e,"</span></span>")}else d.push('&nbsp;encrypted&nbsp;<a href="#" ','onclick="event.preventDefault(); if (angular.element(this).scope().onMessageUnlockClick) { ','angular.element(this).scope().onMessageUnlockClick(this) }" data-recipient="',a.recipientRS,'" data-sender="',a.senderRS,'">','unlock&nbsp;<i class="fa fa-lock"></i></a></span>');return d.join("")}return""}function f(a,b){return A.util.convertToQNTf(a,b)}function g(a,b){return A.util.calculateOrderPricePerWholeQNT(a,b)}function h(a,b){return A.util.convertToNXT(A.util.calculateOrderTotalNQT(a,b))}var i=this,j=this.api,k=this.TYPE,l=A.util;if(a.tradeType){var m=a;return"buy"==m.tradeType?o.instant("trade.buy",{buyer:d(k.ACCOUNT,m.buyerName,m.buyerRS),quantity:f(m.quantityQNT,m.decimals),asset:d(k.ASSET_ID,m.name,m.asset),seller:d(k.ACCOUNT,m.sellerName,m.sellerRS),price:g(m.priceNQT,m.decimals),symbol:j.engine.symbol,total:h(m.priceNQT,m.quantityQNT,m.getDecimals),details:d(k.JSON,"details",JSON.stringify(a))}):o.instant("trade.sell",{seller:d(k.ACCOUNT,m.sellerName,m.sellerRS),quantity:f(m.quantityQNT,m.decimals),asset:d(k.ASSET_ID,m.name,m.asset),buyer:d(k.ACCOUNT,m.buyerName,m.buyerRS),price:g(m.priceNQT,m.decimals),symbol:j.engine.symbol,total:h(m.priceNQT,m.quantityQNT,m.getDecimals),details:d(k.JSON,"details",JSON.stringify(a))})}switch(a.type){case 0:switch(a.subtype){case 0:return o.instant("transaction.0.0",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),amount:l.convertToNXT(a.amountNQT),symbol:j.engine.symbol,recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)})}case 1:switch(a.subtype){case 0:return o.instant("transaction.1.0",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 1:return o.instant("transaction.1.1",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),aliasName:d(k.ALIAS_NAME,a.attachment.alias),aliasURI:d(k.ALIAS_URI,a.attachment.uri),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 2:return o.instant("transaction.1.2",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),pollId:d(k.POLL_NAME,a.attachment.name),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 3:return o.instant("transaction.1.3",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),pollId:d(k.POLL_ID,a.attachment.pollId),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 4:return o.instant("transaction.1.4",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 5:return o.instant("transaction.1.5",{sender:d(k.ACCOUNT,a.senderRS,a.senderRS),name:d(k.ACCOUNT_NAME,a.attachment.name),description:d(k.DESCRIPTION,"description",a.attachment.description),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 6:return o.instant("transaction.1.6",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),aliasName:d(k.ALIAS_NAME,a.attachment.alias),amount:l.convertToNXT(a.attachment.priceNQT),symbol:j.engine.symbol,details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 7:return o.instant("transaction.1.7",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),aliasName:d(k.ALIAS_NAME,a.attachment.alias),recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)})}case 2:switch(a.subtype){case 0:return o.instant("transaction.2.0",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),assetName:d(k.ASSET_ID,a.attachment.name,a.transaction),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 1:return o.instant("transaction.2.1",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),quantity:f(a.attachment.quantityQNT,a.attachment.decimals),assetName:d(k.ASSET_ID,a.attachment.name,a.attachment.asset),recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 2:return o.instant("transaction.2.2",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),quantity:f(a.attachment.quantityQNT,a.attachment.decimals),assetName:d(k.ASSET_ID,a.attachment.name,a.attachment.asset),price:g(a.attachment.priceNQT,a.attachment.decimals),symbol:j.engine.symbol,total:h(a.attachment.priceNQT,a.attachment.quantityQNT,a.attachment.decimals),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 3:return o.instant("transaction.2.3",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),quantity:f(a.attachment.quantityQNT,a.attachment.decimals),assetName:d(k.ASSET_ID,a.attachment.name,a.attachment.asset),price:g(a.attachment.priceNQT,a.attachment.decimals),symbol:j.engine.symbol,total:h(a.attachment.priceNQT,a.attachment.quantityQNT,a.attachment.decimals),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 4:return o.instant("transaction.2.4",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),order:d(k.ASK_ORDER,a.attachment.order),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 5:return o.instant("transaction.2.5",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),order:d(k.BID_ORDER,a.attachment.order),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)})}case 3:switch(a.subtype){case 0:return o.instant("transaction.3.0",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),goodsName:d(k.GOODS_NAME,a.attachment.name,a.transaction),quantity:l.commaFormat(String(a.attachment.quantity)),price:l.convertToNXT(a.attachment.priceNQT),symbol:j.engine.symbol,description:d(k.DESCRIPTION,"description",a.attachment.description),tags:d(k.TAGS,"tags",a.attachment.tags),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 1:return o.instant("transaction.3.1",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),goodsName:d(k.GOODS,a.attachment.goods),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});
case 2:return o.instant("transaction.3.2",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),goodsName:d(k.GOODS,a.attachment.goods),price:l.convertToNXT(a.attachment.priceNQT),symbol:j.engine.symbol,details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 3:return o.instant("transaction.3.3",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),goodsName:d(k.GOODS,a.attachment.goods),deltaQuantity:escapeHtml(a.attachment.deltaQuantity),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 4:return o.instant("transaction.3.4",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),quantity:l.commaFormat(String(a.attachment.quantity)),goodsName:d(k.GOODS,a.attachment.goods),recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),price:l.convertToNXT(a.attachment.priceNQT),symbol:j.engine.symbol,deadline:d(k.DELIVERY_DEADLINE,"deadline",a.attachment.deliveryDeadlineTimestamp),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 5:return o.instant("transaction.3.5",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),purchase:d(k.PURCHASE,a.attachment.purchase),recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),discount:l.convertToNXT(a.attachment.discountNQT),symbol:j.engine.symbol,details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 6:return o.instant("transaction.3.6",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),purchase:d(k.PURCHASE,a.attachment.purchase),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 7:return o.instant("transaction.3.7",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),discount:l.convertToNXT(a.attachment.discountNQT),symbol:j.engine.symbol,purchase:d(k.PURCHASE,a.attachment.purchase),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)})}case 4:switch(a.subtype){case 0:return o.instant("transaction.4.0",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),period:escapeHtml(a.attachment.period),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)})}case 5:switch(a.subtype){case 0:return o.instant("transaction.5.0",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),code:escapeHtml(a.attachment.code),height:escapeHtml(a.attachment.issuanceHeight),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 1:return o.instant("transaction.5.1",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),code:escapeHtml(a.attachment.code),amount:escapeHtml(a.attachment.amountPerUnitNQT),symbol:j.engine.symbol,details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 2:return o.instant("transaction.5.2",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),units:escapeHtml(a.attachment.units),code:escapeHtml(a.attachment.code),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 3:return o.instant("transaction.5.3",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),units:a.attachment.units,code:a.attachment.code,recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 4:return o.instant("transaction.5.4",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),code:escapeHtml(a.attachment.code),buyRate:escapeHtml(a.attachment.buyRateNQT),sellRate:escapeHtml(a.attachment.sellRateNQT),symbol:j.engine.symbol,details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 5:return o.instant("transaction.5.5",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),units:escapeHtml(a.attachment.units),code:escapeHtml(a.attachment.code),rate:l.convertToNXT(a.attachment.rateNQT),symbol:j.engine.symbol,total:"x",details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 6:return o.instant("transaction.5.6",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),units:escapeHtml(a.attachment.units),code:escapeHtml(a.attachment.code),rate:l.convertToNXT(a.attachment.rateNQT),symbol:j.engine.symbol,total:"x",details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 7:return o.instant("transaction.5.7",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),units:escapeHtml(a.attachment.units),code:escapeHtml(a.attachment.code),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 8:return o.instant("transaction.5.8",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),name:escapeHtml(a.attachment.name),code:escapeHtml(a.attachment.code),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)})}case 40:switch(a.subtype){case 0:return o.instant("transaction.40.0",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),aliasName:d(k.ALIAS_NAME,a.attachment.alias),aliasURI:d(k.ALIAS_URI,a.attachment.uri),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 1:return o.instant("transaction.40.1",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),assetName:d(k.ASSET_ID,a.attachment.name,a.attachment.asset),recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 2:return o.instant("transaction.40.2",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),assetName:d(k.ASSET_ID,a.attachment.name,a.attachment.asset),recipient:d(k.ACCOUNT,a.recipientName,a.recipientRS),details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)});case 3:return o.instant("transaction.40.3",{sender:d(k.ACCOUNT,a.senderName,a.senderRS),assetName:d(k.ASSET_ID,a.attachment.name,a.attachment.asset),orderFee:A.util.convertToQNTf(String(a.attachment.orderFeePercentage),6)||"0",tradeFee:A.util.convertToQNTf(String(a.attachment.tradeFeePercentage),6)||"0",details:d(k.JSON,"details",JSON.stringify(a)),message:e(a)})}}}},v.prototype={createAddress:function(){return new NxtAddress(this.type==z?"NXT":"FIM")},encryptMessage:function(a,b,c,d){var e={account:b};return c&&(e.publicKey=c),this.crypto.encryptNote(a,e,d)},addMessageData:function(a,b){if("sendMoney"==b||"sendMessage"==b)if(a.encrypt_message&&a.message){var c={};a.recipient?c.account=a.recipient:a.encryptedMessageRecipient&&(c.account=a.encryptedMessageRecipient,delete a.encryptedMessageRecipient),a.recipientPublicKey&&(c.publicKey=a.recipientPublicKey);var d=this.crypto.encryptNote(a.message,c,a.secretPhrase);a.encryptedMessageData=d.message,a.encryptedMessageNonce=d.nonce,a.messageToEncryptIsText="true",delete a.encrypt_message,delete a.message}else if(a.note_to_self&&a.message){var d=this.crypto.encryptNote(a.message,{publicKey:converters.hexStringToByteArray(this.crypto.secretPhraseToPublicKey(a.secretPhrase))},a.secretPhrase);a.encryptToSelfMessageData=d.message,a.encryptToSelfMessageNonce=d.nonce,a.messageToEncryptToSelfIsText="true",delete a.note_to_self,delete a.message}else a.public_message&&a.message&&(a.messageIsText="true",delete a.public_message)}},v.prototype.verifyAndSignTransactionBytes=w,A}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["nxt","timeagoService",function(a,b){function c(a,b){if("undefined"==typeof a)return"0";var c="",b=b||8,d="",a=new BigInteger(String(a)),e=String(Math.pow(10,b)),f=a.mod(new BigInteger(e)).toString();if(a=a.divide(new BigInteger(e)),a.compareTo(BigInteger.ZERO)<0&&(a=a.abs(),c="-"),f&&"0"!=f){d=".";for(var g=f.length;b>g;g++)d+="0";d+=f.replace(/0+$/,"")}return a=a.toString(),c+a+d}function d(a){if("undefined"==typeof a)return"0";a=String(a).replace(/,/g,"");var b=a.split("."),c=b[0];if(1==b.length)var d="00000000";else{if(2!=b.length)throw"Invalid input";if(b[1].length<=8)var d=b[1];else var d=b[1].substring(0,8)}for(var e=d.length;8>e;e++)d+="0";var f=c+""+d;if(!/^\d+$/.test(f))throw"Invalid input.";return f=f.replace(/^0+/,""),""===f&&(f="0"),f}function e(a,b){if("undefined"==typeof a)return"0";a=String(a);var c=a.split("."),d=c[0];if(1==c.length){if(b)for(var e=0;b>e;e++)d+="0"}else{if(2!=c.length)throw"Incorrect input";var f=c[1];if(f.length>b)throw"Fraction can only have "+b+" decimals max.";if(f.length<b)for(var e=f.length;b>e;e++)f+="0";d+=f}if(!/^\d+$/.test(d))throw"Invalid input. Only numbers and a dot are accepted.";return d.replace(/^0+/,"")}function f(a,b){if("undefined"==typeof a)return"0";if(a=String(a),a.length<b)for(var c=a.length;b>c;c++)a="0"+a;var d="";return b&&(d="."+a.substring(a.length-b),a=a.substring(0,a.length-b),a||(a="0"),d=d.replace(/0+$/,""),"."==d&&(d="")),a+d}function g(a){if("undefined"==typeof a)return"0";var b=0==a.indexOf("-")&&a.shift();a=a.split(".");for(var c=a[0].split("").reverse().join("").split(/(\d{3})/).reverse(),d=[],e=0;e<c.length;e++)c[e]&&d.push(c[e].split("").reverse().join(""));return(b?"-":"")+d.join(",")+(2==a.length?"."+a[1]:"")}function h(a){var b=new Date(Date.UTC(2013,10,24,12,0,0,0)+1e3*a);return b}function i(a){var b=h(a),c=Date.now();return c-b.getTime()>s}function j(a,c){if(a){if(c){if(t[a])return t[a];u++>1e3&&(u=0,t={});var d=new Date(Date.UTC(2013,10,24,12,0,0,0)+1e3*a);return t[a]=b.format(d)}if(v[a])return v[a];var e={second:"2-digit",minute:"2-digit",hour:"2-digit",day:"numeric",month:"numeric",year:"2-digit"};w++>1e3&&(w=0,v={});var d=new Date(Date.UTC(2013,10,24,12,0,0,0)+1e3*a);return v[a]=d.toLocaleDateString("en-US",e)}return""}function k(a){return Math.floor((a-Date.UTC(2013,10,24,12,0,0,0))/1e3)}function l(a,b){var c=new BigInteger(String(a));return g(c.multiply(new BigInteger(""+Math.pow(10,b))).toString())}function m(a,b){b=new BigInteger(String(b)),a=new BigInteger(String(a));var c=b.multiply(a);return c.toString()}function n(b,c){return"object"!=typeof b&&(b=new BigInteger(String(b))),a.util.convertToNXT(b.multiply(new BigInteger(""+Math.pow(10,c))))}function o(a,b){if(a=String(a),b){var c=a.slice(-b);if(/^[0]+$/.test(c))return a.slice(0,-b);throw $.t("error_invalid_input")}return a}function p(a){var b,c=a.match(/.{1,4}/g)||[],d="";for(b=0;b<c.length;b++)d+=String.fromCharCode(parseInt(c[b],16));return d}function q(a){for(var a=a.toString(),b="",c=0;c<a.length;c+=2)b+=String.fromCharCode(parseInt(a.substr(c,2),16));return b}function r(b){var c=null;if(0==b.indexOf("FIM-")?c=a.fim():0==b.indexOf("NXT-")&&(c=a.nxt()),c){var d=c.createAddress();if(d.set(b))return d.account_id()}}var s=36e5,t={},u=0,v={},w=0;a.util={convertToNXT:function(a){return g(c(a,8))},convertNQT:c,convertToNQT:d,convertToQNTf:f,convertToQNT:e,commaFormat:g,formatOrderPricePerWholeQNT:l,calculateOrderTotalNQT:m,timestampToDate:h,timestampIsOld:i,formatTimestamp:j,calculatePricePerWholeQNT:o,calculateOrderPricePerWholeQNT:n,convertFromHex16:p,convertFromHex8:q,convertToEpochTimestamp:k,convertRSAddress:r,safeAdd:function(a,b){var c=new BigInteger(String(a)),d=new BigInteger(String(b));return c.add(d).toString()}}}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("modals",["$modal",function(a){function b(){c.register("secretPhrase",{templateUrl:"partials/secretphrase-modal.html",controller:"secretPhraseModalController"}),c.register("selectDecryptionAccount",{templateUrl:"partials/select-decryption-account.html",controller:"selectDecryptionAccountController"})}var c,d={};return c={register:function(a,b){d[a]={options:b,instance:null}},open:function(b,c){var e=d[b];if(!e)throw new Error('Modal "'+b+'" is not registered');if(e.instance)throw new Error('Modal "'+b+'" is already opened');var f={};angular.copy(e.options,f),angular.extend(f,c||{}),f.keyboard=!1,f.backdrop="static",e.instance=a.open(f),f.opened&&e.instance.opened.then(function(){f.opened()}),e.instance.result.then(function(a){e.instance=null,f.close&&f.close(a)},function(a){e.instance=null,f.cancel&&f.cancel(a)})},close:function(a,b){var c=d[a];if(!c)throw new Error('Modal "'+a+'" is not registered');if(!c.instance)throw new Error('Modal "'+a+'" is not opened');c.instance.close(b)},cancel:function(a,b){var c=d[a];if(!c)throw new Error('Modal "'+a+'" is not registered');if(!c.instance)throw new Error('Modal "'+a+'" is not opened');c.instance.cancel(b)},isOpen:function(a){var b=d[a];return b&&b.instance},getInstance:function(a){return d[a]?d[a].instance:null}},b(),c}])}(),function(){"use strict";function a(a,b){var c=angular.copy(a);return b.update&&angular.extend(c,b.update),b.remove&&angular.forEach(b.remove,function(a,b){delete c[b]}),c}function b(b,c){var d={};try{angular.forEach(b,function(b,e){d=a(d,b),c.version(e+1).stores(d)})}catch(e){console.log("DB.open.update",e)}}var c=angular.module("fim.base");c.factory("db",["$log","$injector","$timeout","$rootScope",function(a,c,d,e){function f(a,b,c,d){d=d||c;for(var e=0;e<a.length;e++)if(b[c]==a[e][d])return e;return-1}function g(a,b,c,d){return{create:function(c){a[b]=a[b].concat(c),d&&d.create&&d.create(c)},update:function(e){angular.forEach(e,function(d){var e=f(a[b],d,c);e>0&&angular.extend(a[b][e],d)}),d&&d.update&&d.update(e)},remove:function(e){angular.forEach(e,function(d){var e=f(a[b],d,c),g=a[b][e];g&&a[b].splice(e,1)}),d&&d.remove&&d.remove(e)},"finally":function(){d&&d.finally&&d.finally()}}}var h=new Dexie("fimkrypto-db");if(h.delete(),h=null,IS_TEST_NET)var i=new Dexie("fimkrypto-db-test");else var i=new Dexie("fimkrypto-db2");i.createObserver=g;var j="++id,index,recipientRS,amountNQT,transactionSuccess,broadcastSuccess,blockchainStatus,created,broadcasted",k="++id",l="id_rs,name",m="++id,port",n="++id,id_rs,name";b([{update:{masspay_payments:j,settings:k,accounts:l,nodes:m,contacts:n}}],i),i.on("error",function(a){console.error(a)}),i.on("changes",function(a,b){var c={};a.forEach(function(a){var b=c[a.table]||(c[a.table]={create:[],update:[],remove:[]});switch(a.type){case 1:b.create.push(a.obj);break;case 2:b.update.push(a.obj);break;case 3:b.remove.push(a.oldObj)}}),e.$evalAsync(function(){angular.forEach(c,function(a,c){i[c].notifyObservers(function(c){c.create&&c.create(a.create),c.update&&c.update(a.update),c.remove&&c.remove(a.remove),b||c.finally&&c.finally()})})})});try{i.open()}catch(o){console.log("DB.open.error",o)}return c.get("Setting").initialize(i),c.get("Account").initialize(i),c.get("Contact").initialize(i),c.get("Node").initialize(i),c.get("MasspayPluginPayment").initialize(i),i}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("plugins",["$log",function(){var a={};return{get:function(b){if(!(b in a))throw new Error('No such plugin "'+b+'"');return a[b]},register:function(b){return a[b.id]=b,b},install:function(b,c){angular.forEach(a,function(a){a.extends==b&&c(a)})},validate:function(a,b){for(var c in b){var d=b[c];if(d.required&&!(c in a))return console.error("Missing required argument "+c),!1}for(var c in a){var e=a[c];if(!(c in b))return console.error("Unexpected argument "+c),!1;if(!(new Object(e)instanceof b[c].type)&&void 0!=e)return console.error("Argument for "+c+" of wrong type. Expecting "+b[c].type+" but got "+e),!1}return!0}}}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("i18n",function(){var a=!0,b={recipient_unknown:"The recipient account is an unknown account, meaning it has never had an incoming or outgoing transaction. Please double check your recipient address before submitting.",recipient_unknown_pka:"The recipient account is an unknown account, meaning it has never had an incoming or outgoing transaction. To submit this request you must supply the recipient public key also.",recipient_malformed:"The recipient account is malformed, please adjust.",recipient_info:"The recipient account has a public key and a balance of __nxt__ __symbol__.",recipient_no_public_key:"The recipient account does not have a public key, meaning it has never had an outgoing transaction. The account has a balance of __nxt__ __symbol__. Please double check your recipient address before submitting.",recipient_problem:"There is a problem with the recipient account: __problem__",recipient_malformed_suggestion:"The recipient address is malformed, did you mean __recipient__",recipient_malformed_suggestion_plural:"The recipient address is malformed, did you mean any of the following: __multiple__",error_signature_verification_client:"Could not verify signature (client side).",error_signature_verification_server:"Could not verify signature (server side)."};return{format:function(c,d){a&&c+"_pka"in b&&(c+="_pka");var e=b[c];if(d)for(var f in d)e=e.replace(f,d[f]);return e}}})}(),function(){"use strict";var a=angular.module("fim.base");a.factory("settings",["$log","db","$timeout",function(a,b,c){function d(a,b){var d=[];g[a].resolve&&d.push(g[a].resolve),angular.forEach(h,function(b,c){c==a&&(d=d.concat(b))}),c(function(){angular.forEach(d,function(a){a(b)})})}function e(a){if(a.id in g)throw new Error("Duplicate initialization of setting "+a.id);if(a.type&&!(new Object(a.value)instanceof a.type))throw new Error("Setting for "+a.id+" of wrong type");g[a.id]=a,g[a.id].__initialized=!0;var e=f[a.id];void 0==e?b.settings.add({id:a.id,value:a.value,label:a.label}).catch(function(a){console.error(a)}):g[a.id].value=e,(a.resolve||h[a.id])&&c(function(){d(a.id,void 0==e?a.value:e)})}b.settings.addObserver(null,{create:function(a){angular.forEach(a,function(a){g[a.id]=a,d(a.id,a.value)})},update:function(a){angular.forEach(a,function(a){angular.extend(g[a.id],a),d(a.id,a.value)})},remove:function(a){angular.forEach(a,function(a){delete g[a.id]})}});var f=null,g={},h={},i=[];return b.settings.toArray().then(function(a){f={},angular.forEach(a,function(a){f[a.id]=a.value}),b.transaction("rw",b.settings,function(){angular.forEach(i,function(a){e(a)}),i=null}).catch(function(a){console.error(a)})}).catch(function(a){console.error(a)}),{__registry:g,get:function(a){return g[a]?g[a].value:void 0},initialize:function(a){null==f?i=i.concat(a):b.transaction("rw",b.settings,function(){angular.forEach(a,function(a){e(a)})}).catch(function(a){console.error(a)})},update:function(a,c){console.log("update.setting",{id:a,value:c});var d=g[a];if(console.log("update.setting-setting",d),!d)throw new Error("Unknown setting "+a);if(void 0==d.type)console.log('WARNING. Setting type is undefined for "'+a+'"');else if(!(new Object(c)instanceof d.type))throw new Error("Setting for "+d.id+" of wrong type");void 0!=d.type&&(d.value=c,b.settings.put({id:d.id,value:d.value,label:d.label}).catch(function(a){console.error(a)}))},getAll:function(a,b){var c=[];angular.forEach(g,function(b,d){0==d.indexOf(a)&&c.push(b)}),console.log("getAll."+a,c),b(c)},resolve:function(a,b,c){h[a]||(h[a]=[]),h[a].push(b),g[a]&&g[a].__initialized&&b(g[a].value),c&&c.$on("$destroy",function(){for(var c=0;c<h[a].length;c++)h[a][c]==b&&h[a].splice(c,1)})}}}])}(),function(){"use strict";var a=angular.module("fim.base");a.factory("MofoSocket",["$q","$timeout","$interval","$rootScope",function(a,b,c,d){function e(a,b){this.call_id=0,this.engine=a,this.callbacks={},this.timeout_ms=6e4,this.debug=!1,this.debugEvents=!0,this.keepAlive=!0,this.alive_ms=12e4,this.alive_cb=null,this.topics={},this.pending_send=[],this.force_local=b,this.observers=[],this.stopped=!1,this.createIsOpenPromise(),this.refresh()}function f(a,b){b[a]=function(b){return this._rpc(a,b)}}return e.prototype={installMethods:["callAPIFunction","getAccountAssets","getAccountCurrencies","getActivity","getRecentTransactions","getComments","getCommentCount","getAccountPosts","getAssetPosts","getAccounts","getAccount","getAsset","getForgingStats","getActivityStatistics","getAskOrder","getBidOrder","getAssetChartData","getAssetOrders","getAssetTrades","getMyOpenOrders","getBlockchainState","getAccountLessors","search","getAssetPrivateAccounts"],createIsOpenPromise:function(){var b=this;this.is_open&&this.is_open.reject(),this.is_open=a.defer(),this.is_open.promise.then(function(){for(var a=0;a<b.pending_send.length;a++)b.debug&&console.log("WEBSOCKET - in promise send",b.pending_send[a]),b.socket.send(JSON.stringify(b.pending_send[a]));b.pending_send.length=0})},subscribe:function(a,b,c){console.log("subscribe",a),a=a.toUpperCase(),this.topics[a]||(this.topics[a]=[],this._send(["subscribe",a]));for(var d=!1,e=0;e<this.topics[a].length;e++)if(this.topics[a][e]===b){d=!0;break}d||this.topics[a].push(b),c&&c.$on("$destroy",this._createUnsubscribeHandler(this,a,b))},unsubscribe:function(a,b){a=a.toUpperCase(),this.topics[a]&&(this.topics[a]=this.topics[a].filter(function(a){return a!==b}),0==this.topics[a].length&&(delete this.topics[a],this._send(["unsubscribe",a])))},_rpc:function(c,d){this.debug&&console.log("WEBSOCKET - rpc method="+c,d);var e=a.defer(),f=String(this.call_id++),g=["call",f,c,d||{}];return this.callbacks[f]={deferred:e,timeout:b(this._createTimeoutHandler(this,f),this.timeout_ms,!1)},this._send(g),e.promise},_createTimeoutHandler:function(a,b){return function(){var c=a.callbacks[b].deferred;delete a.callbacks[b],c.reject({error:"timeout"})}},_createKeepAliveIntervalHandler:function(a){return function(){a._send("ping")}},_createDelayedRefreshHandler:function(a){return function(){a.refresh()}},_createUnsubscribeHandler:function(a,b,c){return function(){a.unsubscribe(b,c)}},_maybeGetServerVersion:function(){"TYPE_FIM"==this.engine.type&&(this.force_local||d.forceLocalHost)&&(d.FIM_SERVER_VERSION||this.callAPIFunction({requestType:"getState"}).then(function(a){d.$evalAsync(function(){d.FIM_SERVER_VERSION=" (FIMK "+a.version+")",d.TITLE+=d.FIM_SERVER_VERSION})}))},stop:function(){this.stopped=!0,this.socket&&(this.url=null,this.socket.close())},refresh:function(){function a(a){c.debug&&console.log("WEBSOCKET - refresh CREATE NEW SOCKET old="+c.url+" new="+a),c.url=a,c.socket=new WebSocket(a),c.socket.onclose=function(a){c.onclose(a)},c.socket.onopen=function(a){c.onopen(a)},c.socket.onerror=function(a){c.onmessage(a)},c.socket.onmessage=function(a){c.onmessage(a)}}function b(b){if(c.socket)if(0==c.socket.readyState||1==c.socket.readyState){if(c.url!=b||c.force_local)return c.createIsOpenPromise(),c.socket.onclose=function(){a(b)},c.debug&&console.log("WEBSOCKET - refresh CLOSING SOCKET"),void c.socket.close()}else{if(2==c.socket.readyState)return void(c.socket.onclose=function(){a(b)});if(3==c.socket.readyState)return void a(b)}else a(b)}this.debug&&(console.log("WEBSOCKET - refresh "+this.engine.symbol),console.trace("WEBSOCKET - refresh "+this.engine.symbol));var c=this;if(this.stopped=!1,this.force_local){var d="https:"==window.location.protocol?"wss:":"ws:",e=d+"//"+(window.location.hostname||"localhost")+":"+this.engine.port+"/ws/";b(e)}else this.engine.getSocketNodeURL().then(b)},_send:function(a){if(this.socket&&1==this.socket.readyState){var b=JSON.stringify(a);this.debug&&console.log("WEBSOCKET - _send "+new Date,b),this.socket.send(b)}else this.pending_send.push(a)},onopen:function(a){this._notifyObservers("onopen",a),this.debug&&console.log("WEBSOCKET - onopen "+new Date,{socket:this.socket,event:a}),this.is_open.resolve();var b=[];for(var d in this.topics)b.push(d);if(b.length>0&&this._send(["subscribe",b]),this.keepAlive){this.alive_cb=c(this._createKeepAliveIntervalHandler(this),this.alive_ms,!1)}this._maybeGetServerVersion()},onclose:function(a){this._notifyObservers("onclose",a),this.debug&&console.log("WEBSOCKET - onclose "+new Date,{socket:this.socket,event:a}),this.alive_cb&&(c.cancel(this.alive_cb),this.alive_cb=null),this.force_local?this.stopped||b(this._createDelayedRefreshHandler(this),2e3,!1):b(this._createDelayedRefreshHandler(this),2e3,!1),this.socket=null},onerror:function(a){this._notifyObservers("onerror",a),this.debug&&console.log("WEBSOCKET - onerror "+new Date,{event:a}),this.engine.urlPool.badURL(this.url)},onmessage:function(a){var b=a.data;if(this.debug&&console.log("WEBSOCKET - onmessage "+new Date,b),"pong"!=b&&b){try{var c=JSON.parse(b)}catch(d){return void(this.debug&&console.log("WEBSOCKET - JSON parse error",{socket:this.socket,event:a}))}if(!Array.isArray(c))throw new Error("WEBSOCKET - Expected an array",a);var e=c[0];if("response"==e)this.response(c[1],c[2]);else{if("notify"!=e)throw new Error("WEBSOCKET - Unsupported operation",a);this.debugEvents&&console.log("EVENT",c[1],c[2]),this.notify(c[1],c[2])}}},notify:function(a,b){var c=this.topics[a];if(c)for(var d=0;d<c.length;d++)c[d].call(null,b)},response:function(a,c){if(this.callbacks[a]){var d=this.callbacks[a].deferred;b.cancel(this.callbacks[a].timeout),delete this.callbacks[a],d.resolve(c)}},_createObserverRemoveHandler:function(a,b){return function(){b.__removeDestroyListener=null,a.removeObserver(b)}},addObserver:function(a,b){for(var c=0;c<this.observers.length;c++)if(this.observers[c]===a)return;this.observers.push(a),b&&(a.__removeDestroyListener=b.$on("$destroy",this._createObserverRemoveHandler(this,a)))},removeObserver:function(a){this.observers=this.observers.filter(function(b){return b!==a}),a.__removeDestroyListener&&a.__removeDestroyListener()},_notifyObservers:function(a,b){for(var c=0;c<this.observers.length;c++)this.observers[c][a]&&this.observers[c][a](b)}},angular.forEach(e.prototype.installMethods,function(a){f(a,e.prototype)}),e}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["$rootScope",function(a){a.FIM_SERVER_VERSION=null,a.TITLE=WALLET_NAME+"Wallet "+VERSION,a.WALLET_NAME=WALLET_NAME,a.paramEngine="fim",a.enableDualEngines=ENABLE_DUAL_ENGINES,a.isTestnet=IS_TEST_NET,a.forceLocalHost=FORCE_LOCAL_HOST,a.privateEnabled=PRIVATE_ENABLED,a.multiLanguage=!0,a.MONETARY_SYSTEM=!1,a.TRADE_UI_ONLY=TRADE_UI_ONLY}]),a.controller("AppController",["$rootScope","$scope","$modal","$q","$log","$timeout","modals","$window","plugins","serverService","db","settings","$location","nxt","$route","$translate","accountsService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){q.getAll().then(function(c){b.$evalAsync(function(){if(a.selectableAccounts=c,!a.selectedAccount){var b=window.localStorage.getItem("mofowallet.selected.account");if(b){for(var d=0;d<c.length;d++)if(c[d].id_rs==b){a.setSelectedAccount(c[d],!0);break}}else a.selectableAccounts[0]&&a.setSelectedAccount(a.selectableAccounts[0],!0)}})})}a.selectedAccount=null,a.selectedAccountUnlocked=!1,a.selectableAccounts=[],b.plugins=[],i.install("app",function(a){console.log("install-app-plugin",a),b.plugins.push(a)}),b.systemPlugins=[],isNodeJS&&i.install("system",function(a){console.log("install-system-plugin",a),b.systemPlugins.push(a)}),b.isNodeJS=isNodeJS,q.onChange(a,r),r(),a.setSelectedAccount=function(b,c){window.localStorage.setItem("mofowallet.selected.account",b.id_rs),a.$evalAsync(function(){a.selectedAccount=b,a.selectedAccountUnlocked=i.get("wallet").hasKey(b.id_rs)});var d=n.get(b.id_rs);d&&d.engine.socket().getAccount({account:b.id_rs}).then(function(b){a.$evalAsync(function(){a.selectedAccount.symbol=d.engine.symbol,a.selectedAccount.balanceNXT=n.util.convertToNXT(b.balanceNQT),a.selectedAccount.unconfirmedBalanceNXT=n.util.convertToNXT(b.unconfirmedBalanceNQT),a.selectedAccount.name=b.accountName,c||a.selectedAccount.save()})})},a.loginAddAccount=function(){g.open("welcome",{resolve:{items:function(){return{}}}})},a.availableLanguages={af:"Afrikaans",sq:"Shqip",ar:"",az:"azrbaycan dili",eu:"euskara",bn:"",be:" ",bg:" ",ca:"catal",zh:"","zh-TW":"",hr:"hrvatski jezik",cs:"etina, esk jazyk",da:"dansk",nl:"Nederlands",en:"English",eo:"Esperanto",et:"eesti",tl:"Wikang Filipino",fi:"Suomi",fr:"Franais",gl:"Galego",ka:"",de:"Deutsch",el:"",gu:"",ht:"Kreyl Ayisyen",iw:"",hi:"",hu:"Magyar",is:"slenska",id:"Bahasa Indonesia",ga:"Gaeilge",it:"Italiano",ja:"",kn:"",ko:"",la:"Latina",lv:"Latvieu",lt:"Lietuvi",mk:"M",ms:"Bahasa Melayu",mt:"Malti",no:"Norsk",fa:"",pl:"Polski",pt:"Portugus",ro:"Romn",ru:"",sr:"",sk:"Slovenina",sl:"Slovenina",es:"Espaol",sw:"Kiswahili",sv:"Svenska",ta:"",te:"",th:"",tr:"Trke",uk:" ",ur:"",vi:"Vitnam",cy:"Cymraeg",yi:""},a.langCode=p.preferredLanguage(),a.langName=a.availableLanguages[a.langCode],a.setLang=function(b){a.langCode=b,a.langName=a.availableLanguages[b],p.use(b)},a.multiLanguage||a.setLang("en"),b.reloadMofoWallet=function(){try{if(isNodeJS){var a=0;j.isRunning("TYPE_FIM")&&(j.stopServer("TYPE_FIM"),a+=5e3),j.isRunning("TYPE_NXT")&&(j.stopServer("TYPE_NXT"),a+=5e3),f(function(){require("nw.gui").Window.get().window.location.reload()},a,!1)}else window.location.reload()}catch(b){console.log(b)}},b.openDevTools=function(){try{require("nw.gui").Window.get().showDevTools()}catch(a){console.log(a)}},b.onTransactionIdentifierClick=function(a){var b=a.getAttribute("data-type"),c=a.getAttribute("data-value");if(a.getAttribute("data-engine"))var d=n.get(a.getAttribute("data-engine"));else if("ACCOUNT"==b)var d=n.get(c);switch(b){case d.renderer.TYPE.JSON:try{var e=JSON.parse(decodeURIComponent(c))}catch(f){var g=decodeURIComponent(c||"");console.log("plugin: accounts JSON error",g);var e={error:f,input:g}}var h=i.get("inspector");h.inspect({title:"Transaction Details",object:e,order:"timestamp,senderRS,recipientRS,amountNQT,attachment,type,feeNQT",translator:h.createTransactionTranslator(d,e)});break;case d.renderer.TYPE.ASSET_ID:var j=d.assets.get(decodeURIComponent(c)),h=i.get("inspector");h.inspect({title:"Asset Details",object:j,order:"name,asset,numberOfTrades,description,quantityQNT,decimals,accountRS",translator:h.createAssetTranslator(d,j)})}return!1},b.onMessageUnlockClick=function(a){var b=a.getAttribute("data-recipient"),c=a.getAttribute("data-sender");g.open("selectDecryptionAccount",{resolve:{items:function(){return{recipientRS:b,senderRS:c}}},close:function(){o.reload()}})}}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/start",{templateUrl:"partials/start.html",controller:"StartController"}).otherwise({redirectTo:"/start"})}]),a.run(["modals","settings",function(a,b){a.register("language",{templateUrl:"partials/language-modal.html",controller:"LanguageModalController"}),a.register("welcome",{templateUrl:"partials/welcome-modal.html",controller:"WelcomeModalController"}),a.register("startServer",{templateUrl:"partials/start-server-modal.html",controller:"StartServerModalController"}),b.initialize([{id:"initialization.always_start_fimk",value:!1,type:Boolean,label:"Always start FIMK server"},{id:"initialization.never_start_fimk",value:!1,type:Boolean,label:"Never start FIMK server"},{id:"initialization.always_start_nxt",value:!1,type:Boolean,label:"Always start NXT server"},{id:"initialization.never_start_nxt",value:!1,type:Boolean,label:"Never start NXT server"},{id:"initialization.user_selected_language",value:!1,type:Boolean,label:"User selected initial language"}])}]),a.controller("StartController",["$scope","settings","db","modals","plugins","$rootScope","serverService","$location",function(a,b,c,d,e,f,g,h){function i(){d.open("language",{resolve:{items:function(){return{}}},close:function(){j()}})}function j(){!isNodeJS||b.get("initialization.never_start_fimk")||g.isRunning("TYPE_FIM")?k():d.open("startServer",{resolve:{items:function(){return{type:"TYPE_FIM",symbol:"FIM",always_start_setting:"initialization.always_start_fimk",never_start_setting:"initialization.never_start_fimk"}}},close:function(){k()}})}function k(){isNodeJS&&f.enableDualEngines&&!b.get("initialization.never_start_nxt")&&!g.isRunning("TYPE_NXT")?d.open("startServer",{resolve:{items:function(){return{always_start_setting:"initialization.always_start_nxt",never_start_setting:"initialization.never_start_nxt",type:"TYPE_NXT",symbol:"NXT"}}},close:function(){l()}}):l()}function l(){c.accounts.count(function(a){0==a&&f.showNewAccountModal()})}f.showingLandingPage=!0,a.$on("$destroy",function(){f.showingLandingPage=!1}),a.searchQuery="",b.resolve("initialization.user_selected_language",function(a){!f.multiLanguage||a?j():i()},a),f.showNewAccountModal=function(){d.open("welcome",{resolve:{items:function(){return{}}}})},a.doSearch=function(){h.path("/search/fim/accounts/"+a.searchQuery)}}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/search/:engine/:category/:query?",{templateUrl:"partials/search.html",controller:"SearchController"})}]),a.controller("SearchController",["$scope","nxt","$routeParams","$rootScope","SearchProvider","$location",function(a,b,c,d,e,f){function g(){a.provider=new e(h,a,10,a.paramCategory,a.paramQuery),i=a.provider.reload(),i.then(function(){i=null
})}if(d.paramEngine=c.engine,a.paramEngine=c.engine,a.paramCategory=c.category,a.paramQuery=c.query||"","fim"==a.paramEngine)var h=b.fim();else{if("nxt"!=a.paramEngine)return void f.path("home/fim/activity/latest");var h=b.nxt()}if(-1==["accounts","assets","currencies","market","aliases"].indexOf(a.paramCategory))return void f.path("/home/fim/activity/latest");a.breadcrumb=[],a.breadcrumb.push({label:"translate.home",href:"#/home/"+a.paramEngine+"/activity/latest",translate:!0}),a.breadcrumb.push({label:"translate.search",active:!0,translate:!0}),a.breadcrumb.push({label:a.paramEngine.toUpperCase(),active:!0}),a.breadcrumb.push({label:"translate."+a.paramCategory,active:!0,translate:!0}),a.breadcrumb.push({label:a.paramQuery,active:!0});var i=null;g(),a.doSearch=function(){f.path("/search/"+a.paramEngine+"/"+a.paramCategory+"/"+a.paramQuery)},a.$watch("paramQuery",function(){i?i.then(function(){g()}):g(),window.locaction})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("LanguageModalController",["items","$scope","settings","$modalInstance",function(a,b,c,d){b.items=a,b.close=function(){c.update("initialization.user_selected_language",!0),d.close(b.items)}}])}(),function(){"use strict";function a(){var a=[],d=window.crypto||window.msCrypto,e=new Uint32Array(4);d.getRandomValues(e);for(var f,g,h,i,j=c,k=0;k<e.length;k++)f=e[k],g=f%j,h=((f/j>>0)+g)%j,i=(((f/j>>0)/j>>0)+h)%j,a.push(b[g]),a.push(b[h]),a.push(b[i]);return d.getRandomValues(e),a.join(" ")}var b=["like","just","love","know","never","want","time","out","there","make","look","eye","down","only","think","heart","back","then","into","about","more","away","still","them","take","thing","even","through","long","always","world","too","friend","tell","try","hand","thought","over","here","other","need","smile","again","much","cry","been","night","ever","little","said","end","some","those","around","mind","people","girl","leave","dream","left","turn","myself","give","nothing","really","off","before","something","find","walk","wish","good","once","place","ask","stop","keep","watch","seem","everything","wait","got","yet","made","remember","start","alone","run","hope","maybe","believe","body","hate","after","close","talk","stand","own","each","hurt","help","home","god","soul","new","many","two","inside","should","true","first","fear","mean","better","play","another","gone","change","use","wonder","someone","hair","cold","open","best","any","behind","happen","water","dark","laugh","stay","forever","name","work","show","sky","break","came","deep","door","put","black","together","upon","happy","such","great","white","matter","fill","past","please","burn","cause","enough","touch","moment","soon","voice","scream","anything","stare","sound","red","everyone","hide","kiss","truth","death","beautiful","mine","blood","broken","very","pass","next","forget","tree","wrong","air","mother","understand","lip","hit","wall","memory","sleep","free","high","realize","school","might","skin","sweet","perfect","blue","kill","breath","dance","against","fly","between","grow","strong","under","listen","bring","sometimes","speak","pull","person","become","family","begin","ground","real","small","father","sure","feet","rest","young","finally","land","across","today","different","guy","line","fire","reason","reach","second","slowly","write","eat","smell","mouth","step","learn","three","floor","promise","breathe","darkness","push","earth","guess","save","song","above","along","both","color","house","almost","sorry","anymore","brother","okay","dear","game","fade","already","apart","warm","beauty","heard","notice","question","shine","began","piece","whole","shadow","secret","street","within","finger","point","morning","whisper","child","moon","green","story","glass","kid","silence","since","soft","yourself","empty","shall","angel","answer","baby","bright","dad","path","worry","hour","drop","follow","power","war","half","flow","heaven","act","chance","fact","least","tired","children","near","quite","afraid","rise","sea","taste","window","cover","nice","trust","lot","sad","cool","force","peace","return","blind","easy","ready","roll","rose","drive","held","music","beneath","hang","mom","paint","emotion","quiet","clear","cloud","few","pretty","bird","outside","paper","picture","front","rock","simple","anyone","meant","reality","road","sense","waste","bit","leaf","thank","happiness","meet","men","smoke","truly","decide","self","age","book","form","alive","carry","escape","damn","instead","able","ice","minute","throw","catch","leg","ring","course","goodbye","lead","poem","sick","corner","desire","known","problem","remind","shoulder","suppose","toward","wave","drink","jump","woman","pretend","sister","week","human","joy","crack","grey","pray","surprise","dry","knee","less","search","bleed","caught","clean","embrace","future","king","son","sorrow","chest","hug","remain","sat","worth","blow","daddy","final","parent","tight","also","create","lonely","safe","cross","dress","evil","silent","bone","fate","perhaps","anger","class","scar","snow","tiny","tonight","continue","control","dog","edge","mirror","month","suddenly","comfort","given","loud","quickly","gaze","plan","rush","stone","town","battle","ignore","spirit","stood","stupid","yours","brown","build","dust","hey","kept","pay","phone","twist","although","ball","beyond","hidden","nose","taken","fail","float","pure","somehow","wash","wrap","angry","cheek","creature","forgotten","heat","rip","single","space","special","weak","whatever","yell","anyway","blame","job","choose","country","curse","drift","echo","figure","grew","laughter","neck","suffer","worse","yeah","disappear","foot","forward","knife","mess","somewhere","stomach","storm","beg","idea","lift","offer","breeze","field","five","often","simply","stuck","win","allow","confuse","enjoy","except","flower","seek","strength","calm","grin","gun","heavy","hill","large","ocean","shoe","sigh","straight","summer","tongue","accept","crazy","everyday","exist","grass","mistake","sent","shut","surround","table","ache","brain","destroy","heal","nature","shout","sign","stain","choice","doubt","glance","glow","mountain","queen","stranger","throat","tomorrow","city","either","fish","flame","rather","shape","spin","spread","ash","distance","finish","image","imagine","important","nobody","shatter","warmth","became","feed","flesh","funny","lust","shirt","trouble","yellow","attention","bare","bite","money","protect","amaze","appear","born","choke","completely","daughter","fresh","friendship","gentle","probably","six","deserve","expect","grab","middle","nightmare","river","thousand","weight","worst","wound","barely","bottle","cream","regret","relationship","stick","test","crush","endless","fault","itself","rule","spill","art","circle","join","kick","mask","master","passion","quick","raise","smooth","unless","wander","actually","broke","chair","deal","favorite","gift","note","number","sweat","box","chill","clothes","lady","mark","park","poor","sadness","tie","animal","belong","brush","consume","dawn","forest","innocent","pen","pride","stream","thick","clay","complete","count","draw","faith","press","silver","struggle","surface","taught","teach","wet","bless","chase","climb","enter","letter","melt","metal","movie","stretch","swing","vision","wife","beside","crash","forgot","guide","haunt","joke","knock","plant","pour","prove","reveal","steal","stuff","trip","wood","wrist","bother","bottom","crawl","crowd","fix","forgive","frown","grace","loose","lucky","party","release","surely","survive","teacher","gently","grip","speed","suicide","travel","treat","vein","written","cage","chain","conversation","date","enemy","however","interest","million","page","pink","proud","sway","themselves","winter","church","cruel","cup","demon","experience","freedom","pair","pop","purpose","respect","shoot","softly","state","strange","bar","birth","curl","dirt","excuse","lord","lovely","monster","order","pack","pants","pool","scene","seven","shame","slide","ugly","among","blade","blonde","closet","creek","deny","drug","eternity","gain","grade","handle","key","linger","pale","prepare","swallow","swim","tremble","wheel","won","cast","cigarette","claim","college","direction","dirty","gather","ghost","hundred","loss","lung","orange","present","swear","swirl","twice","wild","bitter","blanket","doctor","everywhere","flash","grown","knowledge","numb","pressure","radio","repeat","ruin","spend","unknown","buy","clock","devil","early","false","fantasy","pound","precious","refuse","sheet","teeth","welcome","add","ahead","block","bury","caress","content","depth","despite","distant","marry","purple","threw","whenever","bomb","dull","easily","grasp","hospital","innocence","normal","receive","reply","rhyme","shade","someday","sword","toe","visit","asleep","bought","center","consider","flat","hero","history","ink","insane","muscle","mystery","pocket","reflection","shove","silently","smart","soldier","spot","stress","train","type","view","whether","bus","energy","explain","holy","hunger","inch","magic","mix","noise","nowhere","prayer","presence","shock","snap","spider","study","thunder","trail","admit","agree","bag","bang","bound","butterfly","cute","exactly","explode","familiar","fold","further","pierce","reflect","scent","selfish","sharp","sink","spring","stumble","universe","weep","women","wonderful","action","ancient","attempt","avoid","birthday","branch","chocolate","core","depress","drunk","especially","focus","fruit","honest","match","palm","perfectly","pillow","pity","poison","roar","shift","slightly","thump","truck","tune","twenty","unable","wipe","wrote","coat","constant","dinner","drove","egg","eternal","flight","flood","frame","freak","gasp","glad","hollow","motion","peer","plastic","root","screen","season","sting","strike","team","unlike","victim","volume","warn","weird","attack","await","awake","built","charm","crave","despair","fought","grant","grief","horse","limit","message","ripple","sanity","scatter","serve","split","string","trick","annoy","blur","boat","brave","clearly","cling","connect","fist","forth","imagination","iron","jock","judge","lesson","milk","misery","nail","naked","ourselves","poet","possible","princess","sail","size","snake","society","stroke","torture","toss","trace","wise","bloom","bullet","cell","check","cost","darling","during","footstep","fragile","hallway","hardly","horizon","invisible","journey","midnight","mud","nod","pause","relax","shiver","sudden","value","youth","abuse","admire","blink","breast","bruise","constantly","couple","creep","curve","difference","dumb","emptiness","gotta","honor","plain","planet","recall","rub","ship","slam","soar","somebody","tightly","weather","adore","approach","bond","bread","burst","candle","coffee","cousin","crime","desert","flutter","frozen","grand","heel","hello","language","level","movement","pleasure","powerful","random","rhythm","settle","silly","slap","sort","spoken","steel","threaten","tumble","upset","aside","awkward","bee","blank","board","button","card","carefully","complain","crap","deeply","discover","drag","dread","effort","entire","fairy","giant","gotten","greet","illusion","jeans","leap","liquid","march","mend","nervous","nine","replace","rope","spine","stole","terror","accident","apple","balance","boom","childhood","collect","demand","depression","eventually","faint","glare","goal","group","honey","kitchen","laid","limb","machine","mere","mold","murder","nerve","painful","poetry","prince","rabbit","shelter","shore","shower","soothe","stair","steady","sunlight","tangle","tease","treasure","uncle","begun","bliss","canvas","cheer","claw","clutch","commit","crimson","crystal","delight","doll","existence","express","fog","football","gay","goose","guard","hatred","illuminate","mass","math","mourn","rich","rough","skip","stir","student","style","support","thorn","tough","yard","yearn","yesterday","advice","appreciate","autumn","bank","beam","bowl","capture","carve","collapse","confusion","creation","dove","feather","girlfriend","glory","government","harsh","hop","inner","loser","moonlight","neighbor","neither","peach","pig","praise","screw","shield","shimmer","sneak","stab","subject","throughout","thrown","tower","twirl","wow","army","arrive","bathroom","bump","cease","cookie","couch","courage","dim","guilt","howl","hum","husband","insult","led","lunch","mock","mostly","natural","nearly","needle","nerd","peaceful","perfection","pile","price","remove","roam","sanctuary","serious","shiny","shook","sob","stolen","tap","vain","void","warrior","wrinkle","affection","apologize","blossom","bounce","bridge","cheap","crumble","decision","descend","desperately","dig","dot","flip","frighten","heartbeat","huge","lazy","lick","odd","opinion","process","puzzle","quietly","retreat","score","sentence","separate","situation","skill","soak","square","stray","taint","task","tide","underneath","veil","whistle","anywhere","bedroom","bid","bloody","burden","careful","compare","concern","curtain","decay","defeat","describe","double","dreamer","driver","dwell","evening","flare","flicker","grandma","guitar","harm","horrible","hungry","indeed","lace","melody","monkey","nation","object","obviously","rainbow","salt","scratch","shown","shy","stage","stun","third","tickle","useless","weakness","worship","worthless","afternoon","beard","boyfriend","bubble","busy","certain","chin","concrete","desk","diamond","doom","drawn","due","felicity","freeze","frost","garden","glide","harmony","hopefully","hunt","jealous","lightning","mama","mercy","peel","physical","position","pulse","punch","quit","rant","respond","salty","sane","satisfy","savior","sheep","slept","social","sport","tuck","utter","valley","wolf","aim","alas","alter","arrow","awaken","beaten","belief","brand","ceiling","cheese","clue","confidence","connection","daily","disguise","eager","erase","essence","everytime","expression","fan","flag","flirt","foul","fur","giggle","glorious","ignorance","law","lifeless","measure","mighty","muse","north","opposite","paradise","patience","patient","pencil","petal","plate","ponder","possibly","practice","slice","spell","stock","strife","strip","suffocate","suit","tender","tool","trade","velvet","verse","waist","witch","aunt","bench","bold","cap","certainly","click","companion","creator","dart","delicate","determine","dish","dragon","drama","drum","dude","everybody","feast","forehead","former","fright","fully","gas","hook","hurl","invite","juice","manage","moral","possess","raw","rebel","royal","scale","scary","several","slight","stubborn","swell","talent","tea","terrible","thread","torment","trickle","usually","vast","violence","weave","acid","agony","ashamed","awe","belly","blend","blush","character","cheat","common","company","coward","creak","danger","deadly","defense","define","depend","desperate","destination","dew","duck","dusty","embarrass","engine","example","explore","foe","freely","frustrate","generation","glove","guilty","health","hurry","idiot","impossible","inhale","jaw","kingdom","mention","mist","moan","mumble","mutter","observe","ode","pathetic","pattern","pie","prefer","puff","rape","rare","revenge","rude","scrape","spiral","squeeze","strain","sunset","suspend","sympathy","thigh","throne","total","unseen","weapon","weary"],c=1626,d=angular.module("fim.base");d.controller("WelcomeModalController",["items","$scope","$rootScope","settings","$modalInstance","nxt","$http","$timeout","plugins","db","$location",function(b,c,d,e,f,g,h,i,j,k,l){function m(a){var b=angular.extend({method:"GET",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded"},timeout:3e4},a);return h(b)}function n(a,b){c.$evalAsync(function(){c[a]=b,c.items.faucetOnline=Boolean("TYPE_NXT"==c.items.engineType?c.dgex_online:c.fimk_online)})}c.items=b,c.items.state=b.state||0,c.items.passphrase="",c.items.passphraseConfirm="",c.items.selectedEngine="",c.items.id_rs="",c.items.publicKey="",c.items.symbol="",c.items.faucetOnline=!1,c.generatePassphrase=function(){c.items.passphrase=a(),c.items.passphraseConfirm=""},c.close=function(){f.close(c.items)},c.passphraseChanged=function(){c.items.publicKey=g.fim().crypto.secretPhraseToPublicKey(c.items.passphrase),c.items.id_rs=g.fim().crypto.getAccountIdFromPublicKey(c.items.publicKey,!0)},c.accountIDChanged=function(){c.items.publicKey="",c.items.passphrase=""},c.saveNewAccount=function(){var a={id_rs:c.items.id_rs,publicKey:c.items.publicKey,engine:c.items.engineType,name:""};k.accounts.put(a).then(function(){var a=c.items.id_rs;d.TRADE_UI_ONLY||i(function(){l.path("/accounts/"+a+"/pulse/latest")},1,!1),f.close(c.items)})},c.saveExistingAccount=function(){var a={id_rs:c.items.id_rs,publicKey:"",engine:c.items.engineType,name:""};k.accounts.put(a).then(function(){var a=c.items.id_rs;d.TRADE_UI_ONLY||i(function(){l.path("/accounts/"+a+"/pulse/latest")},1,!1),f.close(c.items)})},c.isValidID=function(a){if(a&&a.trim().length>0){var b=g.get(a);if(!b)return!1;c.items.engineType=b.engine.type;var d=new NxtAddress(b.engine.symbol_lower.toUpperCase());return!!d.set(a)}return!0},c.setEngineType=function(a){var b=g.get(a);c.items.symbol=b.engine.symbol,c.items.engineType=a,c.items.publicKey=b.crypto.secretPhraseToPublicKey(c.items.passphrase),c.items.id_rs=b.crypto.getAccountId(c.items.passphrase,!0),c.items.faucetOnline=Boolean("TYPE_NXT"==a?c.dgex_online:c.fimk_online)},c.sendEmail=function(){var a={title:"Please wait",message:"Sending please wait",busy:!0,btnLabel:"Cancel"},b=!1,e=j.get("alerts").wait(a),f=c.items.engineType==g.TYPE_NXT?"dgex":"fimk";m(p[f]()).success(function(c){d.$evalAsync(function(){"challenged"==c.result?(a.message=null,a.html="You have been emailed the confirmation link you must complete to activate the faucet transfer.",a.busy=!1,a.btnLabel="Close",b=!0):(a.message="Failed",a.busy=!1,a.btnLabel="Close")})}).error(function(){d.$evalAsync(function(){a.message="Failed",a.busy=!1,a.btnLabel="Close"})}),e.promise.catch(function(){b&&c.$evalAsync(function(){c.items.state=5})})};var o={dgex:{url:"https://dgex.com/faucet.cgi?status"},fimk:{url:"https://fimk.fi/faucet.cgi?status"}},p={dgex:function(){return{url:"https://dgex.com/faucet.cgi?email="+encodeURIComponent(c.items.email)+"&account="+encodeURIComponent(c.items.id_rs)+"&publickey="+encodeURIComponent(c.items.publicKey)}},fimk:function(){return{url:"https://fimk.fi/faucet.cgi?email="+encodeURIComponent(c.items.email)+"&account="+encodeURIComponent(c.items.id_rs)+"&publickey="+encodeURIComponent(c.items.publicKey)}}};c.$watch("items.state",function(a){4!=a||o.fimk.initialized||(o.fimk.initialized=!0,m(o.fimk).success(function(a){n("fimk_online",a&&"online"==a.status)}).error(function(){n("fimk_online",!1)}))})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("StartServerModalController",["items","$scope","settings","$modalInstance","$timeout","serverService",function(a,b,c,d,e,f){function g(){b.items.alwaysStart&&b.startServer()}function h(c){b.$evalAsync(function(){-1!=c.indexOf(" started successfully.")?(b.items.message=a.symbol+" server started successfully",b.items.state=b.STATE_RUNNING):-1!=c.indexOf("org.h2.jdbc.JdbcSQLException")?(b.items.message=a.symbol+" server database error",b.items.state=b.STATE_UNDEFINED):b.items.message=a.symbol+" server "+c.replace(/^(.*(INFO|FINE):)/,"")})}function i(){b.$evalAsync(function(){b.items.message=a.symbol+" server starting"})}function j(){b.$evalAsync(function(){b.items.message=a.symbol+" server shutdown",b.items.state=b.STATE_UNDEFINED})}b.items=a,b.items.message="waiting ..",b.items.neverStart=c.get(a.never_start_setting),b.items.alwaysStart=c.get(a.always_start_setting),b.STATE_UNDEFINED=1,b.STATE_STARTING=2,b.STATE_RUNNING=3,b.STATE_STOPPING=4,b.items.state=b.STATE_UNDEFINED,b.startServer=function(){b.items.state=b.STATE_STARTING,f.addListener(a.type,"stdout",h),f.addListener(a.type,"stderr",h),f.addListener(a.type,"start",i),f.addListener(a.type,"exit",j),f.startServer(a.type)},b.stopServer=function(){b.items.state=b.STATE_STOPPING,f.stopServer(a.type)},b.$on("$destroy",function(){f.removeListener(a.type,"stdout",h),f.removeListener(a.type,"stderr",h),f.removeListener(a.type,"start",i),f.removeListener(a.type,"exit",j)}),b.close=function(){d.close(b.items)},b.neverStartChanged=function(){c.update(a.never_start_setting,b.items.neverStart),b.items.neverStart&&b.items.alwaysStart&&(b.items.alwaysStart=!1,c.update(a.always_start_setting,!1))},b.alwaysStartChanged=function(){c.update(a.always_start_setting,b.items.alwaysStart),b.items.alwaysStart&&b.items.neverStart&&(b.items.neverStart=!1,c.update(a.never_start_setting,!1))},g()}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/home/:engine/:section/:period",{templateUrl:"partials/home.html",controller:"HomeController"})}]),a.controller("HomeController",["$scope","$rootScope","plugins","settings","$timeout","$route","$routeParams","$location","nxt","accountsService","RecentTransactionsProvider","BalanceProvider","dateParser","dateFilter","$translate","modals",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){b.paramEngine=g.engine,a.paramEngine=g.engine,a.paramSection=g.section,a.paramPeriod=g.period,a.paramTimestamp=i.util.convertToEpochTimestamp(Date.now())+86400,a.accounts=[];var q={};if(a.breadcrumb=[],a.showFilter="activity"==a.paramSection||"inbox"==a.paramSection,a.showTransactionFilter="activity"==a.paramSection,"fim"==a.paramEngine)var r=i.fim();else{if("nxt"!=a.paramEngine)return void h.path("home/fim/activity/latest");var r=i.nxt()}if(-1==["inbox","activity","balance"].indexOf(a.paramSection))return void h.path("home/"+a.paramEngine+"/activity/latest");if(a.breadcrumb.push({label:"translate.home",href:"#/home/"+a.paramEngine+"/activity/latest",translate:!0}),a.breadcrumb.push({label:"translate."+a.paramSection,active:!0,translate:!0}),a.breadcrumb.push({label:r.engine.symbol,active:!0}),("activity"==a.paramSection||"inbox"==a.paramSection)&&a.breadcrumb.push("latest"==a.paramPeriod?{label:"translate.latest",translate:!0}:{label:a.paramPeriod,period:!0}),a.dt=null,a.format="dd-MMMM-yyyy","latest"!=a.paramPeriod){var s=m.parse(a.paramPeriod,a.format);if(!s)return void h.path("home/"+a.paramEngine+"/"+a.paramSection+"/latest");a.dt=a.paramPeriod,s=new Date(s.getFullYear(),s.getMonth(),s.getDate()+1,0,0,0),a.paramTimestamp=i.util.convertToEpochTimestamp(s.getTime())}a.symbol=r.engine.symbol,j.onChange(a,function(){h.path("home/"+a.paramEngine+"/"+a.paramSection+"/"+a.paramPeriod),f.reload()}),a.minDate=new Date(Date.UTC(2013,10,24,12,0,0,0)),a.maxDate=new Date,a.dateOptions={formatYear:"yy",startingDay:1},a.openDatePicker=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0};var t=!1;a.$watch("dt",function(b,c){if(b&&b!==c&&"string"!=typeof c&&!t){t=!0;var d=n(b,a.format);h.path("home/"+a.paramEngine+"/"+a.paramSection+"/"+d)}}),a.filter={},"inbox"==a.paramSection?(a.filter.all=!1,a.filter.payments=!1,a.filter.messages=!0,a.filter.aliases=!1,a.filter.namespacedAliases=!1,a.filter.polls=!1,a.filter.accountInfo=!1,a.filter.announceHub=!1,a.filter.goodsStore=!1,a.filter.balanceLeasing=!1,a.filter.trades=!1,a.filter.assetIssued=!1,a.filter.assetTransfer=!1,a.filter.assetOrder=!1):(a.filter.all=!0,a.filter.payments=!0,a.filter.messages=!0,a.filter.aliases=!0,a.filter.namespacedAliases=!0,a.filter.polls=!0,a.filter.accountInfo=!0,a.filter.announceHub=!0,a.filter.goodsStore=!0,a.filter.balanceLeasing=!0,a.filter.trades=!0,a.filter.assetIssued=!0,a.filter.assetTransfer=!0,a.filter.assetOrder=!0);var u=j.getAll(r.engine.type==i.TYPE_FIM?j.FIM_FILTER:j.NXT_FILTER);u.then(function(b){a.$evalAsync(function(){a.accounts=b,q={};var c=b.map(function(a){return q[a.id_rs]=a,a.id_rs});"activity"==a.paramSection||"inbox"==a.paramSection?(a.provider=a.transactionProvider=new k(r,a,a.paramTimestamp,c,a.filter),a.transactionProvider.reload()):"balance"==a.paramSection&&(a.provider=a.balanceProvider=new l(r,a,c),a.balanceProvider.reload())})}),a.filterAllChanged=function(){a.$evalAsync(function(){var b=a.filter.all;a.filter.payments=b,a.filter.messages=b,a.filter.aliases=b,a.filter.namespacedAliases=b,a.filter.polls=b,a.filter.accountInfo=b,a.filter.announceHub=b,a.filter.goodsStore=b,a.filter.balanceLeasing=b,a.filter.trades=b,a.filter.assetIssued=b,a.filter.assetTransfer=b,a.filter.assetOrder=b,a.filterChanged()})},a.filterChanged=function(){a.provider.applyFilter(a.filter)},a.addAccount=function(){p.open("welcome",{resolve:{items:function(){return{}}}})},a.changeAccountName=function(a){c.get("transaction").setAccountInfo(a,{name:"",description:""})},a.selectedThemeName=d.get("themes.default.theme"),d.resolve("themes.default.theme",function(b){e(function(){var c=b||"";a.selectedThemeName=c[0].toUpperCase()+c.slice(1)})})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("secretPhraseModalController",["items","$modalInstance","$scope","$timeout","nxt","modals","plugins","$sce","db",function(a,b,c,d,e,f,g,h,i){function j(a){var b="TYPE_FIM"==c.items.engineType?"FIM-":"NXT-";return 0==a.id_rs.indexOf(b)}function k(){a.sender&&l.getEntry(a.sender).then(function(a){c.$evalAsync(function(){c.items.missing=!1,c.items.secretPhrase=a.secretPhrase,c.passphraseChange(),b.close(c.items)})})}var l=g.get("wallet");c.SIMPLE="simple",c.COMPLEX="complex",c.state=a.sender?c.SIMPLE:c.COMPLEX,c.items=a,c.items.valid=!1,c.items.secretNotFound=!1,c.items.selectedAccount=null,c.items.accounts=[],c.items.engineType=a.engineType||"TYPE_FIM",c.items.secretPhrase=c.items.secretPhrase||"",c.items.sender=a.sender||"",a.sender&&""==c.items.secretPhrase&&(c.items.secretPhrase=l.getSecretPhrase(a.sender)||""),c.state==c.SIMPLE?c.items.messageHTML=h.getTrustedHtml(a.messageHTML||"This operation requires your secret passphrase. Either enter it by hand or click Open Wallet to load a wallet file containing your secret phrase."):(c.items.messageHTML=h.getTrustedHtml(a.messageHTML||"This operation requires a sender and secret passphrase."),i.accounts.where("id_rs").anyOf(l.getKeys()).toArray().then(function(a){c.$evalAsync(function(){c.items.accounts=a.filter(j)})})),c.passphraseChange=function(){d(function(){var a=e.crypto(c.items.sender),b=a.getAccountId(c.items.secretPhrase,!0),d=b==c.items.sender;c.items.valid=d})},c.passphraseChangeComplex=function(){d(function(){c.items.sender=e.crypto(c.items.engineType).getAccountId(c.items.secretPhrase,!0)})},c.format=function(a){return a.id_rs+" # "+a.name},c.selectedAccountChange=function(){l.getEntry(c.items.selectedAccount.id_rs).then(function(a){c.$evalAsync(function(){c.items.secretPhrase=a.secretPhrase,c.items.sender=a.id_rs,c.passphraseChangeComplex()})})},l.hasKey(a.sender)&&k(),l.createOnWalletFileSelectedPromise(c).then(function(){c.state==c.SIMPLE?k():i.accounts.where("id_rs").anyOf(l.getKeys()).toArray().then(function(a){c.$evalAsync(function(){c.items.accounts=a.filter(j)})})},function(){}),c.close=function(){l.hasKey(c.items.sender)?b.close(c.items):i.accounts.where("id_rs").anyOf(c.items.sender).count().then(function(a){a>0?(l.saveToMemory(c.items.sender,c.items.secretPhrase),b.close(c.items)):l.confirmSaveToWallet().then(function(a){a?l.addEntry({name:"",id_rs:c.items.sender,secretPhrase:c.items.secretPhrase}).then(function(){b.close(c.items)},function(){b.dismiss()}):(l.saveToMemory(c.items.sender,c.items.secretPhrase),b.close(c.items))})})},c.dismiss=function(){b.dismiss()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("selectDecryptionAccountController",["items","$modalInstance","$scope","modals",function(a,b,c,d){c.items=a,c.promptForSecretphrase=function(a){d.open("secretPhrase",{resolve:{items:function(){return{sender:a}}},close:function(){b.close()},cancel:function(){b.dismiss()}})},c.dismiss=function(){b.dismiss()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/server/:engine/:section",{templateUrl:"partials/server.html",controller:"ServerController"})}]),a.filter("slice",function(){return function(a,b,c){return(a||[]).slice(b,c)}}),a.directive("serverConfigTable",["$compile",function(){return{restrict:"A",scope:{provider:"="},link:function(a,b){var c,d=a.provider,e=[];e.push('<table class="table table-condensed table-striped table-hover"><tbody>');for(var f=0;f<d.rows.length;f++){switch(c=d.rows[f],e.push("<tr>"),c.type){case 0:e.push('<td colspan="3"><h3><b>',c.name,"</b></h3></td>");break;case 1:e.push('<td style="vertical-align: middle;" nowrap>',c.name,"</td>",'<td style="vertical-align: middle; min-width: 300px">','<div class="input-group">','<input class="form-control" ','value="',c.value,'" ',"onchange=\"angular.element(this).scope().$parent.provider.onchange('",c.name,"',this.value)\">",'<span class="input-group-btn">','<span class="btn btn-success" ',"onclick=\"angular.element(this).scope().$parent.provider.onsave('",c.name,"')\" ",'tooltip="Save">','<i class="fa fa-floppy-o"></i>',"</span>",'<span class="btn btn-default" ',"onclick=\"angular.element(this).scope().$parent.provider.onrestore('",c.name,"', angular.element(this))\" ",'tooltip="Reset">','<i class="fa fa-undo"></i>',"</span>","</span>","</div>","</td>",'<td style="vertical-align: middle; width: 100%">',c.description,"</td>")}e.push("</tr>")}e.push("</tbody></table>"),b.append(e.join(""))}}}]),a.controller("ServerController",["$scope","$rootScope","nxt","$routeParams","serverService","$interval","settings","ServerConfigProvider","PeerProvider",function(a,b,c,d,e,f,g,h,i){function j(b){var c=document.createElement("p"),d=document.getElementById("fake-console");for(c.textContent=b,angular.element(d).append(c);d.childElementCount>n;)d.removeChild(d.firstChild);a.scrolllock&&c.scrollIntoView(!1)}function k(a){j(a)}function l(b){j(b),a.$evalAsync(function(){a.isRunning[a.engineType]=!0})}function m(b){j(b),a.$evalAsync(function(){a.isRunning[a.engineType]=!1})}var n=2e3;if(b.paramEngine=d.engine,a.paramEngine=d.engine,a.paramSection=d.section,a.breadcrumb=[],a.scrolllock=!0,"fim"==a.paramEngine){var o=c.fim();a.symbol=a.paramEngine.toUpperCase()}else{if("nxt"!=a.paramEngine)return void $location.path("home/fim/activity/latest");var o=c.nxt();a.symbol=a.paramEngine.toUpperCase()}if(-1==["console","config","peers"].indexOf(a.paramSection))return void $location.path("activity/"+a.paramEngine+"/activity/latest");switch(a.engineType=o.engine.type,a.isRunning={},a.isRunning.TYPE_FIM=e.isRunning("TYPE_FIM"),a.isRunning.TYPE_NXT=e.isRunning("TYPE_NXT"),a.breadcrumb.push({label:"translate.home",href:"#/home/"+a.paramEngine+"/activity/latest",translate:!0}),a.breadcrumb.push({label:"translate.server",active:!0,translate:!0}),a.breadcrumb.push({label:a.paramEngine.toUpperCase(),active:!0}),a.breadcrumb.push({label:"translate."+a.paramSection,active:!0,translate:!0}),a.paramSection){case"config":a.provider=new h(o,a),a.provider.load();break;case"peers":a.provider=new i(o,a),a.provider.reload()}a.initConsole=function(){if(e.isRunning(o.engine.type)){var b,c=[],d=angular.element(document.getElementById("fake-console")),f=e.getMessages(o.engine.type).slice(-n);angular.forEach(f,function(a){b=document.createElement("p"),b.textContent=a,c.push(b)}),d.append(c),b&&a.scrolllock&&b.scrollIntoView(!1)}e.addListener(o.engine.type,"stdout",k),e.addListener(o.engine.type,"stderr",k),e.addListener(o.engine.type,"start",l),e.addListener(o.engine.type,"exit",m),a.$on("$destroy",function(){e.removeListener(o.engine.type,"stdout",k),e.removeListener(o.engine.type,"stderr",k),e.removeListener(o.engine.type,"start",l),e.removeListener(o.engine.type,"exit",m)})},a.startServer=function(a){e.startServer(a)},a.stopServer=function(a){e.stopServer(a)},a.rescanChain=function(){},a.deleteChain=function(){},a.clearConsole=function(){var a=document.createRange();a.selectNodeContents(document.getElementById("fake-console")),a.deleteContents()},a.items={};var p="initialization.never_start_"+("TYPE_NXT"==o.engine.type?"nxt":"fimk"),q="initialization.always_start_"+("TYPE_NXT"==o.engine.type?"nxt":"fimk");
a.items.neverStart=g.get(p),a.items.alwaysStart=g.get(q),a.neverStartChanged=function(){g.update(p,a.items.neverStart),a.items.neverStart&&a.items.alwaysStart&&(a.items.alwaysStart=!1,g.update(q,!1))},a.alwaysStartChanged=function(){g.update(q,a.items.alwaysStart),a.items.alwaysStart&&a.items.neverStart&&(a.items.neverStart=!1,g.update(p,!1))}}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/merchant/:recipient/:amountNQT/:deadline/:description/:message",{templateUrl:"partials/merchant-terminal.html",controller:"MerchantTerminalController"})}]),a.controller("MerchantTerminalController",["$scope","$rootScope","nxt","$routeParams","plugins",function(a,b,c,d,e){a.paramRecipient=d.recipient,a.paramAmountNQT=d.amountNQT,a.paramDeadline=d.deadline,a.paramDescription=d.description,a.paramMessage=d.message,a.amountNXT=c.util.convertToNXT(a.paramAmountNQT),a.recipientName="";var f=c.get(a.paramRecipient);a.symbol=f.engine.symbol,f.engine.socket().getAccount({account:a.paramRecipient}).then(function(b){a.$evalAsync(function(){a.recipientName=b.accountName})}),a.payNow=function(){var b={recipient:a.paramRecipient,amountNXT:c.util.convertNQT(a.paramAmountNQT,8),deadline:a.paramDeadline};a.paramMessage&&(b.txnMessage=a.paramMessage,b.txnMessageType="to_recipient"),e.get("transaction").get("tipUser").execute(b)}}])}(),function(){"use strict";function a(a){this.obj=a,this.keys=[],this.map={},this.flatten(null,a)}function b(a){var b=window.localStorage.getItem("MYLANG-"+a)||null;return b?JSON.parse(b):{}}function c(a,b){window.localStorage.setItem("MYLANG-"+a,JSON.stringify(b))}var d=angular.module("fim.base");d.config(["$routeProvider",function(a){a.when("/translation/:lang",{templateUrl:"partials/translation.html",controller:"TranslationController"})}]);var e=null;a.prototype={flatten:function(a,b){var c=a?a+".":"";for(var d in b)"string"==typeof b[d]?(this.keys.push(c+d),this.map[c+d]=b[d]):this.flatten(c+d,b[d])},get:function(a,b){var c=a,b=b.split(".");try{for(var d=0;d<b.length;d++)c=c[b[d]];return c}catch(e){}return null},set:function(a,b,c,d){b=b.split(".");for(var e=0;e<b.length;e++)if(e+1<b.length)a=void 0===a[b[e]]?a[b[e]]={}:a[b[e]];else{if("string"==typeof a[b[e]]&&d)continue;a[b[e]]=c}}},d.controller("TranslationController",["$scope","$rootScope","$routeParams","$location","$http","$q",function(d,f,g,h,i,j){function k(a){var b=j.defer();return i.get("/i18n/"+a+".json").success(function(a){b.resolve(a)}).error(function(a){b.reject(a)}),b.promise}function l(){p=new a(m),o=b(d.paramLang);for(var e,f,g=0;g<p.keys.length;g++)e=p.keys[g],f=p.get(n,e),p.set(o,e,f,!0),d.LANG_MODEL.push({key:e,ENGLISH:p.map[e],TARGET:f,MY_TRANS:p.get(o,e)});c(d.paramLang,o)}d.paramLang=g.lang,d.langFull=f.availableLanguages[g.lang],d.targetLang=d.paramLang;var m=e,n=null,o=null,p=null;d.LANG_MODEL=[],d.onTargetLanguageChange=function(){h.path("/translation/"+d.targetLang)},d.storeTranslation=function(a){p.set(o,a.key,a.MY_TRANS),c(d.paramLang,o)},d.download=function(){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(o,null,"  "))),a.setAttribute("download",d.paramLang+".json"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)},null==e?k("en").then(function(a){d.$evalAsync(function(){m=e=a,k(d.paramLang).then(function(a){d.$evalAsync(function(){n=a,l()})})})}):k(d.paramLang).then(function(a){d.$evalAsync(function(){n=a,l()})})}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/activity/:engine/:section/:period",{templateUrl:"partials/activity.html",controller:"ActivityController"})}]),a.controller("ActivityController",["$scope","$location","$routeParams","nxt","requests","$q","$sce","ActivityProvider","BlocksProvider","ForgersProvider","StatisticsProvider","AllAssetsProvider","BlockStateProvider","$timeout","dateParser","dateFilter","$rootScope",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(q.paramEngine=c.engine,a.paramEngine=c.engine,a.paramSection=c.section,a.paramPeriod=c.period,a.paramTimestamp=0,a.statistics={},a.blockstate={},a.breadcrumb=[],a.filter={},"nxt"==a.paramEngine)var r=d.nxt();else{if("fim"!=a.paramEngine)return void b.path("/activity/fim/activity/latest");var r=d.fim()}if(-1==["activity","blockchain","forgers","assets"].indexOf(a.paramSection))return void b.path("/activity/"+a.paramEngine+"/activity/latest");if(a.breadcrumb.push({label:"translate.home",href:"#/home/"+a.paramEngine+"/activity/latest",translate:!0}),a.breadcrumb.push({label:"translate.explorer",href:"#/activity/fim/activity/latest",translate:!0}),a.breadcrumb.push({label:r.engine.symbol,active:!0}),a.breadcrumb.push({label:"translate."+a.paramSection,translate:!0}),-1!=["activity","blockchain"].indexOf(a.paramSection)&&a.breadcrumb.push("latest"==a.paramPeriod?{label:"translate.latest",translate:!0}:{label:a.paramPeriod,period:!0}),a.dt=null,a.format="dd-MMMM-yyyy","latest"!=a.paramPeriod){var s=o.parse(a.paramPeriod,a.format);if(!s)return void b.path("/activity/"+a.paramEngine+"/"+a.paramSection+"/latest");a.dt=a.paramPeriod,s=new Date(s.getFullYear(),s.getMonth(),s.getDate()+1,0,0,0),a.paramTimestamp=d.util.convertToEpochTimestamp(s.getTime())}switch(a.symbol=r.engine.symbol,a.blockstate.TYPE_FIM=new m(d.fim(),a),a.blockstate.TYPE_FIM.load(),q.enableDualEngines&&(a.blockstate.TYPE_NXT=new m(d.nxt(),a),a.blockstate.TYPE_NXT.load()),a.paramSection){case"activity":a.showFilter=!0,a.showTransactionFilter=!0,a.provider=new h(r,a,a.paramTimestamp,null,a.filter),a.provider.reload();break;case"blockchain":a.showFilter=!0,a.provider=new i(r,a,a.paramTimestamp),a.provider.reload();break;case"forgers":a.showFilter=!1,a.provider=new j(r,a),a.provider.reload();break;case"assets":a.showFilter=!1,a.provider=new l(r,a,10),a.provider.reload();break;default:throw new Error("Not reached")}a.minDate=new Date(Date.UTC(2013,10,24,12,0,0,0)),a.maxDate=new Date,a.dateOptions={formatYear:"yy",startingDay:1},a.openDatePicker=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0};var t=!1;a.$watch("dt",function(c,d){if(c&&c!==d&&"string"!=typeof d&&!t){t=!0;var e=p(c,a.format);b.path("/activity/"+a.paramEngine+"/"+a.paramSection+"/"+e)}}),a.showTransactionFilter&&(a.filter.all=!0,a.filter.payments=!0,a.filter.messages=!0,a.filter.aliases=!0,a.filter.namespacedAliases=!0,a.filter.polls=!0,a.filter.accountInfo=!0,a.filter.announceHub=!0,a.filter.goodsStore=!0,a.filter.balanceLeasing=!0,a.filter.trades=!0,a.filter.assetIssued=!0,a.filter.assetTransfer=!0,a.filter.assetOrder=!0,a.filter.currencyIssued=!0,a.filter.currencyTransfer=!0,a.filter.currencyOther=!0,a.filterAllChanged=function(){a.$evalAsync(function(){var b=a.filter.all;a.filter.payments=b,a.filter.messages=b,a.filter.aliases=b,a.filter.namespacedAliases=b,a.filter.polls=b,a.filter.accountInfo=b,a.filter.announceHub=b,a.filter.goodsStore=b,a.filter.balanceLeasing=b,a.filter.trades=b,a.filter.assetIssued=b,a.filter.assetTransfer=b,a.filter.assetOrder=b,a.filter.currencyIssued=b,a.filter.currencyTransfer=b,a.filter.currencyOther=b,a.filterChanged()})},a.filterChanged=function(){a.provider.applyFilter(a.filter)}),a.loadStatistics=function(b,c){if(a[c]=!a[c],!a[c]){if(!a.statistics[b]){var e=d.get(b);a.statistics[b]=new k(e,a)}a.statistics[b].load()}}}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/accounts/:id_rs/:section/:period",{templateUrl:"partials/accounts.html",controller:"AccountsController"})}]),a.controller("AccountsController",["$location","$q","$scope","modals","$routeParams","nxt","db","plugins","requests","$timeout","ActivityProvider","MessagesProvider","BlocksProvider","AliasProvider","NamespacedAliasProvider","AssetsProvider","CurrencyProvider","AccountProvider","BuyOrderProvider","SellOrderProvider","AccountPostProvider","AccountForgerProvider","AccountLessorsProvider","dateParser","dateFilter","accountsService","PaymentsProvider","$rootScope","serverService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){z.getFirst(c.id_rs).then(function(a){c.$evalAsync(function(){c.following=a?!0:!1})})}function E(){h.get("transaction").get("startForging").execute(c.id_rs).then(function(){c.forger&&c.forger.reload()})}function F(){h.get("transaction").get("stopForging").execute(c.id_rs).then(function(){c.forger&&c.forger.reload()})}c.id_rs=e.id_rs,c.paramSection=e.section,c.paramPeriod=e.period||"latest",c.paramTimestamp=0,c.breadcrumb=[],c.filter={},c.following=!1;var G=f.get(c.id_rs);if(!G)return console.log('Could not determine engine "'+c.id_rs+'"'),void a.path("/home/fim/activity/latest");if(-1==["activity","messages","blocks","aliases","fim_aliases","assets","goods","leasing","currency","buy_orders","sell_orders","pulse","payments"].indexOf(c.paramSection))return void a.path("/home/fim/activity/latest");if(c.symbol=G.engine.symbol,c.symbol_lower=G.engine.symbol_lower,c.showFilter=-1!=["activity","messages","blocks","pulse"].indexOf(c.paramSection),c.showTransactionFilter=-1!=["activity"].indexOf(c.paramSection),c.breadcrumb.push({label:"translate.home",href:"#/home/"+c.paramEngine+"/activity/latest",translate:!0}),c.breadcrumb.push({label:c.id_rs,href:"#/accounts/"+c.id_rs+"/activity/"+c.paramPeriod}),c.breadcrumb.push({label:"THIS IS SET FURTHER DOWN BELOW",active:!0,translate:!0}),-1!=["activity","messages","blocks","pulse"].indexOf(c.paramSection)&&c.breadcrumb.push("latest"==c.paramPeriod?{label:"translate.latest",translate:!0}:{label:c.paramPeriod,period:!0}),c.dt=null,c.format="dd-MMMM-yyyy","latest"!=c.paramPeriod){var H=x.parse(c.paramPeriod,c.format);if(!H)return void a.path("/accounts/"+c.id_rs+"/"+c.paramSection+"/latest");c.dt=c.paramPeriod,H=new Date(H.getFullYear(),H.getMonth(),H.getDate()+1,0,0,0),c.paramTimestamp=f.util.convertToEpochTimestamp(H.getTime())}switch(D(),z.onChange(c,D),c.transactions=h.get("transaction").transactions.filter(function(a){return!a.exclude}),c.selectTab=function(b){c.paramSection!=b&&a.path("/accounts/"+c.id_rs+"/"+b+"/"+c.paramPeriod)},c.account=new r(G,c,c.id_rs),c.account.reload(),(B.forceLocalHost||C.isReady(G.type))&&(c.forger=new v(G,c,c.id_rs),c.forger.reload()),c.paramSection){case"pulse":c.breadcrumb[2].label="translate.pulse",c.provider=new u(G,c,5,c.id_rs),c.provider.reload();break;case"comments":c.breadcrumb[2].label="translate.comments",c.provider=new AccountCommentsProvider(G,c,c.paramTimestamp,c.id_rs),c.provider.reload();break;case"activity":c.breadcrumb[2].label="translate.activity",c.provider=new k(G,c,c.paramTimestamp,c.id_rs,c.filter),c.provider.reload();break;case"messages":c.breadcrumb[2].label="translate.messages",c.provider=new l(G,c,c.paramTimestamp,c.id_rs),c.provider.reload();break;case"blocks":c.breadcrumb[2].label="translate.blocks_forged",c.provider=new m(G,c,c.paramTimestamp,c.id_rs),c.provider.reload();break;case"aliases":c.breadcrumb[2].label="translate.aliases",c.provider=new n(G,c,10,c.id_rs),c.provider.reload();break;case"fim_aliases":c.breadcrumb[2].label="translate.namespaced_aliases",c.provider=new o(G,c,10,c.id_rs),c.provider.reload();break;case"currency":c.breadcrumb[2].label="translate.currencies",c.provider=new q(G,c,10,c.id_rs),c.provider.reload();break;case"assets":c.breadcrumb[2].label="translate.assets",c.provider=new p(G,c,10,c.id_rs),c.provider.reload();break;case"sell_orders":c.breadcrumb[2].label="translate.sell_orders",c.provider=new t(G,c,10,c.id_rs),c.provider.reload();break;case"buy_orders":c.breadcrumb[2].label="translate.buy_orders",c.provider=new s(G,c,10,c.id_rs),c.provider.reload();break;case"goods":c.breadcrumb[2].label="translate.goods";break;case"leasing":c.breadcrumb[2].label="translate.balance_leasing",c.provider=new w(G,c,c.id_rs),c.provider.reload();break;case"payments":c.breadcrumb[2].label="translate.payments",c.provider=new A(G,c,c.id_rs);break;default:throw new Error("Not reached")}c.minDate=new Date(Date.UTC(2013,10,24,12,0,0,0)),c.maxDate=new Date,c.dateOptions={formatYear:"yy",startingDay:1},c.openDatePicker=function(a){a.preventDefault(),a.stopPropagation(),c.opened=!0};var I=!1;c.$watch("dt",function(b,d){if(b&&b!==d&&"string"!=typeof d&&!I){I=!0;var e=y(b,c.format);a.path("/accounts/"+c.id_rs+"/"+c.paramSection+"/"+e)}}),c.showTransactionFilter&&(c.filter.all=!0,c.filter.payments=!0,c.filter.messages=!0,c.filter.aliases=!0,c.filter.namespacedAliases=!0,c.filter.polls=!0,c.filter.accountInfo=!0,c.filter.announceHub=!0,c.filter.goodsStore=!0,c.filter.balanceLeasing=!0,c.filter.trades=!0,c.filter.assetIssued=!0,c.filter.assetTransfer=!0,c.filter.assetOrder=!0,c.filter.currencyIssued=!0,c.filter.currencyTransfer=!0,c.filter.currencyOther=!0,c.filterAllChanged=function(){c.$evalAsync(function(){var a=c.filter.all;c.filter.payments=a,c.filter.messages=a,c.filter.aliases=a,c.filter.namespacedAliases=a,c.filter.polls=a,c.filter.accountInfo=a,c.filter.announceHub=a,c.filter.goodsStore=a,c.filter.balanceLeasing=a,c.filter.trades=a,c.filter.assetIssued=a,c.filter.assetTransfer=a,c.filter.assetOrder=a,c.filter.currencyIssued=a,c.filter.currencyTransfer=a,c.filter.currencyOther=a,c.filterChanged()})},c.filterChanged=function(){c.provider.applyFilter(c.filter)}),c.followUser=function(){h.get("alerts").confirm({title:"Follow account",html:"Do you want to follow this account?<br>By following this account it will be added to your dashboard."}).then(function(){if(confirm){var a={id_rs:c.id_rs,publicKey:"",engine:G.engine.type,name:c.account.name};g.accounts.put(a).then(function(){c.$evalAsync(function(){c.following=!0})})}})},c.unFollowUser=function(){z.getFirst(c.id_rs).then(function(a){a&&h.get("alerts").confirm({title:"Unfollow account",html:"Are you sure you want to unfollow this account?<br>By un following this account it will be removed from your dashboard."}).then(function(b){b&&a.delete()})})},c.sendMoney=function(){h.get("transaction").get("tipUser").execute({recipient:c.id_rs})},c.sendMessage=function(){h.get("transaction").get("accountMessage").execute({recipient:c.id_rs})},c.setAccountInfo=function(){h.get("transaction").get("setAccountInfo").execute(c.id_rs,{name:c.account?c.account.name:"",description:c.account?c.account.description:""})},c.executeTransaction=function(a){switch(a){case"setAccountInfo":c.setAccountInfo();break;case"startForging":E();break;case"stopForging":F();break;default:h.get("transaction").get(a).execute(c.id_rs,{})}},c.editAlias=function(a){h.get("transaction").get("setAlias").execute(c.id_rs,a)},c.transferAlias=function(a){h.get("transaction").get("transferAlias").execute(c.id_rs,a)},c.sellAlias=function(a){h.get("transaction").get("sellAlias").execute(c.id_rs,a)},c.buyAlias=function(a){h.get("transaction").get("buyAlias").execute(c.id_rs,angular.extend(a,{amountNXT:f.util.convertToNXT(a.priceNQT)}))},c.cancelSellAlias=function(a){h.get("transaction").get("cancelSellAlias").execute(c.id_rs,a)},c.sellAsset=function(a){a=angular.copy(a),a.quantity=0,h.get("transaction").get("sellAsset").execute(c.id_rs,a)},c.buyAsset=function(a){a=angular.copy(a),a.quantity=0,h.get("transaction").get("buyAsset").execute(c.id_rs,a)},c.transferAsset=function(a){a=angular.copy(a),a.quantity=0,h.get("transaction").get("transferAsset").execute(c.id_rs,a)},c.writePost=function(){h.get("transaction").get("accountPost").execute(c.id_rs)},c.writeComment=function(a){h.get("transaction").get("writeComment").execute({recipient:c.id_rs,post_transaction_id:a})},c.writeMessage=function(){h.get("transaction").get("accountMessage").execute({recipient:c.id_rs})},c.cancelBidOrder=function(a){h.get("transaction").get("cancelBidOrder").execute(c.id_rs,a)},c.cancelAskOrder=function(a){h.get("transaction").get("cancelAskOrder").execute(c.id_rs,a)},c.tipUser=function(){h.get("transaction").get("tipUser").execute({recipient:c.id_rs})},c.editNSAlias=function(a){h.get("transaction").get("setNamespacedAlias").execute(c.id_rs,{aliasName:a.aliasName,aliasURI:a.aliasURI},!0)}}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/assets/:engine/:asset/:section",{templateUrl:"partials/assets.html",controller:"AssetsController"})}]),a.controller("AssetsController",["$scope","$rootScope","$location","$routeParams","nxt","plugins","ChartDataProvider","AskOrderProvider","BidOrderProvider","AssetInfoProvider","TradesProvider","AssetPostProvider","accountsService","MyOrdersProvider","PrivateAccountsProvider","MyAskOrderProvider","MyBidOrderProvider","AssetDetailProvider","OrderEntryProvider","ChartsProvider",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(b){a.$evalAsync(function(){a.showPrivate=a.assetIssuerRS==b.id_rs});var c={requestType:"getAccountAssets",account:b.id_rs,asset:a.asset};v.engine.socket().callAPIFunction(c).then(function(b){a.$evalAsync(function(){a.unconfirmedAssetBalance=e.util.commaFormat(e.util.convertToQNTf(b.unconfirmedQuantityQNT,a.assetDecimals)),a.assetBalance=e.util.commaFormat(e.util.convertToQNTf(b.quantityQNT,a.assetDecimals))})})}if(b.paramEngine=d.engine,a.paramEngine=d.engine,a.paramAsset=d.asset,a.paramSection=d.section,a.breadcrumb=[],"nxt"==a.paramEngine)var v=e.nxt();else{if("fim"!=a.paramEngine)return void c.path("/activity/fim/activity/latest");var v=e.fim()}a.breadcrumb.push({label:"translate.home",href:"#/home/"+a.paramEngine+"/activity/latest",translate:!0}),a.breadcrumb.push({label:"translate.assets",translate:!0}),a.breadcrumb.push({label:a.paramEngine,active:!0}),a.breadcrumb.push({label:a.paramAsset,href:"#/assets/"+a.paramEngine+"/"+a.paramAsset+"/trade"}),a.breadcrumb.push({label:"translate."+a.paramSection,active:!0,translate:!0}),a.symbol=v.engine.symbol,a.assetName="",a.asset=a.paramAsset,a.assetType="",a.assetIssuerRS="",a.assetIssuerName="",a.assetDescription="",a.assetQuantity="",a.assetDecimals="",a.assetTrades="",a.assetAccounts="",a.assetTransfers="",a.assetBalance="",a.isPrivate=!1,a.showPrivate=!1,a.accounts={},a.reload=function(){switch(a.paramSection){case"private":a.provider=new o(v,a,10,a.asset),a.provider.reload();break;case"pulse":a.provider=new l(v,a,5,a.asset),a.provider.reload();break;case"trade":a.chart=new t(v,a,a.paramAsset,a.assetDecimals),a.chart.reload(),a.askOrders=new h(v,a,10,a.paramAsset,a.assetDecimals),a.askOrders.reload(),a.bidOrders=new i(v,a,10,a.paramAsset,a.assetDecimals),a.bidOrders.reload(),a.trades=new k(v,a,10,a.paramAsset,a.assetDecimals),a.trades.reload();var c=b.selectedAccount?b.selectedAccount.id_rs:null;c&&(a.myAskOrders=new p(v,a,10,a.paramAsset,a.assetDecimals,c),a.myAskOrders.reload(),a.myBidOrders=new q(v,a,10,a.paramAsset,a.assetDecimals,c),a.myBidOrders.reload()),a.details=new r(v,a,a.paramAsset,a.assetDecimals,c),a.details.reload(),a.order=new s(v,a,a.paramAsset,a.assetDecimals,c,a.privateAsset)}},a.$on("$destroy",b.$watch("selectedAccount",a.reload)),j.getInfo(v,a.paramAsset).then(function(c){a.$evalAsync(function(){a.breadcrumb[2].label=c.name,a.assetName=c.name,a.assetIssuerRS=c.issuerRS,a.assetIssuerName=c.issuerName,a.assetDescription=c.description,a.assetQuantity=e.util.commaFormat(e.util.convertToQNTf(c.quantityQNT,c.decimals)),a.assetDecimals=c.decimals,a.assetTrades=c.numberOfTrades,a.assetAccounts=c.numberOfAccounts,a.assetTransfers=c.numberOfTransfers,a.isPrivate=1==c.type,a.showPrivate=b.selectedAccount?c.issuerRS==b.selectedAccount.id_rs:!1,a.isPrivate&&(a.privateAsset={orderFeePercentage:c.orderFeePercentage,tradeFeePercentage:c.tradeFeePercentage,orderFee:e.util.convertToQNTf(c.orderFeePercentage,6)}),a.reload()})}),b.$watch("selectedAccount",function(){b.selectedAccount&&u(b.selectedAccount)}),b.selectedAccount&&u(b.selectedAccount),a.buyAsset=function(){var c={asset:a.asset,decimals:a.assetDecimals,name:a.assetName,priceNXT:a.order.priceNXT,quantity:a.order.quantity};b.TRADE_UI_ONLY&&(c.autoSubmit=!0),a.privateAsset&&(c.orderFeeNQT=a.order.orderFeeNQT);var d=f.get("transaction").get("buyAsset").execute(b.selectedAccount.id_rs,c);d.then(function(){b.selectedAccount&&b.setSelectedAccount(b.selectedAccount)})},a.sellAsset=function(){var c={asset:a.asset,decimals:a.assetDecimals,name:a.assetName,priceNXT:a.order.priceNXT,quantity:a.order.quantity};b.TRADE_UI_ONLY&&(c.autoSubmit=!0),a.privateAsset&&(c.orderFeeQNT=a.order.orderFeeQNT);var d=f.get("transaction").get("sellAsset").execute(b.selectedAccount.id_rs,c);d.then(function(){b.selectedAccount&&b.setSelectedAccount(b.selectedAccount)})},a.writePost=function(){f.get("transaction").get("assetPost").execute(a.assetIssuerRS,{asset:a.asset})},a.writeComment=function(b){f.get("transaction").get("writeComment").execute({recipient:a.assetIssuerRS,post_transaction_id:b})},a.cancelOrder=function(c){var d={order:c.order,asset:a.asset,name:a.assetName,price:c.price,quantity:c.quantity};b.TRADE_UI_ONLY&&(d.autoSubmit=!0);var e="ask"==c.type?"cancelAskOrder":"cancelBidOrder",g=f.get("transaction").get(e).execute(c.accountRS,d);g.then(function(){b.selectedAccount&&b.setSelectedAccount(b.selectedAccount)})},a.addPrivateAssetAccount=function(b){var c={asset:a.asset};b&&(c.recipient=b),f.get("transaction").get("addPrivateAssetAccount").execute(a.assetIssuerRS,c)},a.removePrivateAssetAccount=function(b){var c={asset:a.asset,name:a.assetName};b&&(c.recipient=b),f.get("transaction").get("removePrivateAssetAccount").execute(a.assetIssuerRS,c)},a.setPrivateAssetFee=function(){var b={asset:a.asset,name:a.assetName};f.get("transaction").get("setPrivateAssetFee").execute(a.assetIssuerRS,b)},a.data=[1,2,3],a.bidOrderClicked=function(b){for(var c,d=new BigInteger("0"),f=0;f<a.bidOrders.entities.length&&(c=a.bidOrders.entities[f],d=d.add(new BigInteger(c.quantityQNT)),c!=b);f++);a.order.quantity=e.util.convertToQNTf(d.toString(),a.assetDecimals),a.order.priceNXT=b.price,a.order.reCalculate()},a.askOrderClicked=function(b){for(var c,d=new BigInteger("0"),f=0;f<a.askOrders.entities.length&&(c=a.askOrders.entities[f],d=d.add(new BigInteger(c.quantityQNT)),c!=b);f++);a.order.quantity=e.util.convertToQNTf(d.toString(),a.assetDecimals),a.order.priceNXT=c.price,a.order.reCalculate()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d,e){function f(a){a=String(a);for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);b+=128>d?1:2048>d?2:65536>d?3:1<<21>d?4:1<<26>d?5:1<<31>d?6:Number.NaN}return b}function g(a,b){return b||(a=a||"",-1!=a.indexOf("FIM-")?b=e.fim():-1!=a.indexOf("NXT-")&&(b=e.nxt())),b?b.createAddress().set(a):void 0}function h(a){var d=c.defer();return b.open("transactionCreate",{resolve:{items:function(){return angular.copy(a)}},close:function(a){d.resolve(a)},cancel:function(){d.resolve(null)}}),d.promise}function i(a){return!isNaN(parseFloat(a))&&isFinite(a)}function j(a,b,c){if(-1==a.indexOf(".")){var d=parseInt(a);if(!isNaN(d)&&isFinite(a))return"number"==typeof b&&b>d?!1:"number"==typeof c&&d>c?!1:!0}return!1}function k(a,b){for(var c=0;c<a.fields.length;c++)if(a.fields[c].name==b)return a.fields[c];return null}d.createTransactionTest=function(){a.get("transaction").setAccountInfo("FIM-2XSA-Q4ZN-XKX7-9B7EK")};var l=/^[a-zA-Z0-9]+$/,m=/^[a-zA-Z0-9\!\#\$\%\&\(\)\*\+\-\.\/:;\<=\>\?\@\[\]\_\{\|\}]+$/;a.register({id:"transaction",create:h,transactions:[],_map:{},add:function(a){this._map[a.id]=a,this.transactions.push(a)},get:function(a){return this._map[a]},validators:{address:g},getByteLen:f,isInteger:j,isNumeric:i,getField:k,ALPHABET:l,EXTENDED_ALPHABET:m}),b.register("transactionCreate",{templateUrl:"plugins/transaction/partials/transaction-modal.html",controller:"TransactionCreateModalController"})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("TransactionCreateModalController",["items","$modalInstance","$scope","nxt","requests","modals","$sce","$q","plugins","i18n","$timeout","accountsService",function(a,b,c,d,e,f,g,h,i,j,k,l){c.sendSuccess=!1,c.show={},c.show.advanced=!1,c.show.message=!!a.showMessage,c.items=a;var m=d.get(a.senderRS||a.recipient||a.sender);if((a.senderRS==d.TYPE_NXT||a.senderRS==d.TYPE_FIM)&&(c.items.editSender=!0,c.items.senderRS=""),c.items.title=a.title||"Create Transaction",c.items.txnMessageType=a.txnMessageType||(c.items.canHaveRecipient?"to_recipient":"to_self"),c.items.txnMessage=a.txnMessage||"",c.items.symbol=a.symbol||m.engine.symbol,c.items.deadline=a.deadline||"1440",c.items.feeNXT=a.feeNXT||m.engine.feeCost,c.items.message=g.getTrustedHtml(a.message),c.items.accounts=[],c.items.editSender||c.items.editRecipient){var n=l.getAll(m.engine.type==d.TYPE_FIM?l.FIM_FILTER:l.NXT_FILTER);n.then(function(a){c.$evalAsync(function(){c.items.accounts=a})})}angular.forEach(c.items.fields,function(a){a.__show=!0,a.show&&(a.__show=!!c.$eval(a.show),c.$watch(a.show,function(b){a.__show=!!b}))}),c.validateAddress=function(a){var b=m.createAddress();return b.set(a)},c.dismiss=function(){b.dismiss()},c.close=function(){function e(a,b,c){a.encrypt_message?n(a.recipient).then(function(d){a.recipientPublicKey=d,g(a,b,c)},function(){o(a.recipient).then(function(d){a.recipientPublicKey=d,g(a,b,c)},function(){k(function(){sendIt(a)},1,!1)})}):g(a,b,c)}function g(d,e,f){d.publicKey=e,d.requestType=c.items.requestType,p(d,f),i.get("alerts").progress({title:"Please wait"}).then(function(g){a.autoSubmit&&(g.onclose=function(){b.close(c.items)});var h=c.items.forceLocal?m.engine.localSocket():m.engine.socket();g.setMessage("Creating Transaction"),h.callAPIFunction(d).then(function(a){if(a.error||a.errorDescription)return g.setErrorMessage(a.error||a.errorDescription),void g.enableCloseBtn();if(d.secretPhrase)g.animateProgress().then(function(){new Audio("images/beep.wav").play(),g.setMessage("Operation complete"),g.enableCloseBtn(),g.onclose=function(){b.close(c.items)}});else{g.setMessage("Signing Transaction");var i=m.crypto.signBytes(a.unsignedTransactionBytes,converters.stringToHexString(f));if(!m.crypto.verifyBytes(i,a.unsignedTransactionBytes,e)){var k=j.format("error_signature_verification_client");return g.setErrorMessage(k),void g.enableCloseBtn()}var l=m.verifyAndSignTransactionBytes(a.unsignedTransactionBytes,i,d.requestType,d,m.type,m.engine.constants());if(!l){var k=j.format("error_signature_verification_server");return g.setErrorMessage(k),void g.enableCloseBtn()}{m.crypto.calculateFullHash(a.unsignedTransactionBytes,i)}g.setMessage("Broadcasting Transaction"),h.callAPIFunction({requestType:"broadcastTransaction",transactionBytes:l}).then(function(){g.animateProgress().then(function(){new Audio("images/beep.wav").play(),g.setMessage("Transaction sent successfully"),g.enableCloseBtn(),c.items.autoSubmit?(g.close(),b.close(c.items)):g.onclose=function(){b.close(c.items)}})},function(a){g.setMessage(JSON.stringify(a)),g.enableCloseBtn()})}},function(a){g.setMessage(JSON.stringify(a)),g.enableCloseBtn()})})}function l(a){var b=h.defer();return f.open("secretPhrase",{resolve:{items:function(){return{sender:a}}},close:function(a){a.publicKey=m.crypto.secretPhraseToPublicKey(a.secretPhrase),b.resolve(a)},cancel:function(a){b.reject(a)}}),b.promise}function n(a){var b=h.defer();return m.engine.socket().getAccount({account:a}).then(function(a){a.publicKey?b.resolve(a.publicKey):b.reject()},b.reject),b.promise}function o(){var a=h.defer();return a.resolve("IMPLEMENT THIS DIALOG PLEASE. MUST RETURN A PUBLIC KEY"),a.promise}function p(a,b){if(a.encrypt_message&&a.message){var c={};a.recipient?c.account=a.recipient:a.encryptedMessageRecipient&&(c.account=a.encryptedMessageRecipient,delete a.encryptedMessageRecipient),a.recipientPublicKey&&(c.publicKey=a.recipientPublicKey);var d=m.crypto.encryptNote(a.message,c,b);a.encryptedMessageData=d.message,a.encryptedMessageNonce=d.nonce,a.messageToEncryptIsText="true",delete a.encrypt_message,delete a.message}else if(a.note_to_self&&a.message){var d=m.crypto.encryptNote(a.message,{publicKey:converters.hexStringToByteArray(m.crypto.secretPhraseToPublicKey(b))},b);a.encryptToSelfMessageData=d.message,a.encryptToSelfMessageNonce=d.nonce,a.messageToEncryptToSelfIsText="true",delete a.note_to_self,delete a.message}else a.public_message&&a.message&&(a.messageIsText="true",delete a.public_message)}if(c.sendSuccess)b.close(c.items);else{angular.forEach(c.items.fields,function(a){c.items[a.name]=a.value});var q={feeNQT:d.util.convertToNQT(c.items.feeNXT),deadline:c.items.deadline,sender:c.items.senderRS};l(c.items.senderRS||null).then(function(a){c.items.senderRS=c.items.senderRS||a.sender,c.items.secretPhrase=a.secretPhrase,q=angular.extend(q,c.items.createArguments(c.items));var b=null,d=null;if(c.show.message?(b=c.items.txnMessage,d=c.items.txnMessageType):q.txnMessage&&(b=q.txnMessage,d=q.txnMessageType),b)if(q.message=b,q.messageIsText="true","to_self"==d)q.note_to_self=!0;else if("to_recipient"==d)q.encrypt_message=!0;else{if("public"!=d)throw new Error("Not reached");q.public_message=!0}e(q,a.publicKey,a.secretPhrase)})}},c.items.autoSubmit&&c.close()}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d,e){var f=a.get("transaction");f.add({label:"Send money from",id:"sendMoney",exclude:d.TRADE_UI_ONLY,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Send money from",message:"Sends money to recipient",senderRS:a,requestType:"sendMoney",canHaveRecipient:!0,editRecipient:!0,createArguments:function(a){var b={recipient:e.util.convertRSAddress(a.recipient),amountNQT:e.util.convertToNQT(a.amountNXT)};return a.recipientPublicKey&&(b.recipientPublicKey=a.recipientPublicKey),b},fields:[{label:"Recipient public key",name:"recipientPublicKey",type:"text",value:b.recipientPublicKey||"",required:!1,show:"show.showPublicKey"},{label:"Amount",name:"amountNXT",type:"money",value:b.amountNXT||"",required:!0}]}))}}),f.add({label:"Tip User",id:"tipUser",exclude:!0,execute:function(a){return a=a||{},f.create(angular.extend(a,{title:"Send Money",message:"Sends money to recipient",editSender:!0,editRecipient:!1,recipient:a.recipient||"",requestType:"sendMoney",canHaveRecipient:!0,createArguments:function(a){var b={recipient:e.util.convertRSAddress(a.recipient),amountNQT:e.util.convertToNQT(a.amountNXT)};return a.recipientPublicKey&&(b.recipientPublicKey=a.recipientPublicKey),b},fields:[{label:"Recipient public key",name:"recipientPublicKey",type:"text",value:a.recipientPublicKey||"",required:!1,show:"show.showPublicKey"},{label:"Amount",name:"amountNXT",type:"money",value:a.amountNXT||"",required:!0}]}))}})}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d,e){var f=a.get("transaction");f.add({label:"Send Message",id:"accountMessage",exclude:!0,execute:function(a){return a=a||{},f.create(angular.extend(a,{title:"Send Message",message:"Send an encrypted (private) message to recipient",requestType:"sendMessage",hideMessage:!0,editSender:!0,editRecipient:!0,recipient:a.recipient||"",canHaveRecipient:!0,createArguments:function(a){var b={recipient:e.util.convertRSAddress(a.recipient),sender:e.util.convertRSAddress(a.senderRS),txnMessageType:"to_recipient",txnMessage:a.message};return a.recipientPublicKey&&(b.recipientPublicKey=a.recipientPublicKey),b},fields:[{label:"Recipient public key",name:"recipientPublicKey",type:"text",value:a.recipientPublicKey||"",required:!1,show:"show.showPublicKey"},{label:"Message",name:"message",type:"textarea",value:a.message||"",validate:function(a){return this.errorMsg=null,a?f.getByteLen(a)>1e3&&(this.errorMsg="To much characters"):this.errorMsg=null,!this.errorMsg},required:!0}]}))}}),f.add({label:"Send message from",id:"sendMessage",exclude:d.TRADE_UI_ONLY,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Send message from",message:"Send an encrypted (private) message to recipient",requestType:"sendMessage",hideMessage:!0,senderRS:a,editSender:!0,editRecipient:!0,recipient:b.recipient||"",canHaveRecipient:!0,createArguments:function(a){var b={recipient:e.util.convertRSAddress(a.recipient),sender:e.util.convertRSAddress(a.senderRS),txnMessageType:"to_recipient",txnMessage:a.message};
return a.recipientPublicKey&&(b.recipientPublicKey=a.recipientPublicKey),b},fields:[{label:"Recipient public key",name:"recipientPublicKey",type:"text",value:b.recipientPublicKey||"",required:!1,show:"show.showPublicKey"},{label:"Message",name:"message",type:"textarea",value:b.message||"",validate:function(a){return this.errorMsg=null,a?f.getByteLen(a)>1e3&&(this.errorMsg="To much characters"):this.errorMsg=null,!this.errorMsg},required:!0}]}))}}),f.add({label:"Write post",id:"accountPost",execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Write post",message:"Posts can be read by anyone and are permanantly stored in the blockchain",requestType:"sendMessage",senderRS:a,hideMessage:!0,createArguments:function(a){return{recipient:e.util.convertRSAddress(a.senderRS),txnMessageType:"public",txnMessage:"post1:"+a.message}},fields:[{label:"Post",name:"message",type:"textarea",value:b.message||"",validate:function(a){if(this.errorMsg=null,a){var b="post1:"+a;f.getByteLen(b)>1e3&&(this.errorMsg="To much characters")}else this.errorMsg=null;return!this.errorMsg},required:!0}]}))}}),f.add({label:"Write post",id:"assetPost",exclude:!0,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Write post",message:"Posts can be read by anyone and are permanantly stored in the blockchain",requestType:"sendMessage",senderRS:a,hideMessage:!0,createArguments:function(a){return{recipient:e.util.convertRSAddress(a.senderRS),txnMessageType:"public",txnMessage:"post2:"+b.asset+":"+a.message}},fields:[{label:"Post",name:"message",type:"textarea",value:b.message||"",validate:function(a){if(this.errorMsg=null,a){var c="post2:"+b.asset+":"+a;f.getByteLen(c)>1e3&&(this.errorMsg="To much characters")}else this.errorMsg=null;return!this.errorMsg},required:!0}]}))}}),f.add({label:"Write comment",id:"writeComment",exclude:!0,execute:function(a){return a=a||{},f.create(angular.extend(a,{title:"Write comment",message:"Comments can be read by anyone and are permanantly stored in the blockchain",requestType:"sendMessage",hideMessage:!0,editSender:!0,createArguments:function(b){return{recipient:e.util.convertRSAddress(b.recipient),sender:e.util.convertRSAddress(b.senderRS),txnMessageType:"public",txnMessage:"comm"+a.post_transaction_id+":"+b.message}},fields:[{label:"Recipient",name:"recipient",type:"text",value:a.recipient||"",readonly:!0},{label:"Comment",name:"message",type:"textarea",value:a.message||"",validate:function(b){if(this.errorMsg=null,b){var c="comm"+a.post_transaction_id+":"+b;f.getByteLen(c)>1e3&&(this.errorMsg="To much characters")}else this.errorMsg=null;return!this.errorMsg},required:!0}]}))}})}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a){var b=a.get("transaction");b.add({label:"Set account info",id:"setAccountInfo",execute:function(a,c){return c=c||{},b.create(angular.extend(c,{title:"Set account info",message:"Set your publicly visible account name and description",requestType:"setAccountInfo",senderRS:a,canHaveRecipient:!1,editSender:!0,createArguments:function(a){return{name:a.name,description:a.description}},fields:[{label:"Name",name:"name",type:"text",value:c.name||"",validate:function(a){return this.errorMsg=null,a?b.getByteLen(a)>100&&(this.errorMsg="To much characters"):this.errorMsg=null,!this.errorMsg},required:!1},{label:"Description",name:"description",type:"textarea",value:c.description||"",validate:function(a){return this.errorMsg=null,a?b.getByteLen(a)>1e3&&(this.errorMsg="To much characters"):this.errorMsg=null,!this.errorMsg},required:!1}]}))}})}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d,e){var f=a.get("transaction");f.add({label:"Set Alias",id:"setAlias",exclude:d.TRADE_UI_ONLY,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Set Alias",message:"Set or update an alias",senderRS:a,editSender:!0,requestType:"setAlias",canHaveRecipient:!1,createArguments:function(a){return{aliasName:a.aliasName,aliasURI:a.aliasURI}},fields:[{label:"Alias Name",name:"aliasName",type:"text",value:b.aliasName||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)?f.getByteLen(a)>100&&(this.errorMsg="To much characters"):this.errorMsg="Invalid character":this.errorMsg=null,!this.errorMsg},required:!0},{label:"Alias Value",name:"aliasURI",type:"textarea",value:b.aliasURI||"",validate:function(a){return this.errorMsg=null,a?f.getByteLen(a)>1e3&&(this.errorMsg="To much characters"):this.errorMsg=null,!this.errorMsg},required:!0}]}))}}),f.add({label:"Sell Alias",id:"sellAlias",exclude:!0,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Sell Alias",message:"Please enter the Alias <b>name</b> or it's <b>identifier</b>. If a recipient is provided only the recipient can buy the alias, leave the recipient field blank to allow anyone to buy the alias.<br><br><b>Note:</b> An alias can be transferred rather than sold by setting price to zero. A pending sale can be canceled by selling again to self for a price of zero.",senderRS:a,requestType:"sellAlias",canHaveRecipient:!0,editRecipient:!0,recipient:b.recipient||"",createArguments:function(a){var b={priceNQT:e.util.convertToNQT(a.priceNXT)};return a.alias&&(b.alias=a.alias),a.aliasName&&(b.aliasName=a.aliasName),a.recipient&&(b.recipient=e.util.convertRSAddress(a.recipient)),b},fields:[{label:"Identifier",name:"alias",type:"text",value:b.alias||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)||(this.errorMsg="Invalid character"):this.errorMsg=null,!this.errorMsg},required:!1},{label:"Alias Name",name:"aliasName",type:"text",value:b.aliasName||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)?f.getByteLen(a)>100&&(this.errorMsg="To much characters"):this.errorMsg="Invalid character":this.errorMsg=null,!this.errorMsg},required:!1},{label:"Price",name:"priceNXT",type:"money",value:b.priceNXT||"",required:!0}]}))}}),f.add({label:"Buy Alias",id:"buyAlias",exclude:!0,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Buy Alias",message:"Buy an alias. Please enter the Alias <b>name</b> or it's <b>identifier</b>.",senderRS:a,editSender:!0,requestType:"buyAlias",canHaveRecipient:!1,createArguments:function(a){var b={amountNQT:e.util.convertToNQT(a.amountNXT)};return a.alias&&(b.alias=a.alias),a.aliasName&&(b.aliasName=a.aliasName),b},fields:[{label:"Identifier",name:"alias",type:"text",value:b.alias||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)||(this.errorMsg="Invalid character"):this.errorMsg=null,!this.errorMsg},required:!1},{label:"Alias Name",name:"aliasName",type:"text",value:b.aliasName||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)?f.getByteLen(a)>100&&(this.errorMsg="To much characters"):this.errorMsg="Invalid character":this.errorMsg=null,!this.errorMsg},required:!1},{label:"Amount",name:"amountNXT",type:"money",value:(b.amountNXT||"").replace(",",""),required:!0}]}))}}),f.add({label:"Transfer Alias",id:"transferAlias",exclude:!0,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Transfer Alias",message:"Please enter the <b>recipient</b>.",senderRS:a,requestType:"sellAlias",canHaveRecipient:!0,editRecipient:!0,recipient:b.recipient||"",createArguments:function(a){var b={priceNQT:"0"};return a.alias&&(b.alias=a.alias),a.aliasName&&(b.aliasName=a.aliasName),a.recipient&&(b.recipient=e.util.convertRSAddress(a.recipient)),b},fields:[{label:"Identifier",name:"alias",type:"text",value:b.alias||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)||(this.errorMsg="Invalid character"):this.errorMsg=null,!this.errorMsg},required:!1},{label:"Alias Name",name:"aliasName",type:"text",value:b.aliasName||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)?f.getByteLen(a)>100&&(this.errorMsg="To much characters"):this.errorMsg="Invalid character":this.errorMsg=null,!this.errorMsg},required:!1}]}))}}),f.add({label:"Cancel Sell Alias",id:"cancelSellAlias",exclude:!0,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Cancel Sell Alias",message:"Please enter the Alias <b>name</b> or it's <b>identifier</b>. ",senderRS:a,requestType:"sellAlias",canHaveRecipient:!1,createArguments:function(b){var c={priceNQT:"0",recipient:e.util.convertRSAddress(a)};return b.alias&&(c.alias=b.alias),b.aliasName&&(c.aliasName=b.aliasName),c},fields:[{label:"Identifier",name:"alias",type:"text",value:b.alias||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)||(this.errorMsg="Invalid character"):this.errorMsg=null,!this.errorMsg},required:!1},{label:"Alias Name",name:"aliasName",type:"text",value:b.aliasName||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)?f.getByteLen(a)>100&&(this.errorMsg="To much characters"):this.errorMsg="Invalid character":this.errorMsg=null,!this.errorMsg},required:!1}]}))}})}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d){var e=a.get("transaction");e.add({label:"Set Namespaced Alias",id:"setNamespacedAlias",exclude:d.TRADE_UI_ONLY,execute:function(a,b,c){return b=b||{},e.create(angular.extend(b,{title:"Set Namespaced Alias",message:"Set or update a namespaced alias",senderRS:a,editSender:"undefined"==typeof c?!0:!c,requestType:"setNamespacedAlias",canHaveRecipient:!1,createArguments:function(a){return{aliasName:a.aliasName,aliasURI:a.aliasURI}},fields:[{label:"Alias Name",name:"aliasName",type:"text",value:b.aliasName||"",validate:function(a){return this.errorMsg=null,a?e.EXTENDED_ALPHABET.test(a)?e.getByteLen(a)>100&&(this.errorMsg="To much characters"):this.errorMsg="Invalid character":this.errorMsg=null,!this.errorMsg},required:!0},{label:"Alias Value",name:"aliasURI",type:"textarea",value:b.aliasURI||"",validate:function(a){return this.errorMsg=null,a?e.getByteLen(a)>1e3&&(this.errorMsg="To much characters"):this.errorMsg=null,!this.errorMsg},required:!0}]}))}})}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d,e){var f=a.get("transaction");f.add({label:"Issue Asset",id:"issueAsset",execute:function(a,b){var c=e.get(a);return b=b||{},f.create(angular.extend(b,{title:"Issue Asset",message:"Issue a new asset on the asset exchange (costs 1000 "+c.engine.symbol+")",senderRS:a,feeNXT:"1000",requestType:"issueAsset",canHaveRecipient:!1,editSender:!0,createArguments:function(a){var b={name:a.name,description:a.description,decimals:parseInt(a.decimals)};if(b.quantityQNT=String(a.quantity),b.decimals>0)for(var c=0;c<b.decimals;c++)b.quantityQNT+="0";return d.privateEnabled&&(b.type=a["private"]?1:0),b},fields:[{label:"Asset Name",name:"name",type:"text",value:b.name||"",validate:function(a){return this.errorMsg=null,a?f.ALPHABET.test(a)?f.getByteLen(a)>100&&(this.errorMsg="To much characters"):this.errorMsg="Invalid character":this.errorMsg=null,!this.errorMsg},required:!0},{label:"Quantity",name:"quantity",type:"text",value:b.quantity||"",validate:function(a){return this.errorMsg=null,a?f.isInteger(a)||(this.errorMsg="Must be a number"):this.errorMsg=null,!this.errorMsg},required:!0},{label:"Decimals",name:"decimals",type:"text",value:b.decimals||"",validate:function(a){return this.errorMsg=null,a?f.isInteger(a,0,8)||(this.errorMsg="Must be a number between 0 and 8"):this.errorMsg=null,!this.errorMsg},required:!0},{label:"Asset Description",name:"description",type:"textarea",value:b.description||"",validate:function(a){return this.errorMsg=null,a?f.getByteLen(a)>1e3&&(this.errorMsg="To much characters"):this.errorMsg=null,!this.errorMsg},required:!0},{label:"Private Asset",name:"private",type:"radio",value:b["private"]||!1,show:"privateEnabled"}]}))}}),f.add({label:"Transfer Asset",id:"transferAsset",execute:function(a,b){e.get(a);return b=b||{},f.create(angular.extend(b,{title:"Transfer Asset",message:"Transfer asset",senderRS:a,requestType:"transferAsset",canHaveRecipient:!0,editRecipient:!0,editAsset:!0,initialize:function(b){var c=e.get(a);c.engine.socket().getAccountAssets({account:a,firstIndex:0,lastIndex:40}).then(function(a){console.log(a),d.$evalAsync(function(){var c=a.error||a.errorDescription;c?(console.log(c),b.assets=[]):b.assets=a})})},onAssetChange:function(b){if(b.asset){var c=e.get(a);c.engine.socket().getAsset({asset:b.asset}).then(function(a){d.$evalAsync(function(){var c=a.error||a.errorDescription;c?(console.log(c),f.getField(b,"name").value="",f.getField(b,"decimals").value=""):(f.getField(b,"name").value=a.name,f.getField(b,"decimals").value=a.decimals)})})}},createArguments:function(a){return{recipient:e.util.convertRSAddress(a.recipient),asset:a.asset,quantityQNT:e.util.convertToQNT(a.quantity,a.decimals)}},fields:[{label:"Name",name:"name",readonly:!0,value:b.name||"",type:"text"},{label:"Decimals",name:"decimals",readonly:!0,value:b.decimals||"",type:"text"},{label:"Quantity",name:"quantity",type:"text",value:b.quantity||"",validate:function(a){return this.errorMsg=null,a?f.isNumeric(a)||(this.errorMsg="Must be a number"):this.errorMsg=null,!this.errorMsg},required:!0}]}))}}),f.add({label:"Buy Asset",id:"buyAsset",exclude:!0,execute:function(a,b){function c(a){var b=f.getField(a,"decimals"),c=f.getField(a,"quantity"),d=f.getField(a,"priceNXT"),i=f.getField(a,"totalNXT"),j=f.getField(a,"orderFeeNXT"),k=new BigInteger(e.util.convertToQNT(c.value,parseInt(b.value))),l=new BigInteger(e.util.calculatePricePerWholeQNT(e.util.convertToNQT(d.value),parseInt(b.value))),m="";if("0"==l.toString()||"0"==k.toString()?(i.value="",j.value=""):(m=k.multiply(l),i.value=e.util.convertToNXT(m)),h&&m){var n=m.multiply(new BigInteger(String(h.orderFeePercentage))).divide(new BigInteger("100000000")).toString();j.value=e.util.convertToNXT(n),a.orderFeeNQT=n;var o=m.add(new BigInteger(n));i.value=e.util.convertToNXT(o.toString()),i.setLabel(g.engine.symbol,h.orderFee,e.util.convertToNXT(n.toString()))}}var g=e.get(a);b=b||{};var h=null;return f.create(angular.extend(b,{title:"Buy Asset",message:"Place buy order for asset",senderRS:a,requestType:"placeBidOrder",canHaveRecipient:!1,createArguments:function(a){var b=e.util.convertToQNT(a.quantity,parseInt(a.decimals)),c=e.util.calculatePricePerWholeQNT(e.util.convertToNQT(a.priceNXT),parseInt(a.decimals)),d={priceNQT:c,asset:a.asset,quantityQNT:b};return a.orderFeeNQT&&(d.orderFeeNQT=a.orderFeeNQT),d},initialize:function(a){a.autoSubmit||f.getField(a,"asset").onchange(a)},fields:[{label:"Asset",name:"asset",type:"text",value:b.asset||"",onchange:function(b){if(this.value){var c=e.get(a),g=this;c.engine.socket().getAsset({asset:this.value}).then(function(a){var c=a.error||a.errorDescription;c&&(g.errorMsg=c),h=null,angular.isDefined(a.orderFeePercentage)&&(h={orderFeePercentage:String(a.orderFeePercentage||0),tradeFeePercentage:String(a.tradeFeePercentage||0)},h.orderFee=e.util.convertToQNTf(h.orderFeePercentage,6)),d.$evalAsync(function(){f.getField(b,"name").value=a.name,f.getField(b,"decimals").value=a.decimals,f.getField(b,"quantity").precision=String(a.decimals)})})}},validate:function(a){return this.errorMsg=null,a||(this.errorMsg=null),!this.errorMsg},required:!0},{label:"Name",name:"name",readonly:!0,value:b.name||"",type:"text"},{label:"Decimals",name:"decimals",readonly:!0,value:b.decimals||"",type:"text"},{label:"Price",name:"priceNXT",type:"money",precision:String(8),onchange:function(a){c(a)},value:b.priceNXT||"",required:!0},{label:"Quantity",name:"quantity",type:"money",value:b.quantity||"",onchange:function(a){c(a)},required:!0},{name:"orderFeeNQT",value:b.orderFeeNQT||""},{label:"Total",setLabel:function(a,b,c){this.label="Total (order fee "+b+"% = "+c+" "+g.engine.symbol+")"},name:"totalNXT",readonly:!0,value:b.totalNXT||"",type:"text"}]}))}}),f.add({label:"Sell Asset",id:"sellAsset",exclude:!0,execute:function(a,b){function c(a){var b=f.getField(a,"decimals"),c=f.getField(a,"quantity"),d=f.getField(a,"priceNXT"),g=f.getField(a,"totalNXT"),i=f.getField(a,"orderFeeQNT"),j=new BigInteger(e.util.convertToQNT(c.value,parseInt(b.value))),k=new BigInteger(e.util.calculatePricePerWholeQNT(e.util.convertToNQT(d.value),parseInt(b.value))),l="";if("0"==k.toString()||"0"==j.toString()?(g.value="",i.value=""):(l=j.multiply(k),g.value=e.util.convertToNXT(l)),c.label="Quantity",h&&j){var m=j.multiply(new BigInteger(String(h.orderFeePercentage))).divide(new BigInteger("100000000")).toString();i.value=m,a.orderFeeQNT=m;var n=j.add(new BigInteger(m)).toString();c.setLabel(h.orderFee,e.util.convertToQNTf(m,a.decimals),e.util.convertToQNTf(n,a.decimals))}}var g=e.get(a);b=b||{};var h=null;return f.create(angular.extend(b,{title:"Sell Asset",message:"Place sell order for asset",senderRS:a,requestType:"placeAskOrder",canHaveRecipient:!1,createArguments:function(a){var b=e.util.convertToQNT(a.quantity,parseInt(a.decimals)),c=e.util.calculatePricePerWholeQNT(e.util.convertToNQT(a.priceNXT),parseInt(a.decimals)),d={priceNQT:c,asset:a.asset,quantityQNT:b};return a.orderFeeQNT&&(d.orderFeeQNT=a.orderFeeQNT),d},initialize:function(a){a.autoSubmit&&f.getField(a,"asset").onchange(a)},fields:[{label:"Asset",name:"asset",type:"text",value:b.asset||"",onchange:function(b){if(this.value){var c=e.get(a),g=this;c.engine.socket().getAsset({asset:this.value}).then(function(a){var c=a.error||a.errorDescription;c&&(g.errorMsg=c),h=null,angular.isDefined(a.orderFeePercentage)&&(h={orderFeePercentage:String(a.orderFeePercentage||0),tradeFeePercentage:String(a.tradeFeePercentage||0)},h.orderFee=e.util.convertToQNTf(h.orderFeePercentage,6)),d.$evalAsync(function(){f.getField(b,"name").value=a.name,f.getField(b,"decimals").value=a.decimals,f.getField(b,"quantity").precision=String(a.decimals)})})}},validate:function(a){return this.errorMsg=null,a||(this.errorMsg=null),!this.errorMsg},required:!0},{label:"Name",name:"name",readonly:!0,value:b.name||"",type:"text"},{label:"Decimals",name:"decimals",readonly:!0,value:b.decimals||"",type:"text"},{label:"Price",name:"priceNXT",type:"money",precision:String(8),onchange:function(a){c(a)},value:b.priceNXT||"",required:!0},{label:"Quantity",setLabel:function(a,b,c){this.label="Quantity (order fee "+a+"% = "+b+" total "+c+")"},name:"quantity",type:"money",value:b.quantity||"",onchange:function(a){c(a)},required:!0},{name:"orderFeeQNT",value:b.orderFeeQNT||""},{label:"Total "+g.engine.symbol+" that you receive",name:"totalNXT",readonly:!0,value:b.totalNXT||"",type:"text"}]}))}}),f.add({label:"Cancel sell order",id:"cancelAskOrder",exclude:!0,execute:function(a,b){e.get(a);return b=b||{},f.create(angular.extend(b,{title:"Cancel order",message:"Cancel sell order",senderRS:a,requestType:"cancelAskOrder",canHaveRecipient:!1,createArguments:function(a){return{order:a.order}},fields:[{label:"Order",name:"order",type:"text",precision:String(0),onchange:function(b){if(this.value){var c=e.get(a),g=this;c.engine.socket().getAskOrder({order:this.value}).then(function(a){var c=a.error||a.errorDescription;c&&(g.errorMsg=c),d.$evalAsync(function(){f.getField(b,"asset").value=a.asset,f.getField(b,"name").value=a.name,f.getField(b,"price").value=a.priceNQT?e.util.calculateOrderPricePerWholeQNT(a.priceNQT,a.decimals):"",f.getField(b,"quantity").value=a.quantityQNT?e.util.convertToQNTf(a.quantityQNT,a.decimals):""})})}},validate:function(a){return this.errorMsg=null,a||(this.errorMsg=null),!this.errorMsg},value:b.order||"",required:!0},{label:"Asset",name:"asset",type:"text",value:b.asset||"",readonly:!0},{label:"Name",name:"name",readonly:!0,value:b.name||"",type:"text"},{label:"Price",name:"price",readonly:!0,value:b.price||"",type:"text"},{label:"Quantity",name:"quantity",readonly:!0,value:b.quantity||"",type:"text"}]}))}}),f.add({label:"Cancel buy order",id:"cancelBidOrder",exclude:!0,execute:function(a,b){e.get(a);return b=b||{},f.create(angular.extend(b,{title:"Cancel order",message:"Cancel buy order",senderRS:a,requestType:"cancelBidOrder",canHaveRecipient:!1,createArguments:function(a){return{order:a.order}},fields:[{label:"Order",name:"order",type:"text",precision:String(0),onchange:function(b){if(this.value){var c=e.get(a),g=this;c.engine.socket().getBidOrder({order:this.value}).then(function(a){var c=a.error||a.errorDescription;c&&(g.errorMsg=c),d.$evalAsync(function(){f.getField(b,"asset").value=a.asset,f.getField(b,"name").value=a.name,f.getField(b,"price").value=a.priceNQT?e.util.calculateOrderPricePerWholeQNT(a.priceNQT,a.decimals):"",f.getField(b,"quantity").value=a.quantityQNT?e.util.convertToQNTf(a.quantityQNT,a.decimals):""})})}},validate:function(a){return this.errorMsg=null,a||(this.errorMsg=null),!this.errorMsg},value:b.order||"",required:!0},{label:"Asset",name:"asset",type:"text",value:b.asset||"",readonly:!0},{label:"Name",name:"name",readonly:!0,value:b.name||"",type:"text"},{label:"Price",name:"price",readonly:!0,value:b.price||"",type:"text"},{label:"Quantity",name:"quantity",readonly:!0,value:b.quantity||"",type:"text"}]}))}}),f.add({label:"Add private account",id:"addPrivateAssetAccount",exclude:d.TRADE_UI_ONLY,execute:function(a,b){e.get(a);return b=b||{},f.create(angular.extend(b,{title:"Add private account",message:"Add private account",senderRS:a,requestType:"addPrivateAssetAccount",canHaveRecipient:!0,editRecipient:angular.isDefined(b.editRecipient)?b.editRecipient:!0,editAsset:angular.isDefined(b.editAsset)?b.editAsset:!0,initialize:function(b){var c=e.get(a);c.engine.socket().getAccountAssets({account:a,firstIndex:0,lastIndex:40}).then(function(a){console.log(a),d.$evalAsync(function(){var c=a.error||a.errorDescription;c?(console.log(c),b.assets=[]):b.assets=a.filter(function(a){return 1==a.type})})})},onAssetChange:function(b){if(b.asset){var c=e.get(a);c.engine.socket().getAsset({asset:b.asset}).then(function(a){d.$evalAsync(function(){var c=a.error||a.errorDescription;c?(console.log(c),f.getField(b,"name").value=""):f.getField(b,"name").value=a.name})})}},createArguments:function(a){return{recipient:e.util.convertRSAddress(a.recipient),asset:a.asset}},fields:[{label:"Name",name:"name",readonly:!0,value:b.name||"",type:"text"}]}))}}),f.add({label:"Remove private account",id:"removePrivateAssetAccount",exclude:d.TRADE_UI_ONLY,execute:function(a,b){e.get(a);return b=b||{},f.create(angular.extend(b,{title:"Remove private account",message:"Remove private account",senderRS:a,requestType:"removePrivateAssetAccount",canHaveRecipient:!0,editRecipient:angular.isDefined(b.editRecipient)?b.editRecipient:!0,editAsset:angular.isDefined(b.editAsset)?b.editAsset:!0,initialize:function(b){var c=e.get(a);c.engine.socket().getAccountAssets({account:a,firstIndex:0,lastIndex:40}).then(function(a){console.log(a),d.$evalAsync(function(){var c=a.error||a.errorDescription;c?(console.log(c),b.assets=[]):b.assets=a.filter(function(a){return 1==a.type})})})},onAssetChange:function(b){if(b.asset){var c=e.get(a);c.engine.socket().getAsset({asset:b.asset}).then(function(a){d.$evalAsync(function(){var c=a.error||a.errorDescription;c?(console.log(c),f.getField(b,"name").value=""):f.getField(b,"name").value=a.name})})}},createArguments:function(a){return{recipient:e.util.convertRSAddress(a.recipient),asset:a.asset}},fields:[{label:"Name",name:"name",readonly:!0,value:b.name||"",type:"text"}]}))}}),f.add({label:"Asset fee",id:"setPrivateAssetFee",exclude:d.TRADE_UI_ONLY,execute:function(a,b){e.get(a);return b=b||{},f.create(angular.extend(b,{title:"Private asset fee",message:"Set private asset fee",senderRS:a,requestType:"setPrivateAssetFee",canHaveRecipient:!1,editAsset:angular.isDefined(b.editAsset)?b.editAsset:!0,initialize:function(b){var c=e.get(a);c.engine.socket().getAccountAssets({account:a,firstIndex:0,lastIndex:40}).then(function(a){console.log(a),d.$evalAsync(function(){var c=a.error||a.errorDescription;c?(console.log(c),b.assets=[]):b.assets=a.filter(function(a){return 1==a.type})})})},onAssetChange:function(b){if(b.asset){var c=e.get(a);c.engine.socket().getAsset({asset:b.asset}).then(function(a){d.$evalAsync(function(){var c=a.error||a.errorDescription;c?(console.log(c),f.getField(b,"name").value="",f.getField(b,"tradeFee").value="",f.getField(b,"orderFee").value=""):(f.getField(b,"name").value=a.name,f.getField(b,"tradeFee").value=e.util.convertToQNTf(String(a.tradeFeePercentage),6)||"0",f.getField(b,"orderFee").value=e.util.convertToQNTf(String(a.orderFeePercentage),6)||"0")})})}},createArguments:function(a){return{asset:a.asset,tradeFeePercentage:e.util.convertToQNT(a.tradeFee,6)||"0",orderFeePercentage:e.util.convertToQNT(a.orderFee,6)||"0"}},fields:[{label:"Name",name:"name",readonly:!0,value:b.name||"",type:"text"},{label:"Order fee %",name:"orderFee",value:b.orderFee||"0",type:"text"},{label:"Trade fee %",name:"tradeFee",value:b.tradeFee||"0",type:"text"}]}))}})}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d){if(d.MONETARY_SYSTEM){var e=a.get("transaction");e.add({label:"Issue Currency",id:"issueCurrency",exclude:d.TRADE_UI_ONLY,execute:function(a,b){return b=b||{},e.create(angular.extend(b,{title:"Issue currency",message:"Issue a new currency",senderRS:a,requestType:"issueCurrency",canHaveRecipient:!1,createArguments:function(a){return{name:a.name,code:String(a.code).toUpperCase(),description:a.description,type:a.type,initialSupply:a.initialSupply,reserveSupply:a.reserveSupply,maxSupply:a.maxSupply,issuanceHeight:a.issuanceHeight,minReservePerUnitNQT:a.minReservePerUnitNQT,minDifficulty:a.minDifficulty,maxDifficulty:a.maxDifficulty,ruleset:0,algorithm:a.algorithm,decimals:a.decimals}},fields:[{label:"Name",name:"name",type:"text",value:b.name||"",validate:function(a){return this.errorMsg=null,a?e.ALPHABET.test(a)?(e.getByteLen(a)<3||e.getByteLen(a)>10)&&(this.errorMsg="To much characters"):this.errorMsg="Invalid character":this.errorMsg=null,!this.errorMsg},required:!0},{label:"Code",name:"code",type:"text",value:b.code||"",validate:function(a){return this.errorMsg=null,a?e.ALPHABET.test(a)?e.getByteLen(a)>10?this.errorMsg="To much characters":e.getByteLen(a)<3&&(this.errorMsg="Not enaough characters"):this.errorMsg="Invalid character":this.errorMsg=null,!this.errorMsg},required:!0},{label:"Description",name:"description",type:"textarea",value:b.code||"",validate:function(a){return this.errorMsg=null,a?e.getByteLen(a)>1e3&&(this.errorMsg="To much characters"):this.errorMsg=null,!this.errorMsg},required:!0},{label:"Type",name:"type",type:"text",value:b.type||"",required:!0},{label:"Max supply",name:"maxSupply",type:"text",value:b.maxSupply||"",validate:function(a){return this.errorMsg=null,a?e.isNumeric(a)||(this.errorMsg="Must be a number"):this.errorMsg=null,!this.errorMsg},required:!0},{label:"Initial supply",name:"initialSupply",type:"text",value:b.initialSupply||"",validate:function(a){return this.errorMsg=null,a?e.isNumeric(a)||(this.errorMsg="Must be a number"):this.errorMsg=null,!this.errorMsg},required:!0},{label:"Decimals",name:"decimals",type:"text",value:b.decimals||"",validate:function(a){return this.errorMsg=null,a?e.isNumeric(a)||(this.errorMsg="Must be a number"):this.errorMsg=null,!this.errorMsg},required:!0},{label:"Issuance Height",name:"issuanceHeight",type:"text",value:b.issuanceHeight||"",validate:function(a){return this.errorMsg=null,a?e.isNumeric(a)||(this.errorMsg="Must be a number"):this.errorMsg=null,!this.errorMsg},required:!0},{label:"Minimum FIM value per unit to allow the currency to become active",name:"minReservePerUnitNQT",type:"money",value:b.minReservePerUnitNQT||"",required:!1},{label:"Number of units that will be distributed to founders",name:"reserveSupply",type:"text",value:b.reserveSupply||"",validate:function(a){return this.errorMsg=null,a?e.isNumeric(a)||(this.errorMsg="Must be a number"):this.errorMsg=null,!this.errorMsg},required:!1},{label:"Minimum difficult",name:"minDifficulty",type:"text",value:b.minDifficulty||"",validate:function(a){return this.errorMsg=null,a?e.isNumeric(a)||(this.errorMsg="Must be a number"):this.errorMsg=null,!this.errorMsg},required:!1},{label:"Maximum difficulty",name:"maxDifficulty",type:"text",value:b.maxDifficulty||"",validate:function(a){return this.errorMsg=null,a?e.isNumeric(a)||(this.errorMsg="Must be a number"):this.errorMsg=null,!this.errorMsg},required:!1},{label:"Algorithm",name:"algorithm",type:"text",value:b.algorithm||"",required:!1}]}))}})}}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d){var e=a.get("transaction");e.add({label:"Start Forging",id:"startForging",exclude:d.TRADE_UI_ONLY,execute:function(a){return e.create({title:"Start Forging",message:"Starting forging will send your passphrase to the server",requestType:"startForging",senderRS:a,canHaveRecipient:!1,hideMessage:!0,editSender:!0,hideFee:!0,forceLocal:!0,createArguments:function(a){return{secretPhrase:a.secretPhrase}},fields:[]})}}),e.add({label:"Stop Forging",id:"stopForging",exclude:d.TRADE_UI_ONLY,execute:function(a){return e.create({title:"Stop Forging",message:"Stopping forging will send your passphrase to the server",requestType:"stopForging",senderRS:a,canHaveRecipient:!1,hideMessage:!0,editSender:!0,hideFee:!0,forceLocal:!0,createArguments:function(a){return{secretPhrase:a.secretPhrase}},fields:[]})}})}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d,e){var f=a.get("transaction");f.add({label:"Lease Balance",id:"leaseBalance",exclude:d.TRADE_UI_ONLY,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Lease Balance",message:"Lease your balance to another account",senderRS:a,requestType:"leaseBalance",canHaveRecipient:!0,editSender:!0,editRecipient:!0,createArguments:function(a){return{recipient:e.util.convertRSAddress(a.recipient),period:a.period}},fields:[{label:"Period",name:"period",type:"text",value:b.period||"",validate:function(a){return this.errorMsg=null,a?f.isInteger(a,1440,32767)||(this.errorMsg="Must be a number between 1440 and 32767"):this.errorMsg=null,!this.errorMsg},required:!0}]}))}})}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q","$rootScope","nxt",function(a,b,c,d,e){var f=a.get("transaction");f.add({label:"Devious Good",id:"dgsListing",exclude:!0,execute:function(a,b){return b=b||{},f.create(angular.extend(b,{title:"Devious Good",message:"Create a DGS good with no length restricted tags",senderRS:a,requestType:"dgsListing",canHaveRecipient:!1,editSender:!0,createArguments:function(a){return{name:a.name,description:a.description,tags:a.tags,quantity:String(a.quantity),priceNQT:e.util.convertToNQT(a.priceNXT)}},fields:[{label:"Name",name:"name",type:"text",value:b.name||""},{label:"Description",name:"description",type:"textarea",value:b.description||""},{label:"Tags",name:"tags",type:"textarea",value:b.tags||""},{label:"Price",name:"priceNXT",type:"money",value:b.priceNXT||""},{label:"Quantity",name:"quantity",type:"text",value:b.quantity||""}]}))}})}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["modals","plugins","nxt","$q","db","$timeout",function(a,b,c){function d(a,b){angular.extend(this,g),this.attachment={message:function(a){return["Message",a]},encryptedMessage:function(){return["Encrypted Message",JSON.stringify(b)]}}}function e(a,b){angular.extend(this,g),this.asset=function(a){return["Asset",a+'&nbsp;<a href="#" onclick="angular.element(this).scope().goToAsset(\''+a+"','"+b.accountRS+"')\">(open)</a>"]}}function f(){angular.extend(this,g),this.balanceNQT=function(a){return["Balance",c.util.convertToNXT(a)]},this.effectiveBalanceNXT=function(a){return["Effective Balance",c.util.commaFormat(String(a))]},this.unconfirmedBalanceNQT=function(a){return["Unconfirmed Balance",c.util.convertToNXT(a)]
},this.forgedBalanceNQT=function(a){return["Forged Balance",c.util.convertToNXT(a)]},this.garanteedBalanceNQT=function(a){return["Garanteed Balance",c.util.convertToNXT(a)]}}var g={timestamp:function(a){return["Date",c.util.formatTimestamp(a)]},amountNQT:function(a){return["Amount",c.util.convertToNXT(a)]},feeNQT:function(a){return["Fee",c.util.convertToNXT(a)]},senderRS:function(a){return["Sender",'<a href="#/accounts/'+a+'/activity/latest">'+a+"</a>"]},recipientRS:function(a){return["Recipient",'<a href="#/accounts/'+a+'/activity/latest">'+a+"</a>"]},nextLesseeRS:function(a){return["Next Lessee",'<a href="#/accounts/'+a+'/activity/latest">'+a+"</a>"]},currentLesseeRS:function(a){return["Current Lessee",'<a href="#/accounts/'+a+'/activity/latest">'+a+"</a>"]},accountRS:function(a){return["Account",'<a href="#/accounts/'+a+'/activity/latest">'+a+"</a>"]},buyerRS:function(a){return["Buyer",'<a href="#/accounts/'+a+'/activity/latest">'+a+"</a>"]},sellerRS:function(a){return["Seller",'<a href="#/accounts/'+a+'/activity/latest">'+a+"</a>"]}};b.register({id:"inspector",label:"Inspector",inspect:function(b){a.open("inspectObject",{resolve:{items:function(){return b}}})},createTransactionTranslator:function(a,b){return new d(a,b)},createAssetTranslator:function(a,b){return new e(a,b)},createAccountTranslator:function(a,b){return new f(a,b)}}),a.register("inspectObject",{templateUrl:"plugins/inspector/partials/inspect.html",controller:"InspectorPluginInspectModalController"})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("InspectorPluginInspectModalController",["items","$modalInstance","$scope","$sce","$timeout","$location","$rootScope",function(a,b,c,d,e,f,g){function h(b){var c=['<table class="table table-striped table-condensed table-hover"><tbody>'],d=[];return angular.forEach(b,function(a,b){d.push({key:b,value:a})}),m.length>0&&d.sort(function(a,b){return a=m.indexOf(a.key),b=m.indexOf(b.key),a=-1==a?Number.MAX_VALUE:a,b=-1==b?Number.MAX_VALUE:b,b>a?-1:a>b?1:0}),angular.forEach(d,function(b){l(c,0,b.key,b.value,a.translator||{})}),c.push("</tbody></table>"),c.join("")}function i(a,b,c){return a&&a[b]?a[b].call(null,c):[b,c]}function j(a){return"string"==typeof a?a[0].toUpperCase()+a.slice(1):a}function k(a,b,c,d,e){var f=i(e,c,d);a.push("<tr>"),a.push('<td style="padding-left:',b,'px;"><strong>',j(f[0]),"</strong></td>"),a.push("<td>",f[1],"</td>"),a.push("</tr>")}function l(a,b,c,d,e){var f=typeof d;"number"==f||"string"==f||"function"==f||"boolean"==f||null==d||void 0==d?k(a,b,c,d,e):(k(a,b,c,""),angular.forEach(d,function(d,f){l(a,b+10,f,d,e[c]||{})}))}g.$on("$routeChangeStart",function(){e(function(){c.close()},1e3,!1)}),c.items=a;var m=a.order?a.order.split(","):[];c.close=function(){b.close(c.items)},c.goToAccount=function(a){e(function(){f.path("/accounts/"+a)}),c.close()},c.goToAsset=function(a,b){var d=0==b.indexOf("NXT-")?"nxt":"fimk";e(function(){f.path("/assets/"+d+"/"+a)}),c.close()},c.tableHTML=d.getTrustedHtml(h(a.object))}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["modals","plugins","$q",function(a,b,c){var d={senderRS:{type:String},key:{type:String},value:{type:String}};b.register({id:"namespacedAlias","extends":"accounts",label:"FIMK Alias",supported:function(a){return a?0==a.indexOf("FIM-"):!1},create:function(e){if(b.validate(e,d)){var f=c.defer();return a.open("namespacedAliasCreate",{resolve:{items:function(){return angular.copy(e)}},close:function(a){f.resolve(a)},cancel:function(){f.resolve(null)}}),f.promise}}}),a.register("namespacedAliasCreate",{templateUrl:"plugins/namespaced-alias/partials/namespaced-alias-create-modal.html",controller:"NamespacedAliasPluginCreateModalController"})}])}(),function(){"use strict";function a(a){a=String(a);for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);b+=128>d?1:2048>d?2:65536>d?3:1<<21>d?4:1<<26>d?5:1<<31>d?6:Number.NaN}return b}var b=angular.module("fim.base");b.controller("NamespacedAliasPluginCreateModalController",["items","$modalInstance","$scope","nxt","$timeout","db","$q","plugins","modals",function(b,c,d,e,f,g,h,i,j){function k(a){var b=h.defer();return"public"==d.items.encryptionType?b.resolve(d.items.value):l().then(function(c){if("to_recipient"==d.items.encryptionType){var e=converters.hexStringToByteArray(converters.stringToHexString(d.items.recipientPublicKey)),f={account:d.items.recipient,publicKey:e},g=m.crypto.encryptNote(a,f,c);b.resolve(JSON.stringify(g))}else if("to_self"==d.items.encryptionType){var g=m.crypto.encryptNote(a,{publicKey:converters.hexStringToByteArray(m.crypto.secretPhraseToPublicKey(c))},c);b.resolve(JSON.stringify(g))}else b.reject()},b.reject),b.promise}function l(){var a=h.defer();return j.open("secretPhrase",{resolve:{items:function(){return{sender:b.senderRS}}},close:function(b){a.resolve(b.secretPhrase)},cancel:function(){a.reject()}}),a.promise}d.dialogName="Namespaced Alias",d.dialogTitle=d.dialogName,d.setTitle=function(a){f(function(){d.dialogTitle=d.dialogName+(a?" | "+a:"")})};var m=e.get(b.senderRS);d.engine=m.engine,d.alertRSText="",d.alertPublickeyText="",d.errorMessage="",d.items=b,d.items.deadline="1440",d.items.feeNXT=d.engine.feeCost,d.items.symbol=d.engine.symbol,d.items.encryptionType="to_self",d.items.recipientRS="",d.items.recipientPublicKey="",d.close=function(){k(d.items.value).then(function(b){a(b)>1e3&&d.$evalAsync(function(){d.errorMessage="Encrypted data exceeds max length"}),j.open("sendProgress",{resolve:{items:function(){return{api:m,method:"setNamespacedAlias",args:{feeNQT:e.util.convertToNQT(d.items.feeNXT),deadline:d.items.deadline,sender:d.items.senderRS,aliasName:d.items.key,aliasURI:b}}}},close:function(){c.close(d.items)},cancel:function(a){d.$evalAsync(function(){d.items.errorMessage=a})}})})},d.dismiss=function(){c.dismiss()},d.validateCharacters=function(a){return/^[a-zA-Z0-9\!\#\$\%\&\(\)\*\+\-\.\/:;\<=\>\?\@\[\]\_\{\|\}]+$/.test(a)},d.validateKeyLength=function(b){return b&&a(b)<=100},d.validateValueLength=function(b){return b&&a(b)<=1e3},d.selectContact=function(){i.get("contacts").select({engine:m.type}).then(function(a){d.$evalAsync(function(){d.items.recipientRS=a.id_rs,d.recipientChanged()})})},d.recipientChanged=function(){d.alertRSText="";var a=d.items.recipientRS,b=a.split(":");b.length>1&&(d.items.recipientRS=a=b[0],d.items.recipientPublicKey=b[1],d.recipientPublicKeyChanged());var c=m.createAddress();c.set(a)?m.getAccount({account:a},{priority:5}).then(function(a){d.$evalAsync(a.publicKey?function(){d.items.recipient=a.account,d.items.recipientPublicKey=a.publicKey,d.recipientPublicKeyChanged()}:function(){d.alertRSText="Account has no public key"})},function(){d.$evalAsync(function(){d.alertRSText="Account has no public key"})}):d.$evalAsync(function(){d.alertRSText="Address is malformed"})},d.recipientPublicKeyChanged=function(){if(d.items.recipientRS){var a=m.crypto.getAccountIdFromPublicKey(d.items.recipientPublicKey,!0);d.$evalAsync(function(){d.alertPublickeyText=a==d.items.recipientRS?"":"Public key does not match account"})}}}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["modals","plugins","settings",function(a,b,c){var d=b.register({registry:{},id:"themes",label:"Themes","extends":"settings",icon_class:"glyphicon glyphicon-fire",templateURL:"plugins/themes/partials/themes.html",switchTo:function(a){document.getElementById("bootswatch.style").setAttribute("href",this.registry[a].url)},register:function(a,b,c){this.registry[a]={label:b,url:c,id:a}},"default":function(){return this.registry.spacelab}});angular.forEach(["amelia","cerulean","cosmo","custom","cyborg","darkly","flatly","journal","lumen","paper","readable","sandstone","simplex","slate","spacelab","superhero","united","yeti","google"],function(a){var b=a.charAt(0).toUpperCase()+a.slice(1);d.register(a,b,"plugins/themes/css/"+a+".bootstrap.min.css")}),c.initialize([{id:"themes.default.theme",value:"google",type:String,label:"Default theme",resolve:function(a){d.switchTo(a)}}])}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("SettingsThemesController",["$scope","plugins","settings","$timeout",function(a,b,c,d){var e=c.get("themes.default.theme");a.themes=[],a.selectedTheme=null,angular.forEach(b.get("themes").registry,function(b){a.themes.push(b),b.id==e&&(a.selectedTheme=b)}),c.resolve("themes.default.theme",function(b){angular.forEach(a.themes,function(c){c.id==b&&d(function(){a.selectedTheme=c})})}),a.changeTheme=function(a){c.update("themes.default.theme",a.id)}}])}(),function(){"use strict";function a(a){var b=0;for(var c in a){if(!(c in g&&new Object(a[c])instanceof g[c]&&void 0!==a[c]))return console.log("wallet.validateEntry Invalid entry for "+c,a),!1;b++}return b==h}function b(a,b){if(!window.crypto&&!window.msCrypto)throw new Error("FIX ME !! Should use mouse initiated seed!!!");var c=converters.stringToByteArray(a),d=CryptoJS.SHA256(converters.byteArrayToWordArray(c)),e=new Uint8Array(16);window.crypto?window.crypto.getRandomValues(e):window.msCrypto.getRandomValues(e);var f=converters.byteArrayToWordArray(e),g=CryptoJS.AES.encrypt(b,d.toString(CryptoJS.enc.Hex),{iv:f,format:i});return g.toString()}function c(a,b){var c=converters.stringToByteArray(a),d=CryptoJS.SHA256(converters.byteArrayToWordArray(c)),e=CryptoJS.AES.decrypt(b,d.toString(CryptoJS.enc.Hex),{format:i});return e.toString(CryptoJS.enc.Utf8)}function d(a){return a=angular.copy(a),a.padding=new Array(2e4).join("ABCD"),a}function e(a){return delete a.padding,angular.copy(a)}var f=angular.module("fim.base");f.run(["plugins","modals","$q","$timeout","db","nxt","$sce",function(f,g,h,i,j,k,l){function m(a,b){var d=h.defer();return g.open("walletPassword",{resolve:{items:function(){return{password:"",file:a,isPasswordCorrect:function(a){try{return c(a,b),!0}catch(d){return!1}}}}},close:function(a){d.resolve(a.password)},cancel:function(){d.reject()}}),d.promise}function n(){var a=h.defer();return g.open("walletOpen",{resolve:{items:function(){return{}}},close:function(){a.resolve()},cancel:function(){a.reject()}}),a.promise}function o(a,b){var c=h.defer();return g.open("walletSave",{resolve:{items:function(){return{password:b||"",file:a||""}}},close:function(a){c.resolve(a)},cancel:function(){c.reject()}}),c.promise}function p(a){return s&&s[a]?s[a]:t&&t[a]?t[a]:null}var q="",r="",s=null,t=null,u=null;f.register({id:"wallet",label:"Wallet","extends":"settings",icon_class:"glyphicon glyphicon-briefcase",templateURL:"plugins/wallet/partials/wallet-manager.html",getFile:function(){return r},getWallet:function(){return angular.copy(s)},getKeys:function(){return s?Object.keys(s):[]},hasKey:function(a){return s&&s[a]||t&&t[a]},remove:function(a){delete s[a]},getSecretPhrase:function(a){return s&&s[a]?s[a].secretPhrase:t&&t[a]?t[a].secretPhrase:null},promptForWallet:function(){return n()},saveToMemory:function(a,b){t=t||{},t[a]={id_rs:a,secretPhrase:b}},getEntry:function(a){var b=h.defer();return(s||t)&&p(a)?b.resolve(p(a)):s?f.get("alerts").warn({message:"Key not found in wallet. Close dialog to select another wallet."}).then(function(){n().then(function(){f.get("wallet").getEntry(a).then(b.resolve,b.reject)},function(){b.reject()})}):n().then(function(){f.get("wallet").getEntry(a).then(b.resolve,b.reject)},function(){b.reject()}),b.promise},addEntry:function(b){var c=this,d=h.defer();return a(b)?s?(s[b.id_rs]=b,this.save(r.name,q).then(d.resolve,d.reject)):f.get("alerts").confirm({message:"Do you want to store this secretphrase in an existing wallet?"}).then(function(a){a?n().then(function(){f.get("wallet").addEntry(b)},d.reject):(s={},s[b.id_rs]=b,c.save().then(d.resolve,d.reject))}):(console.log("Invalid entry !!",b),d.reject()),d.promise},createOnWalletFileSelectedPromise:function(a){return a&&a.$on("$destroy",function(){u&&(u.reject(),u=null)}),u=h.defer(),u.promise},save:function(a,c){if(null===s)throw new Error("No wallet opened, cannot save.");var e=h.defer();return o(c).then(function(c){try{var f=JSON.stringify(d(s)),g=b(c.password,f),h=new Blob([g],{type:"text/plain;charset=utf-8"});saveAs(h,a||"mofo.wallet")}catch(j){e.reject(j)}i(function(){e.resolve()},1e3)},function(){e.reject()}),e.promise},manager:function(){var a=h.defer();return g.open("walletManager",{resolve:{items:function(){return{}}},close:function(){a.resolve()}}),a.promise},confirmSaveToWallet:function(){var a=h.defer(),b=['<p class="lead">Do you want to save this secret phrase in a wallet?</p>',"<p>A wallet is a file that you download and store on your computer.<br> ","A wallet is <b>not an alternavtive to remembering or writing down your secret phrase</b>.<br><br> ","A wallet is meant as a secure and convenient way of saving your secret phrase in a file, thats all, you still need to back it up somewhere save.<br><br>","To make life easier MofoWallet can not only store keys in a wallet, it can also read them from a wallet you provide.<br><br>","Add this account to your dashboard if you don't want to see this dialog.</p>"];return b=l.getTrustedHtml(b.join("")),f.get("alerts").confirm({html:b}).then(function(b){a.resolve(b)}),a.promise}}),g.register("walletManager",{templateUrl:"plugins/wallet/partials/wallet-manager-modal.html",controller:"WalletManagerModalController"}),g.register("walletPassword",{templateUrl:"plugins/wallet/partials/wallet-password-modal.html",controller:"WalletPasswordModalController"}),g.register("walletOpen",{templateUrl:"plugins/wallet/partials/wallet-open-modal.html",controller:"WalletOpenModalController"}),g.register("walletSave",{templateUrl:"plugins/wallet/partials/wallet-save-modal.html",controller:"WalletSaveModalController"}),window.onWalletFileSelected=function(a){s=null,q=null,r=null;var b=a.target.files[0],d=new FileReader;d.onload=function(a){var d=a.target.result;m(b,d).then(function(a){try{var f=c(a,d);s=e(JSON.parse(f)),q=a,r=b,j.accounts.toArray().then(function(a){var b={};angular.forEach(a,function(a){b[a.id_rs]=a}),j.transaction("rw",j.accounts,function(){angular.forEach(s,function(a){a.id_rs in b||j.accounts.put({id_rs:a.id_rs,name:a.name,engine:k.get(a.id_rs).type})})})}),u&&(u.resolve({password:a,file:b}),u=null)}catch(g){console.log("unlockWallet",g,g.stack),u&&(u.reject(),u=null)}})},d.onerror=function(){u&&(u.reject(),u=null)},d.onabort=function(){u&&(u.reject(),u=null)},d.readAsText(b)}}]);var g={name:String,id_rs:String,secretPhrase:String},h=Object.keys(g).length,i={stringify:function(a){var b={ct:a.ciphertext.toString(CryptoJS.enc.Base64)};return a.iv&&(b.iv=a.iv.toString()),a.salt&&(b.s=a.salt.toString()),JSON.stringify(b,void 0,2)},parse:function(a){var b=JSON.parse(a),c=CryptoJS.lib.CipherParams.create({ciphertext:CryptoJS.enc.Base64.parse(b.ct)});return b.iv&&(c.iv=CryptoJS.enc.Hex.parse(b.iv)),b.s&&(c.salt=CryptoJS.enc.Hex.parse(b.s)),c}}}(),function(){"use strict";var a=angular.module("fim.base");a.controller("SettingsPluginWalletController",["$scope","$timeout","plugins","db","nxt","$sce","timeagoService",function(a,b,c,d,e,f,g){function h(){a.entries=[],a.wallet=k.getWallet(),a.file=k.getFile(),a.label=j(a.file),a.fileName=a.file&&a.file.name||"",angular.forEach(k.getKeys(),function(b){var c=a.wallet[b];a.entries.push({name:c.name,id_rs:c.id_rs})})}function i(a){if(0==a)return"0 Byte";var b=1e3,c=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],d=Math.floor(Math.log(a)/Math.log(b));return(a/Math.pow(b,d)).toPrecision(3)+" "+c[d]}function j(a){return a?"File: "+a.name+" | "+i(a.size)+" | last modified: "+g.format(a.lastModifiedDate):""}var k=c.get("wallet");a.fileName="",h(),c.get("wallet").createOnWalletFileSelectedPromise(a).then(function(){b(function(){h()})},function(){}),a.backupWallet=function(){k.save(a.fileName)},a.showSecretPhrase=function(b){var d=a.wallet[b];d&&c.get("alerts").info({title:"Secretphrase for "+d.id_rs,message:d.secretPhrase})},a.removeSecretPhrase=function(b){var e=a.wallet[b];e&&c.get("alerts").confirm({html:f.getTrustedHtml("<p>Please confirm that you want to remove this account from your wallet.<br>You must save/backup your wallet for the removal to take effect.</p>")}).then(function(e){e&&a.$evalAsync(function(){k.remove(b),c.get("alerts").confirm({html:f.getTrustedHtml("<p>Do you want to remove this account from mofo's database too?<br>If you choose not to remove the account from the database you can remove it later from within the accounts section.</p>")}).then(function(a){a?d.accounts.delete(b).then(function(){h()}):h()})})})}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("WalletOpenModalController",["items","$modalInstance","$scope","$timeout","plugins",function(a,b,c,d,e){c.items=a,c.items.invalidPassword=!1,e.get("wallet").createOnWalletFileSelectedPromise(c).then(function(){b.close()},function(){}),c.dismiss=function(){b.dismiss()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("WalletPasswordModalController",["items","$modalInstance","$scope","$timeout","timeagoService",function(a,b,c,d,e){function f(a){if(0==a)return"0 Byte";var b=1e3,c=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],d=Math.floor(Math.log(a)/Math.log(b));return(a/Math.pow(b,d)).toPrecision(3)+" "+c[d]}c.items=a,c.items.wrongPassword=!1,c.close=function(){c.items.isPasswordCorrect(c.items.password)?b.close(c.items):d(function(){c.items.wrongPassword=!0})},c.dismiss=function(){b.dismiss()},c.formatFile=function(a){return"File: "+a.name+" | "+f(a.size)+" | last modified: "+e.format(a.lastModifiedDate)}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("WalletSaveModalController",["items","$modalInstance","$scope","$timeout",function(a,b,c){c.items=a,c.close=function(){b.close(c.items)},c.dismiss=function(){b.dismiss()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/contacts",{templateUrl:"plugins/contacts/partials/contacts.html",controller:"ContactsPlugin"})}]),a.run(["modals","plugins","$q",function(a,b,c){b.register({id:"contacts",label:"Contacts","extends":"settings",icon_class:"glyphicon glyphicon-user",templateURL:"plugins/contacts/partials/contacts.html",select:function(b){var d=c.defer();return a.open("contactsSelect",{resolve:{items:function(){return b}},close:function(a){d.resolve(a)}}),d.promise},add:function(d){if(b.validate(d,{update:{type:Boolean},message:{type:String},id_rs:{type:String},name:{type:String},email:{type:String},website:{type:String}})){var e=c.defer();return a.open("contactsAdd",{resolve:{items:function(){return d}},close:function(){e.resolve(!0)},cancel:function(){e.resolve(!1)}}),e.promise}},update:function(a){return a.update=!0,this.add(a)}}),a.register("contactsAdd",{templateUrl:"plugins/contacts/partials/contacts-add-modal.html",controller:"ContactsPluginAddModalController"}),a.register("contactsDetail",{templateUrl:"plugins/contacts/partials/contacts-detail-modal.html",controller:"ContactsPluginDetailModalController"}),a.register("contactsEdit",{templateUrl:"plugins/contacts/partials/contacts-edit-modal.html",controller:"ContactsPluginEditModalController"}),a.register("contactsSelect",{templateUrl:"plugins/contacts/partials/contacts-select-modal.html",controller:"ContactsPluginSelectModalController"})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("ContactsPlugin",["$scope","plugins","ngTableParams","db","$timeout",function(a,b,c,d,e){a.addContact=function(){b.get("contacts").add({message:"Please enter the details for this contact",id_rs:""}).then(function(a){a&&b.get("alerts").success({message:"Successfully added contact"})}).catch(function(){b.get("alerts").error({message:"Could not safe contact"})})},a.contacts=[],a.tableParams=new c({page:1,count:20},{total:0,getData:function(b,c){b.resolve(a.contacts.slice((c.page()-1)*c.count(),c.page()*c.count()))}}),d.contacts.orderBy("name").toArray().then(function(b){a.contacts=b,d.accounts.orderBy("name").toArray().then(function(b){a.contacts=b.concat(a.contacts),e(function(){a.tableParams.total(a.contacts),a.tableParams.reload()})})}).catch(function(){b.get("alerts").error({message:"Could not load contacts"})}),d.contacts.addObserver(a,d.createObserver(a,"contacts","id_rs",{"finally":function(){a.tableParams.total(a.contacts),a.tableParams.reload()}})),a.editContact=function(a){var c={message:"Please enter the details for this contact"};c.id_rs=a.id_rs,c.name=a.name,c.email=a.email||"",c.website=a.website||"",b.get("contacts").update(c).then(function(){b.get("alerts").success({message:"Successfully updated contact"})}).catch(function(){b.get("alerts").error({message:"Could not update contact"})})},a.removeContact=function(a){window.confirm("Are you sure you want to delete this contact?")&&d.contacts.delete(a.id_rs).catch(function(){b.get("alerts").error({message:"Could not delete contact"})})},a.sendMoney=function(){}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("ContactsPluginSelectModalController",["items","$modalInstance","$scope","$timeout","db","ngTableParams","plugins","nxt","$q",function(a,b,c,d,e,f,g,h,i){function j(a,b){if(c.items.get_all)return a;var d=b==h.TYPE_FIM?"FIM-":"NXT-";return a.filter(function(a){return 0==a.id_rs.indexOf(d)})}function k(){d(function(){c.tableParams=new f({page:1,count:10},{total:c.contacts.length,getData:function(a,b){a.resolve(c.contacts.slice((b.page()-1)*b.count(),b.page()*b.count()))}})})}if(c.items=a,c.items.get_all=a.get_all||!1,c.contacts=a.contacts||[],c.include=a.include||["contacts","accounts"],0==c.contacts.length){var l=[];-1!=c.include.indexOf("contacts")&&l.push(e.contacts.orderBy("name").toArray().then(function(a){c.items.engine&&(a=j(a,c.items.engine)),c.contacts=c.contacts.concat(a)})),-1!=c.include.indexOf("accounts")&&l.push(e.accounts.orderBy("name").toArray().then(function(a){c.items.engine&&(a=j(a,c.items.engine)),c.contacts=c.contacts.concat(a)})),i.all(l).then(function(){k()}),e.contacts.addObserver(c,e.createObserver(c,"contacts","id_rs",{"finally":function(){k()}}))}c.selectContact=function(a){b.close(a)},c.dismiss=function(){b.dismiss()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("ContactsPluginAddModalController",["items","$modalInstance","$scope","db","$timeout","nxt",function(a,b,c,d,e,f){function g(a,b,c){for(var d=0;d<a.length;d++)if(a[d][b]==c)return!1;return!0}function h(a){e(function(){c.errorMessage=a})}c.items=a,c.items.name=c.items.name||"",c.items.id_rs=c.items.id_rs||"",c.items.email=c.items.email||"",c.items.website=c.items.website||"",c.items.update=c.items.update||!1,c.valid=!1,c.errorMessage=null,c.id_rs_readonly=c.items.id_rs||c.items.update,c.name_readonly=c.items.update;var i=[];d.contacts.toArray().then(function(a){i=a,c.items.id_rs&&c.items.update&&!c.items.name&&e(function(){for(var a=0;a<i.length;a++)if(i[a].id_rs==c.items.id_rs){c.items.name=i[a].name;break}})}),c.nameIsUnique=function(a){return g(i,"name",a)},c.idIsUnique=function(a){return g(i,"id_rs",a)},c.idIsValid=function(a){if(a&&a.trim().length>0){var b=f.get(a);if(b){var c=b.createAddress();return!!c.set(a)}return!1}return!0},c.nameChanged=function(){if(0==c.items.name.trim().length)h(null);else{var a=c.items.name;d.contacts.where("name").equals(a).count().then(function(a){h(a>0?"Duplicate name":null)})}},c.close=function(){c.items.update?d.contacts.put(c.items).then(function(){b.close(c.items)}):d.contacts.add(c.items).then(function(){b.close(c.items)})},c.dismiss=function(){b.dismiss()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins",function(a){a.register({id:"database","extends":"settings",label:"Database",icon_class:"glyphicon glyphicon-wrench",templateURL:"plugins/settings-db/partials/settings-db.html"})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("SettingsPluginDBController",["$scope","db","$compile","ngTableParams","$timeout","plugins",function(a,b,c,d,e,f){function g(a){var b=[];return b.push('<div id="settings-db-table-container">'),b.push('<table ng-table="tableParams" class="table table-striped table-condensed table-hover">'),b.push('<tr ng-repeat="t in $data">'),b.push('<td><a href ng-click="deleteRow(t)">del</a></td>'),angular.forEach(a.instanceTemplate,function(a,c){b.push("<td "),("id_rs"==c||"recipientRS"==c||"senderRS"==c)&&b.push('style="white-space:nowrap" '),b.push("data-title=\"'",c,'\'" sortable="',c,'" header-class="text-left">{{t.',c," | json}}</td>")}),b.push("</tr>"),b.push("</table>"),b.push("</div>"),b.join("")}a.tables=b.tables,a.selectedTable=a.tables[0],a.clearSelectedTable=function(){window.confirm("All records will be deleted, this could have side effects.\nAre you sure you want to clear this table?")&&a.selectedTable.clear()},a.deleteRow=function(b){f.get("alerts").confirm({title:"Delete row",message:"Are you sure you want to delete this row?"}).then(function(c){c&&a.selectedTable.delete(b[a.selectedTable.schema.primKey.name])})},a.deleteDatabase=function(){f.get("alerts").confirm({title:"Delete Database",message:"WARNING!! This deletes your entire database. Are you sure?"}).then(function(a){a&&window.indexedDB.deleteDatabase("fimkrypto-db2")})};var h=null,i={"finally":function(){a.tableParams&&a.tableParams.reload()}};a.selectedTableChanged=function(){var f=a.selectedTable.name,j=a.selectedTable.schema;h&&(b[h].removeObserver(i),h=null),b[f].count().then(function(h){b[f].addObserver(a,i),e(function(){a.tableParams=new d({page:1,count:10},{total:h,getData:function(a,c){var d=(c.page()-1)*c.count(),e=c.page()*c.count();b[f].offset(d).limit(e).toArray().then(function(b){a.resolve(b)})}});var e=c(g(j))(a);angular.element(document.getElementById("settings-db-table-container")).replaceWith(e)})})},a.selectedTableChanged()}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/settings/:id",{templateUrl:"plugins/settings/partials/settings.html",controller:"SettingsPlugin"})}]),a.run(["plugins",function(a){a.register({id:"settings"})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("SettingsPlugin",["$scope","plugins","$routeParams",function(a,b,c){a.plugins=[];var d={};b.install("settings",function(b){a.plugins.push(b),d[b.id]=b}),a.selectedPlugin=d[c.id]}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins","modals","$q",function(a,b,c){function d(a){var d=c.defer();return b.open("alert",{resolve:{items:function(){return a}},close:function(){d.resolve()}}),d.promise}a.register({id:"alerts",info:function(a){return a.title=a.title||"Info",d(angular.extend(a,{level:"primary"}))},success:function(a){return a.title=a.title||"Success",d(angular.extend(a,{level:"success"}))},warn:function(a){return a.title=a.title||"Warning",d(angular.extend(a,{level:"warning"}))},error:function(a){return a.title=a.title||"Error",d(angular.extend(a,{level:"danger"}))},confirm:function(a){a.title=a.title||"Confirm",a.level=a.level||"primary";var d=c.defer();return b.open("alertConfirm",{resolve:{items:function(){return a}},close:function(a){d.resolve(a)}}),d.promise},prompt:function(a){a.title=a.title||"Prompt",a.level=a.level||"primary";var d=c.defer();return b.open("alertPrompt",{resolve:{items:function(){return a}},close:function(a){d.resolve(a)}}),d.promise},wait:function(a){var d=c.defer();return a.title=a.title||"Please wait",a.level=a.level||"primary",a.deferred=d,b.open("alertWait",{resolve:{items:function(){return a}},close:function(a){d.resolve(a)}}),d},progress:function(a){var d=c.defer();return a.title=a.title||"Please wait",a.level=a.level||"primary",b.open("alertProgress",{resolve:{items:function(){return a}},opened:function(){d.resolve(a.progress)}}),d.promise}}),b.register("alert",{templateUrl:"plugins/alerts/partials/alert-modal.html",controller:"AlertModalController"}),b.register("alertPrompt",{templateUrl:"plugins/alerts/partials/alert-prompt-modal.html",controller:"AlertPromptModalController"}),b.register("alertConfirm",{templateUrl:"plugins/alerts/partials/alert-confirm-modal.html",controller:"AlertConfirmModalController"}),b.register("alertWait",{templateUrl:"plugins/alerts/partials/alert-wait-modal.html",controller:"AlertWaitModalController"}),b.register("alertProgress",{templateUrl:"plugins/alerts/partials/alert-progress-modal.html",controller:"AlertProgressModalController"})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("AlertModalController",["items","$modalInstance","$scope",function(a,b,c){c.items=a,c.close=function(){b.close()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("AlertConfirmModalController",["items","$modalInstance","$scope",function(a,b,c){c.items=a,c.close=function(a){b.close(a)}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("AlertProgressModalController",["items","$modalInstance","$scope",function(a,b,c){c.items=a,c.close=function(){b.close(c.items.value)},c.dismiss=function(){b.dismiss()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("AlertWaitModalController",["items","$modalInstance","$scope",function(a,b,c){c.items=a,c.items.title=a.title||"Please wait",c.items.message=a.message||"Please wait",c.items.busy="busy"in a?a.busy:!0,c.items.btnLabel=a.btnLabel||"Cancel";var d=a.deferred;d.promise.then(function(){b.close()}),c.dismiss=function(){d.reject(),b.dismiss()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("AlertProgressModalController",["items","$modalInstance","$scope","$timeout","$q",function(a,b,c,d,e){c.items=a,c.items.title=a.title||"Please wait",c.items.message=a.message||"Please wait",c.items.progressValue=0,c.items.closeDisabled=!0,c.items.hasError=!1,a.progress={close:function(){var a=e.defer();return b.result.then(function(){a.resolve()}),b.close(),this.onclose&&this.onclose(),a.promise},setMessage:function(a){c.$evalAsync(function(){c.items.message=a})},setErrorMessage:function(a){c.$evalAsync(function(){c.items.message=a,c.items.hasError=!0})},animateProgress:function(){function a(){c.items.progressValue<100?(c.items.progressValue+=10,d(a,20)):d(b.resolve,20)}var b=e.defer();return d(a,10),b.promise},enableCloseBtn:function(){c.$evalAsync(function(){c.items.closeDisabled=!1})}},c.dismiss=function(){a.progress.close()}}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins",function(a){a.register({id:"fim-engine","extends":"system",templateURL:"plugins/fim-engine/partials/status.html"})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("FimEngineStatusPlugin",["$scope","nxt","BlockchainDownloadProvider",function(a,b,c){isNodeJS&&(a.provider=new c(b.fim(),a),a.provider.load())}])}(),function(){"use strict";var a=angular.module("fim.base");a.run(["plugins",function(a){a.register({id:"nxt-engine","extends":"system",templateURL:"plugins/nxt-engine/partials/status.html"})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("NxtEngineStatusPlugin",["$scope","nxt","BlockchainDownloadProvider",function(a,b,c){isNodeJS&&(a.provider=new c(b.nxt(),a),a.provider.load())}])}(),function(){"use strict";var a=angular.module("fim.base");a.config(["$routeProvider",function(a){a.when("/authenticate/:challenger_id_rs/:identifier_id_rs/:challenger_name/{challenger_url:.*}",{templateUrl:"plugins/authenticate/partials/authenticate.html",controller:"AuthenticatePlugin"})}]),a.run(["modals",function(a){a.register("authSendProgress",{templateUrl:"plugins/authenticate/partials/progress.html",controller:"AuthenticatePluginSendModal"})}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("AuthenticatePlugin",["$scope","$routeParams","modals","$q","nxt","plugins","requests",function(a,b,c,d,e,f,g){function h(){var b=d.defer();return c.open("secretPhrase",{resolve:{items:function(){return{sender:a.identifier_id_rs}}},close:function(a){b.resolve(a.secretPhrase)
},cancel:function(){b.reject()}}),b.promise}function i(a){return e.fim().crypto.getAccountId(a,!0)}function j(a){var b=a.match(/{data:(.*),nonce:(.*)}/);return{data:b[1],nonce:b[2]}}function k(a,b){var c=e.fim(),d=j(b),f=converters.hexStringToByteArray(c.crypto.getPrivateKey(a)),g=converters.hexStringToByteArray(t),h=converters.hexStringToByteArray(d.data),i=converters.hexStringToByteArray(d.nonce);return c.crypto.decryptData(h,{privateKey:f,publicKey:g,nonce:i})}function l(b,c){var e=d.defer();return q().then(function(){api.getNamespacedAlias({account:s,aliasName:"AUTHENTICATED:"+c}).then(function(c){a.$evalAsync(function(){a.encryptedJSON=c.aliasURI}),e.resolve(k(b,c.aliasURI))})},e.reject),e.promise}function m(){var b=document.createElement("a");if(b.href=a.challenger_url,!b.href)throw new Error("Could not parse URL");return b.protocol+"//"+b.hostname}function n(b){var c=d.defer(),f=e.fim(),g=f.createAddress();return g.set(a.identifier_id_rs)?(f.crypto.getAccountPublicKey(a.challenger_id_rs).then(function(d){a.$evalAsync(function(){a.challenger_publicKey=d});var e=m(),h={account:g.account_id(),publicKey:d},i=f.crypto.encryptNote(e,h,b),j=JSON.stringify({message:i.message,nonce:i.nonce});c.resolve(j)}).catch(c.reject),c.promise):void c.reject("Invalid identifier address")}function o(a){var b=d.defer();return c.open("authSendProgress",{resolve:{items:function(){return{http_args:a}}},close:function(){}}),b.promise}function p(a,b){var c="";for(var d in b)c+="&"+d+"="+encodeURIComponent(b[d]);return{method:"POST",url:a,data:c,headers:{"Content-Type":"application/x-www-form-urlencoded"}}}function q(){var a=d.defer();return api.getAlias({aliasName:r},{priority:5,podium:g.mainStage}).then(function(b){var c=(b.aliasURI||"").toUpperCase();api.getAccountPublicKey({account:c},{priority:5,podium:g.mainStage}).then(function(b){s=c,t=b.publicKey,a.resolve()},a.reject)},a.reject),a.promise}var r="FIMKAUTHACCOUNT",s=null,t=null;a.challenger_id_rs=b.challenger_id_rs,a.identifier_id_rs=b.identifier_id_rs,a.challenger_name=decodeURIComponent(b.challenger_name),a.challenger_url=decodeURIComponent(b.challenger_url),a.challenge_text=m();var u=null;a.confirmed=!1,a.login=function(){h().then(function(b){u=b;i(u);l(u,a.identifier_id_rs).then(function(b){a.$evalAsync(function(){a.decryptedJSON=b}),f.get("alerts").confirm({title:"Confirm this is your account",message:b}).then(function(b){b&&(a.$evalAsync(function(){a.confirmed=!0}),n(u).then(function(b){a.$evalAsync(function(){a.challenge_response=b})}).catch(function(a){console.log("Failed",a)}))})})})},a.send=function(){f.get("alerts").confirm({title:"Are you sure",message:"Are you sure you want to send this data?"}).then(function(b){if(b){var c=p(a.challenger_url,{challenge:a.challenge_response,decrypted:a.decryptedJSON});a.$evalAsync(function(){a.http_args=c}),o(c).then(function(b){console.log(a.challenger_url,b)})}})}}])}(),function(){"use strict";var a=angular.module("fim.base");a.controller("AuthenticatePluginSendModal",["items","$modalInstance","$scope","$q","$http","$timeout",function(a,b,c,d,e,f){function g(a){c.$evalAsync(function(){c.message=a})}c.items=a,c.message="Sending data";var h=d.defer();c.close=function(a){h.resolve(),b.close(a)},e(angular.extend(a.http_args,{timeout:h.promise})).success(function(){g("Send Successfully"),f(function(){b.close(!0)},2e3)}).error(function(){g("Send Failed"),f(function(){b.close(!1)},2e3)})}])}();